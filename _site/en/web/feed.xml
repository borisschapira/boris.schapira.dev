<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Web RSS · Boris Schapira</title>
    <link>https://boris.schapira.local:10443/en/web/feed.xml</link>
    <description> I am a Web professionnal that tries to understand what people need to make the web a better place.</description>
    <language>en</language>
    <lastBuildDate>Wed, 02 Oct 2019 22:43:12 +0200</lastBuildDate>
    
    <item>
      <title>First test of the layout</title>
      
      <description>
          &lt;blockquote&gt;
&lt;p&gt;This is a test post for typographic matters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!-- more --&gt;
&lt;h1&gt;Test&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;“foo” ‘bar’&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;more tests&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;3rd at the 4 % run&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;Oh, some encoded &quot;code&quot; but not double encoded: &lt;span class=&quot;ni&quot;&gt;&amp;amp;amp;&lt;/span&gt;!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I arrived in 2’33’’ vs. 2’44’’ for my competitors !&lt;/p&gt;
&lt;h2&gt;Has he arrived 3rd, or 1st ? He’s 1st. No: 3rd.&lt;/h2&gt;
&lt;p&gt;I’m “very happy” that you &lt;a href=&quot;https://www.google.fr&quot;&gt;invited&lt;/a&gt; yourself!&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;amp;lt;a href=&quot;&quot;&amp;amp;gt;
&amp;lt;a href=&quot;&quot;&amp;gt;
pre
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;His living room measure 4x5m, which is quite small.&lt;/p&gt;
&lt;p&gt;Some JS code:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;monObjet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// On entrera que si monObjet n'est pas considéré comme faux&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// donc différent de false, &quot;&quot;, undefined, null ou NaN&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// équivaut à&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;monObjet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// portion de code&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// équivaut à&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;monObjet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// portion de code&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Some CSS:&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.container&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#fff&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;url('background.png')&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;repeat-y&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50%&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am fond of &lt;strong&gt;typography&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I am fond of &lt;strong&gt;typography&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Espace fine insécable&lt;/h2&gt;
&lt;p&gt;Case glutonny : &lt;strong&gt;“Citation forte !”&lt;/strong&gt; vs “Citation forte !”.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aa aaaaaa a&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;&lt;code&gt;toto&lt;/code&gt; &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Tue, 01 Jan 2030 00:00:00 +0100</pubDate>
      <link>https://boris.schapira.local:10443/2030/01/typo-test/</link>
      <guid isPermaLink="true">https://boris.schapira.local:10443/2030/01/typo-test/</guid>
      
      <category>Typographie</category>
      
      <category>Test of layout</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Performance timing: wait for the next frame</title>
      
      <description>
          &lt;p&gt;The usual web performance metrics (First Byte, Speed Index…) are very interesting but I often need to add custom temporal markers, based on events that make sense from a business point of view.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;I use the User Timing API (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API&quot;&gt;see on &lt;abbr title=&quot;Mozilla Developer Network&quot;&gt;MDN&lt;/abbr&gt;&lt;/a&gt;) to create named timestamps that belong to the browser’s performance timeline. As I can retrieve this timeline in Dareboost, I can &lt;a href=&quot;https://blog.dareboost.com/en/2018/05/custom-timings-monitoring/&quot;&gt;track their evolution over time&lt;/a&gt;.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/assets/images/2019-09-30/custom-timings-dareboost.png&quot; loading=&quot;lazy&quot; alt=&quot;Two curves in a graph. On the x-axis, a date range of one month. On the Y-axis, the time between 0 and 3s. The orange curve shows timing &amp;quot;mark_declare_js_end&amp;quot; while the green curve corresponds to timing &amp;quot;mark_switchlang_end&amp;quot;.&quot;&gt;&lt;figcaption&gt;&lt;p&gt;Some Custom Timings of this site&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Using the API in JavaScript is quite simple (and &lt;a href=&quot;https://caniuse.com/#feat=user-timing&quot;&gt;broadly supported&lt;/a&gt;), for example:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can then retrieve the value in your browser developers tools, using:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;console.dir(performance.getEntriesByType('mark'));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, I recently&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; realized that I often forgot something important: &lt;strong&gt;just because the browser execute some JavaScript code does not mean that the user can see the results of this execution&lt;/strong&gt;. The browser must update the display, and its ability to do so depends on the JavaScript code that follows the piece of code we’re interested in.&lt;/p&gt;
&lt;p&gt;In the following example, I inject a whole second between my performance mark and the browser update of the display.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// A snippet of code that consumes resources during 1 second&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Of course, in real life, you won’t have a simple loop. You will have some other time-consuming tasks. You won’t even know what, because it could be in a library on which your code depends, and you have no idea.&lt;/p&gt;
&lt;p&gt;As we’re not going to analyze all the code that follows the stuff we’re interested in to know when to put the timestamp, we need a workaround.&lt;/p&gt;
&lt;p&gt;We can use &lt;code&gt;requestAnimationFrame()&lt;/code&gt; to ask for our mark to be put set before the browser performs the next repaint:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp, before the next repaint&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-frame&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// A snippet of code that consumes resources during 1 second&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// but we don't care anymore&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;If you want to see this for yourself, here’s &lt;a href=&quot;https://tests.boris.schapira.dev/perfmark-animationframe/&quot;&gt;a test page&lt;/a&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;In a nutshell&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Call the User Timings API to create custom business-related timestamps.&lt;/li&gt;
&lt;li&gt;Encapsulate them  inside &lt;code&gt;requestAnimationFrame()&lt;/code&gt; callbacks to get to understand how the IU behaves, rather than the code execution. If you want to understand the code, attach two marks: you will have an idea of the display latency.&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Reading “&lt;a href=&quot;https://blog.superhuman.com/performance-metrics-for-blazingly-fast-web-apps-ec12efa26bcb&quot;&gt;Performance metrics for blazingly fast web apps&lt;/a&gt;”, by Conrad Irwin &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 30 Sep 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.local:10443/2019/09/user-timing-api-next-frame/</link>
      <guid isPermaLink="true">https://boris.schapira.local:10443/2019/09/user-timing-api-next-frame/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>UX</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Measuring Interactivity with TTI</title>
      
      <description>
          &lt;p&gt;When we talk about web performance measurement, what we’re actually trying to
determine is the moment when a user can effectively achieve his or her goal.
Meaning the users can consult the content they are looking for and/or interact
with the page in a satisfactory way. Some metrics endorse rendering actions by
the browser, others measure the progress of the display through the recording of
a video. However, a great mystery remains: how to properly measure
interactivity.&lt;/p&gt;
&lt;p&gt;For a few years now, Google has been pushing an ambiguous metric: &lt;strong&gt;Time To
Interactive&lt;/strong&gt;. What does it mean? Let’s define it and explain how and when to
use it (or not).&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/&quot;&gt;Measuring Interactivity with TTI&lt;/a&gt;.
&lt;/div&gt;
  &lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/carnival.jpg&quot; loading=&quot;lazy&quot; alt=&quot; Photo of a carousel in action. The rotational movement
creates a fuzzy effect: it is impossible to know with certainty the speed of the
merry-go-round. &quot;&gt;&lt;figcaption&gt;&lt;p&gt;Measuring
interactivity is like getting on a moving ride. When can we consider that the
carousel is slow enough to consider that we can jump on it? There’s no precise
answer.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;The measurement of interactiveness is a &lt;a href=&quot;#why&quot;&gt;pregnant challenge&lt;/a&gt; for Web
Performance experts. Synthetic monitoring solution vendors, especially, find it
difficult to provide a computable metric in the absence of user input.&lt;/p&gt;
&lt;p&gt;Google’s Time To Interactive is a sophisticated measure designed to determine
the ideal conditions for interactivity by monitoring both the JS main thread
activity and the network. It’s quite effective at determining
&lt;a href=&quot;#how-to-use-the-tti&quot;&gt;a time when you are sure that an interaction will be seamless&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;However, TTI is also a complex metric to understand and to exploit that
&lt;a href=&quot;#disambiguation&quot;&gt;does not measure what most people think it measures&lt;/a&gt;, which is
the time it takes for a page to become interactive.&lt;/p&gt;
&lt;p&gt;Real User Monitoring (RUM) remains the only way to capture user’s actions and
even there, &lt;a href=&quot;#alternatives&quot;&gt;we still don’t have a single KPI&lt;/a&gt; which simply
depicts the relationship between users behavior and the interactivity of the
page over time.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;&lt;span id=&quot;why&quot;&gt;The quest for a new metric&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;What are we trying to measure?&lt;/h3&gt;
&lt;p&gt;Accessing a web page is an experience that the web performance world generally
describes as 4 moments:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The user has confirmation that loading has started.&lt;/li&gt;
&lt;li&gt;The user has enough information in front of them to think that they can
interact with the page.&lt;/li&gt;
&lt;li&gt;The user can interact with the page (this particular moment being dependant
of the type of the interaction).&lt;/li&gt;
&lt;li&gt;The user’s interaction with the page is effortless and intuitive, with no
delays and jank.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Several signals give the user indications that the loading has started: the url
and title change, the browser may animate the tab and / or the
favicon, the first non-blank pixels appear, then the rest of the page…&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.dareboost.com/en/2018/02/speed-index-web-performance/&quot;&gt;Speed Index&lt;/a&gt;
and
&lt;a href=&quot;https://www.w3.org/TR/paint-timing/#first-contentful-paint&quot;&gt;First Contentful Paint&lt;/a&gt;
give a good idea of the visual perception of visitors. They help to understand
the perceived load of the page. They have limitations that can be identified at
a glance by a human being through video or filmstrip because their algorithm is
directly related to what is displayed.&lt;/p&gt;
&lt;p&gt;However, when talking about measuring interactivity – points 3 and 4 – things
get harder. Truth is, we don’t actually know how to measure it. The only thing
we know how to do well is to collect information that allows us to deduce these
particular moments.&lt;/p&gt;
&lt;p&gt;For example, Akamai has been looking for new ways to measure user activity for
years. They rely on the Boomerang library, created by Philip Tellis.
&lt;a href=&quot;https://www.welovespeed.com/en/2018/line-up/#ux-and-performance-metrics-that-matters&quot;&gt;Philip came to We Love Speed 2018&lt;/a&gt;
to expose the new user experience metrics that the Boomerang team has been
collecting to measure page responsiveness: Rage Clicks, Missed Clicks, Dead
Clicks, and Cursor Trashing. By analyzing the distribution of this data
qualifying user frustration, we can infer approximately when the user expects
the page, or a particular component, to be interactive.&lt;/p&gt;
  &lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/rage.png&quot; loading=&quot;lazy&quot; alt=&quot; Rage Clicks by First Interaction and Visually Ready :
there&amp;#39;s a clear linear correlation ; the slope varies between 1.2 and 1.5.
&quot;&gt;&lt;figcaption&gt;&lt;p&gt;There’s a clear linear correlation
between rage clicks and 1.2 to 1.5× the time to Visually Ready (when the page
would look to the user like they could interact with it –
&lt;a href=&quot;https://akamai.github.io/boomerang/BOOMR.plugins.Continuity.html#toc9__anchor&quot;&gt;see the full definition on Boomerang documentation&lt;/a&gt;).&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;This type of correlation requires large amounts of data collected from real
users, either through JavaScript libraries like Boomerang, or in-browser RUM
like the Chrome UX Report. This data can only be collected on production
environments with large amounts of visitors.&lt;/p&gt;
&lt;p&gt;Testing optimizations in this environment is risky. Without prior testing,
deploying in production can introduce regressions/slowdowns and hurt your
business. Moreover, you’ll have to wait to collect large enough volume of data,
and it will be difficult to evaluate, because RUM data is not so easy to
analyze.&lt;/p&gt;
&lt;p&gt;Synthetic Monitoring solutions can perform accurate performance measurements on
all environments, while controlling test contexts. They would be even more
useful if they could provide an interactivity metric.&lt;/p&gt;
&lt;p&gt;But since they do not involve real users, they are forced to engage in
shenanigans…&lt;/p&gt;
&lt;h3&gt;Let’s introduce… Time To (Consistently) Interactive&lt;/h3&gt;
&lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;&lt;br /&gt;
Although there are several definitions, we will focus on the definition put
forward by Google through their tools and websites.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interactivity can be considered in two ways: either as a switch between two
states (non-interactive and interactive) or as a continuum. Knowing when a page
becomes interactive for the first time is interesting but if the interface does
not respond quickly, the UX will be very degraded. By “interactivity”, we refer
here both to the fact that the page is interactive and to the fact that
interactions can take place in a satisfactory way.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Time To Interactive&lt;/strong&gt;, previously known as “Time To Consistently Interactive”,
is an experimental synthetic metric that attempts to measure when your web
application is both visually rendered and interactive.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/danse.jpg&quot; loading=&quot;lazy&quot; alt=&quot; Superposition of several photos of a dancer in movement.
Each movement is captured and yet it is impossible to grasp the continuum on a
static image. &quot;&gt;&lt;figcaption&gt;&lt;p&gt;As moving things are
difficult to grasp, we often rely on approximations and models.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;TTI is an interactivity metric that does not rely on real users interactions.
Instead, the algorithm makes an approximation by considering that a satisfactory
interaction can only happen in specific conditions, and focuses on determining
the prevalence of these conditions.&lt;/p&gt;
&lt;p&gt;To determine the TTI, the algorithm advances along the timeline, performs
checks, and redefines its candidate value for the TTI until it finds a moment
where all conditions are met. First, it chooses, as the lower limit, when the
user feels that the primary content of the page is visible. Several metrics are
available for this: the
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”
uses the First Meaningful Paint, but you can also use the First Contentful
Paint,
&lt;a href=&quot;https://github.com/WPO-Foundation/webpagetest/blob/master/docs/Metrics/TimeToInteractive.md&quot;&gt;as WebPageTest does&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then, the TTI’s algorithm verifies that the browser is able to handle the
interaction. As many user inputs are handled by client-side JavaScript, working
in a single thread environment, the algorithm must then ensure that no
long-lasting JavaScript tasks are currently occupying that thread, preventing JS
from handling the user inputs right away.
&lt;a href=&quot;https://github.com/w3c/longtasks&quot;&gt;For the W3C&lt;/a&gt;, a task is “long” if it lasts
longer than 50 ms (&lt;a href=&quot;https://github.com/w3c/longtasks&quot;&gt;Long Task&lt;/a&gt;). TTI will
observe the JS tasks and wait for a 5-second period of time without Long Tasks.&lt;/p&gt;
&lt;p&gt;However, all this is useless if the JS code necessary to handle the interaction
is not yet downloaded. Rather than finely observing each HTTP response to see if
JavaScript resources are downloaded, the Time To Interactive algorithm will use
a signal: it will wait until it observes a period of at least 5 seconds during
which it never sees more than 2 resources (all types combined) being downloaded
in parallel.&lt;/p&gt;
&lt;p&gt;If one of the conditions (Long Task and Network) is not met, the algorithm moves
its candidate value for the TTI forward and resumes observation to find another
Long Task and another 5-second network-quiet window after the last observed Long
Task. At that point, the candidate value for the TTI corresponds to the end of
the last observed Long Task.&lt;/p&gt;
&lt;p&gt;But we’re not finished! At last, the algorithm does not consider a page to be
interactive until the browser has finished parsing the document so if the
DOMContentLoadedEnd event occurs after our candidate value for TTI, this moment
is chosen as the final value for Time To Interactive.&lt;/p&gt;
  &lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/tti_w.png&quot; loading=&quot;lazy&quot; alt=&quot; A graph summarizing the above explanations.
&quot;&gt;&lt;figcaption&gt;&lt;p&gt;Schematic diagram of the definition,
in the
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h3&gt;&lt;span id=&quot;how-to-use-the-tti&quot;&gt;How to use the TTI?&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;When you start to look at the performance in terms of display, you quickly
discover the Visually Complete, i.e. the moment when the entire rendering of the
visible area of the page is finished.&lt;/p&gt;
&lt;p&gt;Time To Interactive is pretty much like Visually Complete: a time marker for the
end of something. The main question is “what?”. Tim Dresser found out the most
adequate way to define this: TTI is a “no jank past this point” metric and
that’s something you would want to monitor and optimize or, at least, not
deteriorate without good reasons.&lt;/p&gt;
&lt;p&gt;Indeed, the TTI is computed from the indirect observation of both the CPU –
through the JS Long Tasks – and the network activity. If the TTI increases, it
definitely means that a JS Long Task happened later than before, during the page
load, and it is important to know why. Has a new Long Task been introduced? Is
it a previously known tasks pushed back by a new piece of code? Is this a
consequence of some newly-implemented third-party dependency?&lt;/p&gt;
&lt;p&gt;As we’ll demonstrate later in the article, this Long Task is not necessarily
harmful to your UX (for example, if you
&lt;a href=&quot;https://blog.dareboost.com/en/2017/12/defer-scripts-to-speed-up-rendering/&quot;&gt;defer your scripts&lt;/a&gt;,
then the Long Tasks they produced will occur later) but you can certainly
optimize to make sure they don’t happen (for example, you can delegate complex
JavaScript algorithms to
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers&quot;&gt;Web Workers&lt;/a&gt;,
making them run in background tasks, therefore not occupying the JavaScript main
thread).&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;disambiguation&quot;&gt;Common misconception about Time To Interactive&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;Time to Interactive is not the time until a page is interactive&lt;/h3&gt;
&lt;p&gt;“Time To Interactive” is a really ambiguous name.&lt;/p&gt;
&lt;p&gt;Even
&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive&quot;&gt;in the Lighthouse documentation&lt;/a&gt;,
you can read short misleading definitions like:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Time to Interactive (TTI) metric measures how long it takes a page to
become interactive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fortunately, the sentence is followed by a definition of what “interactive”
means here, but for someone who wouldn’t read any further, the damage is done.&lt;/p&gt;
&lt;p&gt;As a matter of fact, the Time To Interactive does not measure how long it takes
for a page to become interactive, it measures how long it takes to be sure,
regarding the conditions, that a interactivity can happen in a satisfactory way,
for at least 5 seconds. That’s why the metric was previously known as Time To
&lt;strong&gt;Consistently&lt;/strong&gt; Interactive.&lt;/p&gt;
&lt;p&gt;We can totally have a very fast and usable page that, however, has a massive
TTI. To do this, all you need is for the page to perform Long Tasks of the
shortest possible duration, at a rate sufficient to interrupt the TTI
observation window. &lt;a href=&quot;https://tests.boris.schapira.dev/longtask/&quot;&gt;This page&lt;/a&gt;, for
example, executes a 51ms task every 2 seconds, during a total of 20 seconds and
its TTI is over 19 seconds.&lt;/p&gt;
&lt;p&gt;Still, the page is perfectly interactive way sooner than the TTI suggests.&lt;/p&gt;
&lt;h3&gt;In the TTI algorithm, the “network quiet” subwindow is only a signal&lt;/h3&gt;
&lt;p&gt;TTI is always linked to the last JS long task. The “quiet network” heuristic is
just a signal. I’ve seen people asking if they need to improve their waterfall
to artificially create cascades containing less than two simultaneous requests.
If none of these requests involve a Long Task, you can relax, your TTI will not
suffer.&lt;/p&gt;
&lt;p&gt;However, as this is a signal only, it does not guarantee that the JS code
required to handle the interaction is available at all. You can have pretty good
Time To Interactive and a page that is not interactive – as expected by user –
at all.&lt;/p&gt;
&lt;h3&gt;Google’s TTI is not everyone’s&lt;/h3&gt;
&lt;p&gt;Every time Google introduces a new concept, there is a strong market demand. But
be careful, Time To Interactive is not a standard!&lt;/p&gt;
&lt;p&gt;Akamai’s Boomerang, one of the most famous Real User Monitoring solution, has
&lt;a href=&quot;https://developer.akamai.com/tools/boomerang/docs/BOOMR.plugins.Continuity.html#toc10__anchor&quot;&gt;its own definition of Time To Interactive&lt;/a&gt;,
that differs a lot from Google’s. They use different signals like Frame Rate,
Long Tasks, Page Busyness (via &lt;code&gt;setInterval&lt;/code&gt;) and delayed user interactions.
Even if they keep the W3C 50ms Long Tasks definition, their window of quiescence
is only 500ms long (instead of 5 seconds), which mitigates TTIs from being
extended due to isolated tasks.&lt;/p&gt;
&lt;p&gt;During my research, I’ve also found that some Synthetic Monitoring solutions
claim to support the Time To Interactive metric but, as with
&lt;a href=&quot;https://blog.dareboost.com/en/2017/11/load-time-is-out/&quot;&gt;load time&lt;/a&gt;, you should
always verify their definition, because some solutions do not hesitate to brand
a “TTI” label on other metrics (such as
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming/domInteractive&quot;&gt;the domInteractive event&lt;/a&gt;)
that have nothing to do with Google’s TTI.&lt;/p&gt;
&lt;h3&gt;Time to Interactive is not easy to stabilize&lt;/h3&gt;
&lt;p&gt;A metric that is not predictable is difficult to understand. In researching this
article, we have gathered this evidence that suggests that the TTI is one of
those complex metrics, hard to stabilize.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I tried it out and it was a too unstable metric to measure Wikipedia. Here’s
an example:
&lt;a href=&quot;https://phabricator.wikimedia.org/T176369&quot;&gt;https://phabricator.wikimedia.org/T176369&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;Peter Hedenskog, Software Engineer (Contractor), for the Wikimedia
Foundation&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;There are few feedbacks on the TTI&lt;/h3&gt;
&lt;p&gt;There is little data on the correlation of TTI in the wild and none of them
allow us to say that it’s more interesting than the existing metrics.&lt;/p&gt;
&lt;p&gt;Based on a first study by Deepanjan Roy
(&lt;a href=&quot;https://docs.google.com/spreadsheets/d/14xVEkk0yUV9kCaPERLzUpB057hjdV66KP24AyExayh0/edit#gid=0&quot;&gt;a 28-website scoresheet&lt;/a&gt;),
Time To Interactive has later been
&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;qualified by Tim Dresser&lt;/a&gt;,
without much success. To be honest, these correlations are very difficult to
obtain: as we can see from Tim’s analysis, the correlation of more stable
metrics like FCP in the wild vs. in the lab is not good either.&lt;/p&gt;
&lt;p&gt;I found
&lt;a href=&quot;https://www.slideshare.net/nicjansma/reliably-measuring-responsiveness&quot;&gt;one study from 2017, by Nic Jansma&lt;/a&gt;,
&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;quoted by Addy Osmani&lt;/a&gt;, where he
explains that improving the TTI has a real impact on conversion rate in a real
Use Case but the slides don’t give access to the data nor the experimental
conditions.&lt;/p&gt;
&lt;p&gt;Other Use Cases available online often consist in removing all JavaScript from
the Landing Pages which is a pretty partial move, where other solutions (like
downloading and byte-caching the JS in a Service Worker for future use) could
have been chosen. Don’t get me wrong, I’m all for reducing the JavaScript to its
smallest share, but never at the expense of the
&lt;a href=&quot;https://www.dareboost.com/en/tool/user-journey-monitoring&quot;&gt;user journey&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Time To Interactive is entering a Web Performance landscape that already offers
multiple metrics, some of which are easier to understand and comment. Most of
the Use Cases I read about Time To Interactive do not clarify whether the
existing metrics were sufficient to qualify the situation. Most site owners only
monitor and report on 3 or 4 web performance metrics. Before we ask them to drop
one of them for this one, I think it’s important that they can get an extensive
idea of their respective relevance.&lt;/p&gt;
&lt;h3&gt;The Long Task “50ms” definition creates a threshold effect&lt;/h3&gt;
&lt;p&gt;The TTI thresholds have the merit of raising awareness of the importance of
performance budgets. TTI is kind of a
&lt;a href=&quot;https://blog.dareboost.com/en/2015/10/performance-budget/&quot;&gt;performance budget&lt;/a&gt;:
“the main thread activity must stay under the 50ms budget”.&lt;/p&gt;
&lt;p&gt;However, the definition of any threshold has impact.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/assets/images/2019-05-16/wpt.png&quot; loading=&quot;lazy&quot; alt=&quot; Capture from WebPageTest. The evaluation of the
&amp;quot;Interactive Page&amp;quot; is green very early in the page, but disturbed by a red part
much later in the loading. &quot;&gt;&lt;/p&gt;
&lt;p&gt;Let’s take a really simple blog post page, and test it on Desktop with
WebPageTest. The page is visually ready and completely interactive as soon as
1.2s. At that moment and during several seconds, a visitor can read and scroll
freely. Around 3.5 seconds, a reCaptcha script execution creates a 150ms Long
Task (in red, on the bottom bar) that push the Time To Interactive forward. Will
this delay be perceived by the visitor? By the way, how long would a delay take
to be felt by a visitor?&lt;/p&gt;
&lt;p&gt;According to
&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;the RAIL performance model&lt;/a&gt;
(Response, Animation, Idle, Load), the user perception of performance delays
depends on the nature of the delay. Interaction delays are perceived after
~100ms. A value consistent with
&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Nielsen’s 1993 post, based on Miller &amp;amp; Card et al. studies&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If the perceived delay is 100ms, why consider a JS task as long from 50ms? The
explanation lies in the Long Task API specification:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The RAIL performance model suggests that applications should respond in under
100ms to user input (for touch move and scrolling, in under 16ms). Our goal
with this API is to surface notifications about tasks that may prevent the
application from hitting these targets. We surface tasks that take 50ms or
more. A website without these tasks should respond to user input in under
100ms: it will take less than 50ms to finish the task that is being executed
when the user input is received and less than 50ms to execute the task to
react to such user input.&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;&lt;a href=&quot;https://w3c.github.io/longtasks/#intro&quot;&gt;Long Task API 1&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In other words: handling an interaction requires both that the browser is able
to handle the user input by not being already busy (interactivity) and that is
can handle fast enough the potential JS code execution triggered by the user
action (responsiveness). As we don’t know the actual response time of the
browser to handle the triggered processing, we consider this time should be less
than 50ms. That leaves 50ms for the browser to be free enough to react to the
input.&lt;/p&gt;
&lt;p&gt;But in practice, all browsers and browsing contexts are different and there are
many factors that can influence the time taken by the browser to process a task.&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;alternatives&quot;&gt;Interactivity measurement: is TTI enough?&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;TTI as a new reference metric?&lt;/h3&gt;
&lt;p&gt;Creating and promoting a metric is a performative act especially when the metric
is defined as THE reference metric for interactivity: when pushed by Google, the
metric not only evaluates the Web, it shapes it. SEO/SEM experts highly value it
to their customers, companies use it in rankings. Quickly, everyone considers
the metric as a reference, without questioning its rationale.&lt;/p&gt;
&lt;p&gt;However, its many limitations, consistent with its definition based on many
approximations, make the TTI a rather binary metric. Either the TTI is very low
and you can be happy because you are absolutely certain that the web page offers
the best conditions for quality interactions ; or it’s not, and you need to
investigate further to know what is happening. Some tasks can be delaying the
TTI without bothering end-users but the page may also be unusable. You just
don’t have any way to distinguish the two possibilities without further
investigation.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/observe.jpg&quot; loading=&quot;lazy&quot; alt=&quot; A microscope zooming on a sample. &quot;&gt;&lt;figcaption&gt;&lt;p&gt;A bad TTI is a sign that not all conditions are
perfect for interactivity. This does not mean that interactions will necessarily
be degraded. More investigation is always needed.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h3&gt;A milestone more than an evaluation of a continuum&lt;/h3&gt;
&lt;p&gt;Time To Interactive is to interactivity what the Visually Complete is to
display: a final milestone. What we’re missing is “a Speed Index of
interactions” where each Long Task would be weighted by its duration and the
time at which it occurs, in relation to other metrics (e. g. rendering metrics)
to infer the user’s frustration.&lt;/p&gt;
&lt;p&gt;In the previously mentioned study, Nic Jansma observed the distribution of Long
Task durations and found a correlation with conversion. I hope that we will make
progress on this subject in the coming years.&lt;/p&gt;
 &lt;figure&gt;&lt;img src=&quot;/assets/images/2019-05-16/nic.png&quot; loading=&quot;lazy&quot; alt=&quot; First Page LongTask Time vs. Conversion Rate (left) ;
First Page LongTask Time vs. Session Length (right) &quot;&gt;&lt;figcaption&gt;&lt;p&gt;Nic’s study did not observe a decrease in conversion
as long as the First Page Long Tasks were shorter than – not 50ms – but 100ms.
Isn’t that interesting?&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;In the meantime, a lot of other metrics exist regarding interactivity, mainly in
RUM, where real user activity can be monitored. For example, I think the
distribution of
&lt;a href=&quot;https://developers.google.com/web/updates/2018/05/first-input-delay&quot;&gt;First Input Delays&lt;/a&gt;
is an extremely relevant self-explanatory information but this would be a story
for another blog post.&lt;/p&gt;
&lt;p&gt;Remember: if you need to understand what’s happening with your JavaScript code
in Synthetic Monitoring, you can still
&lt;a href=&quot;https://blog.dareboost.com/en/2018/05/dogfooding-dareboost-custom-timings/&quot;&gt;use Custom Timings to deploy a full instrumentation&lt;/a&gt;.
It’s the best way to grasp what matters to your business.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;More about interactivity and the Time To Interactive:&lt;/h2&gt;
&lt;h3&gt;A touch of archaeology&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;[1993]
“&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Response Times: The 3 Important Limits&lt;/a&gt;”,
Jakob Nielsen&lt;/li&gt;
&lt;li&gt;[2015]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;Measure Performance with the RAIL model&lt;/a&gt;”,
Meggin Kearney, Addy Osmani, Kayce Basques, Jason Miller&lt;/li&gt;
&lt;li&gt;[July 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/11sWqwdfd3u1TwyZhsc-fB2NcqMZ_59Kz4XKiivp1cIg/edit#heading=h.f294oh9v0jlx&quot;&gt;Time To Interactive&lt;/a&gt;”,
Tim Dresser, Paul Irish, Brendan Kenny&lt;/li&gt;
&lt;li&gt;[December 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/1jbvwxj_GJtiTTqFM8dsVzCIy5XeKL5qtIAvuimcXb1o/edit&quot;&gt;Update on defining firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[January 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1pZsTKqcBUb1pc49J89QbZDisCmHLpMyUqElOwYqTpSI/edit&quot;&gt;Evaluating definitions of firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[August 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#heading=h.k1h25blerz3i&quot;&gt;First Interactive and Consistently Interactive&lt;/a&gt;”,
Deepanjan Roy (anchor to the
&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#bookmark=id.1d8nplewhcab&quot;&gt;definition of the TTI&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[February 2018]
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”,
Tim Dresser, Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[May 2018]
“&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;First Input Delay: Correlation with TTI&lt;/a&gt;”,
Tim Dresser&lt;/li&gt;
&lt;li&gt;[January 2019]
“&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;Web Page Usability Matters&lt;/a&gt;”, Addy
Osmani&lt;/li&gt;
&lt;li&gt;[February 2019]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics&quot;&gt;User-centric Performance Metrics&lt;/a&gt;”,
Philip Walton&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://twitter.com/henrihelvetica&quot;&gt;Henri&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/bluesmoon&quot;&gt;Phillip&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/soulislove&quot;&gt;Peter&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/tkadlec&quot;&gt;Tim&lt;/a&gt;
for having helped me to shape my ideas, and
&lt;a href=&quot;https://twitter.com/DamienJubeau&quot;&gt;Damien&lt;/a&gt; for his multiple proofreading and
advice.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 16 May 2019 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Netflix: how to increase video speed</title>
      
      <description>
          &lt;p&gt;A few month ago, I published a blog post about
&lt;a href=&quot;/2018/08/bookmark-netflix-brightness/&quot;&gt;increasing Netflix videos’ brightness&lt;/a&gt;
and people seems to really dig it. But what if you really need to speed up your
current episode to finish it before your bae arrives or slow down Beyoncé’s
moves to better learn one of her routine in HOMECOMING? No problem.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;strong&gt;Click and drag the following link in your favorites&lt;/strong&gt;:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&lt;a href=&quot;javascript:(function(){var b=Number(prompt('Video playback rate?','1'))%7C%7C1;Array.from(document.getElementsByTagName('video')).forEach(function(a){a.playbackRate=b;a.play()})})();&quot; title=&quot;Manage Video Playback Rate&quot;&gt;Manage
Video Playback Rate&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Then go to Netflix, HBO Now, Hulu, or pretty much any streaming service using
HTML videos&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, launch your favorite series or movie, and click it!&lt;/p&gt;
&lt;p&gt;And if you want to manage both brightness and video playback rate without
multiplying bookmarks, here’s one that do both:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;&lt;a href=&quot;javascript:(function(){var c=Number(prompt('Video playback rate?','1'))%7C%7C1,a=prompt('Video brightness?','100%');a=/^\d+(\.\d+)?%$/.test(a)?a:'100%';Array.from(document.getElementsByTagName('video')).forEach(function(b){b.playbackRate=c;b.play();b.setAttribute('style',b.getAttribute('style')+'filter: brightness('+a+');')})})();&quot; title=&quot;Manage Video Brightness and Playback Rate&quot;&gt;Manage Video Brightness and Playback Rate&lt;/a&gt;&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Feel free to rename the bookmark with shorter labels. For example, I use the ☀️
(sun) and 🏃‍ (running) emojis (and only that).&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2019-04-17/bqueen.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Beyoncé, dressed as a Queen she is on the Mrs. Carter Wordl Tour&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Now you’re the Queen.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;As explained in &lt;a href=&quot;/2018/08/bookmark-netflix-brightness/&quot;&gt;the previous post&lt;/a&gt;,
if the website has defined a Content-Security-Policy blocking bookmarks,
this won’t work, sorry! &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.local:10443/2019/04/bookmark-netflix-speed/</link>
      <guid isPermaLink="true">https://boris.schapira.local:10443/2019/04/bookmark-netflix-speed/</guid>
      
      <category>Netflix</category>
      
      <category>web</category>
      
    </item>
    
  </channel>
</rss>
