<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Web RSS · Boris Schapira</title>
    <link>https://boris.schapira.dev/en/web/feed.xml</link>
    <description> I am a Web professionnal that tries to understand what people need to make the web a better place.</description>
    <language>en</language>
    <lastBuildDate>Wed, 02 Oct 2019 17:51:07 +0200</lastBuildDate>
    
    <item>
      <title>Performance timing: wait for the next frame</title>
      
      <description>
          &lt;p&gt;The usual web performance metrics (First Byte, Speed Index…) are very interesting but I often need to add custom temporal markers, based on events that make sense from a business point of view.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;I use the User Timing API (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API&quot;&gt;see on &lt;abbr title=&quot;Mozilla Developer Network&quot;&gt;MDN&lt;/abbr&gt;&lt;/a&gt;) to create named timestamps that belong to the browser’s performance timeline. As I can retrieve this timeline in Dareboost, I can &lt;a href=&quot;https://blog.dareboost.com/en/2018/05/custom-timings-monitoring/&quot;&gt;track their evolution over time&lt;/a&gt;.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1137/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 1137w&quot; sizes=&quot;80vw&quot;  alt=&quot;Two curves in a graph. On the x-axis, a date range of one month. On the Y-axis, the time between 0 and 3s. The orange curve shows timing &amp;quot;mark_declare_js_end&amp;quot; while the green curve corresponds to timing &amp;quot;mark_switchlang_end&amp;quot;.&quot; loading=&quot;lazy&quot; width=&quot;1137&quot; height=&quot;535&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Some Custom Timings of this site&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Using the API in JavaScript is quite simple (and &lt;a href=&quot;https://caniuse.com/#feat=user-timing&quot;&gt;broadly supported&lt;/a&gt;), for example:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can then retrieve the value in your browser developers tools, using:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;console.dir(performance.getEntriesByType('mark'));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, I recently&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; realized that I often forgot something important: &lt;strong&gt;just because the browser execute some JavaScript code does not mean that the user can see the results of this execution&lt;/strong&gt;. The browser must update the display, and its ability to do so depends on the JavaScript code that follows the piece of code we’re interested in.&lt;/p&gt;
&lt;p&gt;In the following example, I inject a whole second between my performance mark and the browser update of the display.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// A snippet of code that consumes resources during 1 second&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Of course, in real life, you won’t have a simple loop. You will have some other time-consuming tasks. You won’t even know what, because it could be in a library on which your code depends, and you have no idea.&lt;/p&gt;
&lt;p&gt;As we’re not going to analyze all the code that follows the stuff we’re interested in to know when to put the timestamp, we need a workaround.&lt;/p&gt;
&lt;p&gt;We can use &lt;code&gt;requestAnimationFrame()&lt;/code&gt; to ask for our mark to be put set before the browser performs the next repaint:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// The thing you want to monitor the occurrence of&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp, before the next repaint&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-frame&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// A snippet of code that consumes resources during 1 second&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// but we don't care anymore&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;If you want to see this for yourself, here’s &lt;a href=&quot;https://tests.boris.schapira.dev/perfmark-animationframe/&quot;&gt;a test page&lt;/a&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;In a nutshell&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Call the User Timings API to create custom business-related timestamps.&lt;/li&gt;
&lt;li&gt;Encapsulate them  inside &lt;code&gt;requestAnimationFrame()&lt;/code&gt; callbacks to get to understand how the IU behaves, rather than the code execution. If you want to understand the code, attach two marks: you will have an idea of the display latency.&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Reading “&lt;a href=&quot;https://blog.superhuman.com/performance-metrics-for-blazingly-fast-web-apps-ec12efa26bcb&quot;&gt;Performance metrics for blazingly fast web apps&lt;/a&gt;”, by Conrad Irwin &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 30 Sep 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2019/09/user-timing-api-next-frame/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2019/09/user-timing-api-next-frame/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>UX</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Measuring Interactivity with TTI</title>
      
      <description>
          &lt;p&gt;When we talk about web performance measurement, what we’re actually trying to
determine is the moment when a user can effectively achieve his or her goal.
Meaning the users can consult the content they are looking for and/or interact
with the page in a satisfactory way. Some metrics endorse rendering actions by
the browser, others measure the progress of the display through the recording of
a video. However, a great mystery remains: how to properly measure
interactivity.&lt;/p&gt;
&lt;p&gt;For a few years now, Google has been pushing an ambiguous metric: &lt;strong&gt;Time To
Interactive&lt;/strong&gt;. What does it mean? Let’s define it and explain how and when to
use it (or not).&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/&quot;&gt;Measuring Interactivity with TTI&lt;/a&gt;.
&lt;/div&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; Photo of a carousel in action. The rotational movement
creates a fuzzy effect: it is impossible to know with certainty the speed of the
merry-go-round. &quot; loading=&quot;lazy&quot; width=&quot;4077&quot; height=&quot;2713&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Measuring
interactivity is like getting on a moving ride. When can we consider that the
carousel is slow enough to consider that we can jump on it? There’s no precise
answer.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;The measurement of interactiveness is a &lt;a href=&quot;#why&quot;&gt;pregnant challenge&lt;/a&gt; for Web
Performance experts. Synthetic monitoring solution vendors, especially, find it
difficult to provide a computable metric in the absence of user input.&lt;/p&gt;
&lt;p&gt;Google’s Time To Interactive is a sophisticated measure designed to determine
the ideal conditions for interactivity by monitoring both the JS main thread
activity and the network. It’s quite effective at determining
&lt;a href=&quot;#how-to-use-the-tti&quot;&gt;a time when you are sure that an interaction will be seamless&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;However, TTI is also a complex metric to understand and to exploit that
&lt;a href=&quot;#disambiguation&quot;&gt;does not measure what most people think it measures&lt;/a&gt;, which is
the time it takes for a page to become interactive.&lt;/p&gt;
&lt;p&gt;Real User Monitoring (RUM) remains the only way to capture user’s actions and
even there, &lt;a href=&quot;#alternatives&quot;&gt;we still don’t have a single KPI&lt;/a&gt; which simply
depicts the relationship between users behavior and the interactivity of the
page over time.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;&lt;span id=&quot;why&quot;&gt;The quest for a new metric&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;What are we trying to measure?&lt;/h3&gt;
&lt;p&gt;Accessing a web page is an experience that the web performance world generally
describes as 4 moments:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The user has confirmation that loading has started.&lt;/li&gt;
&lt;li&gt;The user has enough information in front of them to think that they can
interact with the page.&lt;/li&gt;
&lt;li&gt;The user can interact with the page (this particular moment being dependant
of the type of the interaction).&lt;/li&gt;
&lt;li&gt;The user’s interaction with the page is effortless and intuitive, with no
delays and jank.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Several signals give the user indications that the loading has started: the url
and title change, the browser may animate the tab and / or the
favicon, the first non-blank pixels appear, then the rest of the page…&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.dareboost.com/en/2018/02/speed-index-web-performance/&quot;&gt;Speed Index&lt;/a&gt;
and
&lt;a href=&quot;https://www.w3.org/TR/paint-timing/#first-contentful-paint&quot;&gt;First Contentful Paint&lt;/a&gt;
give a good idea of the visual perception of visitors. They help to understand
the perceived load of the page. They have limitations that can be identified at
a glance by a human being through video or filmstrip because their algorithm is
directly related to what is displayed.&lt;/p&gt;
&lt;p&gt;However, when talking about measuring interactivity – points 3 and 4 – things
get harder. Truth is, we don’t actually know how to measure it. The only thing
we know how to do well is to collect information that allows us to deduce these
particular moments.&lt;/p&gt;
&lt;p&gt;For example, Akamai has been looking for new ways to measure user activity for
years. They rely on the Boomerang library, created by Philip Tellis.
&lt;a href=&quot;https://www.welovespeed.com/en/2018/line-up/#ux-and-performance-metrics-that-matters&quot;&gt;Philip came to We Love Speed 2018&lt;/a&gt;
to expose the new user experience metrics that the Boomerang team has been
collecting to measure page responsiveness: Rage Clicks, Missed Clicks, Dead
Clicks, and Cursor Trashing. By analyzing the distribution of this data
qualifying user frustration, we can infer approximately when the user expects
the page, or a particular component, to be interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/rage.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1500/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 1500w&quot; sizes=&quot;80vw&quot;  alt=&quot; Rage Clicks by First Interaction and Visually Ready :
there&amp;#39;s a clear linear correlation ; the slope varies between 1.2 and 1.5.
&quot; loading=&quot;lazy&quot; width=&quot;1500&quot; height=&quot;843&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;There’s a clear linear correlation
between rage clicks and 1.2 to 1.5× the time to Visually Ready (when the page
would look to the user like they could interact with it –
&lt;a href=&quot;https://akamai.github.io/boomerang/BOOMR.plugins.Continuity.html#toc9__anchor&quot;&gt;see the full definition on Boomerang documentation&lt;/a&gt;).&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This type of correlation requires large amounts of data collected from real
users, either through JavaScript libraries like Boomerang, or in-browser RUM
like the Chrome UX Report. This data can only be collected on production
environments with large amounts of visitors.&lt;/p&gt;
&lt;p&gt;Testing optimizations in this environment is risky. Without prior testing,
deploying in production can introduce regressions/slowdowns and hurt your
business. Moreover, you’ll have to wait to collect large enough volume of data,
and it will be difficult to evaluate, because RUM data is not so easy to
analyze.&lt;/p&gt;
&lt;p&gt;Synthetic Monitoring solutions can perform accurate performance measurements on
all environments, while controlling test contexts. They would be even more
useful if they could provide an interactivity metric.&lt;/p&gt;
&lt;p&gt;But since they do not involve real users, they are forced to engage in
shenanigans…&lt;/p&gt;
&lt;h3&gt;Let’s introduce… Time To (Consistently) Interactive&lt;/h3&gt;
&lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;&lt;br /&gt;
Although there are several definitions, we will focus on the definition put
forward by Google through their tools and websites.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Interactivity can be considered in two ways: either as a switch between two
states (non-interactive and interactive) or as a continuum. Knowing when a page
becomes interactive for the first time is interesting but if the interface does
not respond quickly, the UX will be very degraded. By “interactivity”, we refer
here both to the fact that the page is interactive and to the fact that
interactions can take place in a satisfactory way.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Time To Interactive&lt;/strong&gt;, previously known as “Time To Consistently Interactive”,
is an experimental synthetic metric that attempts to measure when your web
application is both visually rendered and interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; Superposition of several photos of a dancer in movement.
Each movement is captured and yet it is impossible to grasp the continuum on a
static image. &quot; loading=&quot;lazy&quot; width=&quot;3872&quot; height=&quot;2592&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;As moving things are
difficult to grasp, we often rely on approximations and models.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;TTI is an interactivity metric that does not rely on real users interactions.
Instead, the algorithm makes an approximation by considering that a satisfactory
interaction can only happen in specific conditions, and focuses on determining
the prevalence of these conditions.&lt;/p&gt;
&lt;p&gt;To determine the TTI, the algorithm advances along the timeline, performs
checks, and redefines its candidate value for the TTI until it finds a moment
where all conditions are met. First, it chooses, as the lower limit, when the
user feels that the primary content of the page is visible. Several metrics are
available for this: the
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”
uses the First Meaningful Paint, but you can also use the First Contentful
Paint,
&lt;a href=&quot;https://github.com/WPO-Foundation/webpagetest/blob/master/docs/Metrics/TimeToInteractive.md&quot;&gt;as WebPageTest does&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then, the TTI’s algorithm verifies that the browser is able to handle the
interaction. As many user inputs are handled by client-side JavaScript, working
in a single thread environment, the algorithm must then ensure that no
long-lasting JavaScript tasks are currently occupying that thread, preventing JS
from handling the user inputs right away.
&lt;a href=&quot;https://github.com/w3c/longtasks&quot;&gt;For the W3C&lt;/a&gt;, a task is “long” if it lasts
longer than 50 ms (&lt;a href=&quot;https://github.com/w3c/longtasks&quot;&gt;Long Task&lt;/a&gt;). TTI will
observe the JS tasks and wait for a 5-second period of time without Long Tasks.&lt;/p&gt;
&lt;p&gt;However, all this is useless if the JS code necessary to handle the interaction
is not yet downloaded. Rather than finely observing each HTTP response to see if
JavaScript resources are downloaded, the Time To Interactive algorithm will use
a signal: it will wait until it observes a period of at least 5 seconds during
which it never sees more than 2 resources (all types combined) being downloaded
in parallel.&lt;/p&gt;
&lt;p&gt;If one of the conditions (Long Task and Network) is not met, the algorithm moves
its candidate value for the TTI forward and resumes observation to find another
Long Task and another 5-second network-quiet window after the last observed Long
Task. At that point, the candidate value for the TTI corresponds to the end of
the last observed Long Task.&lt;/p&gt;
&lt;p&gt;But we’re not finished! At last, the algorithm does not consider a page to be
interactive until the browser has finished parsing the document so if the
DOMContentLoadedEnd event occurs after our candidate value for TTI, this moment
is chosen as the final value for Time To Interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1139/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 1139w&quot; sizes=&quot;80vw&quot;  alt=&quot; A graph summarizing the above explanations.
&quot; loading=&quot;lazy&quot; width=&quot;1139&quot; height=&quot;555&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Schematic diagram of the definition,
in the
&amp;quot;&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;&amp;quot;.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3&gt;&lt;span id=&quot;how-to-use-the-tti&quot;&gt;How to use the TTI?&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;When you start to look at the performance in terms of display, you quickly
discover the Visually Complete, i.e. the moment when the entire rendering of the
visible area of the page is finished.&lt;/p&gt;
&lt;p&gt;Time To Interactive is pretty much like Visually Complete: a time marker for the
end of something. The main question is “what?”. Tim Dresser found out the most
adequate way to define this: TTI is a “no jank past this point” metric and
that’s something you would want to monitor and optimize or, at least, not
deteriorate without good reasons.&lt;/p&gt;
&lt;p&gt;Indeed, the TTI is computed from the indirect observation of both the CPU –
through the JS Long Tasks – and the network activity. If the TTI increases, it
definitely means that a JS Long Task happened later than before, during the page
load, and it is important to know why. Has a new Long Task been introduced? Is
it a previously known tasks pushed back by a new piece of code? Is this a
consequence of some newly-implemented third-party dependency?&lt;/p&gt;
&lt;p&gt;As we’ll demonstrate later in the article, this Long Task is not necessarily
harmful to your UX (for example, if you
&lt;a href=&quot;https://blog.dareboost.com/en/2017/12/defer-scripts-to-speed-up-rendering/&quot;&gt;defer your scripts&lt;/a&gt;,
then the Long Tasks they produced will occur later) but you can certainly
optimize to make sure they don’t happen (for example, you can delegate complex
JavaScript algorithms to
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers&quot;&gt;Web Workers&lt;/a&gt;,
making them run in background tasks, therefore not occupying the JavaScript main
thread).&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;disambiguation&quot;&gt;Common misconception about Time To Interactive&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;Time to Interactive is not the time until a page is interactive&lt;/h3&gt;
&lt;p&gt;“Time To Interactive” is a really ambiguous name.&lt;/p&gt;
&lt;p&gt;Even
&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive&quot;&gt;in the Lighthouse documentation&lt;/a&gt;,
you can read short misleading definitions like:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Time to Interactive (TTI) metric measures how long it takes a page to
become interactive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fortunately, the sentence is followed by a definition of what “interactive”
means here, but for someone who wouldn’t read any further, the damage is done.&lt;/p&gt;
&lt;p&gt;As a matter of fact, the Time To Interactive does not measure how long it takes
for a page to become interactive, it measures how long it takes to be sure,
regarding the conditions, that a interactivity can happen in a satisfactory way,
for at least 5 seconds. That’s why the metric was previously known as Time To
&lt;strong&gt;Consistently&lt;/strong&gt; Interactive.&lt;/p&gt;
&lt;p&gt;We can totally have a very fast and usable page that, however, has a massive
TTI. To do this, all you need is for the page to perform Long Tasks of the
shortest possible duration, at a rate sufficient to interrupt the TTI
observation window. &lt;a href=&quot;https://tests.boris.schapira.dev/longtask/&quot;&gt;This page&lt;/a&gt;, for
example, executes a 51ms task every 2 seconds, during a total of 20 seconds and
its TTI is over 19 seconds.&lt;/p&gt;
&lt;p&gt;Still, the page is perfectly interactive way sooner than the TTI suggests.&lt;/p&gt;
&lt;h3&gt;In the TTI algorithm, the “network quiet” subwindow is only a signal&lt;/h3&gt;
&lt;p&gt;TTI is always linked to the last JS long task. The “quiet network” heuristic is
just a signal. I’ve seen people asking if they need to improve their waterfall
to artificially create cascades containing less than two simultaneous requests.
If none of these requests involve a Long Task, you can relax, your TTI will not
suffer.&lt;/p&gt;
&lt;p&gt;However, as this is a signal only, it does not guarantee that the JS code
required to handle the interaction is available at all. You can have pretty good
Time To Interactive and a page that is not interactive – as expected by user –
at all.&lt;/p&gt;
&lt;h3&gt;Google’s TTI is not everyone’s&lt;/h3&gt;
&lt;p&gt;Every time Google introduces a new concept, there is a strong market demand. But
be careful, Time To Interactive is not a standard!&lt;/p&gt;
&lt;p&gt;Akamai’s Boomerang, one of the most famous Real User Monitoring solution, has
&lt;a href=&quot;https://developer.akamai.com/tools/boomerang/docs/BOOMR.plugins.Continuity.html#toc10__anchor&quot;&gt;its own definition of Time To Interactive&lt;/a&gt;,
that differs a lot from Google’s. They use different signals like Frame Rate,
Long Tasks, Page Busyness (via &lt;code&gt;setInterval&lt;/code&gt;) and delayed user interactions.
Even if they keep the W3C 50ms Long Tasks definition, their window of quiescence
is only 500ms long (instead of 5 seconds), which mitigates TTIs from being
extended due to isolated tasks.&lt;/p&gt;
&lt;p&gt;During my research, I’ve also found that some Synthetic Monitoring solutions
claim to support the Time To Interactive metric but, as with
&lt;a href=&quot;https://blog.dareboost.com/en/2017/11/load-time-is-out/&quot;&gt;load time&lt;/a&gt;, you should
always verify their definition, because some solutions do not hesitate to brand
a “TTI” label on other metrics (such as
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming/domInteractive&quot;&gt;the domInteractive event&lt;/a&gt;)
that have nothing to do with Google’s TTI.&lt;/p&gt;
&lt;h3&gt;Time to Interactive is not easy to stabilize&lt;/h3&gt;
&lt;p&gt;A metric that is not predictable is difficult to understand. In researching this
article, we have gathered this evidence that suggests that the TTI is one of
those complex metrics, hard to stabilize.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I tried it out and it was a too unstable metric to measure Wikipedia. Here’s
an example:
&lt;a href=&quot;https://phabricator.wikimedia.org/T176369&quot;&gt;https://phabricator.wikimedia.org/T176369&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;Peter Hedenskog, Software Engineer (Contractor), for the Wikimedia
Foundation&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;There are few feedbacks on the TTI&lt;/h3&gt;
&lt;p&gt;There is little data on the correlation of TTI in the wild and none of them
allow us to say that it’s more interesting than the existing metrics.&lt;/p&gt;
&lt;p&gt;Based on a first study by Deepanjan Roy
(&lt;a href=&quot;https://docs.google.com/spreadsheets/d/14xVEkk0yUV9kCaPERLzUpB057hjdV66KP24AyExayh0/edit#gid=0&quot;&gt;a 28-website scoresheet&lt;/a&gt;),
Time To Interactive has later been
&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;qualified by Tim Dresser&lt;/a&gt;,
without much success. To be honest, these correlations are very difficult to
obtain: as we can see from Tim’s analysis, the correlation of more stable
metrics like FCP in the wild vs. in the lab is not good either.&lt;/p&gt;
&lt;p&gt;I found
&lt;a href=&quot;https://www.slideshare.net/nicjansma/reliably-measuring-responsiveness&quot;&gt;one study from 2017, by Nic Jansma&lt;/a&gt;,
&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;quoted by Addy Osmani&lt;/a&gt;, where he
explains that improving the TTI has a real impact on conversion rate in a real
Use Case but the slides don’t give access to the data nor the experimental
conditions.&lt;/p&gt;
&lt;p&gt;Other Use Cases available online often consist in removing all JavaScript from
the Landing Pages which is a pretty partial move, where other solutions (like
downloading and byte-caching the JS in a Service Worker for future use) could
have been chosen. Don’t get me wrong, I’m all for reducing the JavaScript to its
smallest share, but never at the expense of the
&lt;a href=&quot;https://www.dareboost.com/en/tool/user-journey-monitoring&quot;&gt;user journey&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Time To Interactive is entering a Web Performance landscape that already offers
multiple metrics, some of which are easier to understand and comment. Most of
the Use Cases I read about Time To Interactive do not clarify whether the
existing metrics were sufficient to qualify the situation. Most site owners only
monitor and report on 3 or 4 web performance metrics. Before we ask them to drop
one of them for this one, I think it’s important that they can get an extensive
idea of their respective relevance.&lt;/p&gt;
&lt;h3&gt;The Long Task “50ms” definition creates a threshold effect&lt;/h3&gt;
&lt;p&gt;The TTI thresholds have the merit of raising awareness of the importance of
performance budgets. TTI is kind of a
&lt;a href=&quot;https://blog.dareboost.com/en/2015/10/performance-budget/&quot;&gt;performance budget&lt;/a&gt;:
“the main thread activity must stay under the 50ms budget”.&lt;/p&gt;
&lt;p&gt;However, the definition of any threshold has impact.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_944/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 944w&quot; sizes=&quot;80vw&quot;   alt=&quot; Capture from WebPageTest. The evaluation of the
&amp;quot;Interactive Page&amp;quot; is green very early in the page, but disturbed by a red part
much later in the loading. &quot; loading=&quot;lazy&quot; width=&quot;944&quot; height=&quot;192&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Let’s take a really simple blog post page, and test it on Desktop with
WebPageTest. The page is visually ready and completely interactive as soon as
1.2s. At that moment and during several seconds, a visitor can read and scroll
freely. Around 3.5 seconds, a reCaptcha script execution creates a 150ms Long
Task (in red, on the bottom bar) that push the Time To Interactive forward. Will
this delay be perceived by the visitor? By the way, how long would a delay take
to be felt by a visitor?&lt;/p&gt;
&lt;p&gt;According to
&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;the RAIL performance model&lt;/a&gt;
(Response, Animation, Idle, Load), the user perception of performance delays
depends on the nature of the delay. Interaction delays are perceived after
~100ms. A value consistent with
&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Nielsen’s 1993 post, based on Miller &amp;amp; Card et al. studies&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If the perceived delay is 100ms, why consider a JS task as long from 50ms? The
explanation lies in the Long Task API specification:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The RAIL performance model suggests that applications should respond in under
100ms to user input (for touch move and scrolling, in under 16ms). Our goal
with this API is to surface notifications about tasks that may prevent the
application from hitting these targets. We surface tasks that take 50ms or
more. A website without these tasks should respond to user input in under
100ms: it will take less than 50ms to finish the task that is being executed
when the user input is received and less than 50ms to execute the task to
react to such user input.&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;&lt;a href=&quot;https://w3c.github.io/longtasks/#intro&quot;&gt;Long Task API 1&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In other words: handling an interaction requires both that the browser is able
to handle the user input by not being already busy (interactivity) and that is
can handle fast enough the potential JS code execution triggered by the user
action (responsiveness). As we don’t know the actual response time of the
browser to handle the triggered processing, we consider this time should be less
than 50ms. That leaves 50ms for the browser to be free enough to react to the
input.&lt;/p&gt;
&lt;p&gt;But in practice, all browsers and browsing contexts are different and there are
many factors that can influence the time taken by the browser to process a task.&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;alternatives&quot;&gt;Interactivity measurement: is TTI enough?&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;TTI as a new reference metric?&lt;/h3&gt;
&lt;p&gt;Creating and promoting a metric is a performative act especially when the metric
is defined as THE reference metric for interactivity: when pushed by Google, the
metric not only evaluates the Web, it shapes it. SEO/SEM experts highly value it
to their customers, companies use it in rankings. Quickly, everyone considers
the metric as a reference, without questioning its rationale.&lt;/p&gt;
&lt;p&gt;However, its many limitations, consistent with its definition based on many
approximations, make the TTI a rather binary metric. Either the TTI is very low
and you can be happy because you are absolutely certain that the web page offers
the best conditions for quality interactions ; or it’s not, and you need to
investigate further to know what is happening. Some tasks can be delaying the
TTI without bothering end-users but the page may also be unusable. You just
don’t have any way to distinguish the two possibilities without further
investigation.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; A microscope zooming on a sample. &quot; loading=&quot;lazy&quot; width=&quot;2784&quot; height=&quot;1848&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;A bad TTI is a sign that not all conditions are
perfect for interactivity. This does not mean that interactions will necessarily
be degraded. More investigation is always needed.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3&gt;A milestone more than an evaluation of a continuum&lt;/h3&gt;
&lt;p&gt;Time To Interactive is to interactivity what the Visually Complete is to
display: a final milestone. What we’re missing is “a Speed Index of
interactions” where each Long Task would be weighted by its duration and the
time at which it occurs, in relation to other metrics (e. g. rendering metrics)
to infer the user’s frustration.&lt;/p&gt;
&lt;p&gt;In the previously mentioned study, Nic Jansma observed the distribution of Long
Task durations and found a correlation with conversion. I hope that we will make
progress on this subject in the coming years.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/nic.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1500/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 1500w&quot; sizes=&quot;80vw&quot;  alt=&quot; First Page LongTask Time vs. Conversion Rate (left) ;
First Page LongTask Time vs. Session Length (right) &quot; loading=&quot;lazy&quot; width=&quot;1500&quot; height=&quot;843&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Nic’s study did not observe a decrease in conversion
as long as the First Page Long Tasks were shorter than – not 50ms – but 100ms.
Isn’t that interesting?&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;In the meantime, a lot of other metrics exist regarding interactivity, mainly in
RUM, where real user activity can be monitored. For example, I think the
distribution of
&lt;a href=&quot;https://developers.google.com/web/updates/2018/05/first-input-delay&quot;&gt;First Input Delays&lt;/a&gt;
is an extremely relevant self-explanatory information but this would be a story
for another blog post.&lt;/p&gt;
&lt;p&gt;Remember: if you need to understand what’s happening with your JavaScript code
in Synthetic Monitoring, you can still
&lt;a href=&quot;https://blog.dareboost.com/en/2018/05/dogfooding-dareboost-custom-timings/&quot;&gt;use Custom Timings to deploy a full instrumentation&lt;/a&gt;.
It’s the best way to grasp what matters to your business.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;More about interactivity and the Time To Interactive:&lt;/h2&gt;
&lt;h3&gt;A touch of archaeology&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;[1993]
“&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Response Times: The 3 Important Limits&lt;/a&gt;”,
Jakob Nielsen&lt;/li&gt;
&lt;li&gt;[2015]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;Measure Performance with the RAIL model&lt;/a&gt;”,
Meggin Kearney, Addy Osmani, Kayce Basques, Jason Miller&lt;/li&gt;
&lt;li&gt;[July 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/11sWqwdfd3u1TwyZhsc-fB2NcqMZ_59Kz4XKiivp1cIg/edit#heading=h.f294oh9v0jlx&quot;&gt;Time To Interactive&lt;/a&gt;”,
Tim Dresser, Paul Irish, Brendan Kenny&lt;/li&gt;
&lt;li&gt;[December 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/1jbvwxj_GJtiTTqFM8dsVzCIy5XeKL5qtIAvuimcXb1o/edit&quot;&gt;Update on defining firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[January 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1pZsTKqcBUb1pc49J89QbZDisCmHLpMyUqElOwYqTpSI/edit&quot;&gt;Evaluating definitions of firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[August 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#heading=h.k1h25blerz3i&quot;&gt;First Interactive and Consistently Interactive&lt;/a&gt;”,
Deepanjan Roy (anchor to the
&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#bookmark=id.1d8nplewhcab&quot;&gt;definition of the TTI&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[February 2018]
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”,
Tim Dresser, Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[May 2018]
“&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;First Input Delay: Correlation with TTI&lt;/a&gt;”,
Tim Dresser&lt;/li&gt;
&lt;li&gt;[January 2019]
“&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;Web Page Usability Matters&lt;/a&gt;”, Addy
Osmani&lt;/li&gt;
&lt;li&gt;[February 2019]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics&quot;&gt;User-centric Performance Metrics&lt;/a&gt;”,
Philip Walton&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://twitter.com/henrihelvetica&quot;&gt;Henri&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/bluesmoon&quot;&gt;Phillip&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/soulislove&quot;&gt;Peter&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/tkadlec&quot;&gt;Tim&lt;/a&gt;
for having helped me to shape my ideas, and
&lt;a href=&quot;https://twitter.com/DamienJubeau&quot;&gt;Damien&lt;/a&gt; for his multiple proofreading and
advice.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 16 May 2019 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2019/05/measuring-interactivity-time-to-interactive/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Netflix: how to increase video speed</title>
      
      <description>
          &lt;p&gt;A few month ago, I published a blog post about
&lt;a href=&quot;/2018/08/bookmark-netflix-brightness/&quot;&gt;increasing Netflix videos’ brightness&lt;/a&gt;
and people seems to really dig it. But what if you really need to speed up your
current episode to finish it before your bae arrives or slow down Beyoncé’s
moves to better learn one of her routine in HOMECOMING? No problem.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;strong&gt;Click and drag the following link in your favorites&lt;/strong&gt;:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&lt;a href=&quot;javascript:(function(){var b=Number(prompt('Video playback rate?','1'))%7C%7C1;Array.from(document.getElementsByTagName('video')).forEach(function(a){a.playbackRate=b;a.play()})})();&quot; title=&quot;Manage Video Playback Rate&quot;&gt;Manage
Video Playback Rate&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Then go to Netflix, HBO Now, Hulu, or pretty much any streaming service using
HTML videos&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, launch your favorite series or movie, and click it!&lt;/p&gt;
&lt;p&gt;And if you want to manage both brightness and video playback rate without
multiplying bookmarks, here’s one that do both:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;&lt;a href=&quot;javascript:(function(){var c=Number(prompt('Video playback rate?','1'))%7C%7C1,a=prompt('Video brightness?','100%');a=/^\d+(\.\d+)?%$/.test(a)?a:'100%';Array.from(document.getElementsByTagName('video')).forEach(function(b){b.playbackRate=c;b.play();b.setAttribute('style',b.getAttribute('style')+'filter: brightness('+a+');')})})();&quot; title=&quot;Manage Video Brightness and Playback Rate&quot;&gt;Manage Video Brightness and Playback Rate&lt;/a&gt;&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Feel free to rename the bookmark with shorter labels. For example, I use the ☀️
(sun) and 🏃‍ (running) emojis (and only that).&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2019-04-17/bqueen.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Beyoncé, dressed as a Queen she is on the Mrs. Carter Wordl Tour&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Now you’re the Queen.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;As explained in &lt;a href=&quot;/2018/08/bookmark-netflix-brightness/&quot;&gt;the previous post&lt;/a&gt;,
if the website has defined a Content-Security-Policy blocking bookmarks,
this won’t work, sorry! &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2019/04/bookmark-netflix-speed/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2019/04/bookmark-netflix-speed/</guid>
      
      <category>Netflix</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Lazy Loading, faster webpages, SEO friendly</title>
      
      <description>
          &lt;p&gt;Images are a key content on your website? If you’re serious about your website
performance, you have probably optimized them. But have you considered to lazy
load your images? Lazy loading images improves the user experience by saving
bandwidth for important content first.&lt;/p&gt;
&lt;p&gt;Some reject the technique for SEO considerations. But properly lazy loading your
images does not prevent them from being indexed. Let’s find out why you should
implement lazy load, and how to make sure you build it in a SEO friendly way.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2019/03/lazy-loading-faster-webpages-seo-friendly/&quot;&gt;Lazy Loading, faster webpages, SEO friendly&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Images are everywhere on the Web. Serving the right image in the right context
can be really challenging.
&lt;a href=&quot;https://blog.dareboost.com/en/2017/10/optimize-images-to-reduce-page-weight-file-formats-tools-and-rwd/&quot;&gt;Images need to be optimized&lt;/a&gt;,
adapted to its rendering area, and only loaded if required.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Images Lazy Loading&lt;/strong&gt; is a set of techniques designed to answer this last
requirement. An image will be loaded only if it is useful for the visitor: the
download of an image is triggered when it’s needed: after a specific
interaction, as a result of a scroll… or never.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://httparchive.org/reports/state-of-images#offscreenImages&quot;&gt;According to HTTPArchive&lt;/a&gt;,
420 KB (median value) could be saved per page by lazy-loading offscreen and
hidden images.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1200/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 1200w&quot; sizes=&quot;80vw&quot;   alt=&quot;Graph showing the amount of data that could be saved by not
loading off-screen images.&quot; loading=&quot;lazy&quot; width=&quot;1200&quot; height=&quot;800&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;Some use cases&lt;/h2&gt;
&lt;p&gt;There are many concrete cases where Lazy Loading is involved. Let us take a few
minutes to cite a few examples.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;E-Commerce Search Results&lt;/strong&gt;. These pages often contain so many results that a
lot of products are outside the viewport. Is it useful to download their images?
With Lazy Loading, you can delay their loading until the page is scrolled.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Carousels&lt;/strong&gt;. You know about them, right? Why should the user load all of the
images whereas it will only showcase the first one during several seconds… Lazy
load them! Load the first one, and trigger the download of the next when in the
background a couple of seconds before the carousel animation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Menus and tabs.&lt;/strong&gt; Images contained in a menu or a tab are often hidden, only
displayed after a click. With Lazy Loading, you can delay the loading of the
images until the button displaying the element is hovered or clicked.&lt;/p&gt;
&lt;p&gt;Depending on the nature of your page, other cases are possible. No images should
be included on your pages without previously asking yourself the question of
delaying their download. Because at the end of the day, there are significant
performance gains.&lt;/p&gt;
&lt;h2&gt;The bare necessities&lt;/h2&gt;
&lt;p&gt;By postponing the loading of images that are not immediately required – or, in
some cases, not loading them at all – the browser saves resources (bandwidth as
well as CPU). The page loads faster and the user experience is improved as saved
resources can be affected to more critical content. There are also server-side
gains. The CPU and bandwidth required to delivered the resources are subjected
to less stress, reducing the hosting and/or CDN costs.&lt;/p&gt;
&lt;p&gt;As said in the introduction, Lazy Loading do not prevent your images from being
indexed by search engines. But it can be tricky and all the techniques are not
equals, as all the best practices are not implemented by the various libraries
and plugins available on the market. To preserve your organic SEO, you need to
understand how Lazy Loading works, and how to use it safely.&lt;/p&gt;
&lt;h2&gt;LazyLoad with JavaScript&lt;/h2&gt;
&lt;p&gt;In a perfect world, the browser would automatically lazy load the images. This
may be the case in the future, as a
&lt;a href=&quot;https://github.com/w3c/webappsec-feature-policy/issues/193&quot;&gt;Lazyload Feature Policy&lt;/a&gt;
is under study, but we’re not there yet. In the meantime, we have to explore
other solutions, every one of them implying a modification of the HTML markup
and the addition of a JavaScript (JS) dependency.&lt;/p&gt;
&lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt;&lt;br /&gt;
You don’t need to – and &lt;strong&gt;shouldn’t&lt;/strong&gt; – lazy load all your images. If you know
that some images will be displayed most of the time , let them be loaded and
rendered normally. Lazy Loading is only recommended for the other images. Do not
add complexity when it’s not required!&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The most traditional solution consists of using JS to reassess, at regular
intervals and for each image (or each element displaying an image as a
background), if it needs to be loaded. High-performance libraries such as
&lt;a href=&quot;https://github.com/aFarkas/lazysizes&quot;&gt;lazysizes&lt;/a&gt; are built on this paradigm and
are compatible with older browsers. lazysizes can even detect if the User-Agent
is able to scroll and, if not, load the images right away.&lt;/p&gt;
&lt;p&gt;However, running those tests so regularly has a cost. This cost can be avoided
for web browsers supporting the Intersection and Mutation Observer APIs (that
provide the ability to react to specific DOM situations rather than having to
test continuously). &lt;a href=&quot;https://github.com/malchata/yall.js&quot;&gt;yall.js&lt;/a&gt; and
&lt;a href=&quot;https://apoorv.pro/lozad.js/&quot;&gt;lozad.js&lt;/a&gt; are good examples of this
condition-based technique (they are only compatible
&lt;a href=&quot;https://caniuse.com/#feat=intersectionobserver&quot;&gt;with modern browsers&lt;/a&gt;, but you
can use
&lt;a href=&quot;https://github.com/w3c/IntersectionObserver/tree/master/polyfill&quot;&gt;a polyfill&lt;/a&gt;
to emulate the missing feature for older browsers).&lt;/p&gt;
&lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;TIP&lt;/strong&gt;&lt;br /&gt;
As the browser may interpret any omission of &lt;code&gt;src&lt;/code&gt; as an error, I strongly
recommend that you still define the &lt;code&gt;src&lt;/code&gt; attribute value, using a really small
transparent image placeholder, even inline, like:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Whichever JavaScript solution you choose on the client side, you must modify
your backend to return the right HTML code. The HTML markup for the lazy-loading
of an image is always similar: the final value of the &lt;code&gt;src&lt;/code&gt; attribute is
temporarily placed in a &lt;code&gt;data-src&lt;/code&gt; attribute which prevents the &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; element
from loading the final image right away.&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded image: before --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;data-src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;placeholder.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;js-lazyload&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data…&quot;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded background image: before --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data-class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bg-image-garden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The library identifies its target images through an attribute, quite often using
a specific class (for example, here, we are using the &lt;code&gt;js-lazyload&lt;/code&gt; class). When
the library detects it’s time to load the image, the &lt;code&gt;data-src&lt;/code&gt; attribute is
used to populate the &lt;code&gt;src&lt;/code&gt; attribute and the browser starts loading the image.
The technique is the same for other media types (video, iframes) or images
adapted for responsive web design (for example, the &lt;code&gt;data-srcset&lt;/code&gt; attribute can
be used to temporarily retain the final value of the &lt;code&gt;srcset&lt;/code&gt; attribute).&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded image: after --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;js-lazyload&quot;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded background image: after --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload bg-image-garden&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2&gt;No JavaScript? Fallback with style (and &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt;).&lt;/h2&gt;
&lt;p&gt;Search engine bots, such as Googlebots, are crawlers that browse the web for the
purpose of content indexing. No one knows for sure when the Googlebots will
execute JavaScript on their pages, and at what capacity. As
&lt;a href=&quot;https://www.stephanboyer.com/post/122/does-google-execute-javascript&quot;&gt;demonstrated by Stephan Boyer in 2016&lt;/a&gt;
and later confirmed by
&lt;a href=&quot;https://youtu.be/PFwUbgvpdaQ?t=845&quot;&gt;Tom Greenaway at Google IO 2018&lt;/a&gt;,
Googlebots do not execute JavaScript during their first visit. The final render
can actually arrive several days later.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Because Googlebots actually runs two waves of indexing across web content,
it’s possible some details might be missed. &lt;cite&gt;Tom Greeaway&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Like some images.&lt;/p&gt;
&lt;p&gt;Because if JavaScript properly executed, lazy loaded images will not be handled
by it and the &lt;code&gt;src&lt;/code&gt; attribute is never populated, preventing the browser from
starting the download and displaying the images.&lt;/p&gt;
&lt;p&gt;How to serve these images despite the absence of JavaScript? There’s a specific
HTML element you can use: &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt;. The content of an &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt; element
is displayed only if scripting features are not supported or are disabled.
That’s exactly what we need!&lt;/p&gt;
&lt;p&gt;So if your HTML response contains:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;data-src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data/…&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A spacious garden dominated by a large pine tree.&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lazyload&quot;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;noscript&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A spacious garden dominated by a large pine tree.&quot;&lt;/span&gt;
        &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/noscript&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;when JavaScript is available, only the first &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; element will be
displayed;&lt;/li&gt;
&lt;li&gt;when JavaScript is not available, both &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; elements are considered
during the page display. The second one (in the &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt; element), is
displayed and indexable by search engines. The technique,
&lt;a href=&quot;https://www.youtube.com/watch?time_continue=4308&amp;amp;v=7m-cd8XXovQ&quot;&gt;confirmed by John Mueller&lt;/a&gt;,
Webmaster Trends Analyst at Google, is exactly the same for background
images:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data-class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bg-image-garden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;noscript&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container bg-image-garden&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        … A spacious garden dominated by a large pine tree. …
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/noscript&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Beware: don’t miss adding a specific style that will be applied when JavaScript
is not available, hiding the non-lazy-loaded images.&lt;/p&gt;
&lt;p&gt;You may be afraid of the resulting verbose HTML related to code duplication.
Don’t worry, your HTML documents have to be compressed with gzip or brotli
before being sent on the network, hence a marginal impact in transfer size (if
you’re not sure your website is properly using compression,
&lt;a href=&quot;https://www.dareboost.com/&quot;&gt;audit your pages on Dareboost&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Of course, it remains true that entering all these tags is tedious. When
managing responsive images, artistic direction… the markup of images can be
very, very complex. So anyway, you should not enter this HTML code manually:
dealing automatically with this kind of complexity should be the work of your
CMS or a task of your contribution workflow whatever it is.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_686/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 686w&quot; sizes=&quot;80vw&quot;  alt=&quot;About fifty lines of very dense
HTML.&quot; loading=&quot;lazy&quot; width=&quot;686&quot; height=&quot;420&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Mark-up an image from The
Guardian, even before the implementation of a Lazy Loading&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Testing the implementation&lt;/h2&gt;
&lt;p&gt;Once you’ve implemented Lazy Loading, you’ll need to test that it works. The
simplest solution is, of course to run a
&lt;a href=&quot;https://www.dareboost.com/en/tool/website-analysis&quot;&gt;full web performance diagnosis&lt;/a&gt;
with Dareboost to detect if all the images outside of the viewport are
lazyloaded. If it’s not the case, we’ll tell you and give you the URLs of the
images for which loading can be postponed.&lt;/p&gt;
&lt;p&gt;If you have conditioned the loading of your images to a browser or a custom
event, feel free to use
&lt;a href=&quot;https://www.dareboost.com/en/doc/analysis-report/timeline-waterfall&quot;&gt;your report’s Waterfall&lt;/a&gt;
to check that the loading of images follows the correct sequence. In the case of
a custom event, feel free to also use a
&lt;a href=&quot;https://blog.dareboost.com/en/2018/05/custom-timings-monitoring/&quot;&gt;Custom Timing&lt;/a&gt;:
you’ll be able to find the event in the Waterfall.&lt;/p&gt;
&lt;p&gt;It may also need to do manual tests. Open your browser on the concerned webpage,
open the Developper Tools and select the Network tab (every modern browser
features it). Empty the network stack to better visualize new calls, then
provoke the interaction meant to start the lazy loading.&lt;/p&gt;
&lt;p&gt;Here is an example on Chrome, with the Lazy Loading activated during scrolling:&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/Z4jRe3KRcf4&quot; title=&quot;Visualization of lazyloading during scrolling in the Chrome DevTools Network tab&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;You may consider automating these tests by using browser-based tools to perform
tests. Puppeteer is one of them and
&lt;a href=&quot;https://github.com/GoogleChromeLabs/puppeteer-examples/blob/master/lazyimages_without_scroll_events.js&quot;&gt;can be used to test&lt;/a&gt;
the behavior of your lazy loading on Chrome or Chromium, to make sure that your
real users will see your images.&lt;/p&gt;
&lt;p&gt;To verify that crawler bots will also see your images, you can ask Google
itself, using the URL Inspector tool of the
&lt;a href=&quot;https://search.google.com/search-console&quot;&gt;Google Search Console&lt;/a&gt;. You will view
your page exactly as fetch by Google. Just insert your URL for Googlebot to test
your page and screenshot the result to confirm that your &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt; fallback
is working.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Here we are, you now know everything there is to know about Images Lazy Load,
its SEO impact and the best way to get around it. Let’s trim some pages!&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 20 Mar 2019 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/en/2019/03/lazy-loading-faster-webpages-seo-friendly/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2019/03/lazy-loading-faster-webpages-seo-friendly/</guid>
      
      <category>Performance Web</category>
      
      <category>Images</category>
      
      <category>SEO</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Optimizing Jekyll build time</title>
      
      <description>
          &lt;p&gt;Being more and more tired of WordPress and its galaxy of dubious-quality
plugins, I decided to migrate to a static site generator three years ago. After
a few tries with other solutions, I decided to migrate to Jekyll, whose
community seemed more mature to me.&lt;/p&gt;
&lt;p&gt;After three years working on Jekyll, I’m starting to understand the strengths
and weaknesses of the solution, but I am far from mastering its mysteries. I
tweaked it to publish multilingual content, developed my own plugins, integrated
pieces of architecture I discovered in some of my friends’ repos… Let’s say I’m
quite used to it now.&lt;/p&gt;
&lt;p&gt;But nowadays, my Jekyll build looked less like the famous doctor than the
Frankenstein monster: a patchwork of code roughly tied together by delicate
strings, slowly moving as it moans.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;hr /&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Noting that my Jekyll compilation was very slow, I asked the French JAMstack
community for advice.&lt;/li&gt;
&lt;li&gt;Several things have emerged, each tip allowing me to optimize the
compilation time.&lt;/li&gt;
&lt;li&gt;The biggest gain comes from Jekyll’s own evolutions, because the Core Team
is doing a huge amount of work.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;To generate my site, I developed a set of rake commands to clean the workspace,
determine the destination environment and configure the build accordingly, check
the integrity of the front-matter headers of my posts, generate the site with
Jekyll and, finally, control what’s produced using
&lt;a href=&quot;https://rubygems.org/gems/html-proofer/&quot;&gt;the &lt;code&gt;html-proofer&lt;/code&gt; gem&lt;/a&gt;. I don’t run
all this on my computer: instead, I delegate this task to Netlify, connected to
my GitHub repository to compile and deploy my branches.&lt;/p&gt;
&lt;p&gt;All these tasks obviously take time, but the part dedicated to the generation
with Jekyll remained the most CPU-consuming. For months, my Netlify builds had
been over 10 minutes. Every build was slower than the previous one.&lt;/p&gt;
&lt;p&gt;A few days ago, Netlify stopped deploying the website altogether. The build took
too long and exceeded the limit imposed by Netlify’s continuous deployment
system&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;It was time to act.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;An African proverb says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you want to go fast, go alone. If you want to go far, go together.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I don’t think that’s entirely true. I believe that when we surround ourselves
with the right people, we can go elsewhere, towards possibilities we had not
even considered.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;So when I thought I was reaching the limit of my skills, I asked for help from
the community I know best: the JAMstatic Slack members. And among them, a member
of the Jekyll’s core team, &lt;a href=&quot;https://github.com/DirtyF&quot;&gt;Frank&lt;/a&gt;. He helped me a
lot (and still does) by pointing out possibilities that I hadn’t contemplated.&lt;/p&gt;
&lt;h2&gt;Includes: to be consumed in moderation&lt;/h2&gt;
&lt;p&gt;Experience has taught me that it is often more difficult to maintain a project
than to carry it out in the first place. To increase your chances of success, it
is better to find techniques for organizing the code that are adapted to your
long-term understanding. In my opinion, dividing the code into significant
portions is one of the most effective maintenance tips.&lt;/p&gt;
&lt;p&gt;In Jekyll, this is achieved via the &lt;code&gt;{% include %}&lt;/code&gt; tag.
However, be careful, an overly ambitious code break-down will have a cost on
your compilation time, which you can view with
&lt;a href=&quot;https://jekyllrb.com/docs/configuration/options/#build-command-options&quot;&gt;the Liquid profiler&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;According to &lt;a href=&quot;https://github.com/pathawks/&quot;&gt;Pat Hawks&lt;/a&gt;, a member of the Jekyll
&lt;span lang=&quot;en&quot;&gt;Core Team&lt;/span&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Every time you use an &lt;code&gt;{% include %}&lt;/code&gt; tag, Jekyll has to
open the included file, read its contents into memory, and then parse the
template with Liquid. This happens once per
&lt;code&gt;{% include %}&lt;/code&gt; tag not per file! This means that using
the same include on 100 pages will cause that include to be loaded/parsed 100
times. The problem gets worse very quickly if you start including includes in
your includes…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One way to overcome this additional cost is to cache the blocks compiled during
the interpretation of your &lt;code&gt;{% include %}&lt;/code&gt; and there’s a
plugin for that:
&lt;a href=&quot;https://github.com/benbalter/jekyll-include-cache&quot;&gt;Ben Balter’s jekyll-include-cache&lt;/a&gt;.
But beware of two very important things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Be sure to pass all the data necessary for your
&lt;code&gt;{% include %}&lt;/code&gt; as parameters, because they will be used
as keys for the cache.&lt;/li&gt;
&lt;li&gt;use includes only to generate reusable portions or code. If the parameters of
the include make it so specific that it’s not reusable, the
&lt;code&gt;{% include %}&lt;/code&gt; cache will have been built for nothing.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;These two constraints are strong enough to force me to reintegrate more than
half of my includes into layouts. I am not entirely satisfied with this
situation (because, as a result, maintenance capacities are degraded) but I must
admit that I saved nearly &lt;strong&gt;10%&lt;/strong&gt; of compilation time&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; by sacrificing
this little comfort.&lt;/p&gt;
&lt;p&gt;And with liquid comments
(&lt;code&gt;{% comment %}This is a comment{% endcomment %}&lt;/code&gt;), I can
still efficiently organize my code, even if it’s in a single file.&lt;/p&gt;
&lt;h2&gt;Trust the gems compiled in C&lt;/h2&gt;
&lt;p&gt;Out of the box, Jekyll is based on a set of gems written in Ruby. Recently, new
gems have appeared, partially written in C, thus, more efficient. The Jekyll
team was kind enough to add conditional tests in the generator to use these gems
if they are referenced in your Gemfile.&lt;/p&gt;
&lt;p&gt;So far, I’ve heard about two of them:&lt;/p&gt;
&lt;p&gt;There are undoubtedly others, but I heard about at least two of them:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Shopify/liquid-c&quot;&gt;the &lt;code&gt;liquid-c&lt;/code&gt; gem&lt;/a&gt;, to optimize the
liquid compilation.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sass/sassc-ruby&quot;&gt;the &lt;code&gt;sassc&lt;/code&gt; gem&lt;/a&gt;, if you need Jekyll to
compile SASS files more efficiently.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I don’t need Jekyll for my SASS files but by using &lt;code&gt;liquid-c&lt;/code&gt;, I saved &lt;strong&gt;9%&lt;/strong&gt; of
compilation time.&lt;/p&gt;
&lt;h2&gt;If you can avoid it, don’t use LSI&lt;/h2&gt;
&lt;p&gt;Jekyll comes with a very handy option called Latent Semantic Indexing (LSI)
which role is to parse all the content before generating the site, in order to
feed, for each post, a qualitative collection of related posts (instead of the
ten most recent posts). LSI does a very good job but if you have hundreds of
posts like I do, it will run slowly, very slowly.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;After a very quick non-analysis of the analytics I don’t have&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn4&quot; id=&quot;fnref4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;, I
decided to part with the related articles and save &lt;strong&gt;17%&lt;/strong&gt; of compilation time.&lt;/p&gt;
&lt;h2&gt;Markdown, choose the right flavor&lt;/h2&gt;
&lt;p&gt;Markdown is a really nice light markup language but it’s missing one thing very
badly: standardization. There are dozens of Markdown parsers, each with their
own specific features. For some time now, a standardization initiative has been
emerging around &lt;a href=&quot;https://commonmark.org/&quot;&gt;CommonMark&lt;/a&gt;, and projects implementing
it are flourishing.&lt;/p&gt;
&lt;p&gt;By default, Jekyll uses &lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;kramdown&lt;/a&gt;, a Markdown
superset developed in Ruby that does a very good job. To replace it with
CommonMark, I used &lt;a href=&quot;https://github.com/gjtorikian/commonmarker&quot;&gt;commonmarker&lt;/a&gt;
which is, again, a Ruby wrapper for a C implementation. To take advantage of it
in Jekyll, you can use
&lt;a href=&quot;https://github.com/jekyll/jekyll-commonmark&quot;&gt;Pat Hawks’ jekyll-commonmark plugin&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Be careful, the transition may require adaptations. kramdown and CommonMark are
quite different: while switching from one to the other, I had to sacrifice some
syntaxic sugars.&lt;/p&gt;
&lt;p&gt;For example, CommonMark does not support block attributes such as
&lt;code&gt;{ :.myclass}&lt;/code&gt; to decorate a content paragraph. You will
need to use good old HTML tags. Don’t forget to enable the &lt;code&gt;UNSAFE&lt;/code&gt; option in
your Jekyll configuration (&lt;code&gt;_config.yml&lt;/code&gt;) if you don’t want to generate a lot of
&lt;code&gt;&amp;lt;!-- raw HTML omitted --&amp;gt;&lt;/code&gt; comments:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;markdown: CommonMark
commonmark:
  options: [&quot;SMART&quot;, &quot;FOOTNOTES&quot;, &quot;UNSAFE&quot;, &quot;HARDBREAKS&quot;]
  extensions: [&quot;strikethrough&quot;, &quot;autolink&quot;, &quot;table&quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You may also notice that CommonMark is less tolerant than kramdown. Switching to
this parser helped me to detect problems in my post that I had never noticed
before because kramdown was fixing them for me. If you have a significant amount
of content, be prepared to fix a few typos.&lt;/p&gt;
&lt;p&gt;A small price to pay to save another &lt;strong&gt;9%&lt;/strong&gt; of compilation time.&lt;/p&gt;
&lt;h2&gt;Trust the team for going in the right direction&lt;/h2&gt;
&lt;p&gt;Finally, one of the last improvements made was to switch to the &lt;code&gt;master&lt;/code&gt; version
of Jekyll. Since 3.8.5 (my previous version), many improvements have been made,
and the performance gain is really considerable: &lt;strong&gt;93%&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I versioned my &lt;code&gt;_site&lt;/code&gt; folder and checked that nothing was breaking when
switching versions because I couldn’t believe in such a gain and yet, it’s real.&lt;/p&gt;
&lt;p&gt;If you were to retain – or test – only one optimization, it is this one: trust
the Core Team, performance is on the way.&lt;/p&gt;
&lt;h2&gt;What about my multilingual mess?&lt;/h2&gt;
&lt;p&gt;After all these optimizations, my Jekyll compilation went from more than 15
minutes to about a minute. That’s still a lot, and I know why: my “homemade”
management of internationalization, and more particularly of the translation of
my articles, is suboptimal.&lt;/p&gt;
&lt;p&gt;It is based on an &lt;code&gt;i18n-key&lt;/code&gt; value that I place in the front-matter of my
content files to match them across languages, as well as on a home-made plugin
that, for each content, scans all the other contents to find which ones are
translations of the current content. This O(n²) strategy, while easy to
implement, is not effective at all and penalizes my build performance.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ashmaroli&quot;&gt;Ashwin Maroli&lt;/a&gt;, one of the Jekyll Plugin Core
Team member, is working on a filepath-convention-based plugin that should
considerably improve i18n:
&lt;a href=&quot;https://github.com/ashmaroli/jekyll-locale&quot;&gt;jekyll-locale&lt;/a&gt;. I tried to
implement the plugin on my blog but encountered some drawbacks. I will come back
to this later, especially when some plugins have been modified to be compatible,
such as
&lt;a href=&quot;https://github.com/sverrirs/jekyll-paginate-v2&quot;&gt;Sverrir Sigmundarson’s jekyll-paginate-v2&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I’ll be sure to mention it when everything will work out as it should!&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Experimental protocol&lt;/h2&gt;
&lt;p&gt;Since the above optimizations also require to modify the content, I did not
carry out a benchmark during the optimizations. I waited until I was completely
finished and then, I went back and evaluated the gains step by step.&lt;/p&gt;
&lt;p&gt;Here’s my test protocol: I started from an installation without any of these
optimizations, then I wrote a script implementing the optimizations one by one
(except the removal of the includes, because… I was too lazy to script the
modification of my layouts) and, each time, compiled the website. I scheduled
the script to be executed 10 times and went to bed while my computer spent
nearly 16 hours benchmarking all this.&lt;/p&gt;
&lt;p&gt;Here is the raw data:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Run&lt;/th&gt;
&lt;th&gt;Step&lt;/th&gt;
&lt;th&gt;Done in… (s)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1337,872&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1509,997&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1264,981&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1282,607&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;64,949&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1510,356&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1457,161&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1239,278&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1058,934&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;72,335&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;2148,253&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1465,446&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1253,785&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;886,152&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;92,384&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1621,322&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1506,737&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1225,414&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1057,497&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;87,943&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1589,323&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1607,33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1261,815&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;914,124&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;77,526&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1643,596&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1481,98&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1237,843&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1336,47&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,099&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1456,432&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1487,558&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1268,737&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1106,233&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;2943,453&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1492,383&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1229,34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1321,156&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;70,332&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1587,532&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1586,698&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1264,424&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;950,634&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,907&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1643,22&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1581,063&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1229,119&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1332,547&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,022&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;15 minutes, as confirmed by Chris McCraw in
“&lt;a href=&quot;https://www.netlify.com/blog/2016/10/18/how-our-build-bots-build-sites/&quot;&gt;How Our Build Bots Build Sites&lt;/a&gt;”. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;You’re going to have to take my word for it, because my experimental
protocol didn’t contain a test with and without inclusions. It is therefore
a personal estimate. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;It seems that &lt;a href=&quot;https://rubygems.org/gems/gsl&quot;&gt;the gem gsl&lt;/a&gt; is improving
this, but I haven’t tested it. I am interested in your feedback. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn4&quot;&gt;
&lt;p&gt;Because I don’t need them to learn about my readers, as they often interact
with me on Twitter or through comments &lt;a href=&quot;#fnref4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 28 Nov 2018 00:00:00 +0100</pubDate>
      <link>https://boris.schapira.dev/2018/11/jekyll-build-optimization/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2018/11/jekyll-build-optimization/</guid>
      
      <category>Jekyll</category>
      
      <category>JAMStatic</category>
      
      <category>Outils</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Content Encoding: why and how to use the meta charset tag and the Content-Type header</title>
      
      <description>
          &lt;p&gt;Improving the speed at which a web page is displayed often means making the
browser’s life as easy as possible. When the browser receives an HTTP response,
it actually receives text encoded in bytes, where each byte or sequence of bytes
represents a given character. If the browser does not have a clear information
about the used encoding, it will waste time trying to guess and may fail in some
cases.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2018/11/content-encoding-meta-charset-content-type-header/&quot;&gt;Content Encoding: why and how to use the meta charset tag and the Content-Type header&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Although the Web is intended to be universal, the various human groups that use
it have their own specificities. One of these specificities is language,
especially when written. All textual content is composed of characters from a
directory intended for a type of use. Hiraganas, for example, are phonetic
system intended for the unambiguous transcription of the Japanese language.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1200/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 1200w&quot; sizes=&quot;80vw&quot;  alt=&quot;Hiraganas&quot; loading=&quot;lazy&quot; width=&quot;1200&quot; height=&quot;698&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Table
showing the writing direction of hiraganas&lt;br /&gt;
by Karine WIDMER
(&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA-3.0&lt;/a&gt; ·
&lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Table_hiragana.svg&quot;&gt;Source&lt;/a&gt;)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;To be able to designate each character unambiguously, we must assign a unique
identifier to each of them. The whole set of identifiers will be called a
character set. Once this correspondence table has been defined, each character
need be converted into a sequence of bytes so that we can store or share them
between computers. This is called character encoding.&lt;/p&gt;
&lt;p&gt;Imagine that I use a character set to write text and a corresponding encoding to
convert it to bytes, which I later send to you. How would you decode it, and
read the content, without knowing which encoding, or set, I used? Eventually,
you would have to use some of the most common character set &amp;amp; encodings you
know, expecting the result to make sense… What could go wrong?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Replace a semicolon (;) with a greek question mark (;) in your friend’s
JavaScript and watch them pull their hair out over the syntax error.&lt;br /&gt;
&lt;cite&gt;Ben Johnson (@benbjohnson),
&lt;a href=&quot;https://twitter.com/benbjohnson/status/533848879423578112&quot;&gt;November 16, 2014&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So yeah… not a great idea.&lt;/p&gt;
&lt;p&gt;For example, the bit sequence 1100 0011 1010 1001 represents the character “é”
in the UTF-8 encoding. If you decode this sequence assuming you have to use the
Latin-1 encoding and not UTF-8, you will read “Ã ©”.&lt;br /&gt;
In Latin-1, the character “é” is represented by the sequence 1110 1001.&lt;/p&gt;
&lt;p&gt;When the browser receives bytes from your server, it needs to identify the
collection of letters and symbols that were used in writing the text that was
converted into these bytes, and the encoding used for this conversion, in order
to reverse it. If no information of this kind has been transmitted, the browser
will try to find recognizable patterns within the bytes to determine the
encoding itself, and eventually try some common charsets, which will take time,
delaying further processing of the page.&lt;/p&gt;
&lt;p&gt;To speed up the display of your pages, you must specify the content encoding
into your HTTP response.&lt;/p&gt;
&lt;h2&gt;How to choose the right character set?&lt;/h2&gt;
&lt;p&gt;There was a time when hundreds of character encodings coexisted, all limited and
not able to contain enough characters to cover all the languages of the world.
Sometimes, no encoding was adequate for all letters in a single language.&lt;/p&gt;
&lt;p&gt;Nowadays, Unicode – a universal character set, defining all the characters
necessary to write the majority of languages – has become a standard, no matter
what platform, device, application or language you’re targeting. UTF-8 is one of
the Unicode encodings and the one that should be used for Web content, according
to the W3C:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Everyone developing content, whether content authors or programmers, should
use the UTF-8 character encoding, unless there are very special reasons for
using something else. (If you decide to not use UTF-8, you must choose one of
the few encodings that are interoperably implemented across all browsers.)&lt;br /&gt;
&lt;cite&gt;”&lt;a href=&quot;https://www.w3.org/International/getting-started/characters&quot;&gt;Introducing Character Sets and Encodings&lt;/a&gt;”,
W3C&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Note: if you’re using a database to store your content on the server side, you
may be tempted to also use the “utf-8” charset too. Beware: on MySQL and
MariaDB, it’s an alias for “utf8mb3”, a UTF-8 encoding called “Basic
Multilingual Plane” – or BMP – that only stores a maximum of three bytes per
code point. Instead, you’d rather use “utf8mb4”, an encoding that stores a
maximum of four bytes per code point. Otherwise, you won’t be able to use some
popular characters, such as 🚀, otherwise known as “U+1F680 ROCKET”!&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;How to advertise your character encoding… and the best way to do it.&lt;/h2&gt;
&lt;p&gt;Before going any further, let’s take a look at the vocabulary in use.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Historically, the terms “character encoding”, “character map”, “character set”
and “code page” were synonymous in computer science[…]. But now the terms have
related but distinct meanings,[…] Regardless, the terms are still used
interchangeably, with character set being nearly ubiquitous.&lt;br /&gt;
&lt;cite&gt;”&lt;a href=&quot;https://en.wikipedia.org/wiki/Character_encoding#Character_sets,_character_maps_and_code_pages&quot;&gt;Character encoding&lt;/a&gt;”,
Wikipedia&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We find this use of “character set” or “charset” to designate, in reality, an
encoding, in the HTML specifications. We will do the same in the rest of this
article.&lt;/p&gt;
&lt;p&gt;One of the easiest ways to specify a charset in an HTML page is to put in a
&lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; tag in the element:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Declaring a character set this way
&lt;a href=&quot;https://www.w3.org/TR/html5/document-metadata.html#specifying-the-documents-character-encoding&quot;&gt;requires certain constraints to be respected&lt;/a&gt;,
one of them being that the element containing the character encoding declaration
must be serialized completely within the first 1024 bytes of the document, to
ensure that the browser will receive the information with the first IP packets
transiting through the network and can use it to decode the rest of the
document. As the charset &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; tag is the only one with this kind of
requirement, the most common tip is to place it directly after the element
opening tag:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you’re afraid to forget this, don’t worry. This is obviously one of the
checks that Dareboost will perform for you within our
&lt;a href=&quot;https://www.dareboost.com/en/tool/website-analysis&quot;&gt;website quality analysis tool&lt;/a&gt;.
However, you may find yourself in a situation where this declaration is not
sufficient, and the browser does not take it into account. Why? Because the
Content-Type metadata of the page may indicate another character set and in the
event of a conflict, this information – defined in the page HTTP headers – has
priority.&lt;/p&gt;
&lt;p&gt;To make sure of the information transmitted through the page metadata, you can
use
&lt;a href=&quot;https://www.dareboost.com/en/doc/analysis-report/timeline-waterfall&quot;&gt;our Timeline / Waterfall feature&lt;/a&gt;.
Unfold the detailed values of your main document to view the response HTTP
headers, including the Content-Type header, containing the encoding metadata.&lt;/p&gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/content-type.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_273/https://boris.schapira.dev/assets/images/2018-11-16/content-type.png 273w&quot; sizes=&quot;80vw&quot;   alt=&quot;Content Type Header in an HTTP response&quot; loading=&quot;lazy&quot; width=&quot;273&quot; height=&quot;86&quot; crossorigin=&quot;anonymous&quot; /&gt;
&lt;p&gt;To change this HTTP header, you may need the help of the person who managed the
server, whereas it’s your hosting service provider or a person in charge in your
organization, because the configuration of the HTTP headers is very specific to
the web server in use, and you’ll need the appropriate administrative rights to
be able to modify those server settings.&lt;/p&gt;
&lt;p&gt;On &lt;strong&gt;Apache 2.2+&lt;/strong&gt;, the configuration of UTF-8 as a default character set for
your &lt;code&gt;text/plain&lt;/code&gt; and &lt;code&gt;text/html&lt;/code&gt; files involves
&lt;a href=&quot;https://httpd.apache.org/docs/2.2/en/mod/core.html#adddefaultcharset&quot;&gt;the &lt;code&gt;AddDefaultCharset&lt;/code&gt; directive&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddDefaultCharset utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For other types of files, you’ll need
&lt;a href=&quot;https://httpd.apache.org/docs/current/en/mod/mod_mime.html#addcharset&quot;&gt;the &lt;code&gt;AddCharset&lt;/code&gt; directive&lt;/a&gt;;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddCharset utf-8 .js .css …
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On &lt;strong&gt;nginx&lt;/strong&gt;, you’ll need to make sure that
&lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_charset_module.html&quot;&gt;the ngx_http_charset_module is loaded&lt;/a&gt;,
then use the &lt;code&gt;charset&lt;/code&gt; directive.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;charset utf-8;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here too, it is possible to refine the scope so that other types of files than
&lt;code&gt;text/html&lt;/code&gt; are delivered in utf-8, using the directive &lt;code&gt;charset_types&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;charset_types text/html text/css application/javascript
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Of course, you can also configure the &lt;code&gt;Content-Type&lt;/code&gt; HTTP header from your
server-side scripting code. For example, in &lt;strong&gt;PHP&lt;/strong&gt;, you can use
&lt;a href=&quot;https://php.net/manual/en/function.header.php&quot;&gt;the header() network function&lt;/a&gt;.
Don’t forget to define the Media Type (or MIME type) of the body of the
response, in addition to the character set.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;header('Content-type: text/html; charset=utf-8');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Beware: if your pages are delivered by a Content Delivery Network (CDN), you
may have to configure the &lt;code&gt;Content-Type&lt;/code&gt; header in the CDN configuration, as
most of them don’t pass on the headers they find on your servers.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.iana.org/assignments/media-types/media-types.xhtml&quot;&gt;The IANA Media Types list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.unicode.org/&quot;&gt;The Unicode website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;“&lt;a href=&quot;https://www.w3.org/International/articles/definitions-characters/#httpheader&quot;&gt;Character encodings: Essential concepts&lt;/a&gt;”,
on the W3C Internationalization website&lt;/li&gt;
&lt;li&gt;Still thinking that Character Encoding is a trivial issue? Look at
“&lt;a href=&quot;https://www.youtube.com/watch?v=yQaRUEwEKxE&quot;&gt;Anatomy of a Critical Security Bug&lt;/a&gt;”,
by Andrew Nacin at Loop Conf 2015.&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 19 Nov 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/en/2018/11/content-encoding-meta-charset-content-type-header/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2018/11/content-encoding-meta-charset-content-type-header/</guid>
      
      <category>Performance Web</category>
      
      <category>Headers</category>
      
      <category>Encoding</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>One hosts file to block them all</title>
      
      <description>
          &lt;p&gt;As a field expert, people often ask me how to improve websites’ performance.
Sometimes, they also ask me how to improve the Web’s performance on their own
machine, for their own browsing experience. In that case, my answer is always
the same: the lowest hanging fruit is most certainly the &lt;strong&gt;hosts&lt;/strong&gt; file.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 640w&quot; sizes=&quot;80vw&quot;  alt=&quot;Gollum, holding the One ring in the Peter Jackson&amp;#39;s
adaptation&quot; loading=&quot;lazy&quot; width=&quot;640&quot; height=&quot;480&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;I lacked inspiration to find
a nicer illustration….&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;!-- more --&gt;
&lt;h2&gt;Keeping the dirt away&lt;/h2&gt;
&lt;p&gt;Today’s web is full of dirt. Most sites are full of trackers, ads, and lots of
other nasty stuff penalizing websites’ loading. To avoid this, AdBlockers are
blooming. They offer a quick and simple solution (most of the time, a browser
extension) that blocks most of the unwanted content.&lt;/p&gt;
&lt;p&gt;Unfortunately, as for the UX, AdBlockers don’t deliver. They often increase the
amount of memory and CPU cycles used by your web browser, slowing your browsing
experience instead of boosting it. Some are doing better than others, and whole
browsers&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; have been conceived over the idea of blocking unwanted content,
and are doing an incredible job. But the web is not confined to your browser, is
it?&lt;/p&gt;
&lt;p&gt;The Web is requested from everywhere in your computer. Most mainstream
applications are as crammed with trackers as your next media website. Sometimes,
you can even see the ads displayed in your UI (&lt;em&gt;Hello, Skype. Yes, I’m talking
about you, you naughty boy&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;The AdBlockers can’t do anything about that. But a simple hosts file does.&lt;/p&gt;
&lt;h2&gt;Hosts… what?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;The computer file &lt;strong&gt;hosts&lt;/strong&gt; is an operating system file that maps hostnames to
IP addresses. It is a plain text file.
&lt;cite&gt;”&lt;a href=&quot;https://en.wikipedia.org/wiki/Hosts_%28file%29&quot;&gt;hosts (file)&lt;/a&gt;”, on
Wikipedia&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Whenever your browser interacts with a website, it actually requests a server,
located through its IP address, like 185.31.40.11 (IPv4) or 2a00:b6e0:1:20:2::1
(IPv6). It’s pretty similar to a postal address.&lt;/p&gt;
&lt;p&gt;Now think about accessing a webpage, like &lt;a href=&quot;https://boris.schapira.dev&quot;&gt;https://boris.schapira.dev&lt;/a&gt;. How does
your browser know which IP address to contact? Well, the browser simply asks the
Internet phone book. At least, one of them. And the phone book, called a
&lt;abbr title=&quot;Domain Name Server&quot;&gt;DNS&lt;/abbr&gt;, resolves the IP address for the
browser.&lt;/p&gt;
&lt;p&gt;I don’t know about you, but I never use a phone book. Most of the time, I’ve
collected the address of the people to whom I want to write in my personal
address book. That’s the &lt;strong&gt;hosts file&lt;/strong&gt; for you. Every time a process on your
computer needs to access a resource on the Internet, it first goes through the
hosts file to find out where to find it.&lt;/p&gt;
&lt;p&gt;Now, let’s say that you don’t want this process to find the resource on the
badthings.com domain. &lt;em&gt;Easy peasy&lt;/em&gt;, throw it on the wrong track by associating
the badthings.com domain to an unspecified address like 0.0.0.0.&lt;/p&gt;
&lt;p&gt;So basically, if someone makes a list of all the domains where bad things
happen, we can redirect them all to 0.0.0.0 in our hosts file, and make &lt;strong&gt;our
own Web&lt;/strong&gt; a much cooler place.&lt;/p&gt;
&lt;h2&gt;One project to gather them all&lt;/h2&gt;
&lt;p&gt;There is nothing new in what I am describing here. Cool people have been doing
this for years, sharing their host files. Fake news websites, gaming platforms,
pornographic hubs, encryption pages, fraud attempts, and scams are all patiently
identified and listed in open access files.&lt;/p&gt;
&lt;p&gt;I use &lt;a href=&quot;https://github.com/StevenBlack/hosts&quot;&gt;Steven Black’s “hosts” project&lt;/a&gt;, a
python script, to cram them into
&lt;a href=&quot;https://raw.githubusercontent.com/borisschapira/hosts/master/hosts&quot;&gt;a single 2MB hosts file&lt;/a&gt;
containing more than 70k domains. In case you’re wondering, I can and do alter
the result with my own accept list (otherwise blocked domains whose requests I
don’t want to prevent) and redirections (which allows me to write this article
and check the result on &lt;a href=&quot;https://borisschapira-dev.com:10443/&quot;&gt;https://borisschapira-dev.com:10443/&lt;/a&gt;, which actually
points to my own machine).&lt;/p&gt;
&lt;p&gt;If you’re not familiar with the command line and use Windows 10, the hostsman
app will help you achieve the same goal (&lt;em&gt;unfortunately, as I just published the
post, the website looks down. Fortunately,
&lt;a href=&quot;https://portapps.github.io/app/hostsman-portable/&quot;&gt;a portable version exists&lt;/a&gt;&lt;/em&gt;).&lt;br /&gt;
I will not recommend modifying your host file on previous versions of Windows
even if
&lt;a href=&quot;https://boris.schapira.dev/2015/08/de-windows-a-mac/&quot;&gt;I did it, before 2015 (FR)&lt;/a&gt;,
unless you like to run &lt;code&gt;ipconfig /flushdns&lt;/code&gt; every 30 minutes. On Linux, I’ve
heard people talk about using
&lt;a href=&quot;https://github.com/jedisct1/dnscrypt-proxy&quot;&gt;dnscrypt-proxy&lt;/a&gt;… but I’ve never
tried myself.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_578/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png 578w&quot; sizes=&quot;80vw&quot;  alt=&quot;A screencapture from hostsman sources
manager&quot; loading=&quot;lazy&quot; width=&quot;578&quot; height=&quot;436&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;You can manage Update Sources
in hostsman&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Some tips from my daily life&lt;/h2&gt;
&lt;p&gt;Sometimes, I need to temporaly disable this hosts file. For example, when I need
to help &lt;a href=&quot;https://www.dareboost.com/&quot;&gt;Dareboost&lt;/a&gt; clients understand the impact of
third-party scripts on their pages (thus, I need to load these 3ps myself).&lt;/p&gt;
&lt;p&gt;To enable or disable my hosts file, I use a command line function that I’ve
develop and put in my &lt;code&gt;~/.profile&lt;/code&gt; file[^ozsh]: [^ozsh]: Actually, I put this
function in my &lt;code&gt;~/.zprofile&lt;/code&gt;, as I use &lt;a href=&quot;https://ohmyz.sh/&quot;&gt;Oh My ZSH&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;togglehost&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; /etc/host.bak &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo mv&lt;/span&gt; /etc/host.bak /etc/hosts
        &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hosts file is active again&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo mv&lt;/span&gt; /etc/hosts /etc/host.bak
        &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hosts file is set aside&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Once this function is loaded, activating or deactivating my hosts file is very
simple:&lt;/p&gt;
&lt;div class=&quot;language-terminal highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;terminal&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;togglehost
&lt;span class=&quot;go&quot;&gt;Hosts file is set aside
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;togglehost
&lt;span class=&quot;go&quot;&gt;Hosts file is active again
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But as I sometimes forget to put it back in place, I have set up a routine that
checks every minute that the file is in place and, if it is not the case, warns
me by using Jaime Piña’s &lt;a href=&quot;https://github.com/variadico/noti&quot;&gt;noti&lt;/a&gt; to trigger a
notification. To perform this regular check, I use &lt;code&gt;crontab&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* * * * * if [ ! -e /etc/hosts ]; then /usr/local/bin/noti -t &quot;Host file&quot; -m &quot;does not exists&quot;; fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have been using this technique for years now and, sometimes, I forget that my
hosts file protects me so much. Whenever I need to use someone else’s computer,
or temporarily disable my hosts file, I realize the level of comfort it provides
me.&lt;/p&gt;
&lt;p&gt;I’m well aware that tweaking its own hosts file is a good but technical
solution. It doesn’t completely replace an AdBlocker (or I haven’t aggregated
enough files yet) but it’s an incredible performance gain, which I highly
recommend for everyday browsing.&lt;/p&gt;
&lt;p&gt;Try it for yourself, and tell me what you think!&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Hosts files are your computer internal address books that guide Web requests to
the right servers. Fill your hosts file with domains pointing to nothingness,
and those requests will quickly and surely fail. People are sharing their hosts
file for years. Solutions now exist to concatenate them, and crowdsource a
solution to the dirty Web we’ve to deal with everyday.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;If you’ve never tested &lt;a href=&quot;https://brave.com/&quot;&gt;Brave Browser&lt;/a&gt;, I can only
encourage you to do so, and join the 4 million people that trust it to fix
the web. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Fri, 07 Sep 2018 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2018/09/one-host-file-to-block-them-all/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2018/09/one-host-file-to-block-them-all/</guid>
      
      <category>Performance Web</category>
      
      <category>Me, myself and I</category>
      
      <category>Outils</category>
      
      <category>Productivité</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Netflix: how to increase video brightness</title>
      
      <description>
          &lt;p&gt;My kids are on vacation with their grandmothers, which leaves me a lot of free
time to binge-watch TV shows on Netflix. Except I often get the impression that
the Netflix videos are too dark, or at least darker than they ought to be,
aren’t they?&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;So, between a PS4 game&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; and a novel chapter&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; (because there’s a life
outside Netflix), I made a little bookmarklet that brightens the videos of the
current page. To use it:&lt;/p&gt;
&lt;p&gt;Click and drag the following link in your bookmarks bar&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; :&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&amp;lt;a href=“javascript:(function(){var a=prompt(“Video
brightness?”,“100%”);a=/^\d+(.\d+)?%$/.test(a)?a:“100%”;Array.from(document.getElementsByTagName(“video”)).forEach(function(b){b.setAttribute(“style”,b.getAttribute(“style”)+“filter:
brightness(”+a+”);”)})})();” title=“Manage Video Brightness”&amp;gt;Manage Video
Brightness&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Then go to Netflix, launch your favorite series or movie and click on it!&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2018-08-08/joker.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-08-08/joker.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-08-08/joker.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: The Joker is clapping.&lt;/em&gt;&lt;/figure&gt;
&lt;p&gt;Please note that this bookmarklet should work widely, not just on Netflix. One
click on the bookmarklet and your browser will increase the brightness of all
the videos on the current page, provided that the page itself does not
&lt;a href=&quot;https://blog.dareboost.com/en/2016/08/content-security-policy-secure-your-website&quot;&gt;prevent style injection with a Content-Security-Policy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I tested on Firefox and Chrome, latest versions, on Mac. I will not go any
further, nor will I provide support. Consider this snippet of code as being
under &lt;a href=&quot;https://en.wikipedia.org/wiki/WTFPL&quot;&gt;WTFPL license&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;ins datetime=&quot;2019-04-18&quot;&gt;In a hurry? There is also a bookmark to
&lt;a href=&quot;/2019/04/bookmark-netflix-speed/&quot;&gt;speed up your Netflix video&lt;/a&gt; ?&lt;/ins&gt;&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;I am playing “Arkham Knight” by Rocksteady, and it’s a blast. I have a great
time and I think a lot about my former colleague Stéphane,
&lt;a href=&quot;https://nota-bene.org/Trois-jolis-souvenirs-de-traduction&quot;&gt;brilliant inventor of the famous “Batou” that the Joker uses to address Batman – the French equivalent to “Bats” –&lt;/a&gt;,
which gives the game a special flavor. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;I’m reading
“&lt;a href=&quot;https://en.wikipedia.org/wiki/The_Golden_Fool&quot;&gt;The Golden Fool&lt;/a&gt;” by Robin
Hobb, second volume of the “Tawny Man Trilogy”, which itself is part of the
“The Realm of the Elderlings” series from which I have already read the
seven previous books. And I plan to also read the next eight right within a
year. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;Feel free to rename the bookmark with a shorter label. For example, I use
the ☀️ (sun) emoji (and only that). &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 08 Aug 2018 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2018/08/bookmark-netflix-brightness/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2018/08/bookmark-netflix-brightness/</guid>
      
      <category>Netflix</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>[Dogfooding] How Dareboost has benefited from Custom Timings monitoring</title>
      
      <description>
          &lt;p&gt;We may be Web Performance experts, we still don’t have superpowers. We also need
tools to analyze our sites and applications. So when we released our new Custom
Timings feature, we naturally jumped at the chance to test it on Dareboost.com…
and immediately saw the benefit.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-app.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-app.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_600/https://boris.schapira.dev/assets/images/2018-05-24/en-app.png 600w&quot; sizes=&quot;80vw&quot;   alt=&quot;The Dareboost web application&quot; loading=&quot;lazy&quot; width=&quot;600&quot; height=&quot;318&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2018/05/dogfooding-dareboost-custom-timings/&quot;&gt;[Dogfooding] How Dareboost has benefited from Custom Timings monitoring&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;A few weeks ago, we have introduced a new feature in your page analysis reports
and monitors:
&lt;a href=&quot;https://blog.dareboost.com/en/2018/05/custom-timings-monitoring/&quot;&gt;Custom Timings&lt;/a&gt;,
tailor-made markers, to be placed in JavaScript using the User Timing API, that
you can then display in Dareboost to visualize their evolution over time.&lt;/p&gt;
&lt;p&gt;We’ve chosen to prioritize this feature within our backlog because we were
deeply convinced that it would allow our customers to better understand their
websites performance. In fact, using it is so simple that we immediately found a
practical application to meet our own needs!&lt;/p&gt;
&lt;p&gt;To explain this, let’s take a look under Dareboost’s hood first.&lt;/p&gt;
&lt;h2&gt;Dareboost: an AngularJS application personalized according to the current user’s rights&lt;/h2&gt;
&lt;p&gt;Any visitor consulting &lt;a href=&quot;https://www.dareboost.com/&quot;&gt;Dareboost website&lt;/a&gt; uses a
real Web Application. In other words, the user’s browser loads JavaScript code
that, once executed, takes over the browsing experience and emulates the
behaviour of an application instead of the navigation between multiple web
pages. For example, a user can switch from one screen to another without
reloading the side menu.&lt;/p&gt;
&lt;p&gt;To ensure this applicative behaviour in a web page, known as SPA (for Single
Page Application), we use a JavaScript framework: AngularJS. This framework
performs the customization operations, using an XHR request (XMLHttpRequest) to
retrieve the user’s context.&lt;/p&gt;
&lt;h2&gt;Two shakes of a lamb’s tail&lt;/h2&gt;
&lt;p&gt;We decided to set up several Custom Timings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;When AngularJS begins its bootstrapping: &lt;code&gt;angular_boostrap_start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When AngularJS is bootstrapped (and starts doing what we want him to do to
present Dareboost’s interface): &lt;code&gt;angular_boostrap_end&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When we ask Angular to fetch the current user’s context:
&lt;code&gt;userinfo_xhr_start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When the context is effectively recovered: &lt;code&gt;userinfo_xhr_stop&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When the content is displayed in the main area: &lt;code&gt;view_content_loaded&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Setting up these marks is so simple that some customers ask us if these are
really the only actions to take. Check it by yourself: once you have found which
portion of code corresponds to the behavior you want to monitor, just add this
code:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;performance.mark(&quot;angular_boostrap_start&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We really had nothing more to do for Dareboost to start collecting these new
data: no particular configuration, no declaration, or anything else. A few days
later, we consulted our monitoring data and the data were available. We didn’t
expect such results*!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-before.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-before.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_600/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-before.png 600w&quot; sizes=&quot;80vw&quot;   alt=&quot;Erratic timings for the userinfo_xhr_stop
mark&quot; loading=&quot;lazy&quot; width=&quot;600&quot; height=&quot;356&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;* In fact, we did, because we already had experienced slowdowns several times,
in a significant way. But seeing them on a plot is something else.&lt;/p&gt;
&lt;h2&gt;Elementary, my dear Watson!&lt;/h2&gt;
&lt;p&gt;What’s going on? The AngularJS booting phase, marked by the events
&lt;code&gt;angular_bootstrap_start&lt;/code&gt; and &lt;code&gt;angular_bootstrap_end&lt;/code&gt;, is quite obvious. But,
surprisingly, we find the context request in the middle. Actually, this is only
fair: the context request and loading of AngularJS are asynchronous but, in
reality, depend on each other. Indeed, the request must wait until AngularJS is
loaded to be initiated. If we want a finer follow-up of this request, we will
surely need to move this marker so that it better meets its purpose.&lt;/p&gt;
&lt;p&gt;The Custom Timing of the main area comes next, which is reassuring in
Dareboost’s ability to respond quickly to user demand, since it is mainly on
this area that he looks at.&lt;/p&gt;
&lt;p&gt;Finally, we see the Custom Timing of the context request response, which is
unsteady and bad: almost two seconds for context recovery. Two seconds of
latency is quite a long delay for a busy user! Analyses that refuse to start,
potentially unavailable scenarios (because they did not have the item in the
menu)… we had to fix it quickly.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-evolution.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-evolution.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_600/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-evolution.png 600w&quot; sizes=&quot;80vw&quot;  alt=&quot;Immediate action by the development team solved the problem
&quot; loading=&quot;lazy&quot; width=&quot;600&quot; height=&quot;362&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Immediate action by the development
team solved the problem&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Fortunately, the team promptly identified the back-end side issues that could
explain the delay. After a minor release, the situation clearly improved:&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-after.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-after.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_600/https://boris.schapira.dev/assets/images/2018-05-24/en-graph-after.png 600w&quot; sizes=&quot;80vw&quot;  alt=&quot;This is how Dareboost performs now&quot; loading=&quot;lazy&quot; width=&quot;600&quot; height=&quot;359&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;This is how Dareboost performs now&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The situation has returned to a normal behaviour, with the main contents
appearing simultaneously with the determination of the user context.&lt;/p&gt;
&lt;h2&gt;In a nutshell&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Setting up Custom Timings takes a few seconds&lt;/strong&gt; and does not require any
special configuration in Dareboost&lt;/li&gt;
&lt;li&gt;Custom Timings are new indicators to &lt;strong&gt;understand what was invisible
before&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Custom Timings are particularly suitable for &lt;strong&gt;monitoring the performance of
SPAs&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;The shoemaker’s children don’t always go barefoot!&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 24 May 2018 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/en/2018/05/dogfooding-dareboost-custom-timings/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2018/05/dogfooding-dareboost-custom-timings/</guid>
      
      <category>Performance Web</category>
      
      <category>Metrics</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Back to static with JAMStack: a paradigm shift for better UX and web performance</title>
      
      <description>
          &lt;p&gt;For several years now, a new range of solutions have emerged in the web
technologies landscape. Static site generators, headless CMS, content
infrastructure… these solutions contribute to a global trend. “Static trend”,
“JAMStack”, several names exist but none really covers what is an overall new
proposal for web application architecture, and somehow a comeback to the roots
of the Web.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;Large nested metal gears&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1281&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2018/02/static-website-web-performance/&quot;&gt;Back to static with JAMStack: a paradigm shift for better UX and web performance&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;Where do we come from?&lt;/h2&gt;
&lt;p&gt;When a user tries to access a web page, their browser makes a request to the
server that hosts it. Either the server answers the page immediately, exactly as
it is stored, or the server generates it by executing code on demand.&lt;/p&gt;
&lt;p&gt;Although the Web was conceived as an entanglement of static files, server-side
programming languages appeared very early and are now widely used.
&lt;a href=&quot;https://w3techs.com/technologies/overview/programming_language/all&quot;&gt;According to W3Techs&lt;/a&gt;,
more than 80% of servers that use server-side language are running PHP. And
hosting providers offering servers without dynamic language support are almost
non-existent.&lt;/p&gt;
&lt;p&gt;Yet, the dynamic generation of HTTP responses presents significant disadvantages
in terms of web performance. A dynamic webpage is often built around a web
server that loads an execution language that analyzes the HTTP request, often
requests a database (sometimes located on another server in the datacenter) and
third-party services, populates a logical model that reveals itself through an
aggregate of templates to generate the HTML response. Quite logically so,
&lt;a href=&quot;https://www.dareboost.com/en/glossary#ttfb&quot;&gt;Time To First Byte&lt;/a&gt; (TTFB) is
longer.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_975/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 975w&quot; sizes=&quot;80vw&quot;  alt=&quot;Dareboost graph of Pages Timings monitoring. Peaks on the
TTFB imply peaks on the Speed Index.&quot; loading=&quot;lazy&quot; width=&quot;975&quot; height=&quot;569&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;A
high TTFB penalizes the Speed Index of a page.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;To optimize server response time, many caching solutions have appeared over the
years. The first user who requests the page undergoes the cost of generation,
but the result is stored on one or more proxy servers and sometimes synchronized
over different locations, all around the World. These cached pages are then
responded to all similar requests, ensuring a quick and consistent delivery.
Nowadays, it is possible to find software caching solutions (like
&lt;a href=&quot;https://varnish-cache.org/&quot;&gt;Varnish&lt;/a&gt;), platforms and infrastructures (Content
Delivery Networks). All of them ensure that what’s dynamic can become static
again. The leopard can’t change its spots.&lt;/p&gt;
&lt;h2&gt;However, the use of static content has other advantages.&lt;/h2&gt;
&lt;p&gt;If you want to deliver your static pages, you must have compiled them up front.
This fact, as trivial as it may seem, changes everything. Indeed, compilation
turns out to be the main advantage of static: shift the complexity from the
Production environment to the integration process.&lt;/p&gt;
&lt;p&gt;If your pages are served by a web server without being generated first, you have
no need for a server-side language to be executed. As a consequence, many attack
vectors disappear. You can’t steal confidential data by injecting malicious code
if you have neither a database nor a server-side execution language.&lt;/p&gt;
&lt;p&gt;Not executing code on the server also means that CPU consumption is very low for
each HTTP response, giving you a much better scalability. Be warned, though: as
we’ll see, deployment is a key factor and can consume CPU time. Resilience is
another advantage. In the worst situation, an error may occur during generation
but can be detected before deployment. Technical problems resulting from a bad
contribution, for instance, no longer have an impact on the site browsed by
visitors. In the worst scenario, the website is not broken. Its content is
simply not up-to-date.&lt;/p&gt;
&lt;p&gt;However, these advantages are only the tip of the iceberg. The static trend
allows you to completely transform the way a site is published. No wonder
&lt;a href=&quot;https://www.smashingmagazine.com/2017/03/a-little-surprise-is-waiting-for-you-here/&quot;&gt;Smashing Magazine already migrated&lt;/a&gt;!&lt;/p&gt;
&lt;h2&gt;Static is a distribution modality. What’s its technical stack?&lt;/h2&gt;
&lt;p&gt;A static site generator (SSG) is a software executed locally or as a service
that produces (and sometimes deploys) a static website using some data sources
for model and configuration, and templates containing the business logic.&lt;/p&gt;
&lt;p&gt;The SSG market is booming, with
&lt;a href=&quot;https://www.staticgen.com/&quot;&gt;a new product launching twice a month&lt;/a&gt;. Most of
them generate a website from a set of files, often written with a lightweight
syntax like &lt;a href=&quot;https://daringfireball.net/projects/markdown/&quot;&gt;Markdown&lt;/a&gt; or
Asciidoc. The responsibility for the conversion to HTML is assigned to both a
templating engine (Liquid, Go Template, Nunjucks) – responsible for the logic –
and a converter (&lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;kramdown&lt;/a&gt;,
&lt;a href=&quot;https://commonmark.org/&quot;&gt;commonmark&lt;/a&gt;,
&lt;a href=&quot;https://github.com/russross/blackfriday&quot;&gt;blackfriday&lt;/a&gt;,
&lt;a href=&quot;https://asciidoctor.org/&quot;&gt;Asciidoctor&lt;/a&gt;…) responsible for transforming the
markup into HTML. SSGs are nothing more than the technical orchestrators of the
website’s generation and, therefore, are mainly a playground for front-end
developers who know how they tick.&lt;/p&gt;
&lt;p&gt;Indeed, SSGs are technical tools, not substitutes for Content Management
Systems. However, they become really interesting when you follow the lead of
external data sources because then, we can talk about CMS that would not be used
to render HTML, but only to store and expose data. They are called Headless CMS.&lt;/p&gt;
&lt;p&gt;Headless CMS are:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A way to store data A CRUD UI An API to the data
&lt;cite&gt;”&lt;a href=&quot;https://css-tricks.com/what-is-a-headless-cms/&quot;&gt;What is a Headless CMS?&lt;/a&gt;”,
Chris Coyier&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And they can often be obtained by using your usual systems. Wordpress, for
instance, has a &lt;a href=&quot;https://developer.wordpress.org/rest-api/&quot;&gt;REST API&lt;/a&gt;. Drupal
has a whole &lt;a href=&quot;https://groups.drupal.org/headless-drupal&quot;&gt;working group&lt;/a&gt; working
on Headless. However, here again, the market is booming with
&lt;a href=&quot;https://www.headlesscms.org/&quot;&gt;software and services&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Why on earth would we want to separate the contributive environment and the
generation tool? Because of the separation of concerns.&lt;/p&gt;
&lt;p&gt;The development team, liberated from the burden of maintaining a database, can
focus on the platform’s technical evolution and the assets pipeline while the
contribution team can sharpen its content.&lt;/p&gt;
&lt;p&gt;Contributors can work on flat files which are easy to store and modify. Their
only common language with developers becomes the metadata passed in each file,
often written with &lt;a href=&quot;https://jekyllrb.com/docs/frontmatter/&quot;&gt;Front-Matter&lt;/a&gt;. They
can use the editing tool or service of their choosing, even one that ensures
collaboration. They also can benefit from source code versioning whenever they
want to consult the history of their files, merge several versions or branch to
write content they don’t want to publish right away.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot;A diagram of the contribution and development flow of a
site that clearly shows the separation of concerns between developers and
contributors.&quot; loading=&quot;lazy&quot; width=&quot;1604&quot; height=&quot;976&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Carrot (a digital agency)
static CMS workflow, as described
&lt;a href=&quot;https://carrot.is/coding/static_cms.html&quot;&gt;on their blog&lt;/a&gt;&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;After the contribution of the contents, the generation of the website and the
deployment are often operated by the same component of the infrastructure. To
monitor the performance of this step, you need to evaluate performance of the
compilation server during the generation and the deployment (duration, CPU
consumption, memory). But that’s not all: remember to also monitor the targeted
infrastructure (consisting of one or more servers), because copying tasks can be
demanding.&lt;/p&gt;
&lt;p&gt;This means that we are no longer in a system where the main metric of
scalability is the number of simultaneous visitors. DevOps must completely
change their thinking to create a system that can adapt to the frequency of
generation and deployment requested by contributors.&lt;/p&gt;
&lt;p&gt;Here again,
&lt;a href=&quot;https://www.thenewdynamic.org/tools/hosting-deployment/&quot;&gt;actors have emerged&lt;/a&gt;.
Actually, the best known and probably the most effective may be Netlify. Its
clean and simple interface will help you connect your source code repository in
a few clicks. Then, Netlify will generate and deploy your website for each
commit, on the fly.&lt;/p&gt;
&lt;p&gt;A Headless CMS, an SSG, and a deployment orchestrator: we now have our full
back-end stack. Yet, we still generate a static website with no personalized
content. As the users’ demand for dynamism or personalization has never been so
strong, aren’t we making a mistake?&lt;/p&gt;
&lt;h2&gt;Static? Not so much.&lt;/h2&gt;
&lt;p&gt;We have seen that this static stack produces a very standardized markup. In
order to introduce dynamism and personalization, we will need to import data -
delivered through APIs - and process it on the client side - hence rely on
Javascript.&lt;/p&gt;
&lt;p&gt;This new “&lt;strong&gt;J&lt;/strong&gt;avaScript + loosely coupled &lt;strong&gt;A&lt;/strong&gt;PI + &lt;strong&gt;M&lt;/strong&gt;arkup” stack has a
name: the &lt;a href=&quot;https://jamstack.org/&quot;&gt;JAMStack&lt;/a&gt; and several leading actors, each of
those featuring a specific set of services: &lt;a href=&quot;https://stripe.com/&quot;&gt;Stripe&lt;/a&gt; for
the payment, &lt;a href=&quot;https://www.algolia.com/&quot;&gt;Algolia&lt;/a&gt; for instant search,
&lt;a href=&quot;https://disqus.com/&quot;&gt;Disqus&lt;/a&gt; or &lt;a href=&quot;https://www.intensedebate.com/&quot;&gt;IntenseDebate&lt;/a&gt;
for comments, &lt;a href=&quot;https://snipcart.com/&quot;&gt;Snipcart&lt;/a&gt; for e-commerce,
&lt;a href=&quot;https://cloudinary.com/&quot;&gt;Cloudinary&lt;/a&gt; or &lt;a href=&quot;https://www.twicpics.com/&quot;&gt;Twicpics&lt;/a&gt;
for media management, &lt;a href=&quot;https://formspree.io/&quot;&gt;Formspree&lt;/a&gt; or
&lt;a href=&quot;https://staticman.net/&quot;&gt;Staticman&lt;/a&gt; for forms… Note that not all of those
products are designed for the JAMStack: you can perfectly use Algolia blazing
fast API from the server-side.&lt;/p&gt;
&lt;p&gt;JAMStack is a real paradigm shift. The website being served to the visitor
becomes, more than ever, a shell in which services, whether self-hosted or third
parties, are dynamically injected. It is even possible to rely on several
services for the same purpose and switch to a fallback if the main service is
not available.&lt;/p&gt;
&lt;p&gt;And since you’re shifting a lot of your efforts to the Front End, why not go
further and build your site with a Single Page App (SPA) framework like Vue,
Angular or React, or transform it into a complete Progressive Web App (PWA),
designed to be “offline first”? This is not inherent to JAMStack, but
facilitated by the change of development paradigm.&lt;/p&gt;
&lt;p&gt;For the user, however, the difference is small. Try to search a product
&lt;a href=&quot;https://community.algolia.com/instantsearch.js/v2/examples/e-commerce/&quot;&gt;on this website&lt;/a&gt;.
Do you experience something different than from a PHP website?&lt;/p&gt;
&lt;p&gt;For contributors, the paradigm shift changes everything as it separates the
contribution platform from the one that hosts the website. Some of them will
prefer to use software that features writing aids (correction, suggestions,
documentary contributions). Others will be satisfied with customizable online
contribution platforms. Assuming that the storage of the content is independent
of the solution, each of them can use their favorite tool without interfering
with others’.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1459/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 1459w&quot; sizes=&quot;80vw&quot;  alt=&quot;Forestry.io editing interface&quot; loading=&quot;lazy&quot; width=&quot;1459&quot; height=&quot;858&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Forestry.io editing interface. The edited contents are
saved in the files of a git repository and can also be edited with a text
editor.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;But some products go further and turn the contribution into a first-class
experience. Contributors can take advantage of tailor-made solutions, with rich
and multimedia contribution options, without any impact on the publication flow
or the targeted website performance.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2018-02-21/4_prismic.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-02-21/4_prismic.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-02-21/4_prismic.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Prismic.io slices&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;&lt;a href=&quot;https://prismic.io/&quot;&gt;Prismic.io&lt;/a&gt; is one of the most
customizable Content Platform (here, reusable slices). Contents or layouts,
everything is contributed on the platform. During the build, the SSG requests
the Prismic.io API to retrieve the information.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h2&gt;Static or dynamic? Tomayto, tomahto&lt;/h2&gt;
&lt;p&gt;Although the JAMStack approach has many advantages, including safety,
performance, scaling, development and contribution experiences, it also implies
new risks that would be dangerous to ignore.&lt;/p&gt;
&lt;p&gt;The first risk is to get lost in the plethora of Headless CMS, generators and
service platforms. Take the time to evaluate your needs because each solution
has its advantages and drawbacks. &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;, for example,
is a well-known SSG, developed in Ruby, well documented but fairly slow.
&lt;a href=&quot;https://gohugo.io/&quot;&gt;Hugo&lt;/a&gt;, on the other hand, is a much faster SSG but is also
more complex to handle if you are a novice. If you don’t publish content at
high-frequency, does the generation time matter so much, for an equivalent
result?&lt;/p&gt;
&lt;p&gt;Please also pay attention to the terms of use of the chosen services. At
Dareboost, we often warn our users against third-party script abuses. If you
need comments and use Disqus, do you agree to dynamically inject their ads? If
you’ve followed
&lt;a href=&quot;https://blog.dareboost.com/en/2016/08/how-to-implement-content-security-policy/&quot;&gt;our advice on Content Security Policies&lt;/a&gt;,
you shouldn’t be concerned with that, hopefully.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;fr&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Disqus started injecting adverts into pages that use their comment system, like my blog. Their problem is that my CSP doesn&amp;#39;t allow their adverts to be included 😎 &lt;a href=&quot;https://t.co/c3lTAhCjS7&quot;&gt;pic.twitter.com/c3lTAhCjS7&lt;/a&gt;&lt;/p&gt;&amp;mdash; Scott Helme (@Scott_Helme) &lt;a href=&quot;https://twitter.com/Scott_Helme/status/961612668992966656?ref_src=twsrc%5Etfw&quot;&gt;8 février 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;Another risk but not the least: even if your website is less prone to security
issues, it can still be attacked through the API it relies on. You absolutely
need to ensure the scripts you use
&lt;a href=&quot;https://blog.dareboost.com/en/2017/01/website-analysis-new-checkpoints-dareboost/#third-party-content-loading&quot;&gt;have not been tampered with&lt;/a&gt;
and that every exchange with a third-party service is secure over HTTPS. Make
sure that your self-hosted APIs comply with all the security best practices and
do not hesitate to scrutinize the SLAs of the third-party services you depend
on.&lt;/p&gt;
&lt;p&gt;Finally, these APIs will also have to be carefully selected according to the
sustainability of the organizations that support them. If you transfer
responsibility for your key features to third-party services, you’d better make
sure they will stick and maintain a constant level of quality. A good way to do
this is to
&lt;a href=&quot;https://www.dareboost.com/en/tool/user-journey-monitoring&quot;&gt;monitor User Journeys&lt;/a&gt;
that are able to simulate functional interactions with your website.&lt;/p&gt;
&lt;h2&gt;A new land of opportunity&lt;/h2&gt;
&lt;p&gt;Once you have fully grasped the specific risks and put in place appropriate
workflows, the JAMStack nonetheless presents its share of opportunities. The
cost of migrating from Headless CMS or SSG solution to another is often quite
low. You can easily switch from a local contribution on files to content
infrastructure like Netlify CMS, Forestry, Contentful or Prismic, which allows
you to quickly evaluate the solution that best suits your needs. Creating a
static site takes time and requires an architecture that involves orchestrating
several solutions. Today, it may seem complex but remember your first dynamic
site: choose a host, master FTP, juggle the web server logs… none of it was
easy. You will learn this logic step by step. For the experienced JAMStack
users, it becomes natural.&lt;/p&gt;
&lt;p&gt;Unified platforms such as Netlify, while presenting a risk of centralization,
nevertheless offer an impressive catalog of services: website generation and
deployment, DNS registration, SSL certificates and forms management, serverless
functions, Content Delivery Network…&lt;/p&gt;
&lt;p&gt;Enough out-of-the-box features to allow your Front-End team to focus on
front-end development and web performance optimization. With such a low Time To
First Byte, the team can fully focus on UX through the measurement of the
&lt;a href=&quot;https://blog.dareboost.com/en/2018/02/speed-index-web-performance/&quot;&gt;Speed Index&lt;/a&gt;!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Thanks to Erin Symons, &lt;a href=&quot;https://twitter.com/dirtyf&quot;&gt;Frank Taillandier&lt;/a&gt; and the
whole &lt;a href=&quot;https://jamstatic.fr/&quot;&gt;jamstatic.fr community&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/budparr&quot;&gt;Bud Parr&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/Nico3333fr&quot;&gt;Nicolas Hoffmann&lt;/a&gt; and my colleagues
&lt;a href=&quot;https://twitter.com/GuilbertPhil&quot;&gt;Philippe Guilbert&lt;/a&gt; and
&lt;a href=&quot;https://twitter.com/DamienJubeau&quot;&gt;Damien Jubeau&lt;/a&gt; for their time and advice.&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;“&lt;a href=&quot;https://www.smashingmagazine.com/2015/11/modern-static-website-generators-next-big-thing/&quot;&gt;Why Static Site Generators Are The Next Big Thing&lt;/a&gt;”,
Matt Biilmann&lt;/li&gt;
&lt;li&gt;“&lt;a href=&quot;https://thenewstack.io/dont-call-contentfuls-content-infrastructure-cms/&quot;&gt;Don’t Call Contentful’s Content Infrastructure a ‘CMS’&lt;/a&gt;”,
Michelle Gienow&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 22 Feb 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/en/2018/02/static-website-web-performance/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2018/02/static-website-web-performance/</guid>
      
      <category>Performance Web</category>
      
      <category>JAMStack</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Optimize your MP4 video for better performance</title>
      
      <description>
          &lt;p&gt;Representing more than 75% of the videos served on the Internet, MP4 is the most
commonly used format today. However, MP4 is often used improperly, which can
have an unfortunate impact on the User Experience. Let’s see how we can improve
this.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot;A graphic&quot; loading=&quot;lazy&quot; width=&quot;2189&quot; height=&quot;1016&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Usage
evolution of the different video files types on the web. Source: HttpArchive
through &lt;a href=&quot;https://goo.gl/srggsf&quot;&gt;a BigQuery query&lt;/a&gt;&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2018/01/optimize-your-mp4-video-for-better-performance/&quot;&gt;Optimize your MP4 video for better performance&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Whether you are a luxury player wishing to broadcast extremely high-quality
videos or a news platform looking for an eye-catching proposal, video has become
an essential part of the Web in just a few years. But adding video to a site can
be challenging.&lt;/p&gt;
&lt;p&gt;The most widely used and supported encoding is undoubtedly H.264, served by an
MP4 file. This format is supported by most video manipulation software:
&lt;a href=&quot;https://handbrake.fr/&quot;&gt;Handbrake&lt;/a&gt;, &lt;a href=&quot;http://www.squared5.com/&quot;&gt;MPEG Streamclip&lt;/a&gt;,
&lt;a href=&quot;https://www.openshot.org/&quot;&gt;OpenShot&lt;/a&gt;… even &lt;a href=&quot;https://www.videolan.org/&quot;&gt;VLC&lt;/a&gt;!
But few of them offer a dedicated export for the Web.&lt;/p&gt;
&lt;p&gt;However, you don’t broadcast a video on the Internet like you do on a desktop
computer. There are a few things to be careful about.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_687/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 687w&quot; sizes=&quot;80vw&quot;  alt=&quot;VLC capture&quot; loading=&quot;lazy&quot; width=&quot;687&quot; height=&quot;535&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;VLC
&amp;quot;Convert &amp;amp; Stream&amp;quot; interface&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;Disclaimer: the following examples will make intensive use of
&lt;a href=&quot;https://www.ffmpeg.org/&quot;&gt;ffmpeg&lt;/a&gt;, one of the most popular video editing program
among developers, but most of the optimizations should be available in your
favorite software.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Reducing file weight: the right balance between quality and performance&lt;/h2&gt;
&lt;p&gt;A heavy video will cause an increase in the total page weight. Keep in mind that
some Internet Providers sell packages that are limited in total bandwidth.
Making your pages unnecessarily heavy will not help your visitors.&lt;/p&gt;
&lt;p&gt;To optimize your video, you need to ask yourself how it delivers its content
over the network. Even if the file size seems small, it may be possible to
improve the bitrate for an optimal diffusion.&lt;/p&gt;
&lt;p&gt;What is the bitrate? To say it simply, bitrate is the amount of data needed to
encode one second of video. The more data you allocate per second, the better is
the quality but the heavier is the file. I don’t have a magic formula to share
that would compute the perfect bitrate. Instead, I would like to invite you to
ask yourself about the quality required for each individual video usage.&lt;/p&gt;
&lt;p&gt;For example, it is interesting to evaluate the necessary bitrate according to
the abrupt changes presented in the video: the more fixed is the content, the
less data you will need to allocate to each second of the video. Alternatively,
if the video contains a lot of motion, the bitrate needed for equivalent quality
will increase.&lt;/p&gt;
&lt;p&gt;You can easily anticipate the weight of a video after encoding by using either a
constant bitrate over the entire video, or a
&lt;a href=&quot;https://en.wikipedia.org/wiki/Variable_bitrate#Multi-pass_encoding_and_single-pass_encoding&quot;&gt;multi-pass encoding&lt;/a&gt;.
Here is a comparison between an original 10-second extract of a footage from the
June 2009 Endeavour liftoff and a two-pass encoding with ffmpeg. Left part
weighted 85MB, right video weighted 1,2MB after being optimized:&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/M99TPB7qMsQ&quot; title=&quot;Original vs. Constant Rate Factor 24 (ffmpeg h264)&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;This example shows what can technically be done to improve the weight of a
video, but we can also extrapolate optimizations from the video purpose. It is
quite common, for example, to visit web pages containing a large centered
content banner with a welcoming message. Sometimes, behind this “Hero
Container”, a background video is played.&lt;/p&gt;
&lt;p&gt;These videos are neither intended to be viewed nor useful for conversion. They
often are a subtle improvement, only intended to beautify the page and not meant
to be distracting. Do you need this video to be of the highest possible quality?
Using a blurring effect like
&lt;a href=&quot;https://yalantis.com/blog/experiments-with-ffmpeg-filters-and-frei0r-plugin-effects/&quot;&gt;the frei0r iirblur effect&lt;/a&gt;,
you can slightly fog your original content, hence gaining precious kilobytes.&lt;/p&gt;
&lt;p&gt;With ffmpeg:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg -i origin.mp4 -vf frei0r=iirblur:0.4 -a:c copy blurred.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;-vf frei0r=iirblur:0.4&lt;/code&gt; option telles ffmpeg to blur, using a 40 % factor,
while the &lt;code&gt;-a:c copy&lt;/code&gt; option tells it to keep the audio track as it is.&lt;/p&gt;
&lt;p&gt;Result:&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/nwGDXk9eE8s&quot; title=&quot;Clear vs Blur (ffmpeg+frei0r)&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Another possible optimization: the audio track. If your video is not meant to
play sound, why keep this track? Don’t hesitate to remove it:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; origin.mp4 &lt;span class=&quot;nt&quot;&gt;-an&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-vcodec&lt;/span&gt; copy muted.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;-an&lt;/code&gt; option tells ffmpeg to disable the audio track while the
&lt;code&gt;-vcodec copy&lt;/code&gt; option tells it to keep the video track as it is. Don’t forget to
also explicit the absence of sound to the browser by using
&lt;a href=&quot;https://developer.mozilla.org/fr/docs/Web/HTML/Element/Video#attr-muted&quot;&gt;the &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt; element muted attribute&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Even if your video is lightweight, your work is not finished. You need to focus
on the video purpose, which is quite often to be streamed.&lt;/p&gt;
&lt;h2&gt;Start playback before downloading the entire content&lt;/h2&gt;
&lt;p&gt;Here’s how streaming works: when a video playback is requested, the browser will
fetch the file to find the video metadata. MP4 video metadata includes such
things as display characteristics, time scale and duration. Without this
information, the browser cannot start playback!&lt;/p&gt;
&lt;p&gt;If your server is configured to accept
&lt;a href=&quot;https://en.wikipedia.org/wiki/Byte_serving&quot;&gt;Byte Serving&lt;/a&gt;, which means it has
included an Accept-Ranges header in its initial HTTP response, the browser will
fetch the file piece by piece through several partial content requests (HTTP
Code 206) to the resource. As soon as it finds the video metadata, it will be
able to start playback while downloading the complete file.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_851/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 851w&quot; sizes=&quot;80vw&quot;  alt=&quot;ChromeDevTools capture, &amp;quot;Network&amp;quot; tab&quot; loading=&quot;lazy&quot; width=&quot;851&quot; height=&quot;210&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;In this example, the browser performs three requests
before obtaining metadata and beginning playback.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;If your server does not support Range Requests, the browser has no choice but to
download the entire file. If your video is in autoplay, the bandwidth available
to download other resources needed to render the page will be reduced. The time
required for the display will increase, degrading the user experience.&lt;/p&gt;
&lt;h2&gt;Where is my video metadata stored?&lt;/h2&gt;
&lt;p&gt;An MP4 file breaks down into several units of data called atoms. The metadata
are contained in the movie atom movie, also called &lt;code&gt;moov&lt;/code&gt; atom. A software such
as &lt;a href=&quot;http://mp4creator.sourceforge.net/&quot;&gt;MP4creator&lt;/a&gt; or
&lt;a href=&quot;http://atomicparsley.sourceforge.net/&quot;&gt;AtomicParsley&lt;/a&gt; can help you visualize
the atoms of an MP4 file.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_730/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 730w&quot; sizes=&quot;80vw&quot;  alt=&quot;Command-line use of AtomicParsley&quot; loading=&quot;lazy&quot; width=&quot;730&quot; height=&quot;389&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;In the example above, the &lt;code&gt;moov&lt;/code&gt; atom comes after the
&lt;code&gt;mdat&lt;/code&gt; atom (4th line).&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;There are several methods to move the moov atom to the first position. Software
such as Handbrake offers
&lt;a href=&quot;https://handbrake.fr/docs/en/latest/advanced/web-optimised.html&quot;&gt;a Web Optimized option&lt;/a&gt;.
In other softwares, this option is called MP4 “Fast Start”.&lt;/p&gt;
&lt;p&gt;ffmpeg can quickly correct a video through the option -movflags faststart, that
runs a second pass moving the moov atom to the beginning of the file (see
&lt;a href=&quot;https://ffmpeg.org/ffmpeg-formats.html#toc-Options-8&quot;&gt;the documentation&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; origin.mp4 &lt;span class=&quot;nt&quot;&gt;-acodec&lt;/span&gt; copy &lt;span class=&quot;nt&quot;&gt;-vcodec&lt;/span&gt; copy &lt;span class=&quot;nt&quot;&gt;-movflags&lt;/span&gt; faststart fast_start.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you want to learn more about the movie atom, don’t miss
“&lt;a href=&quot;http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html&quot;&gt;Understanding the MPEG-4 Movie Atom&lt;/a&gt;”
by Maxim Levkov.&lt;/p&gt;
&lt;h2&gt;Multiple sources for targeted performance&lt;/h2&gt;
&lt;p&gt;Although h264 is the most widely used and supported codec, it is not necessarily
the most effective in every cases. We have already seen that
&lt;a href=&quot;https://blog.dareboost.com/en/2017/10/optimize-images-to-reduce-page-weight-file-formats-tools-and-rwd/&quot;&gt;the &lt;code&gt;&amp;lt;image&amp;gt;&lt;/code&gt; tag accepts several sources, allowing the browser to fetch WebP images for Chrome users&lt;/a&gt;.
The &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt; element can also accept multiple sources and the WebP equivalent
for videos is WebM.&lt;/p&gt;
&lt;p&gt;ffmpeg can encode WebM files, provided it is installed with the &lt;code&gt;--with-libvpx&lt;/code&gt;
option. Here is an example of a two-pass encoding with a 1MB targeted bitrate,
using &lt;a href=&quot;https://trac.ffmpeg.org/wiki/Encode/VP9&quot;&gt;the VP9 video encoder&lt;/a&gt; (on
Windows, please replace &lt;code&gt;/dev/null&lt;/code&gt; by &lt;code&gt;NUL&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; source.mp4 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:v libvpx-vp9 &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt;:v 1M &lt;span class=&quot;nt&quot;&gt;-pass&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; webm /dev/null &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; source.mp4 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:v libvpx-vp9 &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt;:v 1M &lt;span class=&quot;nt&quot;&gt;-pass&lt;/span&gt; 2 output.webm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From the optimized 1.2MB video of Endeavour Shuttle presented at the beginning
of the article, this command generates a WebM file of 715KB, i.e. &lt;strong&gt;a 40% weight
cut&lt;/strong&gt;. Too bad WebM is not
&lt;a href=&quot;https://caniuse.com/#feat=webm&quot;&gt;more widely supported&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Last pieces of advice&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Be careful with the autoplay&lt;/strong&gt;. Not only is this practice perceived negatively
by many users if it is not used properly (in a subtle and unobtrusive way,
behind a hero background for example), but also the video playback will always
consume some bandwidth, slowing down the download of other resources.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;If you want to play videos in Full HD or maximize UX, use industry-leading
solutions.&lt;/strong&gt; There is a wide variety of SaaS or appliance for managing, encoding
and broadcasting content. Whether you use a streaming solution, an Online Video
Platform (OVP) or an Enterprise Video Content Manager (ECVM), your users will
appreciate the adaptive bitrate streaming. If they have access to a high quality
network: the video is clear and the colors are rich. If their network suddenly
loses capacity, the video adapts by sacrificing a little bit of quality, to keep
the playback smooth. To achieve this challenge, a JavaScript script detects each
user’s current bandwidth and dynamically switches the video source between
several versions of a video encoded with different bitrates, ensuring an optimal
user experience in any situation. If you’re interested, take a look at
&lt;a href=&quot;https://www.brightcove.com/fr/&quot;&gt;Brightcove&lt;/a&gt;,
&lt;a href=&quot;https://fr.corp.kaltura.com/&quot;&gt;Kaltura&lt;/a&gt;, &lt;a href=&quot;https://www.qumu.com/&quot;&gt;Qumu&lt;/a&gt;, etc.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Sometimes, the best video is no video&lt;/strong&gt;. Do not hesitate to hide the video in
some situations, especially if it is decorative. A well-placed CSS media query
and you’ll save your mobile users from a bad experience. Also, consider
supporting the
&lt;a href=&quot;https://tools.ietf.org/html/draft-ietf-httpbis-client-hints-04#section-3.5&quot;&gt;Save-Data Client Hint&lt;/a&gt;
as it is an explicit browser opt-in into a reduced data usage mode.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Reduce the weight of your files&lt;/strong&gt; by using optimization strategies that
depend on the content and purpose of your videos.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Optimize streaming&lt;/strong&gt; by encoding your videos to serve metadata as soon as
possible.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Propose alternatives to MP4&lt;/strong&gt;, such as WebM.&lt;/li&gt;
&lt;li&gt;Be careful with autoplay, consider dedicated solutions for Full HD and don’t
hesitate to hide videos when needed.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Thanks to &lt;a href=&quot;https://www.linkedin.com/in/ravana/&quot;&gt;Ravana Renoncé&lt;/a&gt; and
&lt;a href=&quot;https://twitter.com/rick_viscomi&quot;&gt;Rick Viscomi&lt;/a&gt; for their help.&lt;/em&gt;&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 18 Jan 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/en/2018/01/optimize-your-mp4-video-for-better-performance/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2018/01/optimize-your-mp4-video-for-better-performance/</guid>
      
      <category>Performance Web</category>
      
      <category>Video</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Defer scripts to speed up rendering</title>
      
      <description>
          &lt;p&gt;&lt;em&gt;Artists are not the only ones who suffer from a blank page, so are your users.
Their frustration can lead them to abandon your page prematurely. Several
techniques can help you to speed up rendering and avoid that problem. One of
them is to defer parsing of JavaScript files.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;A chess game before the start of a game. Zoom in on the blacks.&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1280&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2017/12/defer-scripts-to-speed-up-rendering/&quot;&gt;Defer scripts to speed up rendering&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Modern browsers are designed to render pages more quickly. For example, they
scan the page as it comes in, looking for the URLs of resources which will be
needed later in the rendering of the page (images, CSS but more specifically,
JavaScript files). This is called a
&lt;a href=&quot;https://plus.google.com/+IlyaGrigorik/posts/8AwRUE7wqAE&quot;&gt;preload scan&lt;/a&gt; in
Chrome and Safari, a
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing&quot;&gt;speculative parsing&lt;/a&gt;
in Firefox and a lookahead download in Internet Explorer. This feature allows
the browser to start fetching the ressources while constructing its own
modelisation of the HTML code, the Document Object Model (DOM) and its own
modelisation of the CSS code, the CSS Object Model (CSSOM).&lt;/p&gt;
&lt;p&gt;This is not a continuous process though, because of Javascript. As these scripts
may modify HTML elements and their style, the browser stops building the DOM
each time it fetch and parse a Javascript file. Afterwards the browser waits for
a break into the CSSOM construction to execute the script. Since the DOM and the
CSSOM are the backbone of rendering: no DOM &amp;amp; CSSOM, no rendering.&lt;/p&gt;
&lt;p&gt;In this article, we will focus on what can be done about JavaScript files to
improve render timings.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_548/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png 548w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture of the Chrome DevTools Performance tab. A loading
timeline displays the different steps in color. A large yellow area is
surrounded by blue spots. The first image appears only at the
end.&quot; loading=&quot;lazy&quot; width=&quot;548&quot; height=&quot;100&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Even if the construction of the
DOM (in blue) occurs mostly before the execution of JavaScript (in yellow), it
only ends after. In this &amp;quot;default&amp;quot; configuration of script loading, the DOM is
built very late. The display is delayed.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Distinguish critical and noncritical JS&lt;/h2&gt;
&lt;p&gt;To reduce the time to render, you must postpone the parsing of JavaScript files
as often as possible. But if you try, you’ll see that it is not as simple as it
seems.&lt;/p&gt;
&lt;p&gt;Your JavaScript files are likely to contain several types of code portions and
you may need to load some of them as soon as possible: JavaScript
business-specific code (analytics, for example), libraries with a strong visual
impact, dependencies for a third-party script that you can’t defer…&lt;/p&gt;
&lt;p&gt;These JS lines of code are called “critical JavaScript”. Group them into an
identifiable file, commonly called &lt;em&gt;critical.js&lt;/em&gt;. Like any JS file, the browser
will have to fetch, parse and evaluate it before being able to execute it.&lt;/p&gt;
&lt;p&gt;Even if you put all the optimizations in place to reduce the amount of data that
needs to be transferred over the network (cleaning the unused code from the
file, minify, compress, cache on the client and server side), the browser will
still need to parse and evaluate the JavaScript. As that step
&lt;a href=&quot;https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e&quot;&gt;takes &lt;/a&gt;&lt;a href=&quot;https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e&quot;&gt;a significant amount of time&lt;/a&gt;,
you must really keep your critical JS file as streamlined as possible.&lt;/p&gt;
&lt;p&gt;All other scripts should then be delayed, asynchronized, or moved to the footer,
sometimes several of these things at the same time. Let’s take a look at these
different techniques.&lt;/p&gt;
&lt;h2&gt;Move noncritical scripts at the bottom of the page&lt;/h2&gt;
&lt;p&gt;A very simple and intuitive way to defer the browser’s parsing of JavaScript
files is to place the declarations at the end of the HTML page, just before the
&lt;code&gt;&amp;lt;/body&amp;gt;&lt;/code&gt; tag. Doing so, the browser will not have any knowledge of the scripts
until it has almost built the entire DOM.&lt;/p&gt;
&lt;p&gt;Although this technique appears to be suitable for most of the cases, it
presents a serious drawback. Not only it delays scripts evaluation, but it also
delays their downloading which excludes its use for large scripts. Moreover, if
your resources are not served by HTTP/2 or come from an external domain, you
will also add a substantial resolution time to the retrieval time.&lt;/p&gt;
&lt;p&gt;Obviously, since this technique occurs at the end of the DOM construction, we
also remind you
&lt;a href=&quot;https://blog.dareboost.com/en/2016/09/avoid-using-document-write-scripts-injection/&quot;&gt; not to resort to scripts that use document.write&lt;/a&gt;,
because the browser would have to completely rebuild it.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_570/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png 570w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture of the Chrome DevTools Performance tab. A loading
timeline displays the different steps in different colors. The entire range of
blue is before the yellow one. A first image appears very early in the loading
process.&quot; loading=&quot;lazy&quot; width=&quot;570&quot; height=&quot;101&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;By pushing back the scripts at
the end of the page, the completion of the display area is much faster but not
definitive (a part of the content is altered by the execution of
JavaScript)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;How about injecting a dynamic &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; Tag?&lt;/h2&gt;
&lt;p&gt;As mentioned above, delaying the download of a script is not always the
solution. You may prefer to make is &lt;strong&gt;asynchronous&lt;/strong&gt; : the script is immediately
retrieved without this phase blocking the construction of the DOM. Once
available, the construction of the DOM is interrupted for the browser to parse
and evaluated its content.&lt;/p&gt;
&lt;p&gt;One way to do this is to not declare this script in the source of the page, but
to use another script that injects it directly inside the DOM. This technique,
called dynamic script tag, is the backbone of most third-party services.&lt;/p&gt;
&lt;p&gt;One of the main advantages of this technique is that you can choose when the
script is injected. If you want to inject it immediately, you can use an
immediately-invoked function expression:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script&amp;gt;
   (function () {
       var e = document.createElement('script');
       e.src = 'https://mydomain.com/script.js';
       e.async = true; // See the following explanation
       document.head.insertBefore(e, document.head.childNodes[document.head.childNodes.length - 1].nextSibling);
   }());
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But you can also delay the injection so that it only occurs when a specific
event is triggered. Here is how you inject a script when the DOM is ready:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script&amp;gt;
   // IE9+
   function ready(fn) {
       if (document.attachEvent ? document.readyState === &quot;complete&quot; : document.readyState !== &quot;loading&quot;) {
           fn();
       } else {
           document.addEventListener('DOMContentLoaded', fn);
       }
   }

   ready(function () {
       var e = document.createElement('script');
       e.src = '[https://mydomain.com/script.js](https://mydomain.com/script.js)';
       e.async = true; // See the following explanation
       document.head.insertBefore(e, document.head.childNodes[document.head.childNodes.length - 1].nextSibling);
   });
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You may be surprised by the use of a convoluted insertBefore instead of a
simpler appendChild. I invite you to read
“&lt;a href=&quot;https://www.paulirish.com/2011/surefire-dom-element-insertion/&quot;&gt;Surefire DOM Element Insertion&lt;/a&gt;”,
by Paul Irish.&lt;/p&gt;
&lt;p&gt;As interesting as this technique seems, it also has its drawbacks. First, the
scripts injected this way are no longer evaluated sequentially in the order of
their injection. So you can’t use this technique to inject several scripts that
require one another.&lt;/p&gt;
&lt;p&gt;Secondly, dynamic script tags are not fully asynchronous. As explained in the
introduction, the browser makes sure that the construction of
&lt;a href=&quot;https://www.igvita.com/2014/05/20/script-injected-async-scripts-considered-harmful/&quot;&gt;the CSS Object Model is complete before executing the JS code of the injected script&lt;/a&gt;.
The script is consequently not executed immediately. In order to explain to the
browser that the script can be loaded without waiting for the CSSOM to be built,
you must add the &lt;code&gt;async&lt;/code&gt; attribute to the script.&lt;/p&gt;
&lt;p&gt;But be careful: a script, even with an async attribute, is always considered as
a page resource. The &lt;code&gt;window.onload&lt;/code&gt; event will therefore be delayed by its
execution. If other scripts depend on this event, you should expect a delay.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_528/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png 528w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture of the Chrome DevTools Performance tab. A loading
timeline displays the different steps in different colors. The entire range of
blue is before the yellow one. A first image appears very early in the loading
process.&quot; loading=&quot;lazy&quot; width=&quot;528&quot; height=&quot;100&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Well mastered, the dynamic tag
injection is one of the most efficient techniques with a fast built DOM and an
almost immediate display. Beware, however, that the scripts are not executed in
order!&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;&lt;code&gt;async&lt;/code&gt;, &lt;code&gt;defer&lt;/code&gt;, or both&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;async&lt;/code&gt; and &lt;code&gt;defer&lt;/code&gt; are two attributes standardized by HTML5. They allow you to
modify the browser’s default behavior when loading a script.&lt;/p&gt;
&lt;p&gt;If the &lt;code&gt;async&lt;/code&gt; attribute is present, then the script is fetched as soon as
possible, then executed. The declaration order of the &lt;code&gt;async&lt;/code&gt; scripts is not
preserved: the scripts will be executed as soon as they are available. But
please note that even if the script retrieval will not halt the DOM
construction, their execution will do.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_559/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png 559w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture of the Chrome DevTools Performance tab. A loading
timeline displays the different steps in different colors. The entire range of
blue is before the yellow one. A first image appears very early in the loading
process.&quot; loading=&quot;lazy&quot; width=&quot;559&quot; height=&quot;101&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Here, again, a very
progressive loading. On the other hand, as for the dynamic script, we lose the
execution order of the JS.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;If the &lt;code&gt;defer&lt;/code&gt;attribute is present, the script will be fetched as soon as
possible, but the browser will wait for the DOM tree to be complete before
executing it. Since most browsers now implement a preloader, the behavior of a
script with the `defer’ attribute is very similar to the behavior of a script
placed at the end of HTML content.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_734/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 734w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture of the Chrome DevTools Performance tab. A loading
timeline displays the different steps in different colors. The entire range of
blue is before the yellow one. A first image appears very early in the loading
process.&quot; loading=&quot;lazy&quot; width=&quot;734&quot; height=&quot;227&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;This alternative visualization
mode helps fully understand the simultaneous evaluation of the DOM (in blue) and
the script (yellow). Even if the script execution occurs later on, some time is
saved.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;As for using &lt;code&gt;async&lt;/code&gt; and &lt;code&gt;defer&lt;/code&gt; together, it’s not very useful, except for one
use case, legacy support:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-defer&quot;&gt;defer&lt;/a&gt;
attribute may be specified even if the
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-async&quot;&gt;async&lt;/a&gt;
attribute is specified, to cause legacy Web browsers that only support
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-defer&quot;&gt;defer&lt;/a&gt;
(and not
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-async&quot;&gt;async&lt;/a&gt;)
to fall back to the
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-defer&quot;&gt;defer&lt;/a&gt;
behavior instead of the blocking behavior that is the default.
&lt;cite&gt;&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-async&quot;&gt;HTML
5.1 2nd Edition, W3C Recommendation 3 October 2017&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Loading JavaScript files: get the control back, even on third-party scripts&lt;/h2&gt;
&lt;p&gt;We have seen that there is no shortage of techniques to asynchronize the
recuperation and execution of scripts. Nevertheless, some scripts still need to
be declared synchronous such as A/B test scripts, which sometimes intentionally
block the render to hide the content from the user until the script has
customized it (as these scripts often modify the visual aspect of the site,
blocking the DOM and CSSOM makes sense).&lt;/p&gt;
&lt;p&gt;Even in this situation, you don’t have to lose control. We encourage you to
choose a solution that takes web performance into account. Some serious actors
like Google Optimize, Kameleoon or Optimizely limit the time allocated to the
recuperation and execution of their scripts. If this time is exceeded, the
browser will abort the A/B script recuperation or execution. Do not hesitate to
reduce this timeout period to a minimum to ensure the quality of your visitors’
experience.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 18 Dec 2017 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/en/2017/12/defer-scripts-to-speed-up-rendering/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2017/12/defer-scripts-to-speed-up-rendering/</guid>
      
      <category>Performance Web</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Where is the Western WeChat?</title>
      
      <description>
          &lt;p&gt;China is unquestionably changing the way Internet integrates our daily lives
with its mobile app
&lt;a href=&quot;https://blog.clever-age.com/en/2017/05/19/10-ways-to-leverage-wechat-for-your-business/&quot;&gt;WeChat&lt;/a&gt;.
How does this impact the web in the Western world?&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-50614.jpg 1280w&quot; sizes=&quot;80vw&quot;   alt=&quot;A hand holding a phone in front. There are many Android
apps listed in a menu.&quot; loading=&quot;lazy&quot; width=&quot;1280&quot; height=&quot;853&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.clever-age.com/en/2017/12/06/where-is-the-western-wechat/&quot;&gt;Where is the Western WeChat?&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;WeChat is reinventing the way we use the web&lt;/h2&gt;
&lt;p&gt;WeChat is not your typical social network. It works as a platform connecting the
user to a large set of services: discovery of new products, B2B, B2C or C2C
interactions, reservation booking, access to information, payment, etc. WeChat
offers a wide array of possibilities, as it aims to act as a single locus for a
variety of micro apps, each offering a specific specialized service. WeChat is
basically a service center running on top of the mobile phone’s OS.&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;480&quot; height=&quot;321&quot; src=&quot;https://static01.nyt.com/video/players/offsite/index.html?videoId=100000004574648&quot; title=&quot;How China is changing the Internet – New York Times&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2&gt;Why hasn’t anybody developed a similar service on this side of the planet?&lt;/h2&gt;
&lt;p&gt;Facebook has tried and failed on several accounts, due to multiple factors.
First of all, our market is subject to much more constraints. China’s access to
the rest of the world may be limited by the Great Firewall&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, but its internal
market is fairly liberal. Privacy protection is in its infancy, control
standards are extremely low and the occasional regulations are quite lax
(contrary to the EU, whose approach is antithetical)&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Besides, the app stores present a number of limitations. Apple’s business model,
the App Store, implemented about 10 years ago and imitated by Google for
Android, is the norm today and generates several billion dollars of annual
revenue. It enables developers to distribute and sell their apps while also
allowing them to charge their users through in-app purchases. The app store’s
owner guarantees the diversity of offers while providing a coherent user
experience, all the while taking a commission for paid apps sold through the
store.&lt;/p&gt;
&lt;h2&gt;The rigidity of app stores&lt;/h2&gt;
&lt;p&gt;Despite its assets, the app store system is reaching its limits. The user is
buried under an overwhelming offering sorely lacking context. In quite a few
emerging markets, the number of alternative stores is going through to the
ceiling, with some stores offering apps adapted to lower-end devices on which
‘regular’ apps cannot run.&lt;/p&gt;
&lt;p&gt;In addition, in such a centralized system, service discovery becomes
problematic. By gathering the applications offering, the app stores are making
it less circumstantial, less local and less targeted. As a result, service
proposal is less efficient. By offering local services based on the user and
their network, WeChat provides a better system: often, instead of searching
through an app store, WeChat users will directly scan a QR code giving them
access to a service they need then and there.&lt;/p&gt;
&lt;h2&gt;The western wechat may already be in your pocket&lt;/h2&gt;
&lt;p&gt;So where is the Western WeChat? Well, turns out it may already be out there. We
already have apps that can host other apps, create interconnections between
services and Web content, offer services without having to go through the app
store middle man and its unnecessary hurdles. Are you thinking of Facebook?
Well, actually, I meant browsers. Google has taken advantage of its browser
Chrome’s supremacy to jump on the bandwagon by massively enabling native-like
web apps, and even invented
“&lt;a href=&quot;https://blog.clever-age.com/en/2017/03/23/progressive-web-apps-to-boost-your-services-ux/&quot;&gt;Progressive Web Apps&lt;/a&gt;”
(PWAs), thereby disrupting its own business model – something Apple seems
reluctant to do. Alphabet, Google’s parent company, finally found a way to make
PWAs actual applications, including in terms of user experience
(&lt;a href=&quot;https://mobile.twitter.com/&quot;&gt;Twitter Lite&lt;/a&gt;, for instance, is a PWA version of
Twitter which is every bit as good as its native counterpart).&lt;/p&gt;
&lt;h2&gt;The end of app stores?&lt;/h2&gt;
&lt;p&gt;Appealing as it may be, the disappearance of app stores would raise a couple of
issues. It would mean the dilution of brand presence, i.e. the ability for a
user to find their favorite brands in a service directory. What’s more, PWAs’
payment module capabilities are not as elaborate and comprehensive as those of
app stores. That being said, Apple or Google could easily turn their app stores
into PWA directories. They could keep automated quality control mechanisms (such
as &lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/&quot;&gt;Lighthouse&lt;/a&gt;) while
delegating the inventory aspect to editors. As for QR codes, which are much less
successful in Western countries, they will very likely be supplemented by other
discovery modes: fine geolocation, digital assistance potentially integrated
into a chatbot platform, and so on. Google is also at the forefront of these
issues with services such as Google Now and Google Allo.&lt;/p&gt;
&lt;h2&gt;What about payment?&lt;/h2&gt;
&lt;p&gt;Say you’re into running and looking to track your runs. Not knowing which app to
install, you make a Google research and find a specialized website. Upon your
third visit to the website, your browser suggests you try the corresponding app.
In the app, you find a tracking tool that suits your needs. A few months later,
the app warns you that an analysis of your running data revealed you may be an
underpronator. In partnership with a major sports brand, the app recommends a
new pair of running shoes that fits your pronation type. With your Google
profile, it has access to your banking and shipping information; you smoothly
proceed with payment directly through the app.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-07/pexels-photo-260290.jpg 1280w&quot; sizes=&quot;80vw&quot;  alt=&quot;A person is sitting on the floor, she is in sportswear. The
goal is focused on his right shoe, which is a running shoe.&quot; loading=&quot;lazy&quot; width=&quot;1280&quot; height=&quot;719&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Web, application and purchase combined into one
frictionless, transparent experience for the user.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;This topic will certainly define the web in the coming months, if not the coming
years. It is
&lt;a href=&quot;https://www.w3.org/Payments/&quot; title=&quot;Web Payments at W3C: Making Payments Easy on the Web&quot;&gt;one of the hot topics being discussed at the W3C&lt;/a&gt;.
Soon, OS companies will likely introduce PWAs containing a set of libraries in
order to facilitate and supervise payment in exchange for a commission, under a
standard such as the
&lt;a href=&quot;https://developers.google.com/web/fundamentals/payments/&quot;&gt;Payment Request API&lt;/a&gt;.
It is a substantial market and the key players will fiercely fight for their
share.&lt;/p&gt;
&lt;p&gt;Google may try penetrating this market by playing the web performance card with
its AMP technology&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;: this alternative to HTML could be an indirect way to
take control of the web and its monetization strategies (while guaranteeing
better indexing capabilities at a cheaper cost, which is crucial when data is
the primary resource of your activity and bandwidth is one of your largest cost
centers). Unsurprisingly, payment is one of the main themes of the AMP
&lt;a href=&quot;https://www.ampproject.org/roadmap/&quot;&gt;roadmap&lt;/a&gt; this quarter.&lt;/p&gt;
&lt;p&gt;All these factors strongly suggest that PWAs will gradually be integrated into
Google Play’s applications offering.&lt;/p&gt;
&lt;h2&gt;TL;DR: Google has entered the race, and is moving fast&lt;/h2&gt;
&lt;p&gt;WeChat is revolutionizing the web and mobile scenes in China, but repeating the
same formula in the West is not an easy task. Many players (starting with
Facebook) have tried and subsequently failed. The growing presence of Chinese
companies will most likely initiate a new software evolution for the web through
browsers, PWAs, search engines and geolocated services – and Google (Alphabet)
is at the cutting edge of these four fields.&lt;/p&gt;
&lt;p&gt;And this new revolution cannot take place without significant progress being
made in terms of web payment standards, a topic the W3C is actively working on.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;See Clever Age’s article:
“&lt;a href=&quot;https://blog.clever-age.com/en/2014/07/28/how-to-operate-in-china/&quot;&gt;How to operate in China?&lt;/a&gt;”. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;See Clever Age’s article:
“&lt;a href=&quot;https://blog.clever-age.com/en/2017/01/19/general-data-protection-regulation-small-guide-for-business/&quot;&gt;General Data Protection Regulation: Small guide for Business&lt;/a&gt;”. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;On this topic, also see:
“&lt;a href=&quot;https://blog.clever-age.com/fr/2016/02/08/amp-project-booste-le-chargement-des-pages-web/&quot;&gt;AMP Project booste le chargement des pages web&lt;/a&gt;”
(In french). &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 07 Dec 2017 00:00:00 +0100</pubDate>
      <link>https://blog.clever-age.com/en/2017/12/06/where-is-the-western-wechat/</link>
      <guid isPermaLink="true">https://blog.clever-age.com/en/2017/12/06/where-is-the-western-wechat/</guid>
      
      <category>Performance Web</category>
      
      <category>User eXperience</category>
      
      <category>Images</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Optimize Images to Reduce Page Weight: File Formats, Tools and RWD</title>
      
      <description>
          &lt;p&gt;“Reduce the page weight”: here is one of the most usual tips in Dareboost
reports. According to HTTP Archive trends, images represent 53% of the average
pages weight, whether viewed on desktop or mobile devices. When you want to
reduce the weight of your web pages, optimizing images should be at the top of
your priorities.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;On a white square are gradually designed several pixels in
shades of blue, above the diagonal&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1920&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2017/10/optimize-images-to-reduce-page-weight-file-formats-tools-and-rwd/&quot;&gt;Optimize Images to Reduce Page Weight: File Formats, Tools and RWD&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;For each image its format&lt;/h2&gt;
&lt;p&gt;It is not always easy to find the most suitable image format. Take our logo, for
example. We could save it in PNG, JPEG, WebP or SVG. The weight of the images
would be very different. An empirical test allows us to visualize it:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/logo_en_580.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/logo_en_580.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/logo_en_580.png 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;PNG 6KB ; JPEG 38KB ; WebP 9KB ; SVG 2.5KB (1.4KB
gzipped)&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;446&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;In this case, the most suitable format seems to be SVG, followed closely by PNG.
It is indeed an image whose colors are plain, non-animated, representing
geometric shapes. All these factors tend to favor these two formats.&lt;/p&gt;
&lt;p&gt;Let’s take a second example, this time with the photograph of a rocket taking
off. SVG is just unable to represent this image correctly (we will explain why a
little further). Here’s what we get, with equivalent visual perception, for
JPEG, PNG and WebP formats:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/rocket_en_580.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/rocket_en_580.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/rocket_en_580.jpg 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;PNG: 171KB; JPEG: 33KB; WebP: 13KB&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;446&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here, the results are radically different. To represent the complexity of a
photograph, the WebP format clearly stands out. Unfortunately, it is only
supported on Chrome and Opera, so we generally prefer the JPEG format.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Tip:&lt;/strong&gt; for each of your
&lt;a href=&quot;https://www.dareboost.com/&quot;&gt;web performance test on Dareboost&lt;/a&gt;, our
tool systematically checks if the PNG format has been properly used (or if you
should consider using another format).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;When you want to save a JPEG, most of softwares ask what quality to retain, as
it is a lossy encoding format. By choosing a quality less than 100%, it is thus
possible to save precious bytes by correcting only certain points of the image.
Let’s try with our image, with quality set to 80%. Then we get a very
interesting result: a weight loss of more than 50%, while only a few points of
the image have been deeply changed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/diff_en_580.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/diff_en_580.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/diff_en_580.jpg 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;Original JPEG: 33KB. Optimized JPEG: 16KB. Not much
differences.&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;250&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;As shown above, choosing a format is not trivial and not all formats are
suitable for all images. Let’s explain a little more…&lt;/p&gt;
&lt;h2&gt;How to choose the right image format?&lt;/h2&gt;
&lt;p&gt;In the end, all the images appear on the screen in the same way: a rectangle
composed of several dots of different color. But images are not necessarily
recorded like that on the disk. And each image file format relies on different
techniques for encoding visual information. In order to choose the right file
format, you need to ask yourself several questions:&lt;/p&gt;
&lt;h3&gt;What does my image represent?&lt;/h3&gt;
&lt;p&gt;Some file formats encode images in the same way as they appear on the screen:
like colored dot matrices. Each color point is encoded on several bytes and
positioned within a map according to its coordinates. That’s why these formats
are sometimes called “bitmap”. Various compression algorithms then reduce the
space taken by this information on the disk. For these formats, we speak about
“&lt;strong&gt;raster graphics&lt;/strong&gt;”. Their advantage: they can handle any
photograph and some of them, as the PNG format, come with advanced features like
color palette optimization or transparency.&lt;/p&gt;
&lt;p&gt;Unfortunately, this encoding process must define the dimensions of the matrix
first, that is to say the resolution of the image, before positioning the
points. As a consequence, if you enlarge an existing &lt;strong&gt;JPG&lt;/strong&gt;,
&lt;strong&gt;PNG&lt;/strong&gt; or &lt;strong&gt;WebP&lt;/strong&gt; raster graphic, you will
dramatically decrease the quality.&lt;/p&gt;
&lt;p&gt;Other file formats do not have this drawback because they encode images as a set
of geometric shapes. They define an image through the lines, points and polygons
that compose it. Whenever the image is to be displayed, the computer redraws it
following this virtual drawing specification. These &lt;strong&gt;vector
graphics&lt;/strong&gt; are very suitable for rendering simple shapes, logotypes and
data graphs. Since they are not resolution-dependant, they are particularly
adapted for Responsive Web Design. &lt;strong&gt;SVG&lt;/strong&gt; images and icon fonts
are vector formats. On the other side of the coin: vector graphics are not very
suitable for photographs.&lt;/p&gt;
&lt;h3&gt;Reduce the weight of images by sacrificing information&lt;/h3&gt;
&lt;p&gt;It is possible to optimize further by losing some information in the process. Of
course, the challenge is to lose only the bare necessities, while maintaining an
interesting level of quality. This is called the lossy optimization phase.&lt;/p&gt;
&lt;p&gt;For &lt;strong&gt;vector graphics&lt;/strong&gt;,
&lt;a href=&quot;https://github.com/svg/svgo&quot;&gt;svgo&lt;/a&gt; is today a reference tool. An
online interface even exists:
&lt;a href=&quot;https://jakearchibald.github.io/svgomg/&quot;&gt;svgomg&lt;/a&gt;. The tool is able
to reduce the amount of code by cleaning metadata that is useless for display
(for example, information about the tool that was used to generate the file) but
also by bringing together several geometric shapes or transformations. To reduce
the weight of an icon font, the logic is the same, except that you can also
reduce its scope of action by selecting only the characters used to build your
custom character set. Several sites, like
&lt;a href=&quot;https://icomoon.io/&quot;&gt;Icomoon&lt;/a&gt;, allow you to create your own icon
font.&lt;/p&gt;
&lt;p&gt;As we saw in the example of the rocket ship, lossy (or not-lossy) optimizations
are also possible on the &lt;strong&gt;raster graphics&lt;/strong&gt;. Since each image
format has its own characteristics (for example, the transparency of PNG
support), each algorithm has a different mode of action and a specific visual
impact.&lt;/p&gt;
&lt;p&gt;Here are some file formats and some suitable optimization tools. Some of them
are included in graphic softwares like Photoshop or GIMP:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PNG: Zopfli-png, PNGOUT, OptiPNG, AdvPNG, PNGCrush, PNQQuant&lt;/li&gt;
&lt;li&gt;JPG: JPEGOptim, MozJPEG, Jpegtran, Guetzli&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer&quot;&gt;FileOptimizer&lt;/a&gt;
(Windows), &lt;a href=&quot;https://imageoptim.com/mac&quot;&gt;ImageOptim&lt;/a&gt; (Mac) ou
&lt;a href=&quot;https://trimage.org/&quot;&gt;Trimage&lt;/a&gt; (Linux) are softwares that combine
several algorithms in one place. They allow you to test these optimizations with
various levels of loss and directly export an optimized image. They are even
able to determine whenever a PNG image can be saved in PNG-8 (a variant of PNG
with a 256-color palette) rather than PNG-24 to gain some precious bytes.&lt;/p&gt;
&lt;h3&gt;Why don’t you talk about GIF?&lt;/h3&gt;
&lt;p&gt;GIF is a very constrained format (it can only describe 256 colors) that supports
transparency and animation. Used for years to encode logotypes, pictograms and
small animations, GIF needs to – let’s say it out loud – retire for good.&lt;/p&gt;
&lt;p&gt;You can find features stamped “GIF” in all social networks or instant messaging
applications, but that’s not really the truth. In fact, many of these services
use video formats, with much lighter files! We will come back to this topic in a
future post.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-10-29/lenny.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/lenny.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/lenny.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Screencast of the ChromeDevTools. We can see a video looping like a GIF, but the code clearly indicates its a video.&lt;/em&gt;&lt;/figure&gt;
&lt;p&gt;If you still need the GIF format, be aware that a command-line compression tool
also exists: gifsicle. It can be very useful for manipulating GIF content:
reduce the color palette, resize, cut and crop… I sometimes use Gifsicle to
encode short recordings of my screen and integrate them into emails, because
many mail clients are not able to read embedded videos.&lt;/p&gt;
&lt;h2&gt;Serve the right file size regarding to the context&lt;/h2&gt;
&lt;p&gt;Choosing the right file format is not enough to ensure that you will serve the
optimum image each time.&lt;/p&gt;
&lt;p&gt;Imagine that you are using a 2680-pixel wide image to decorate the background of
a site designed for a computer with high-resolution display
(&lt;abbr title=&quot;Hight Dot Per Inch&quot;&gt;HiDPI&lt;/abbr&gt;, including Retina™). On a mobile
device of lower resolution, in 3G, not only will the browser load a lot of
unnecessary data but, the browser will also resize the image with its internal
algorithm for the image to fit in the width of the phone screen. The final
result will be degraded, not to mention the rendering latency… Instead, you
would rather produce several versions of the original image, in different
resolutions and let the browser choose the image to download, depending on its
execution context.&lt;/p&gt;
&lt;p&gt;“&lt;strong&gt;Responsive Images&lt;/strong&gt;” is a denomination that embodies all the
techniques that consist in producing, for the same area of a Web page, several
images adapted to the possible contexts of navigation. For background and
decorative images, you can use CSS media-queries.&lt;/p&gt;
&lt;p&gt;For non-decorative images, the &lt;strong&gt;picture&lt;/strong&gt; specification has added
the attribute &lt;code&gt;srcset&lt;/code&gt; to the &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; element in
2014 (yes, three years already!). The &lt;code&gt;srcset&lt;/code&gt; is a collection of
URLs pointing to multiple versions of the same image, with different resolutions
(but still the same width-to-height ratio). It gives the browser the
responsibility to choose the version of the image to download, depending on the
current context. Unfortunately, without having downloaded the CSS files from the
web page, the browser can not understand the relative space occupied by the
image in the window, so the &lt;code&gt;sizes&lt;/code&gt; attribute must also be defined.&lt;/p&gt;
&lt;p&gt;If you want to offer, in addition to your optimized image, formats supported by
a limited number of browsers (such as WebP) or if you want to manage different
width-to-height ratios depending on the context (a matter of artistic
direction), you can frame your image with a &lt;code&gt;picture&lt;/code&gt; element and
several &lt;code&gt;source&lt;/code&gt; elements:&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_739/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 739w&quot; sizes=&quot;80vw&quot;  alt=&quot;Code capture&quot; loading=&quot;lazy&quot; width=&quot;739&quot; height=&quot;441&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;HTML
markup for Responsive Images, from The Guardian website&amp;lt;&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;With all possible media, art direction alternatives, resolutions, pixel
densities, and supported formats, the HTML markup of responsive images can
become very impressive. But do not forget that your HTTP responses must always
be gzipped. Finally, the difference of 500B between this markup and a single
element &lt;code&gt;img&lt;/code&gt; will be largely offset by the reduction of the weight
of the delivered image.&lt;/p&gt;
&lt;p&gt;Note that even if the support for the necessary HTML elements is fairly recent,
a reliable and recognized library allows support on older browsers:
&lt;a href=&quot;https://scottjehl.github.io/picturefill/&quot;&gt;picturefill&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Automate, automate, automate&lt;/h3&gt;
&lt;p&gt;Choosing the right image format, generating thumbnails, sometimes using
alternative formats that are more adapted to the context (like WebP) and thus
generating yet again some thumbnails… Manually perform this work on a large
amount of high-quality master images is titanic. Very few tools, whether they
are WCM or e-commerce platforms, include advanced features on image management.
Even Digital Asset Management solutions, which are normally dedicated to visual
asset management and where Responsive Images management should be a prerogative,
are often useless.&lt;/p&gt;
&lt;p&gt;Nevertheless, some solutions exist, like
&lt;a href=&quot;https://cloudinary.com/&quot;&gt;Cloudinary&lt;/a&gt; – a third party service
available in SaaS – or &lt;a href=&quot;http://thumbor.org/&quot;&gt;Thumbor&lt;/a&gt; (an appliance
that you need to install on your network). Discuss with your web development
team to determine the best tool and remember to explain the issues to the
contributors and train them to the chosen solution. Do not forget to always keep
the original images (those of the best available quality) and to think up ahead
about the optimizations, even lossy, that you want to apply.&lt;/p&gt;
&lt;p&gt;For example, on an e-commerce website, photos of products are more critical than
decorative images, so you will not want to lose too much quality. Similarly, if
you are in the luxury market, your visitors expect an impeccable image quality.
You will need to fine-tune the configuration of your optimizations. Sometimes,
&lt;a href=&quot;http://code.flickr.net/2015/09/25/perceptual-image-compression-at-flickr/&quot;&gt;as
was the case with Flickr&lt;/a&gt;, the right setting may take several months to
emerge.&lt;/p&gt;
&lt;h2&gt;Lazy-load what you can (with or without visual effect)&lt;/h2&gt;
&lt;p&gt;Another way to improve the performance of a web page is to avoid unnecessary
images during initial loading. For example, you can delay the loading of all
images that are not displayed in the visible area of the web page (Lazy
loading). There are many JS libraries to do this but some of them will not be
compatible with your existing code: ask your development team for advice or
suggest an independent, vanilla library like
&lt;a href=&quot;https://apoorv.pro/lozad.js/&quot;&gt;Lozad&lt;/a&gt;. A lazy loading feature is also
available on Apache and nginx:
&lt;a href=&quot;https://www.modpagespeed.com/doc/filter-lazyload-images&quot;&gt;ModPageSpeed
Lazyload&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One of the problems with Lazy Loading is the sudden display of the image, only
after it is loaded. It is therefore necessary to determine when and how to load
the delayed images so that the user does not notice this phenomenon. But when?
After the initial loading
(&lt;a href=&quot;https://www.dareboost.com/fr/doc/test-performance-web/indicateurs/onload&quot;&gt;onload&lt;/a&gt;)
of the Web page? When the user scrolls through the content and the viewport is
approaching of the considered area? The lazy-loading needs to be discussed with
UX designers who may have ideas on how to animate the appearance of the image,
to make it less harsh. Some websites occupy the area with a branded content.
Others use the main color of the image or even a shape of the actual image in
SVG.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-10-29/placeholders.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/placeholders.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/placeholders.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Progressive image loading: while images are loading, a fuzzy silhouette occupies the space.&lt;/em&gt;&lt;/figure&gt;
&lt;h2&gt;Reduce the number of images with an image stack&lt;/h2&gt;
&lt;p&gt;On high-latency networks, you can quickly save time by reducing the number of
images to download. Rather than including each image in a separate image file,
the images can be grouped into a single file. Image Sprites are an example of
this technique applied to raster images. Icon fonts and SVG symbols are the
equivalent implementation for vector images.&lt;/p&gt;
&lt;p&gt;How attractive could seem this idea, its implementation can be complex though.
Using an image sprite is a useful technique if you really use all the grouped
images on the web page loading the resource, which is quite rare. In addition,
if you need to replace a single element in the stack, note that you will need to
invalidate the entire sprite from the browser cache.&lt;/p&gt;
&lt;p&gt;Finally: latency may not be an everlasting problem. With
&lt;a title=&quot;On the way to HTTP/2: what to expect for front-end development? &amp;mid; Dareboost Blog&quot; href=&quot;https://blog.dareboost.com/en/2016/11/http2-changes-for-front-end-development/&quot;&gt;HTTP/2&lt;/a&gt;,
a protocol in which connections are optimized to download multiple resources
simultaneously, the technique would lose its meaning.
&lt;a href=&quot;https://blog.octo.com/en/http2-arrives-but-sprite-sets-aint-no-dead/&quot;&gt;Theoretically
speaking&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;The end?&lt;/h2&gt;
&lt;p&gt;Heck, no! The state of the art of (responsive) image management is still far
from perfect.&lt;/p&gt;
&lt;p&gt;For example, instead of sending a lot of information to the browser and let it
choose the right image regarding the context, why not ask the browser to pass
the context during the initial query and calculate all the contextualization
server side? This is what some members of the What WG are thinking about in the
“&lt;a href=&quot;http://httpwg.org/http-extensions/client-hints.html&quot;&gt;Client Hints&lt;/a&gt;”
specification. Support is still
&lt;a href=&quot;http://caniuse.com/#feat=client-hints-dpr-width-viewport&quot;&gt;very
limited&lt;/a&gt; but the concept is being standardized at the IETF. This is very much
like an early 2010 initiative, called
&lt;a href=&quot;https://www.lukew.com/ff/entry.asp?1392&quot;&gt;Responsive Web Design + Server
Side Components, aka RESS&lt;/a&gt;, which was already trying to implement server-side
mechanics.&lt;/p&gt;
&lt;p&gt;Will it succeed this time?&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Sun, 29 Oct 2017 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/en/2017/10/optimize-images-to-reduce-page-weight-file-formats-tools-and-rwd/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2017/10/optimize-images-to-reduce-page-weight-file-formats-tools-and-rwd/</guid>
      
      <category>Performance Web</category>
      
      <category>Images</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Ensure secured connections with HSTS (HTTP Strict Transport Security)</title>
      
      <description>
          &lt;p&gt;Our regular readers &lt;a href=&quot;https://blog.dareboost.com/en/&quot;&gt;of the Dareboost blog&lt;/a&gt;
already know that
&lt;a href=&quot;https://blog.dareboost.com/en/2016/03/https-requirement-for-your-website/&quot; title=&quot;HTTPs is a requirement for your website ∣ Dareboost Blog&quot;&gt;HTTPS is now a requirement for any websites&lt;/a&gt;.
The urge to get rid of unsecured navigation has never been stronger: each
release of Google Chrome or Mozilla Firefox comes with a new warning sign for
users sharing private data. Soon, all forms will be concerned.&lt;/p&gt;
&lt;p&gt;But offering an HTTPS version of your website is not enough to automatically
redirect all your HTTP traffic to this secured version.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-09-18/1.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-09-18/1.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-09-18/1.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-09-18/1.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1024/https://boris.schapira.dev/assets/images/2017-09-18/1.jpg 1024w&quot; sizes=&quot;80vw&quot;   alt=&quot;Along a railway switch, a two-color light indicates if a
train can pass.&quot; loading=&quot;lazy&quot; width=&quot;1024&quot; height=&quot;576&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.dareboost.com/en/2017/09/hsts-ensure-secured-connections/&quot;&gt;Ensure secured connections with HSTS (HTTP Strict Transport Security)&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;Implementing a redirection: a limited solution&lt;/h2&gt;
&lt;p&gt;One of the most efficient way to redirect traffic is to use a permanent
redirection (HTTP code 301, with a &lt;code&gt;Location&lt;/code&gt; header containing the target URL).
That way, users and search engines are instantly redirected to your HTTPS
website for every HTTP request.&lt;/p&gt;
&lt;p&gt;Is that enough? Unfortunately, no. Because that redirection will not change, for
most users, the first action that drove them to request an unsecured URL. Some
of them may have directly typed the URL with &lt;code&gt;http://&lt;/code&gt;, others clicked an icon
within their favorites bar or have followed a link located on a third-party
website. You are even not self-immune from forgetting a couple of internal HTTP
links into your own HTTPS website! In all these cases, redirecting is not enough
to guarantee a secured traffic for your visitors. Furthermore, each redirect
affects your web performance.&lt;/p&gt;
&lt;p&gt;Moreover, redirecting one user to a secure version implies that an unsecure page
has been called/requested first. During this initial request, navigation is
likely to be captured. If a malicious person is able to access to your visitor’s
network, he will be able to intercept the traffic and, worse, divert it to steal
confidential data. Some of your visitors may be at risk, visiting your website
from public Wifi hotspots, internet connections provided by transport companies
(which are sometimes the first to inject content into unsecured traffic), or a
compromised private network…&lt;/p&gt;
&lt;p&gt;You need to avoid as much as possible this kind of redirections, for both safety
and performance.&lt;/p&gt;
&lt;h2&gt;HSTS to force HTTPS&lt;/h2&gt;
&lt;p&gt;HTTP Strict Transport Security
(&lt;abbr lang=&quot;en&quot; title=&quot;HTTP Strict Transport Security&quot;&gt;HSTS&lt;/abbr&gt;) is a
directive specified in &lt;a href=&quot;https://tools.ietf.org/html/rfc6797&quot;&gt;RFC 6797&lt;/a&gt;. The
security policy is transmitted by the server to the user agent via a header
response &lt;strong&gt;declaring that for any further call, this domain should be requested
over HTTPS&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The browser (or any other user agent) stores the information then every new
unsecured request to any URL of this domain will be automatically rerouted via
an internal redirect (HTTP code 307) to the HTTPS scheme. Please note that the
301 redirect remains necessary, as the directive only considers future calls.&lt;/p&gt;
&lt;p&gt;The HSTS directive must have an activity period defined by the &lt;code&gt;max-age&lt;/code&gt;
parameter, in seconds. A 300 value will instruct the browser to memorize the
internal redirect for five minutes. A value set to 63072000 will keep the
redirect up for two years.&lt;/p&gt;
&lt;p&gt;We highly recommend you to implement HSTS with a small activity period first,
and then increase it step by step. At each step, make sure to wait for the
defined period, detect the errors through observation or your analytics, then
fix the issues and continue.&lt;/p&gt;
&lt;p&gt;Here is an example of HSTS implementation with Apache, for a 5-minute activity
period:&lt;/p&gt;
&lt;div class=&quot;language-apache highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;apache&quot;&gt;&lt;span class=&quot;nc&quot;&gt;Header&lt;/span&gt; always &lt;span class=&quot;ss&quot;&gt;set&lt;/span&gt; Strict-Transport-Security &quot;max-age=300; includeSubDomains;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;includeSubDomains&lt;/code&gt; parameter indicates that HTTPS is available for all the
subdomains of the current domain. Please make sure that all of your assets are
available in HTTPS before applying this switch or your assets will become
unreachable.&lt;/p&gt;
&lt;p&gt;Do not worry. If you make mistakes, you can deactivate the HSTS policy by
setting a “0” value to the &lt;code&gt;max-age&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A max-age value of zero (i.e., &lt;code&gt;max-age=0&lt;/code&gt;) signals the UA to cease regarding
the host as a Known HSTS Host, including the includeSubDomains directive (if
asserted for that HSTS Host).&lt;br /&gt;
&lt;cite&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6797#section-6.1.1&quot;&gt;RFC 6797, Section 6.1.1&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In a nutshell, the HSTS directive can be used in addition to a 301 redirect to
secure all future requests on a domain (and eventually its subdomain) from a
user over a specific period. One security issue still remains, though: the
initial request is still unsecure.&lt;/p&gt;
&lt;h2&gt;HSTS Preloading to reliably secure the exchanges&lt;/h2&gt;
&lt;p&gt;To secure even the first request, the Chromium Projects maintains a list of
valid HSTS domain that is hardcoded into Chrome as being HTTPS only.
&lt;a href=&quot;https://blog.mozilla.org/security/2012/11/01/preloading-hsts/&quot; title=&quot;Preloading HSTS ∣ Mozilla Security Blog&quot;&gt;Firefox&lt;/a&gt;,
Opera, Safari,
&lt;a href=&quot;https://blogs.windows.com/msedgedev/2015/06/09/http-strict-transport-security-comes-to-internet-explorer-11-on-windows-8-1-and-windows-7/&quot; title=&quot;HTTP Strict Transport Security comes to Internet Explorer 11 on Windows 8.1 and Windows 7 - Microsoft Edge Dev BlogMicrosoft Edge Dev Blog&quot;&gt;IE 11 and Edge&lt;/a&gt;
also have their list derived from this one.&lt;/p&gt;
&lt;p&gt;In order to be accepted to the HSTS preload list, a website has to meet the
following set of requirements:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Present a valid certificate.&lt;/li&gt;
&lt;li&gt;Automatically redirect from to HTTPS on the same host&lt;/li&gt;
&lt;li&gt;Serve all subdomains over HTTPS&lt;/li&gt;
&lt;li&gt;Respond an HSTS header on the base domain for HTTPS requests:
&lt;ul&gt;
&lt;li&gt;The max-age must be at least
&lt;del datetime=&quot;2017-10-16T07:25:54.566Z&quot; cite=&quot;https://hstspreload.org/&quot;&gt;10886400
seconds (18 weeks)&lt;/del&gt;
&lt;ins datetime=&quot;2017-10-16T07:25:54.566Z&quot; cite=&quot;https://hstspreload.org/&quot;&gt;31536000
seconds (a year)&amp;lt;/ins[^twalle].&lt;/li&gt;
&lt;li&gt;The directive header must include the subdomains.&lt;/li&gt;
&lt;li&gt;The preload directive must be specified.&lt;/li&gt;
&lt;li&gt;If you are serving an additional redirect from your HTTPS site, that
redirect must still have the HSTS header (rather than the page it
redirects to).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If your website is eligible, you can submit its domain for inclusion
&lt;a href=&quot;https://hstspreload.org/&quot; title=&quot;HSTS Preload List Submission&quot;&gt;over this form&lt;/a&gt;.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-09-18/2.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_300/https://boris.schapira.dev/assets/images/2017-09-18/2.png 300w&quot; sizes=&quot;80vw&quot;  alt=&quot;A screencapture of Chrome DevTools&quot; loading=&quot;lazy&quot; width=&quot;300&quot; height=&quot;138&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Internal HTTPS redirection of a request to Facebook
made over HTTP, Chrome 60&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Beware: the modification of the directive with a 0-second &lt;code&gt;max-age&lt;/code&gt; will not
switch off HSTS preloading. Domains can be deleted from the HSTS Preload
registry but you will have to wait for months since the next update of the
browser needs to reach all the users. So, a word of advice: do not register for
HSTS Preload if you are not strongly confident into your capacity to offer HTTPS
on your domain and its subdomains over time.&lt;/p&gt;
&lt;h2&gt;Protect your users with HSTS&lt;/h2&gt;
&lt;p&gt;The HSTS directive exists for several years. It can secure requests and response
between your server and your visitors’ browsers. The first request can be
secured with HSTS Preloading, ensuring that all traffic is protected against
threats. HSTS must be activated with caution but when it is done, user
experience do not suffer from extended request time. As Google value security,
HSTS is also an optimization for
&lt;abbr title=&quot;Search Engine Optimization&quot;&gt;SEO&lt;/abbr&gt;.&lt;/p&gt;
&lt;h2&gt;Bonus: with HSTS Preload, protect your domain from SSL strip attacks&lt;/h2&gt;
&lt;p&gt;If you watch closely at InfoSec news, you may have noticed the danger
represented by &lt;a href=&quot;https://www.krackattacks.com/&quot;&gt;Krack Attacks&lt;/a&gt;, the demonstration
of a serious weaknesses in WPA2, a protocol that secures all modern protected
Wi-Fi networks. One of the steps in the attack procedure is for the malicious
software to intercept the SSL requests sent by the browser, request the URL
itself, then answer the result in HTTP instead of HTTPS. A simple off-guard
moment is enough for a pirate to intercept private information. If your domain
is indexed in the HSTS Preload list, the browser will refuse to switch to HTTP,
thus protecting your visitors.&lt;/p&gt;
&lt;h2&gt;Further information about HSTS&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.chromium.org/hsts&quot;&gt;HTTP Strict Transport Security – The Chromium Projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.owasp.org/index.php/HTTP_Strict_Transport_Security_Cheat_Sheet&quot;&gt;HTTP Strict Transport Security Cheat Sheet – OWASP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 18 Sep 2017 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/en/2017/09/hsts-ensure-secured-connections/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/en/2017/09/hsts-ensure-secured-connections/</guid>
      
      <category>Performance Web</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>(Web) Apps: There is no silver bullet</title>
      
      <description>
          &lt;p&gt;I recently read an article that proclaimed the end of mobile apps, insisting
that RWD (Responsive Web Design) and Progressive Web Apps (PWA) were the answer
to all companies’ needs. The author was using app downloads figures to support
this allegation. As Frederick Brooks said, there is no miraculous technique (no
“silver bullet”) in software engineering. Using figures is not so simple and
there are many traps that can lead us to false conclusions.&lt;/p&gt;
&lt;p&gt;Let’s take a look at the different logical biases related to this topic.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.clever-age.com/en/2017/07/07/web-apps-there-is-no-silver-bullet/&quot;&gt;(Web) Apps: There is no silver bullet&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;Web or native?&lt;/h2&gt;
&lt;p&gt;Let’s imagine that we want to evaluate the user satisfaction for various
applications: pure native applications, cross-platform applications, semi-hybrid
applications with React Native, “installed”
&lt;abbr title=&quot;Progressive Web Apps&quot;&gt;PWAs&lt;/abbr&gt; on Android 6, not-installed
&lt;abbr title=&quot;Progressive Web Apps&quot;&gt;PWAs&lt;/abbr&gt; and non-progressive Web App. With
these measurements, we would be able to produce a graph with the level of
satisfaction on the x-axis while the y-axis represents how close to a “native
application” the app is.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/1.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/1.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-02-01/en/1.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-02-01/en/1.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1228/https://boris.schapira.dev/assets/images/2017-02-01/en/1.png 1228w&quot; sizes=&quot;80vw&quot;  alt=&quot;Our first graph shows the user satisfaction for each group
of application depending on the app technical similarities with native
applications.&quot; loading=&quot;lazy&quot; width=&quot;1228&quot; height=&quot;719&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Our first graph shows the
user satisfaction for each group of application depending on the app technical
similarities with native applications.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;It is hard to make any precise conclusion, however we can identify a global
trend by analyzing the average satisfaction of each group of applications: the
most “native” apps seem to be more likely to generate satisfaction.&lt;/p&gt;
&lt;h2&gt;Depending on the type of application?&lt;/h2&gt;
&lt;p&gt;Now let’s imagine that satisfaction depends on the type of application. In other
words, the satisfaction now depends on the category in which you would place
each application on an application marketplace.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/2.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/2.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-02-01/en/2.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-02-01/en/2.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1228/https://boris.schapira.dev/assets/images/2017-02-01/en/2.png 1228w&quot; sizes=&quot;80vw&quot;  alt=&quot;A second graph where it&amp;#39;s clear that the trends are very
different depending on the application type&quot; loading=&quot;lazy&quot; width=&quot;1228&quot; height=&quot;719&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;So it’s not so easy, right?&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Trends appear to be less obvious.&lt;/p&gt;
&lt;p&gt;We quickly realize that the displayed categories are very limited. There is no
social networks, for example. So here we have an extremely fragmented view of
the market, which can significantly change the relevance of the previous
conclusions. This bias is very common in studies that I read here and there. Be
careful.&lt;/p&gt;
&lt;p&gt;For the sake of the argument, let’s assume that this is not a problem for us (in
this scenario, we are interested in these exact types of applications) and let’s
continue the analysis.&lt;/p&gt;
&lt;p&gt;Depending on the category, the relationship between customer’s satisfaction and
the application type is not the same: the best productivity tools and the best
games, for example, seem to be appreciated when they feel close to the native
feeling. On the other hand, cooking applications which are “native” do not seem
to be appreciated by customers. This observation makes sense if we look closely
at the application technical requirements: productivity tools often need to read
of write files, therefore need a performant way to call the operating system
features. In the same way, games need power and a good control of parallel
programming, that’s why they are developed to the closest of the operating
system.&lt;/p&gt;
&lt;p&gt;Having said all of that, we could think that we should be able to find trends by
applying common sense logics to all categories. A game would always be better as
a native application whereas a cooking website would be better as a WebApp… But
quickly, we realize that this logic does not work for all categories.
E-Commerce, for example, does not seem to be affected by the type of
applications…&lt;/p&gt;
&lt;h2&gt;What about budgets?&lt;/h2&gt;
&lt;p&gt;What if the applications do not receive the same funding according to their type
or their development platform ? We’re going to analyze this possibility and
compare the budget allocated to each type of application.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/3.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-02-01/en/3.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-02-01/en/3.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-02-01/en/3.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1228/https://boris.schapira.dev/assets/images/2017-02-01/en/3.png 1228w&quot; sizes=&quot;80vw&quot;  alt=&quot;This time, we can also read the estimated cost of every
app. Native apps seems to cost more, but it is still difficult to correlate
data.&quot; loading=&quot;lazy&quot; width=&quot;1228&quot; height=&quot;719&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Still not obvious,
huh&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Native applications seem to cost more, which is understandable: they need to be
developed on two or three different systems whereas cross-platform or web
development can easily be used on different hardwares. But this statement is not
an absolute. On this graph, we can see that a high cost for a semi-hybrid office
application. It’s impossible to know if this cost is a chosen investment or if
it’s the consequence of a bad choice of technology coupled with stubbornness.&lt;/p&gt;
&lt;p&gt;We can also notice another visible trend: we found high costs for eCommerce
applications. But we don’t know if it’s because eCommerce applications are more
expensive to develop or if it’s because the return on investment is judged more
promising.&lt;/p&gt;
&lt;h2&gt;But then, numbers don’t mean anything?&lt;/h2&gt;
&lt;p&gt;Numbers are very difficult to interpret because causes and effects get muddled
up when you mix an underlying technology and a functional need. We have a real
paradox here, called the “Yule-Simpson paradox”: regardless of the constituent
groups (price, objective, satisfaction…), the different correlations observed
are not consistent with what is observed in each of the groups. There is a lack
of information that influences all factors.&lt;/p&gt;
&lt;p&gt;There is a good example which could illustrate this problem, an example that I
would call &lt;em&gt;“the impossible application”&lt;/em&gt;. Imagine an application that
will require all your skills, your teams’ time and an open access to the native
features to create &lt;em&gt;the&lt;/em&gt; perfect UX.&lt;/p&gt;
&lt;p&gt;So you mobilize your teams, the development is long and expensive and… you fail.
Nobody likes it, it’s not successfull. You have a perfect example of an
application that is expensive to develop, a development which you would
&lt;strong&gt;never&lt;/strong&gt; have tried with an hybrid technology but which skews
statistics and make you believe that the “native” was not the right solution.
Here is the reality : &lt;strong&gt;we do not expect the same thing from a native app
and an hybrid one.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We can imagine another good example: a client who needs to highly control his
application interface. But he doesn’t judge relevant to invest in a
cross-platform development because he says that ⅔ of mobile users never install
applications other than social networks. However, its application was intended
for a B2B target which was required to install the application for
administrative purposes. This specific target and acquisition strategy
completely invalidated the previous statistics.&lt;/p&gt;
&lt;h2&gt;An overall vision&lt;/h2&gt;
&lt;p&gt;In order to make good decisions, we must approach each project as a whole:
functional and technical specifications, target analysis (age, socio-economic
classification, location, culture …), information and skills level of the
teams, existing development platform or acquisition capabilities, sustainability
of the development, expected turnover, deployment and maintenance strategy…&lt;/p&gt;
&lt;p&gt;For now, there is no Big Data algorithm able to take a step back from a need
that, most of the time, the sponsor himself does not know how to formalize. It’s
still necessary to spend time refining the need, analysing it, and to determine,
every time, the different solutions (which can not be only technical).&lt;/p&gt;
&lt;p&gt;If you want to say that the &lt;abbr title=&quot;Progressive Web Apps&quot;&gt;PWAs&lt;/abbr&gt; are
promising and it’s time to get interested into them, go ahead (I surely believe
in them myself). But I won’t say that we must, each time, give up the native
applications and market places.&lt;/p&gt;
&lt;p&gt;Whether you have doubts or not, get advice from people who have experience, who
are knowledgeable and independent of the technologies employed.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 01 Feb 2017 00:00:00 +0100</pubDate>
      <link>https://blog.clever-age.com/en/2017/07/07/web-apps-there-is-no-silver-bullet/</link>
      <guid isPermaLink="true">https://blog.clever-age.com/en/2017/07/07/web-apps-there-is-no-silver-bullet/</guid>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Death: the trivial way</title>
      
      <description>
          &lt;blockquote&gt;
&lt;p&gt;On the one hand, it’s possible we’ll develop ASI that’s like a god in a box,
bringing us a world of abundance and immortality. But on the other hand, it’s
very likely that we will create ASI that causes humanity to go extinct in a
quick and trivial way.&lt;br /&gt;
&lt;cite&gt;”&lt;a href=&quot;https://medium.com/ai-revolution/ai-revolution-101-8dce1d9cb62d#.a4h51z3m7&quot;&gt;AI Revolution 101&lt;/a&gt;”,
Pawel Sysiak&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Even if I’ve studied it, I’ve never been interested by AI before. As the
computer power continue to grow, I think that it may be possible we achieve
&lt;abbr title=&quot;Artificial General Intelligence: a computer as intelligent as a human&quot;&gt;AGI&lt;/abbr&gt;,
even accidental
&lt;abbr title=&quot;Artificial Super Intelligence: a computer with an intelligence so much above ours that we wouldn't understand&quot;&gt;ASI&lt;/abbr&gt;,
by the end of my lifetime.&lt;/p&gt;
&lt;p&gt;We need to discuss about it.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Tue, 09 Aug 2016 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2016/08/death-the-trivial-way/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2016/08/death-the-trivial-way/</guid>
      
      <category>Intelligence Artificielle</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Online Advertising: The Current Status</title>
      
      <description>
          &lt;p&gt;Online advertising has become — for lack of a better solution — the main source
of income for many content producers.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.clever-age.com/en/2015/12/14/online-advertising-the-current-status/&quot;&gt;Online Advertising: The Current Status&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;In the absence of any regulations, online advertising increasingly oversteps the
blurred lines of privacy, at the expense of users who then express their feeling
of being abused through massive resort to ad blockers&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. A true ad blocking
market is emerging, consisting of technical solutions and secret agreements, in
browsers as well as on smartphones&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. Faced with this phenomenon, some online
editors no longer hesitate to block access to their content to users running ad
blockers, which sends a very negative signal to their audience.&lt;/p&gt;
&lt;p&gt;This war is extremely costly and is the result of a gamble on alternative
sources of income (based on advertising) rather than promoting the real added
value of content. Many players are actually giving in to “everything-for-free”
mentality, mass-producing content with low informational value and maximizing
advertising revenues through real clickbait with no editorial line. Empires are
built, going as far as acquiring websites to spread advertising trojans, to the
detriment of historical readers, who are rarely fooled by this.&lt;/p&gt;
&lt;p&gt;These quantity-based approaches devalue content and reduce its advertising
value. Editors who used to ensure their profitability with just a few ads now
find themselves with a knife at their throats, and they are forced to resort to
technical hacks (thwarting ad blockers) or editorial meddling (inserting native
advertising or advertorials among their engaging content) to keep the money
coming in.&lt;/p&gt;
&lt;p&gt;To make things clear, this solution has become so unacceptable that even the
online advertising industry, represented by the IAB&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;, confirms it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We messed up. As technologists, tasked with delivering content and services to
users, we lost track of the user experience.&lt;br /&gt;
&lt;cite&gt;Scott Cunningham in &lt;a href=&quot;http://www.iab.com/news/lean/&quot; &gt;Getting
LEAN with Digital Ad UX&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Challenging Alternatives&lt;/h2&gt;
&lt;p&gt;Developing a paid content offering is an ambitious project and many such
initiatives never achieve profitability because most Internet users like to
consume free content but rarely purchase any.&lt;/p&gt;
&lt;p&gt;However, if the message gets across, there are solutions allowing Internet users
to voluntarily fund content production through donations
&lt;a href=&quot;https://flattr.com/&quot; &gt;Flattr&lt;/a&gt;,
&lt;a href=&quot;https://www.google.com/contributor/welcome/&quot; &gt;Google Contributor&lt;/a&gt;.
Yet they would not be possible to use on a large scale due to the sheer number
of agencies to pay. Another avenue is being explored by French platform
&lt;a href=&quot;https://medium.com/@presse_libre&quot; &gt;La Presse Libre&lt;/a&gt; : bringing
together multiple content producers on a single platform (with donation- or
subscription-based funding) and then reallocating funds, for example in
proportion to the number of visits. This type of system is also difficult to set
up because it requires common metrics, consistent information systems and an
enormous amount of trust.&lt;/p&gt;
&lt;p&gt;In contrast to this unity approach, some players are showing alternative avenues
by developing offerings with a value that is more intelligible to users:
editorial independence (e.g., French online journal Mediapart, entirely
subscription-funded), an enhanced reading experience (e.g., LaPresse.ca native
app), summarized and curated information… What they all have in common is that
they emphasize what has been overlooked — i.e., the fact that investigative
journalism, content writing and access to information all have a cost, on the
Internet as elsewhere — and they all very rarely offer free access to their
content, except for promotional purposes.&lt;/p&gt;
&lt;h2&gt;Leveraging Audiences&lt;/h2&gt;
&lt;p&gt;If, on the one hand, content producers are unable to promote their content for
lack of sufficient audience and, on the other hand, some platforms have an
audience but hardly any content to offer, then why wouldn’t the latter offer
their services? This leads to the emergence of new solutions allowing editors to
integrate their content on platforms enhanced by their audience, but in return
content producers become reliant on a new channel. This relationship model
brings new challenges:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;content is visually sober, which improves readability but weakens brand identity and loyalty;&lt;/li&gt;
	&lt;li&gt;audiences are potentially very wide, but editors have very little impact on targeting and on their ability to reach their targets (this is the same marketplace approach as with Google Adwords);&lt;/li&gt;
	&lt;li&gt;Monetization is simplified, but in exchange editors generally have no control over advertising contracts.&lt;/li&gt;
&lt;/ul&gt;
Facebook (&lt;a href=&quot;https://instantarticles.fb.com/&quot; &gt;Instant Articles&lt;/a&gt;) and Apple (&lt;a href=&quot;http://www.apple.com/news/&quot; &gt;News&lt;/a&gt;) were the first to embark on this type of offer, closely followed by Twitter (&lt;a href=&quot;https://about.twitter.com/moments&quot; &gt;Moments&lt;/a&gt;) and Snapchat (Discover), but with the lack of transparency on these platforms, nothing suggests that content producers will be able to actually control their targeting. Facebook, for one, &lt;a href=&quot;http://lexpansion.lexpress.fr/high-tech/les-fantomes-de-facebook-ces-amis-dont-on-ne-recoit-plus-les-messages_1499174.html&quot; &gt;no longer shows all of your friends posts in your news feed&lt;/a&gt;*.*
&lt;p&gt;Will you trust it for your articles?&lt;/p&gt;
&lt;h2&gt;Google AMP: Change the Packaging, Keep the Content&lt;/h2&gt;
&lt;p&gt;In contrast to the aforementioned players, Google’s positioning is different. It
is no secret that the search engine giant primarily specializes in content
indexing, so it comes as no surprise that they would launch an initiative such
as &lt;a href=&quot;https://www.ampproject.org/&quot; &gt;Accelerated Mobile Pages&lt;/a&gt; (AMP).
Google AMP uses a custom version of HTML and makes it possible to bundle
lightweight content together with advertising (via Google) and the related
analytics. Google provides the market with a new format and will be scrutinizing
whether it is adopted as the “standard” that is finally capable of solving the
equation { readability × monetization × control }.&lt;/p&gt;
&lt;p&gt;Obviously, Google’s interest is to increasingly centralize information by
displaying results directly rather than redirecting readers to the content
producer’s website. Another benefit is that with its rational approach to
advertising, Google can engage in dialogue with major ad blocker software
companies and promote the concept of
&lt;a href=&quot;https://acceptableads.org/&quot; &gt;acceptable ads&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;On a technical level, the approach is straightforward. Most CMSs can generate
syndication feeds. There would simply be an additional feed that would include
tracking and advertising campaigns.
&lt;a href=&quot;https://vip.wordpress.com/2015/10/07/mobile-web/&quot; &gt;WordPress is already
liaising with Google on that topic&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From a business perspective, however, this approach is more than likely to worry
professionals who would find themselves deprived of the control they now have
over agencies. In this context, it is hardly surprising that they swiftly
gathered around &lt;a href=&quot;http://www.iab.com/news/lean/&quot;&gt;a &lt;em&gt;mea culpa&lt;/em&gt;
posture&lt;/a&gt; and that they prefer reaching consensual agreements based on best
practices.&lt;/p&gt;
&lt;h2&gt;Unexplored Avenues, a Lesson for the Future&lt;/h2&gt;
&lt;p&gt;So what does the future hold for content monetization? No one really knows for
sure. What is certain is that the harmful potential of ad blockers is driving
the industry down a blind alley, forcing it to rethink business models towards
more reader-friendly practices, such as L.E.A.N.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn4&quot; id=&quot;fnref4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Many alternatives to the traditional advertising model are being contemplated,
considering for example that the reader’s attention must be entirely focused on
evaluating the quality of the content they are reading, but that in the meantime
their device is idle. This means that human attention span can be traded for
computing power, e.g. to generate cryptocurrencies for the content producer. But
for now, security is mostly insufficient and large-scale deployment would be
very complex.&lt;/p&gt;
&lt;p&gt;The moral to remember is this: advertising is a concept that arises entirely
from the refusal to consider that content has a cost. We are reaching the limits
of this system, and one day we will also reach the limits of other so-called
free systems such as social networks.&lt;/p&gt;
&lt;p&gt;If you can, always prefer &lt;em&gt;business models&lt;/em&gt; based on the added value of your
content rather than offering it at a low cost or for free: you are sending the
wrong signal and it is hard to move away from this model &lt;em&gt;afterward&lt;/em&gt;.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;About the same subject:&lt;/h2&gt;
&lt;p&gt;A few links suggested by readers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://idlewords.com/talks/what_happens_next_will_amaze_you.htm&quot;&gt;“What Happens Next Will Amaze You”&lt;/a&gt;
by Maciej Cegłowski, suggested by @akramfares&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://piacentino.com/jb/2015/publicite-en-ligne-ou-va-largent&quot;&gt;“Publicité en ligne : où va l’argent ?”&lt;/a&gt;
(“Online Advertising: Where Does the Money Go?” — in French) by Jb
Piacentino, suggested by &lt;a href=&quot;https://twitter.com/eliesl&quot;&gt;@eliesl&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;According to a survey by PageFair, these ad blockers would be installed on
the computers of 35% of European Internet users and 41% of 16-29 year olds.
UCBrowser and Maxthon, who claim more than 600 million users in Asia, are
also partnering with ad blocking solutions. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;The ad blocker of iOS 9, for example, relies on a business model in which
advertisers must pay to have their ads displayed. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;The Internet Advertising Bureau is the leading association for online
advertising professionals, bringing together many players in the advertising
ecosystem: creative agencies, media sales agencies, partners, hosting
service providers. Generally the IAB massively promotes online advertising
by funding studies on its effectiveness. This acknowledgement of failure is
a real earthquake in the industry. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn4&quot;&gt;
&lt;p&gt;L.E.A.N. — for “Light, Encrypted, Ad choice supported, Non-invasive ads” —
is a new best practice put forward by the IAB. &lt;a href=&quot;#fnref4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 22 Oct 2015 00:00:00 +0200</pubDate>
      <link>https://blog.clever-age.com/en/2015/12/14/online-advertising-the-current-status/</link>
      <guid isPermaLink="true">https://blog.clever-age.com/en/2015/12/14/online-advertising-the-current-status/</guid>
      
      <category>Publicité</category>
      
      <category>Scripts Tiers</category>
      
      <category>Transformation numérique</category>
      
      <category>Presse</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Conquering A/B Testing</title>
      
      <description>
          &lt;p&gt;Matthew is not the kind of person who takes decisions lightly, especially when
it is likely to impact his company’s revenue. He likes to try before he buys.
This is why he decided to get into A/B testing.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note:&lt;/strong&gt; this post first appeared in &lt;a href=&quot;https://blog.clever-age.com/en/2015/12/14/conquering-ab-testing/&quot;&gt;Conquering A/B Testing&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;A Story About A/B Testing&lt;/h2&gt;
&lt;p&gt;Matthew is not the fussy type, really, but his responsibilities and
professionalism command him to monitor any evolution of his company’s website,
in order to ensure that all key indicators improve with each delivery.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/1.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/1.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_500/https://boris.schapira.dev/assets/images/2014-03-13/1.jpg 500w&quot; sizes=&quot;80vw&quot;  alt=&quot;A pen writing a question mark on a paper&quot; loading=&quot;lazy&quot; width=&quot;500&quot; height=&quot;333&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;&amp;quot;Questioned Proposal&amp;quot; by Ethan Lofton - CC BY
2.0&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;But sometimes, let’s face it, Matthew is not sure. He hesitates. He wonders:
will this new feature improve user experience? Will this new communication
strategy motivate more customers to visit our website? And this new payment
funnel, is it really more efficient than the old one?&lt;/p&gt;
&lt;h2&gt;A/B Testing Is Simple and Objective&lt;/h2&gt;
&lt;p&gt;To improve his decision-making process, he does some research and discovers a
methodology widely adopted by Internet giants : &lt;strong&gt;A/B testing&lt;/strong&gt;. He reads
&lt;a href=&quot;https://fr.wikipedia.org/wiki/Test_A/B&quot;&gt;the Wikipedia article&lt;/a&gt; with great
attention and immediately understands the principle, which consists of three
steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;First, he will need to deliver two versions of his feature and direct some
users to the first one (version A), and the other users to the second one
(version B);&lt;/li&gt;
&lt;li&gt;At the same time, he will need to make sure he can collect user experience
data on both versions. For Matthew, this means adapting his analytics markup
to be able to differentiate measurements from each version;&lt;/li&gt;
&lt;li&gt;Finally, the analysis of these figures will allow Matthew to establish
statistical facts regarding both versions and determine which one provides
the best results according to his criteria.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Full of confidence, Matthew looks for a few examples to help convince senior
management. For example, he discovers
&lt;a href=&quot;http://www.nytimes.com/2009/03/01/business/01marissa.html&quot;&gt;the incredible but true story&lt;/a&gt;
of Marissa Mayer (then a Google executive), who had asked her teams to deploy 41
shades of blue on a website in order to determine which one was the most
effective with users. If Google can do it, then Matthew should be able to do it
too. It even looks easy.&lt;/p&gt;
&lt;h2&gt;A/B Testing Is Complex and Subjective&lt;/h2&gt;
&lt;p&gt;Matthew is thinking about concrete implementation steps. His first constraint is
the difficulty to set up two simultaneous versions. It is a strong constraint
for Matthew, who realizes that he will not be able to run as many A/B tests as
necessary: his company’s IT infrastructure is limited and he cannot request new
servers and gateways to extend the architectural framework as much as he would
need to. Nevermind that, he decides to make the move anyway and sets his
development team to work. He specifically chooses an alteration that does not
require any change in infrastructure: a visual variation within a page.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/2.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/2.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2014-03-13/2.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_835/https://boris.schapira.dev/assets/images/2014-03-13/2.png 835w&quot; sizes=&quot;80vw&quot;  alt=&quot;A wireframe of the product page of an ecommerce
website&quot; loading=&quot;lazy&quot; width=&quot;835&quot; height=&quot;727&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Product page template: the
yellow area will feature either a picture of the product (version A) or a video
(version B)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;After hesitating for a while, he finally decides to evaluate the display of the
product image on the “Product Page” template of the e-commerce website. The
current version, with the product image to the left of the description, will be
considered as the control version (version A). On version B, a video of the
product will be displayed instead. The Marketing Department has been insisting
that we should use more video, the time has come to verify these claims! But an
analytical problem then arises: how can the effectiveness of one version over
the other be measured? Many indicators can be used to evaluate user experience:
successful sales, abandoned carts, time-based measurements, bounce rate
measurements… After careful consideration, the team makes a choice: the
add-to-cart action will be the criterion for a successful version. The more a
product gets added to cart, the more effective the version. Next arises a
technical problem: for the sake of consistency, Matthew wants that users who
have been directed to a specific version stay on that version for the entire
duration of the test — displaying either a picture or a video completely at
random is out of the question! So the team creates a cookie that will store the
appropriate version for the current visitor at the time when that version is
assigned. For each visitor, the system will then test whether the cookie exists
and if it does, it will display the relevant version. The last step is to decide
which version will be displayed on a customer’s first visit. Again, a choice
must be made regarding the way users are handled: What proportion of visitors
will see version B? Based on what criteria will they be selected? What area of
the website will be affected by the test: all product pages or only some of
them? To avoid influencing the results, A/B testing methodology requires using a
completely independent criterion, but finding one is not so easy! Matthew and
his team finally decide to use a random assignment approach and display the
control version to 99% of users and version B to only 1% of them, on the entire
site. This means that if version B does not fulfill expectations, the impact on
business will be limited. Matthew realizes that, under the guise of objectivity,
the team has made a number of highly subjective choices:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the nature of the test itself;&lt;/li&gt;
&lt;li&gt;the way of measuring how successful each version is;&lt;/li&gt;
&lt;li&gt;the way in which visitors are sorted and distributed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In the end, A/B testing is not that easy. Oh well, too late to stop now!&lt;/p&gt;
&lt;h2&gt;A/B testing starts where it ends&lt;/h2&gt;
&lt;p&gt;Matthew decides to run a test over a few days. The results are as follows:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Version&lt;/th&gt;
      &lt;th&gt;Number of visitors&lt;/th&gt;
      &lt;th&gt;Number of add-to-cart clicks&lt;/th&gt;
      &lt;th&gt;Add-to-cart clicks / visitors ratio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Version de contrôle (A)&lt;/td&gt;
      &lt;td class=&quot;numeric &quot;&gt;34 217&lt;/td&gt;
      &lt;td class=&quot;numeric &quot;&gt;6234&lt;/td&gt;
      &lt;td&gt;18,21 %&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Version avec vidéo (B)&lt;/td&gt;
      &lt;td class=&quot;numeric &quot;&gt;327&lt;/td&gt;
      &lt;td class=&quot;numeric &quot;&gt;68&lt;/td&gt;
      &lt;td&gt;20,79 %&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;A quick look at the ratio between the number of add-to-cart clicks and the
number of visitors seems to suggest that version B was more effective than
version A. Unfortunately, traffic was lower than expected and the sample is very
small. Hard to say if this sample is sufficient to draw general conclusions from
these results… On top of that, one of Matthew’s team members brings in new
information: due to an error in the random assignment algorithm, visitors
entering the website from the “High-Tech” section were selected for version B
more often than other visitors. However, the “High-Tech” section has one of the
best conversion rates on the entire site. This means that the nearly
3-percentage-point difference they observed may not be related at all to the
modified product page. Matthew and his team are skeptical. Finally, over the few
days during which the test took place, the site’s overall conversion rate
dropped. Since he did not include A/B markers in his indicators all the way to
the payment stage (only add-to-cart clicks stored this distinction), Matthew is
struggling to determine whether version B is in any way responsible… What if
people added more items to their carts but ended up leaving the site without
purchasing anything? This is a risk the team cannot take lightly. Matthew is
learning a lot of things… about how to run A/B tests. But regarding the
product page, no conclusion can be drawn: the experiment must be conducted
again, this time with more control.&lt;/p&gt;
&lt;h2&gt;A/B testing, when more people get involved&lt;/h2&gt;
&lt;p&gt;Eventually, Matthew and his team perform a new test with better measurements and
a more significant volume, allowing them to isolate the results. Contrary to
their initial impressions, version B is less effective. The website is
completely rolled back to the version displaying a product image. Even though
Matthew is frustrated about not understanding the reasons behind this result —
since he thought video could only be more appealing — he is still satisfied with
what he has achieved and he receives praise from his superiors. As they are
reveling in their success, Matthew’s team starts receiving an increasing amount
of test requests, mostly from their marketing colleagues who have found in these
tests a great way for measuring visitor activity. But many technical problems
emerge because some of these tests, which seem rather straightforward on paper,
actually require maintaining multiple software architectures that are not
compatible with each other. Matthew and his team have to put these tests on hold
while they rewrite parts of the code to be able to inject dependencies. At the
same time, other requests — also on hold for an unspecified period of time —
require changes to the technical infrastructure. So many expenditures that were
not budgeted… Fortunately, it is still possible to run some of the tests.
Among them, the marketing team is asking for a split test on the home page of
the corporate site. This means that entirely different versions of the page will
be tested. Well, why not, thinks Matthew…&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/3.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/3.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_500/https://boris.schapira.dev/assets/images/2014-03-13/3.jpg 500w&quot; sizes=&quot;80vw&quot;  alt=&quot;A street name on a wall, stating &amp;#39;Rue d&amp;#39;enfer&amp;#39;, french for
Hell&amp;#39;s street&quot; loading=&quot;lazy&quot; width=&quot;500&quot; height=&quot;333&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;&amp;quot;Rue d’Enfer&amp;quot; by Frédéric
Bisson - CC BY 2.0&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Unfortunately, this request adds to the pile of other requests, some of which
actually concern similar pages. Potentially, users could unknowingly undergo
several A/B tests within a single page. On the product page, for example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;one A/B test relating to the font for the product name;&lt;/li&gt;
&lt;li&gt;one A/B test relating to the call-to-action text for the add-to-cart
feature;&lt;/li&gt;
&lt;li&gt;one last test that would influence the real-time display of product data.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While it is technically possible (by stretching the concepts that are already in
place for single tests), this multivariate analysis does raise the issue of the
increasing complexity of statistical analysis, which was already a delicate
task. Because with all these tests, the number of versions of the site increases
exceedingly fast. Matthew is now in charge of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;one A/B/C split test on the home page;&lt;/li&gt;
&lt;li&gt;three A/B tests on the product page;&lt;/li&gt;
&lt;li&gt;one A/B test involving a variation of the navigation structure…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;… this means 18 different possible combinations for each visitor and a
significant increase in maintenance costs (because now, to reproduce a bug you
have to use the exact same configuration as the client browser on which it
occurred). The issue of tracking must also be added to these costs, because the
last test has the direct consequence of distorting existing analytics, which
until now were based on URLs.&lt;/p&gt;
&lt;h2&gt;A/B testing, getting the right tools&lt;/h2&gt;
&lt;p&gt;Doing some research, Matthew discovers a few companies offering products that
facilitate A/B testing. Most of them internalize two of the major issues:
statistical analysis and campaign management. Some products can even automate
campaigns and end them once a meaningful result has been obtained. Unfortunately
it is very difficult to determine the value of a solution over another, since
each of them seems to be adapted to a particular need:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For commercial teams, some solutions come on top of the Front End to modify
the page viewed by the customer on the fly. The concept seems appealing at
first, but users sometimes end up experiencing slowdowns, page flashes and
even, in the most extreme cases, SPOF situations (Single Point of Failure: a
situation in which the site relies heavily on one or more external
resources; if these resources are not available or a technical problem makes
it impossible to access them from the client — network problem, unreliable
gateways — then the page can no longer be viewed);&lt;/li&gt;
&lt;li&gt;other more “injection-oriented” solutions make it possible to easily create
switches between multiple software architectures;&lt;/li&gt;
&lt;li&gt;finally, other solutions make it possible to quickly switch from one
architecture to another, but they introduce additional gateways into the
system, leading to increased risks and decreased performance.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So Matthew knows that he will need to do some more research on these products
and select the best solution to address the issues he faces. But beyond that, he
is also starting to get the impression that…&lt;/p&gt;
&lt;h2&gt;A/B testing has many limitations&lt;/h2&gt;
&lt;p&gt;The first of these limitations lies in the adaptation capability. Any
optimization project consists in getting closer to the best solution by
comparing several variations. But it does not mean that the most successful one
is the absolute best of all variations. Just because a local optimum is reached
(around the original conditions) does not mean that there is no other, very
different variation producing better results.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/5.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2014-03-13/5.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_399/https://boris.schapira.dev/assets/images/2014-03-13/5.png 399w&quot; sizes=&quot;80vw&quot;  alt=&quot;Une représentation mathématique en 3D présentant un maximum
local&quot; loading=&quot;lazy&quot; width=&quot;399&quot; height=&quot;203&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Parfois, on a l’illusion de
l’optimisation. Alors que le sommet est plus loin.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;For instance, let us imagine that we proceed to a multivariate analysis
consisting of two tests, each with about fifteen variations (the scenario is
extreme, but it serves the demonstration well). In this case, experimenting with
the variations of both tests consists in moving along the yellow plane of
&lt;a href=&quot;https://blog.clever-age.com/wp-content/uploads/sites/2/2014/03/WebPerf-Waterfall.png&quot;&gt;the graph&lt;/a&gt;,
in search of the best possible performance. Once at the highest point of the
yellow peak, nothing tells us that there is actually a higher peak elsewhere and
that we would have found it, had we continued our tests with a greater number of
variations. Moreover, an A/B test will never say what we want it to say. In
Matthew’s example with the product image vs. product video, the test’s result
was that product images were the most effective solution, but Matthew has no
clue that this is probably the consequence of two factors: on the one hand,
users are accustomed to viewing videos in landscape rather than portrait mode,
and on the other hand, they are unable to stay focused when presented with an
interactive medium. Promoting A/B testing is certainly a good thing… as long
as you ask professionals to help you understand how to interpret their results!
In addition, there are a number of other obvious limitations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A/B testing knows nothing about your visitors. It does not know whether they
are old, young, tech-savvy, loyal… yet different profiles can have
entirely different behaviors and decision-making processes, and you will
only get an overall view of this. You will need to complete your A/B testing
system with a quality analytics tool or a tracker, allowing you to properly
segment feedback from these different types of visitors;&lt;/li&gt;
&lt;li&gt;Running an extravagant number of multivariate analyses requires an
increasing amount of visitors: for this reason, it is not possible to “test
everything” in the hope of finding the right formula, especially considering
that calculating the conversion rate is probably more complex than simply
adding up all scenarios;&lt;/li&gt;
&lt;li&gt;A/B testing is a short-termist solution that does not take into account the
learning curve of your visitors. Therefore it does not have the same
relevance for mass retailers and for companies with sophisticated products
and a thoroughly planned sales process.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;A/B Testing, in the end&lt;/h2&gt;
&lt;p&gt;Consulted by senior management, Matthew tells them all about his experience with
A/B tests. Initially seen as a magical decision-making tool, A/B testing is
actually more complex and costly than expected. In fact, just like all tools,
A/B Testing must be handled by experts with the best possible knowledge of the
context. Well, that is until an A/B test proves the opposite!&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 13 Mar 2014 00:00:00 +0100</pubDate>
      <link>https://blog.clever-age.com/en/2015/12/14/conquering-ab-testing/</link>
      <guid isPermaLink="true">https://blog.clever-age.com/en/2015/12/14/conquering-ab-testing/</guid>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Opera Dragonfly Search Form is great</title>
      
      <description>
          &lt;p&gt;&lt;em&gt;I had planned for several months to go to Toulouse for the
&lt;a href=&quot;http://sudweb.fr/2012/&quot;&gt;SudWeb Conference and Workshops&lt;/a&gt;, and I had even
proposed a subject. Even if my submission had not been selected, I was very
proud to go there and meet people united by the common values of Web Standards,
innovation, agility… and long story short, I finaly became a speacker but that’s
another story.&lt;/em&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;The second day, during a workshop organised by Karl Dubost (Opera) and
&lt;a href=&quot;https://twitter.com/rik24d&quot;&gt;Anthony Ricaud&lt;/a&gt; (Mozilla), I explained that many
Front-End developpers I work with do not know how to use the
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Document.querySelector&quot;&gt;query-selector&lt;/a&gt;,
and are frustrated not to be able to search a specified group of selectors
without using javascript in the Dev. Tools Console. In fact, what I was
expressing already exists in Opera Dragonfly.&lt;/p&gt;
&lt;p&gt;Wanna see more? Read this article written by Karl: Search DOM Nodes with Opera
Dragonfly Developer tool&lt;/p&gt;
&lt;p&gt;And here is a short video of what this workshop looked like:&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;640&quot; height=&quot;360&quot; src=&quot;https://player.vimeo.com/video/42885321&quot; title=&quot;Améliorer les outils de débug dans les navigateurs Web&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  You subscribed to my posts&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;from the category Web&lt;/li&gt;
                  &lt;li&gt;written in French.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 30 May 2012 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2012/05/sudweb2012-opera-dragonfly-search-form-is-great/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2012/05/sudweb2012-opera-dragonfly-search-form-is-great/</guid>
      
      <category>web</category>
      
    </item>
    
  </channel>
</rss>
