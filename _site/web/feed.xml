<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Web FR · Boris Schapira</title>
    <link>https://boris.schapira.dev/web/feed.xml</link>
    <description> Je suis un professionnel du Web qui essaie chaque jour de mieux comprendre le marché pour toujours délivrer la meilleure expérience à mes clients comme à leur utilisateurs.</description>
    <language>fr</language>
    <lastBuildDate>Thu, 03 Oct 2019 15:48:54 +0200</lastBuildDate>
    
    <item>
      <title>Custom Timing : attendez la prochaine frame</title>
      
      <description>
          &lt;p&gt;Les indicateurs habituels de performance web (Premier Octet, Speed Index…) sont très intéressants mais j’ai souvent besoin d’ajouter des marqueurs temporels personnalisés, basés sur des événements qui ont un sens du point de vue métier.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;J’utilise la User Timing API (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API&quot;&gt;voir sur &lt;abbr title=&quot;Mozilla Developer Network&quot; lang=&quot;en&quot;&gt;MDN&lt;/abbr&gt; [EN]&lt;/a&gt;) pour insérer des &lt;i lang=&quot;en&quot;&gt;timings&lt;/i&gt; dans la  &lt;i lang=&quot;en&quot;&gt;performance timeline&lt;/i&gt; du navigatuer. Comme on peut récupérer tous ces indicateurs dans Dareboost, je peux ensuite &lt;a href=&quot;https://blog.dareboost.com/fr/2018/05/monitoring-custom-timings/&quot;&gt;surveiller leur évolution sur la durée&lt;/a&gt;.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1137/https://boris.schapira.dev/assets/images/2019-09-30/custom-timings-dareboost.png 1137w&quot; sizes=&quot;80vw&quot;  alt=&quot;Deux courbes dans un graphique. Sur l&amp;#39;axe des abscisses, une période d&amp;#39;un mois. Sur l&amp;#39;axe des Y, le temps entre 0 et 3 s. La courbe orange indique la valeur du marqueur &amp;quot;mark_declare_js_end&amp;quot; tandis que la courbe verte correspond au marqueur &amp;quot;mark_switchlang_end&amp;quot;.&quot; loading=&quot;lazy&quot; width=&quot;1137&quot; height=&quot;535&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Quelques &lt;i lang=&amp;quot;en&amp;quot;&gt;Custom Timings&lt;/i&gt; issus de ce site&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;En utilisant l’API avec JavaScript, poser un marqueur est assez simple (et &lt;a href=&quot;https://caniuse.com/#feat=user-timing&quot;&gt;bien supporté&lt;/a&gt;).&lt;br /&gt;
Par exemple :&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// Le truc dont vous voulez mesurer l'occurence&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Le marqueur temporel&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Vous pouvez ensuite récupérer la valeur dans les outils de développement de votre navigateur, en utilisant :&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;performance.getEntriesByType('mark');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Cependant, j’ai récemment&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; réalisé quelque chose d’important. &lt;strong&gt;Le simple fait que le navigateur exécute du code JavaScript ne signifie pas que l’utilisateur puisse voir les résultats de cette exécution&lt;/strong&gt;. Le navigateur doit, entre temps, mettre à jour l’affichage. Or, sa capacité à le faire dépend du code JavaScript qui suit le morceau de code qui nous intéresse…&lt;/p&gt;
&lt;p&gt;Dans l’exemple suivant, j’injecte une boucle bloquante d’une seconde après mon &lt;i lang=&quot;en&quot;&gt;timing&lt;/i&gt; de performance, ce qui bloque le rendu par le navigateur.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// Le truc dont vous voulez mesurer l'occurence&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// The timestamp&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Un bout de code qui coûte des ressources au navigateur&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// pendant 1 seconde&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bien sûr, dans la vraie vie, vous n’aurez pas une simple boucle. Vous aurez d’autres tâches qui prendront peut-être beaucoup de temps, ou peut-être pas. Vous ne pouvez pas le savoir et, même, vous ne pouvez pas le tester, car tout cela dépend du contexte client que vous ne contrôlez pas.&lt;/p&gt;
&lt;p&gt;Pour contourner ce problème, nous pouvons utiliser &lt;code&gt;requestAnimationFrame()&lt;/code&gt; afin de demander au navigateur de poser notre &lt;i lang=&quot;en&quot;&gt;timing&lt;/i&gt; juste avant le prochain rendu (la prochaine &lt;i lang=&quot;en&quot;&gt;frame&lt;/i&gt;) :&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;// Le truc dont vous voulez mesurer l'occurence&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-sync&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Le Custom Timing, avant la prochaine frame&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mark-blue-frame&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Un bout de code qui coûte des ressources au navigateur &lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// pendant 1 seconde&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si vous voulez voir comment ça fonctionne par vous-même, voici &lt;a href=&quot;https://tests.boris.schapira.dev/perfmark-animationframe/&quot;&gt;une page de test&lt;/a&gt;.&lt;/p&gt;
 &lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;EN UN MOT&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;Utilisez l’API User Timings&lt;/strong&gt; pour créer des &lt;i lang=&quot;en&quot;&gt;Custom Timings&lt;/i&gt; liés à votre activité.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Encapsulez-les&lt;/strong&gt; dans des &lt;i lang=&quot;en&quot;&gt;callbacks&lt;/i&gt; &lt;code&gt;requestAnimationFrame()&lt;/code&gt; pour comprendre le comportement de l’interface, plutôt que l’exécution du code.&lt;/p&gt;
&lt;p&gt;Si vous voulez avoir une idée de la latence de l’affichage, attachez deux marques : l’une après l’événement à suivre, l’autre dans un &lt;i lang=&quot;en&quot;&gt;callback&lt;/i&gt; &lt;code&gt;requestAnimationFrame()&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;En lisant “&lt;a href=&quot;https://blog.superhuman.com/performance-metrics-for-blazingly-fast-web-apps-ec12efa26bcb&quot;&gt;Performance metrics for blazingly fast web apps&lt;/a&gt;” [EN], de Conrad Irwin &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 30 Sep 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2019/09/custom-timing-prochaine-frame/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2019/09/custom-timing-prochaine-frame/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>UX</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Mesurer l’interactivité avec le TTI</title>
      
      <description>
          &lt;p&gt;L’objectif de la mesure de la Performance Web est de déterminer le moment à
partir duquel une personne visitant la page peut accomplir son objectif
efficacement. Cela implique qu’elle puisse consulter le contenu qu’elle
cherchait et qu’elle soit en mesure d’interagir avec la page de manière
satisfaisante. Certains indicateurs mesurent les étapes du rendu par le
navigateur, d’autre la progression de ce rendu par le biais de vidéos. Mais
quand il s’agit de mesurer efficacement l’interactivité, le mystère reste
entier.&lt;/p&gt;
&lt;p&gt;Depuis quelques années maintenant, Google met en avant un indicateur ambigu : le
Time To Interactive. De quoi s’agit-il ? C’est ce que nous allons définir, avant
d’expliquer comment et quand l’utiliser (ou non).&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2019/05/mesurer-interactivite-time-to-interactive/&quot;&gt;Mesurer l’interactivité avec le TTI&lt;/a&gt;.
&lt;/div&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/carnival.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; Photo d&amp;#39;un manège qui tourne. Le mouvement de rotation
créé un effet de flou : il est impossible de déterminer avec certitude la
vitesse du manège. &quot; loading=&quot;lazy&quot; width=&quot;4077&quot; height=&quot;2713&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Mesurer
l’interactivité, c’est comme monter sur un manège en marche. Quand peut-on
considérer que le manège a suffisamment ralenti pour qu’on puisse monter dessus.
Il n’y a pas de réponse précise.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Synthèse&lt;/h2&gt;
&lt;p&gt;La mesure de l’interactivité est un &lt;a href=&quot;#pourquoi&quot;&gt;véritable défi&lt;/a&gt; pour les experts
de la Performance Web. Les éditeurs de solutions de monitoring synthétique, en
particulier, rencontrent des difficultés puisque leurs solutions ne reposent pas
sur des interactions d’utilisateurs.&lt;/p&gt;
&lt;p&gt;Le Time To Interactive de Google est un indicateur sophistiqué, construit pour
déterminer les conditions idéales d’interaction en surveillant à la fois
l’activité du fil d’exécution principal de JavaScript et l’activité réseau. Il
permet de déterminer avec efficacité
&lt;a href=&quot;#comment-utiliser-le-tti&quot;&gt;un moment à partir duquel on peut être sûr·e qu’une interaction pourra avoir lieu de manière fluide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Néanmoins, le Time To Interactive est un indicateur dont la construction est
compliquée à comprendre et à exploiter, et
&lt;a href=&quot;#malentendus&quot;&gt;qui ne mesure pas ce que la plupart des gens pensent qu’il mesure&lt;/a&gt;
: le moment à partir duquel une page devient interactive.&lt;/p&gt;
&lt;p&gt;La seule manière de capturer des actions utilisateurs est d’en disposer, donc
d’utiliser du Real User Monitoring (RUM). Mais même là,
&lt;a href=&quot;#alternatives&quot;&gt;il n’existe pas un unique KPI&lt;/a&gt; qui décrit simplement la relation
entre le comportement des utilisateurs et l’interactivité de la page dans le
temps.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;&lt;span id=&quot;pourquoi&quot;&gt;En quête d’un nouvel indicateur&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;Qu’essayons-nous de mesurer ?&lt;/h3&gt;
&lt;p&gt;Accéder à une page web est une expérience que le monde de la performance web
décrit généralement comme étant composée de 4 “moments” :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;L’utilisateur a la confirmation que le chargement a commencé.&lt;/li&gt;
&lt;li&gt;L’utilisateur dispose de suffisamment d’informations pour penser qu’il peut
interagir avec la page.&lt;/li&gt;
&lt;li&gt;L’utilisateur peut interagir avec la page (ce moment particulier étant
dépendant du type d’interaction effectuée).&lt;/li&gt;
&lt;li&gt;L’interaction de l’utilisateur avec la page est sans effort et intuitive,
sans délai et sans agitation.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Plusieurs signaux peuvent indiquer à l’utilisateur que le chargement a commencé
: la mise-à-jour du titre et de l’URL, une éventuelle animation de l’onglet ou
du favicon, l’apparition des premiers pixels non blancs, puis du reste de la
page…&lt;/p&gt;
&lt;p&gt;Pour estimer la perception visuelle des visiteurs, on peut utiliser le
&lt;a href=&quot;https://blog.dareboost.com/fr/2018/02/speed-index-performance-web/&quot;&gt;Speed Index&lt;/a&gt;
et le
&lt;a href=&quot;https://www.w3.org/TR/paint-timing/#first-contentful-paint&quot;&gt;First Contentful Paint [EN]&lt;/a&gt;,
deux indicateurs qui aident à comprendre la manière dont un utilisateur perçoit
le chargement de la page. Comme leurs modes de calcul sont liés à la manière
dont les éléments sont affichés, leurs limitations peuvent être identifiées en
un clin d’œil par un être humain.&lt;/p&gt;
&lt;p&gt;En revanche, lorsqu’il s’agit de mesurer l’interactivité – les points 3 et 4 –
ça devient plus difficile. Nous ne savons pas vraiment comment la mesurer. La
seule chose que nous savons bien faire est de recueillir des informations qui
nous permettent de déduire ces moments particuliers.&lt;/p&gt;
&lt;p&gt;Par exemple, Akamai cherche depuis des années de nouvelles manières de mesurer
l’activité des utilisateurs. Ils s’appuient sur la bibliothèque Boomerang, créée
par Philip Tellis
&lt;a href=&quot;https://www.welovespeed.com/2018/programme/#ux-and-performance-metrics-that-matters&quot;&gt;qui est venu à We Love Speed 2018&lt;/a&gt;
pour présenter de nouvelles mesures d’UX. Ces nouveaux indicateurs permettent de
mesurer la réactivité des pages : clics “de rage”, clics manqués, clics morts et
secouage du curseur. En analysant la distribution de ces données qui expriment
toutes la frustration de l’utilisateur, nous pouvons approximativement déduire
le moment où l’utilisateur s’attend à ce que la page, ou un composant
particulier, soit interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/rage.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1500/https://boris.schapira.dev/assets/images/2019-05-16/rage.png 1500w&quot; sizes=&quot;80vw&quot;  alt=&quot; Clics de rage en fonction de la Première Interaction et du
Visuellement Complet : il y a une corrélation linéaire nette ; la pente varie
entre 1.2 and 1.5. &quot; loading=&quot;lazy&quot; width=&quot;1500&quot; height=&quot;843&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Il y a une
corrélation linéaire évidente entre les clics &amp;quot;de rage&amp;quot; et les clics situés 1,2
à 1,5 fois après le Visually Ready (le moment où l’utilisateur perçoit que la
page est prête pour une interaction –
&lt;a href=&quot;https://akamai.github.io/boomerang/BOOMR.plugins.Continuity.html#toc9__anchor&quot;&gt;voir la définition complète sur la documentation Boomerang [EN]&lt;/a&gt;).&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Ce type de corrélation nécessite de grandes quantités de données collectées
auprès d’utilisateurs réels, soit par le biais de bibliothèques JavaScript comme
Boomerang, soit via du RUM intégré au navigateur comme le Chrome UX Report. Ces
données ne peuvent être collectées que sur des environnements de Production
accueillant un grand nombre de visites.&lt;/p&gt;
&lt;p&gt;Tester des optimisations dans un environnement de ce type est risqué. Sans tests
préalables, le déploiement en Production peut entraîner des régressions et/ ou
des ralentissements, et nuire à votre entreprise. De plus, vous devrez attendre
d’avoir recueilli un volume de données suffisamment important avant de pouvoir
déduire quoi que ce soit. Et même là, il sera difficile d’évaluer ce jeu de
données, car les données RUM ne sont pas si faciles à analyser.&lt;/p&gt;
&lt;p&gt;Les solutions de surveillance synthétique, elles, peuvent effectuer des mesures
de performance précises sur tous les environnements, tout en contrôlant les
contextes de test. Et elles seraient encore plus utiles si elles pouvaient
fournir une mesure de l’interactivité.&lt;/p&gt;
&lt;p&gt;Mais comme elles n’impliquent pas de vrais utilisateurs, les solutions de mesure
synthétique sont obligées de ruser…&lt;/p&gt;
&lt;h3&gt;Arrive le Time To (Consistently) Interactive&lt;/h3&gt;
 &lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;&lt;br /&gt;
Bien qu’il en existe plusieurs définitions, nous nous concentrerons sur la
définition proposée par Google par le biais de ses outils et sites
Web.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;L’interactivité peut être envisagée de deux manières : soit comme un passage
entre deux états (non interactif et interactif), soit comme un continuum. Savoir
quand une page devient interactive pour la première fois est intéressant mais si
l’interface ne répond pas rapidement, l’UX ne sera pas très qualitative. Quand
nous parlons “d’interactivité”, nous considérons donc à la fois le fait que la
page est interactive et le fait que les interactions aient eu lieu de manière
satisfaisante.&lt;/p&gt;
&lt;p&gt;Le &lt;strong&gt;Time To Interactive&lt;/strong&gt;, anciennement connu sous le nom de “Time To
Consistently Interactive”, est un indicateur synthétique expérimental qui tente
de mesurer quand votre application web est à la fois rendue visuellement et
interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/danse.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; Superposition de plusieurs photos d&amp;#39;un danseur en
mouvement. Chaque mouvement est capturé et pourtant il est impossible de saisir
le continuum sur une image statique. &quot; loading=&quot;lazy&quot; width=&quot;3872&quot; height=&quot;2592&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Comme les choses en mouvement sont difficiles à appréhender, nous nous appuyons
souvent sur des approximations et des modèles.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Le TTI est une mesure de l’interactivité qui ne repose pas sur les interactions
réelles des utilisateurs. L’algorithme fait plutôt une approximation en
considérant qu’une interaction satisfaisante ne peut se produire que dans des
conditions spécifiques et s’intéresse à déterminer la survenue de ces
conditions.&lt;/p&gt;
&lt;p&gt;Pour déterminer le TTI, l’algorithme avance le long de la ligne de temps,
effectue des vérifications et redéfinit son estimation du TTI jusqu’à ce qu’il
trouve un moment où toutes les conditions sont remplies. Il choisit d’abord,
comme limite inférieure, le moment où l’utilisateur estime que le contenu
primaire de la page est visible. Plusieurs indicateurs sont disponibles pour
cela : le
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”
parle du First Meaningful Paint, mais on peut également utiliser le First
Contentful Paint,
&lt;a href=&quot;https://github.com/WPO-Foundation/webpagetest/blob/master/docs/Metrics/TimeToInteractive.md&quot;&gt;comme le fait WebPageTest&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ensuite, l’algorithme du TTI vérifie que le navigateur est disponible, en mesure
de prendre en compte l’interaction. La plupart des actions sont gérées côté
client par du code JavaScript tournant dans un unique fil d’exécution, donc
l’algorithme doit ensuite s’assurer qu’aucune tâche JavaScript de longue durée
n’occupe actuellement ce fil (thread, en anglais), ce qui empêcherait le JS de
gérer les entrées utilisateur immédiatement. Pour le W3C, une tâche est “longue”
(&lt;a href=&quot;https://github.com/w3c/longtasks&quot;&gt;Long Task&lt;/a&gt;) si elle dure plus de 50 ms. Par
la suite, l’algorithme cherchera une fenêtre de 5 secondes sans Long Tasks.&lt;/p&gt;
&lt;p&gt;Si le code JS nécessaire pour gérer l’interaction n’est pas encore téléchargé,
tout ceci est inutile. Plutôt que d’observer finement chaque réponse HTTP pour
savoir si les ressources JavaScript sont téléchargées, l’algorithme du Time To
Interactive va se servir d’un signal : il va attendre une période d’au moins 5
secondes pendant laquelle il n’observe pas plus de 2 ressources (tous types
confondus) chargées en parallèle.&lt;/p&gt;
&lt;p&gt;Si l’une des conditions (Long Task et Réseau) n’est pas remplie, l’algorithme
fait avancer son estimation du TTI et reprend l’observation pour trouver une
autre Long Task et une autre fenêtre de faible activité réseau de 5 secondes
après la dernière Long Task observée. À ce stade, l’estimation du TTI correspond
à la fin de la dernière Longue Tâche observée.&lt;/p&gt;
&lt;p&gt;Mais nous n’avons pas fini ! L’algorithme ne considère pas qu’une page est
interactive avant que le navigateur n’ait fini d’analyser le document donc si
l’événement DOMContentLoadedEnd se produit après cette estimation, ce moment est
choisi comme valeur définitive du Time To Interactive.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1139/https://boris.schapira.dev/assets/images/2019-05-16/tti_w.png 1139w&quot; sizes=&quot;80vw&quot;  alt=&quot; A graph summarizing the above explanations.
&quot; loading=&quot;lazy&quot; width=&quot;1139&quot; height=&quot;555&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Schéma de principe de la définition,
dans le &amp;quot;Time To Interactive Explainer&amp;quot;.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3&gt;&lt;span id=&quot;comment-utiliser-le-tti&quot;&gt;Comment utiliser le TTI ?&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Un des premiers indicateurs que l’on découvre quand on s’intéresse aux
performances d’affichage est le Visuellement Complet, c’est-à-dire le moment où
le rendu de la zone visible de la page est terminé.&lt;/p&gt;
&lt;p&gt;Le Time To Interactive est comme le Visuellement Complet : un marqueur de la fin
de quelque chose. Mais la question est “de quoi ?”. Tim Dresser a probablement
trouvé la meilleure manière de l’exprimer “a ‘no jank past this point’ metric”.
Cela signifie que le Time To Interactive détermine un moment à partir duquel
nous avons la certitude que les interactions seront fluides. C’est évidemment
quelque chose qu’il est important de surveiller et d’optimiser ou, du moins, ne
pas détériorer sans avoir de bonnes raisons.&lt;/p&gt;
&lt;p&gt;En effet, le TTI est calculé à partir de l’observation indirecte du CPU – par le
biais des Long Tasks JS – et de l’activité réseau. Si le TTI augmente, cela
implique qu’une Long Task JS s’est produite plus tardivement qu’avant, pendant
le chargement de la page, et qu’il est important de savoir pourquoi. Une
nouvelle Long Task a-t-elle été introduite ? S’agit-il d’une tâche déjà connue,
repoussée par une modification apportée au code ? Est-ce une conséquence d’une
dépendance tierce récemment implémentée ?&lt;/p&gt;
&lt;p&gt;Comme nous le démontrerons plus loin dans l’article, cette Long Task n’est pas
nécessairement nuisible à votre UX (par exemple, si vous différez vos scripts,
alors les Long Task qu’ils ont produites se produiront plus tard) mais vous
pouvez certainement optimiser pour vous assurer qu’elle ne se produise pas (par
exemple, vous pouvez déléguer des algorithmes JavaScript complexes aux Web
Workers, les faisant exécuter en tâche de fond sans occuper le thread principal
JavaScript).&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;malentendus&quot;&gt;Quelques malentendus fréquents concernant le Time To Interactive&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;Le Time To Interactive n’est pas le temps qui s’écoule avant qu’une page soit interactive.&lt;/h3&gt;
&lt;p&gt;“Time To Interactive” est un nom vraiment ambigu.&lt;/p&gt;
&lt;p&gt;Même dans la
&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive&quot;&gt;documentation de Lighthouse [EN]&lt;/a&gt;,
vous pouvez lire de courtes définitions trompeuses comme :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Le paramètre Time to Interactive (TTI) mesure le temps qu’il faut à une page
pour devenir interactive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Heureusement, la phrase est suivie d’une définition de ce qu’on entend ici par
“interactif”, mais pour quelqu’un qui ne lirait pas davantage, le mal est fait.&lt;/p&gt;
&lt;p&gt;Parce qu’en réalité, le Time To Interactive ne mesure pas le temps qu’il faut
pour qu’une page devienne interactive, il mesure le temps qu’il faut pour
s’assurer que toutes les conditions soient réunies, pendant au moins 5 secondes,
pour qu’une interaction puisse se produire de manière satisfaisante. C’est
pourquoi la mesure était auparavant connue sous le nom de Time To
&lt;strong&gt;Consistently&lt;/strong&gt; Interactive.&lt;/p&gt;
&lt;p&gt;Il est totalement possible d’avoir une page très rapide et utilisable qui,
malgré cela, a un TTI important. Il suffit que la page exécute des Long Tasks de
courtes durées (la plus courte possible), à un rythme suffisant pour interrompre
la fenêtre d’observation du TTI.
&lt;a href=&quot;https://tests.boris.schapira.dev/longtask/&quot;&gt;Cette page&lt;/a&gt;, par exemple, exécute
une tâche de 51 ms toutes les 2 secondes, pendant un total de 20 secondes et son
TTI est supérieur à 19 secondes.&lt;/p&gt;
&lt;p&gt;Néanmoins, la page est parfaitement interactive bien avant que le TTI ne le
suggère.&lt;/p&gt;
&lt;h3&gt;Dans l’algorithme du TTI, la sous-fenêtre de “silence réseau” n’est qu’un signal&lt;/h3&gt;
&lt;p&gt;Le Time To Interactive est toujours lié à la dernière Long Task JS.
L’heuristique “activité réseau réduite” n’est qu’un signal. J’ai vu des gens
demander s’ils avaient besoin d’améliorer leur Waterfall pour qu’elle contienne
moins de deux requêtes simultanées à chaque instant. Si aucune de ces requêtes
n’engendre une Long Task, pas d’inquiétude, votre TTI ne souffrira pas.&lt;/p&gt;
&lt;p&gt;Cependant, comme il ne s’agit que d’un signal, cet algorithme ne garantit pas
que le code JS requis pour gérer l’interaction soit vraiment disponible. Vous
pouvez avoir un Time To Interactive très correct et pourtant une page qui n’est
pas du tout interactive – du moins de la manière dont l’utilisateur s’y attend.&lt;/p&gt;
&lt;h3&gt;Le TTI de Google n’est pas le même que celui des autres&lt;/h3&gt;
&lt;p&gt;Chaque fois que Google introduit un nouveau concept, il y a une forte demande du
marché. Mais attention, le Time To Interactive n’est pas un standard !&lt;/p&gt;
&lt;p&gt;Akamai Boomerang, l’une des solutions de Real User Monitoring les plus célèbres,
a
&lt;a href=&quot;https://developer.akamai.com/tools/boomerang/docs/BOOMR.plugins.Continuity.html#toc10__anchor&quot;&gt;sa propre définition du Time To Interactive&lt;/a&gt;,
qui diffère fortement de celle de Google. Ils utilisent divers signaux comme le
Frame Rate, les Long Tasks, la disponibilité de la page (“Page Busyness”, mesuré
via des &lt;code&gt;setInterval&lt;/code&gt;) et les délais mesurés dans les interactions utilisateur.
Même s’ils conservent la définition à 50 ms d’une Long Task (comme le W3C), leur
fenêtre d’observation n’est que de 500 ms (au lieu de 5 secondes), ce qui
empêche les valeurs de Time To Interactive de se disperser en raison de tâches
isolées.&lt;/p&gt;
&lt;p&gt;Des solutions de Monitoring Synthétique prétendent supporter l’indicateur de
Time To Interactive mais, comme pour
&lt;a href=&quot;https://blog.dareboost.com/fr/2017/11/le-temps-de-chargement-est-mort/&quot;&gt;le temps de chargement&lt;/a&gt;,
il faut toujours vérifier leur définition. Au cours de mes recherches, j’ai
constaté que certaines d’entre elles n’hésitent pas à apposer une étiquette
“TTI” sur d’autres indicateurs (comme
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming/domInteractive&quot;&gt;l’événement domInteractive [EN]&lt;/a&gt;),
qui n’ont rien à voir.&lt;/p&gt;
&lt;h3&gt;Le Time to Interactive manque de stabilité&lt;/h3&gt;
&lt;p&gt;Un indicateur qui n’est pas prévisible est difficile à comprendre. En faisant
des recherches pour cet article, nous avons rassemblé ces éléments qui suggèrent
que le TTI est l’une de ces mesures dont la nature complexe le rend difficile à
stabiliser.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Je l’ai essayé et c’était un indicateur trop instable pour mesurer Wikipedia.
En voici un exemple :
&lt;a href=&quot;https://phabricator.wikimedia.org/T176369&quot;&gt;https://phabricator.wikimedia.org/T176369&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;Peter Hedenskog, ingénieur logiciel pour la Fondation Wikimedia&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Nous avons peu de retours d’expérience sur le TTI&lt;/h3&gt;
&lt;p&gt;Il y a peu de données concernant sur la corrélation des mesures du TTI et ce qui
est observé chez les utilisateurs, en tout cas aucune qui n’indique que
l’indicateur soit plus intéressant que les existants.&lt;/p&gt;
&lt;p&gt;Basé sur une première étude de Deepanjan Roy
(&lt;a href=&quot;https://docs.google.com/spreadsheets/d/14xVEkk0yUV9kCaPERLzUpB057hjdV66KP24AyExayh0/edit#gid=0&quot;&gt;une scoresheet concernant 28 sites Web&lt;/a&gt;),
le Time To Interactive a par la suite été
&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;qualifié par Tim Dresser&lt;/a&gt;,
sans grand succès. Pour être honnête, ces corrélations sont très difficiles à
obtenir : comme nous pouvons le voir dans l’analyse de Tim, même sur des
indicateurs plus stables comme le FCP, la corrélation entre les données de
terrain et de tests n’est pas bonne.&lt;/p&gt;
&lt;p&gt;J’ai trouvé
&lt;a href=&quot;https://www.slideshare.net/nicjansma/reliably-measuring-responsiveness&quot;&gt;une étude de 2017, de Nic Jansma [EN]&lt;/a&gt;,
&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;citée récemment par Addy Osmani [EN]&lt;/a&gt;,
où il explique que l’amélioration du TTI a un impact réel sur le taux de
conversion dans un cas d’utilisation réel. Malheureusement, les diapositives ne
donnent pas accès aux données ni aux conditions expérimentales.&lt;/p&gt;
&lt;p&gt;D’autres cas d’utilisation, disponibles en ligne, consistent souvent à supprimer
tout le JavaScript des Landing Pages. Une modification assez drastique, là où
d’autres solutions (comme le téléchargement et le byte-caching du JS dans un
Service Worker pour une utilisation future) auraient pu être préférables. Ne
vous méprenez pas, je suis toujours partant pour réduire le JavaScript au
maximum, mais jamais au détriment du
&lt;a href=&quot;https://www.dareboost.com/fr/service/monitoring-parcours-utilisateur&quot;&gt;parcours utilisateur&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Le Time To Interactive intervient dans un paysage de la Performance Web qui
offre déjà de multiples indicateurs, dont certaines sont plus faciles à
comprendre et à commenter. La plupart des cas d’utilisation que j’ai lus sur le
Time To Interactive ne précisent pas si les indicateurs existants étaient
suffisants pour qualifier la situation. Or la plupart des propriétaires de sites
ne veillent que sur 3 ou 4 indicateurs de performance Web. Avant de leur
demander de laisser tomber l’un d’entre eux pour celui-ci, je pense qu’il est
important qu’ils puissent se faire une idée détaillée de leur pertinence
respective.&lt;/p&gt;
&lt;h3&gt;La définition d’une Long Task à 50ms crée un effet de seuil&lt;/h3&gt;
&lt;p&gt;Les seuils du Time To Interactive ont le mérite de sensibiliser à l’importance
des
&lt;a href=&quot;https://blog.dareboost.com/fr/2014/12/definir-un-budget-de-performance-web/&quot;&gt;budgets de performance&lt;/a&gt;.
En effet, le TTI est un budget de performance en lui-même : “L’indisponibilité
du fil d’exécution principal ne doit jamais dépasser 50 ms”.&lt;/p&gt;
&lt;p&gt;Toutefois, à chaque fois qu’on définit un seuil, cela a un impact.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_944/https://boris.schapira.dev/assets/images/2019-05-16/wpt.png 944w&quot; sizes=&quot;80vw&quot;   alt=&quot; Capture de WebPageTest. L&amp;#39;évaluation du &amp;quot;Page Interactive&amp;quot;
est verte très tôt dans la page, mais perturbée par une partie rouge beaucoup
plus tard dans le chargement. &quot; loading=&quot;lazy&quot; width=&quot;944&quot; height=&quot;192&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Prenons une page de blog très simple, et testons-la sur avec WebPageTest en
Desktop. La page est visuellement prête et complètement interactive dès 1,2
secondes. À ce moment et pendant quelques secondes, un visiteur peut lire et
faire défiler la page librement. À environ 3,5 secondes, une exécution de script
reCaptcha crée une Long Task de 150 ms (en rouge, sur la barre inférieure) qui
décale le Time To Interactive. Cette exécution serait-t-elle perçue par un
visiteur qui interagirait avec la page à ce moment précis ? D’ailleurs, combien
de temps faudrait-il pour qu’un visiteur ressente un délai ?&lt;/p&gt;
&lt;p&gt;According to
&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;the RAIL performance model&lt;/a&gt;
(Response, Animation, Idle, Load), the user perception of performance delays
depends on the nature of the delay. Interaction delays are perceived after
~100ms. A value consistent with
&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Nielsen’s 1993 post, based on Miller &amp;amp; Card et al. studies&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Mais si un délai n’est remarqué quà partir de 100 ms, pourquoi considérer une
tâche JS longue à partir de 50 ms ? L’explication se trouve dans la
spécification Long Task API :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Le modèle de performance RAIL suggère que les applications doivent répondre en
moins de 100 ms à une sollicitation utilisateur (pour le touch tactile et le
défilement, en moins de 16 ms). Notre but avec cette API est de faire
apparaître des notifications sur les tâches qui peuvent empêcher l’application
d’atteindre ces objectifs. Nous mettons en valeur les tâches qui prennent 50
ms ou plus. Un site Web qui n’a pas de tâches de ce type devrait répondre aux
sollicitations des utilisateurs en moins de 100 ms : il faudra moins de 50 ms
pour terminer la tâche en cours d’exécution lorsque l’action utilisateur sera
reçue et moins de 50 ms pour exécuter la tâche qui réagit à cette
sollicitation.&lt;/p&gt;
&lt;p&gt;&lt;cite&gt;&lt;a href=&quot;https://w3c.github.io/longtasks/#intro&quot;&gt;Long Task API 1 [EN]&lt;/a&gt;,
traduction&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;En d’autres termes : la gestion d’une interaction nécessite à la fois que le
navigateur soit capable de gérer l’entrée utilisateur en n’étant pas déjà occupé
(interactivité) et qu’il puisse traiter l’exécution potentielle du code JS
déclenché par cette action de manière rapide (réactivité). Comme nous ne
connaissons pas le temps de réponse réel du navigateur pour exécuter le
traitement déclenché, nous considérons que ce temps devrait être inférieur à 50
ms. Cela laisse 50 ms pour que le navigateur ait le temps de réagir.&lt;/p&gt;
&lt;p&gt;En réalité, tous les navigateurs et les contextes de navigation sont différents
et de nombreux facteurs peuvent influer sur le temps pris par le navigateur pour
traiter une tâche.&lt;/p&gt;
&lt;h2&gt;&lt;span id=&quot;alternatives&quot;&gt;Mesure de l’interactivité : le TTI suffit-il&lt;/span&gt; ?&lt;/h2&gt;
&lt;h3&gt;Le TTI comme nouvel indicateur de référence ?&lt;/h3&gt;
&lt;p&gt;Créer et promouvoir un indicateur est un acte performatif, surtout lorsque cet
indicateur est défini comme LA référence pour l’interactivité : mis en avant par
Google, il ne se contente pas d’évaluer le Web, il le modèle. Les experts
SEO/SEM s’empressent de le recommander à leurs clients, des entreprises
l’utilisent dans des classements. Rapidement, tout le monde considère
l’indicateur comme une référence, sans remettre en cause sa logique interne.&lt;/p&gt;
&lt;p&gt;Cependant, ses nombreuses limitations, toutes cohérentes avec sa définition
basée sur de nombreuses approximations, font du TTI un indicateur plutôt
binaire. Soit votre TTI est très bas et vous pouvez être heureux·se parce que
vous êtes absolument certain·e que la page web offre les meilleures conditions
pour des interactions de qualité ; soit ce n’est pas le cas, et vous devez
enquêter en profondeur pour savoir ce qui se passe car il est possible que
certaines Long Task retardent le TTI sans déranger les utilisateurs mais la page
peut tout aussi bien être inutilisable. Le TTI ne vous donne pas les outils pour
distinguer ces deux possibilités sans faire de recherches approfondies.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2019-05-16/observe.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot; Un microscropt zoomant sur un échantillon.
&quot; loading=&quot;lazy&quot; width=&quot;2784&quot; height=&quot;1848&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Un mauvais TTI est un signe que
toutes les conditions ne sont pas parfaites pour l’interactivité. Cela ne
signifie pas que les interactions seront forcément dégradées. Une analyse
approfondie est toujours nécessaire.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h3&gt;Un jalon plus qu’une évaluation d’un continuum&lt;/h3&gt;
&lt;p&gt;Le Time To Interactive est à l’interactivité ce que le Visuellement Complet est
à l’affichage : un jalon final. Ce qui nous manque, c’est “Speed Index des
interactions” où, pour déduire la frustration de l’utilisateur, chaque Long Task
serait pondérée par sa durée et le moment où elle se produit, en relation avec
d’autres indicateurs (par exemple, les indicateurs de rendu).&lt;/p&gt;
&lt;p&gt;Nic Jansma, dans l’étude de mentionnée précédemment, a observé la distribution
des durée des Long Tasks et a trouvé une corrélation avec la conversion.
J’espère que nous progresserons sur ce point dans les années à venir.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/nic.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1500/https://boris.schapira.dev/assets/images/2019-05-16/nic.png 1500w&quot; sizes=&quot;80vw&quot;  alt=&quot; Temps de la première LongTask vs. Taux de conversion
(gauche) ; Temps de la première LongTask vs. Durée de session (droite)
&quot; loading=&quot;lazy&quot; width=&quot;1500&quot; height=&quot;843&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;L’étude de Nic n’a pas observé de
diminution de la conversion tant que les Long Task de la première page étaient
plus courtes que… 100 ms (et pas 50 ms). Intéressant, non ?&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;En attendant, il existe beaucoup d’autres mesures concernant l’interactivité,
principalement en RUM où l’activité réelle des utilisateurs peut être observée.
Par exemple, je pense que la distribution des
&lt;a href=&quot;https://developers.google.com/web/updates/2018/05/first-input-delay&quot;&gt;First Input Delay [EN]&lt;/a&gt;
est une information extrêmement pertinente, facile à comprendre, mais ce serait
un vaste sujet, digne d’un autre article de blog.&lt;/p&gt;
&lt;p&gt;N’oubliez pas : si vous avez besoin de comprendre ce qui se passe avec
JavaScript dans du Monitoring Synthétique, vous pouvez toujours
&lt;a href=&quot;https://blog.dareboost.com/fr/2018/05/dareboost-custom-timings/&quot;&gt;utiliser les Custom Timings&lt;/a&gt;
pour instrumenter votre code. C’est la meilleure façon de comprendre ce qui
compte vraiment pour votre entreprise.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;En savoir plus sur l’interactivité et le Time To Interactive :&lt;/h2&gt;
&lt;h3&gt;Une touche d’archéologie&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;[1993]
“&lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;Response Times: The 3 Important Limits&lt;/a&gt;”,
Jakob Nielsen&lt;/li&gt;
&lt;li&gt;[2015]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rail&quot;&gt;Measure Performance with the RAIL model&lt;/a&gt;”,
Meggin Kearney, Addy Osmani, Kayce Basques, Jason Miller&lt;/li&gt;
&lt;li&gt;[Juillet 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/11sWqwdfd3u1TwyZhsc-fB2NcqMZ_59Kz4XKiivp1cIg/edit#heading=h.f294oh9v0jlx&quot;&gt;Time To Interactive&lt;/a&gt;”,
Tim Dresser, Paul Irish, Brendan Kenny&lt;/li&gt;
&lt;li&gt;[Décembre 2016]
“&lt;a href=&quot;https://docs.google.com/document/d/1jbvwxj_GJtiTTqFM8dsVzCIy5XeKL5qtIAvuimcXb1o/edit&quot;&gt;Update on defining firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[Janvier 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1pZsTKqcBUb1pc49J89QbZDisCmHLpMyUqElOwYqTpSI/edit&quot;&gt;Evaluating definitions of firstInteractive&lt;/a&gt;”,
Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[Août 2017]
“&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#heading=h.k1h25blerz3i&quot;&gt;First Interactive and Consistently Interactive&lt;/a&gt;”,
Deepanjan Roy (anchor to the
&lt;a href=&quot;https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit#bookmark=id.1d8nplewhcab&quot;&gt;definition of the TTI&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[Février 2018]
“&lt;a href=&quot;https://github.com/WICG/time-to-interactive#definition&quot;&gt;Time To Interactive Explainer&lt;/a&gt;”,
Tim Dresser, Deepanjan Roy&lt;/li&gt;
&lt;li&gt;[Mai 2018]
“&lt;a href=&quot;https://docs.google.com/document/d/1g0J5JIcICFyXYM6ifBF6vNd_qUPIfpf6YAfFHE1TYRE/edit#heading=h.g1vxo77py7yu&quot;&gt;First Input Delay: Correlation with TTI&lt;/a&gt;”,
Tim Dresser&lt;/li&gt;
&lt;li&gt;[Janvier 2019]
“&lt;a href=&quot;https://addyosmani.com/blog/usability/&quot;&gt;Web Page Usability Matters&lt;/a&gt;”, Addy
Osmani&lt;/li&gt;
&lt;li&gt;[Février 2019]
“&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics&quot;&gt;User-centric Performance Metrics&lt;/a&gt;”,
Philip Walton&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;Merci à &lt;a href=&quot;https://twitter.com/henrihelvetica&quot;&gt;Henri&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/bluesmoon&quot;&gt;Phillip&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/soulislove&quot;&gt;Peter&lt;/a&gt; et &lt;a href=&quot;https://twitter.com/tkadlec&quot;&gt;Tim&lt;/a&gt;
qui m’ont aidé à organiser mes idées, et
&lt;a href=&quot;https://twitter.com/DamienJubeau&quot;&gt;Damien&lt;/a&gt; pour ses conseils et multiples
relectures.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 16 May 2019 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/fr/2019/05/mesurer-interactivite-time-to-interactive/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2019/05/mesurer-interactivite-time-to-interactive/</guid>
      
      <category>Performance Web</category>
      
      <category>JavaScript</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>De retour du Wordcamp Bordeaux 2019</title>
      
      <description>
          &lt;p&gt;Il y a quelques semaines, j’ai participé au
&lt;a href=&quot;https://2019.bordeaux.wordcamp.org/&quot;&gt;Wordcamp Bordeaux 2019&lt;/a&gt;. L’événement se
tenait à la Cité Mondiale, en plein cœur des Chartrons, à Bordeaux, dans un
espace chaleureux et accessible.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-04-19/wcbdx-2019.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-04-19/wcbdx-2019.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-04-19/wcbdx-2019.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-04-19/wcbdx-2019.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1024/https://boris.schapira.dev/assets/images/2019-04-19/wcbdx-2019.png 1024w&quot; sizes=&quot;80vw&quot;   alt=&quot;Logo du Wordcamp Bordeaux 2019&quot; loading=&quot;lazy&quot; width=&quot;1024&quot; height=&quot;289&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Bien que je sois arrivé avec pas mal d’avance, l’accueil fût très bon, d’une
part parce que l’équipe était enjouée, sympathique et très organisée et d’autre
part parce que tout le travail de signalétique était remarquable (retrouvez les
créations sur le portfolio de
&lt;a href=&quot;https://www.myleneboyrie.fr/portfolio/wordcamp-bordeaux-2019/&quot;&gt;Mylène Boyrie&lt;/a&gt;).
Rapidement, le petit déjeuner pris place, avec son lot de réseautage.&lt;/p&gt;
&lt;p&gt;Il s’agissait de mon premier Wordcamp, à la fois comme orateur et participant.
J’ai rapidement pris la température de l’événement : je dirais que 60 % des
participant·e·s se connaissaient déjà (réellement ou virtuellement) et étaient
ravi·e·s de se revoir tandis que les autres, moi vocaux, avaient parfois un peu
de mal à s’intégrer. L’ambiance s’est réchauffée assez vite mais pour une future
édition, je recommande un petit &lt;i lang=&quot;en&quot;&gt;ice breaker&lt;/i&gt;.&lt;/p&gt;
&lt;p&gt;Je suis rapidement parti à la découverte de l’amphithéâtre ou je devais, plus
tard, présenter ma conférence. L’espace est vaste, sans être écrasant, car les
sièges sont distribuées sur la largeur plus que la profondeur. Des écrans
secondaires permettent de voir ce qui se passe derrière soi, et la qualité du
retour audio est incroyable.&lt;/p&gt;
&lt;p&gt;Quelques tests plus tard, le Wordcamp débuta.&lt;/p&gt;
&lt;p&gt;De
&lt;a href=&quot;https://wordpress.tv/2019/04/18/remi-corson-quel-impact-le-web-a-t-il-sur-la-planete/&quot;&gt;l’intervention de Rémi Corson&lt;/a&gt;,
je garde un sentiment d’une urgence écologique réelle, mais également d’une
grande tristesse. J’ai trouvé que la très juste critique du bilan carbone du Web
ne s’accompagnait pas toujours d’une réflexion, qui me semble pourtant utile,
sur l’évolution des usages qui en sont faits.&lt;/p&gt;
&lt;p&gt;Trop peu de gens restèrent pour l’intervention de
&lt;a href=&quot;https://wordpress.tv/2019/04/18/marie-guillaumet-8-conseils-pour-rendre-votre-theme-wordpress-plus-accessible/&quot;&gt;l’accessibilité, par Marie Guillaumet&lt;/a&gt;.
Je préfère me dire que les participant·e·s ont préféré assister à la conférence
de Daniel Roch sur l’audit de sites Wordpress mais en réalité, je sais qu’il y a
souvent une défection pour les sujets en rapport avec l’accessibilité, ce qui
confirme qu’il est toujours nécessaire d’en proposer et d’en présenter.&lt;br /&gt;
Marie fût assez impressionnante tant ses connaissances sur le sujet sont vastes.
Cependant, Si Marie est capable d’aborder tous les aspects de l’accessibilité en
moins d’une heure, son public n’est pas nécessairement en mesure de tout
assimiler. J’ai trouvé que le contenu de la présentation était très dense, et
comme il était aussi très maitrisé, il n’y avait pas de redites. Je me suis juré
de &lt;a href=&quot;https://wordpress.access42.net/&quot;&gt;revenir ultérieurement sur ses slides&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;La conférence de
&lt;a href=&quot;https://wordpress.tv/2019/04/18/jack-lenox-how-better-performing-websites-can-help-save-the-planet/&quot;&gt;Jack Lennox, mêlant écoconception et performances web&lt;/a&gt;,
m’a beaucoup intéressé, mais j’ai regretté qu’il n’ait pas répondu au mail que
je lui avais envoyé plusieurs semaines avant la conférence pour échanger sur les
périmètres respectifs de nos interventions, cela m’aurait permis d’éviter les
redites ou de venir abonder certains points plutôt que de les répéter.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://wordpress.tv/2019/04/18/valerie-galassi-sorganiser-quand-on-est-freelance-etre-productif-et-penser-a-soi/&quot;&gt;Valérie Galassi a parlé d’organisation du travail&lt;/a&gt;
et son propos m’a beaucoup touché. Les problèmes abordés, je les rencontre
parfois dans mon quotidien de télétravailleur à temps complet. Le concept de
cotivation, d’ailleurs, résume assez bien la relation qui s’est mise en place
naturellement entre &lt;a href=&quot;https://twikito.com/&quot;&gt;Matthieu&lt;/a&gt; et moi.&lt;/p&gt;
&lt;p&gt;J’ai ensuite assisté à la présentation
&lt;a href=&quot;https://wordpress.tv/2019/04/18/jean-philippe-souyris-e-commerce-comment-assurer-la-conformite-juridique-dun-site-web-en-2019/&quot;&gt;“E-commerce : Comment assurer la conformité juridique d’un site web en 2019 ?”, présentée par Jean-Philippe Souris&lt;/a&gt;,
du cabinet HAAS Avocats. Il fit le tour des choses importantes à savoir
concernant la conformité juridique des activités de vente en ligne. Un rappel
intéressant et très bien mené, à près d’un an de l’entrée en application du
Règlement Général sur la Protection des Données.&lt;/p&gt;
&lt;p&gt;Enfin, j’ai assisté à
&lt;a href=&quot;https://wordpress.tv/2019/04/18/stephanie-laporte-reseaux-sociaux-de-la-visibilite-a-la-rentabilite/&quot;&gt;l’intervention de Stéphanie Laporte sur l’acquisition Social Ads&lt;/a&gt;.
Cette présentation m’a à la fois enchanté et terrifié car la puissance de
Facebook sur nos données, démontrée ici, est toute à la fois fascinante et
terrifiante : en captant nos données, Facebook ne se contente pas de nous
modéliser,
&lt;a href=&quot;https://boris.schapira.dev/2018/12/de-qui-suis-je-le-territoire/&quot;&gt;il nous façonne&lt;/a&gt;.
Le tout, sans arriver à protéger nos données
&lt;a href=&quot;https://dayssincelastfacebookscandal.com/&quot;&gt;plus d’une semaine d’affilée&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Je n’ai malheureusement pas pu rester jusqu’à la fin de la conférence ; je
devais retourner sur Périgueux avant une certaine heure.&lt;br /&gt;
J’ai vraiment apprécié cette conférence et je pense que je reviendrai avec
plaisir une prochaine fois. Un grand merci à tous les participant·e·s, les
intervenant·e·s et, bien sûr, l’équipe derrière l’événenement !&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Fri, 19 Apr 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2019/04/wordcamp-bordeaux-2019/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2019/04/wordcamp-bordeaux-2019/</guid>
      
      <category>Wordpress</category>
      
      <category>Conférences</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Netflix : augmenter la vitesse des vidéos</title>
      
      <description>
          &lt;p&gt;Il y a quelques mois, j’ai publié un article sur
&lt;a href=&quot;/2018/08/bookmark-netflix-luminosite/&quot;&gt;l’augmentation de la luminosité des vidéos Netflix&lt;/a&gt;
et il a eu un certain succès. Mais que faire si vous avez vraiment besoin
d’accélérer votre épisode en cours pour le terminer avant que votre bae arrive
ou ralentir les mouvements de Beyoncé pour mieux apprendre une de ses chorés
dans HOMECOMING ? Pas de problème.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;strong&gt;Cliquez-glissez ce lien dans vos favoris&lt;/strong&gt;:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&lt;a href=&quot;javascript:(function(){var b=Number(prompt('Video playback rate?','1'))%7C%7C1;Array.from(document.getElementsByTagName('video')).forEach(function(a){a.playbackRate=b;a.play()})})();&quot; title=&quot;Gérer la vitesse de lecture des vidéos&quot;&gt;Gérer
la vitesse de lecture des vidéos&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;N’hésitez pas à renommer le favori avec un libellé plus court. Par exemple,
j’utilise seulement les émojis ☀️ (soleil) and 🏃‍ (course).&lt;/p&gt;
&lt;p&gt;Allez ensuite sur Netflix, OCS, Molotov, ou n’importe quel service de streaming
utilisant des vidéos HTML&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, lancez votre série ou film préféré, et cliquez
dessus !&lt;/p&gt;
&lt;p&gt;Et si vous voulez gérer à la fois la luminosité et la vitesse de lecture vidéo
sans multiplier les signets, en voici un qui fait les deux à la fois:&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&lt;a href=&quot;javascript:(function(){var c=Number(prompt('Video playback rate?','1'))%7C%7C1,a=prompt('Video brightness?','100%');a=/^\d+(\.\d+)?%$/.test(a)?a:'100%';Array.from(document.getElementsByTagName('video')).forEach(function(b){b.playbackRate=c;b.play();b.setAttribute('style',b.getAttribute('style')+'filter: brightness('+a+');')})})();&quot; title=&quot;Gérer la luminosité et la vitesse de lecture des vidéos&quot;&gt;Gestion
de la luminosité et de la vitesse de lecture vidéo&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2019-04-17/bqueen.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2019-04-17/bqueen.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Beyoncé, habillée en reine, pendant Mrs. Carter World Tour&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;À vous d’être Reine !&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Comme expliqué dans
&lt;a href=&quot;/2018/08/bookmark-netflix-luminosite/&quot;&gt;le billet précédent&lt;/a&gt;, si le site Web
a défini une Content-Security-Policy bloquant les favoris, cela ne marchera
pas, désolé ! &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2019/04/bookmark-netflix-vitesse/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2019/04/bookmark-netflix-vitesse/</guid>
      
      <category>Netflix</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Lazy Loading, des pages web plus rapides sans impact SEO</title>
      
      <description>
          &lt;p&gt;Les images sont au cœur de votre site web ? Si vous prenez la performance de
votre site au sérieux, vous les avez probablement optimisées. Mais avez-vous
pensé à les charger en &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; ? Le
&lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; des images améliore l’expérience utilisateur en
libérant de la bande passante pour le contenu important.&lt;/p&gt;
&lt;p&gt;Certains rejettent la technique pour des questions de SEO. Mais un
&lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; de vos images ne les empêche pas d’être
indexées. Voyons pourquoi vous devriez implémenter un &lt;span lang=&quot;en&quot;&gt;Lazy
Load&lt;/span&gt; d’images et comment vous assurer qu’il soit compatible avec votre
SEO.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2019/03/lazy-loading-des-pages-web-plus-rapides-sans-risque-seo/&quot;&gt;Lazy Loading, des pages web plus rapides sans impact SEO&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Les images sont partout sur le Web, mais servir l’image la plus adaptée au
contexte courant peut s’avérer très difficile.
&lt;a href=&quot;https://blog.dareboost.com/fr/2017/10/optimiser-les-images-et-reduire-leur-poids-formats-outils-et-rwd/&quot;&gt;L’image doit être optimisée&lt;/a&gt;,
adaptée à sa zone de rendu et chargée uniquement si nécessaire.&lt;/p&gt;
&lt;p&gt;Le &lt;strong&gt;&lt;span lang=&quot;en&quot;&gt;Lazy Loading d’images&lt;/span&gt;&lt;/strong&gt; est un ensemble de
techniques conçues pour répondre à ce dernier besoin en différant le
téléchargement de chaque image jusqu’au moment où elle est nécessaire : après
une interaction spécifique, à la suite d’un défilement… ou jamais.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://httparchive.org/reports/state-of-images#offscreenImages&quot;&gt;Selon HTTPArchive [EN]&lt;/a&gt;,
420 Ko (valeur médiane) pourraient être sauvegardés par page en chargeant ainsi
les images hors écran et/ou masquées.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1200/https://boris.schapira.dev/assets/images/2019-03-20/offscreen-images.png 1200w&quot; sizes=&quot;80vw&quot;   alt=&quot;Graphique présentant la quantité de données qui pourrait
être sauvegardées en ne chargeant pas les images hors-champ.&quot; loading=&quot;lazy&quot; width=&quot;1200&quot; height=&quot;800&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;Quelques cas d’usage&lt;/h2&gt;
&lt;p&gt;Il y a de nombreux cas concrets du &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt;. Prenons
quelques minutes pour citer quelques exemples.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Résultats de recherche E-commerce&lt;/strong&gt;. Ces pages contiennent souvent tellement
de résultats que beaucoup de produits se trouvent en dehors de la fenêtre.
Est-il utile de télécharger leurs images ? Avec le &lt;span lang=&quot;en&quot;&gt;Lazy
Loading&lt;/span&gt;, vous pouvez retarder leur chargement jusqu’à ce que la page soit
déroulée.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Les carrousels&lt;/strong&gt;, vous connaissez ? Pourquoi l’utilisateur devrait-il charger
toutes les images alors qu’il ne visualise que la première pendant quelques
secondes ? Utilisez le &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; ! Chargez la première
image normalement, et lancez le téléchargement de l’image suivante en
arrière-plan, quelques secondes avant l’animation du carrousel. Et ainsi de
suite.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Menus et onglets&lt;/strong&gt;. Les images contenues dans un menu ou un onglet sont
souvent masquées, affichées seulement après un clic. Avec le
&lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt;, vous pouvez retarder le chargement de ces
images jusqu’à ce que le bouton affichant l’élément soit survolé ou cliqué.&lt;/p&gt;
&lt;p&gt;Suivant la nature de votre page, d’autres cas sont envisageables. Aucune image
ne devrait être incluse à vos pages sans que vous ne vous soyez posé la question
d’en retarder le téléchargement. Car à la clé, il y a d’importants gains de
performance.&lt;/p&gt;
&lt;h2&gt;Il en faut peu pour être heureux&lt;/h2&gt;
&lt;p&gt;En retardant le chargement des images qui ne sont pas immédiatement nécessaires
(ou, dans certains cas, en ne les chargeant pas du tout), le navigateur
économise des ressources (bande passante aussi bien que CPU). Ainsi, les
ressources préservées peuvent être affectées au contenu plus critique : la page
se charge plus rapidement et l’expérience utilisateur est améliorée. Les gains
sont aussi présents côté serveur : le processeur et la bande passante
nécessaires pour fournir les ressources sont moins sollicités, réduisant les
coûts d’hébergement et/ou de CDN.&lt;/p&gt;
&lt;p&gt;Comme indiqué dans l’introduction, utiliser du &lt;span lang=&quot;en&quot;&gt;Lazy
Loading&lt;/span&gt; n’empêche pas vos images d’être indexées par les moteurs de
recherche. Mais cela peut être compliqué. Toutes les techniques ne se valent pas
car les différentes bibliothèques et plugins disponibles sur le marché ne
respectent pas nécessairement toutes les bonnes pratiques. Pour préserver votre
référencement naturel, il est donc essentiel de comprendre comment le
&lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; fonctionne, et comment l’utiliser sans
risque.&lt;/p&gt;
&lt;h2&gt;Utiliser JavaScript pour le LazyLoad&lt;/h2&gt;
&lt;p&gt;Dans un monde parfait, le &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; des images serait
automatiquement assuré par le navigateur. Ça sera peut-être bientôt le cas, car
&lt;a href=&quot;https://github.com/w3c/webappsec-feature-policy/issues/193&quot;&gt;une Feature Policy dédiée au Lazyload [EN]&lt;/a&gt;
est à l’étude, mais nous ne pouvons pas encore compter dessus. En attendant,
nous devons explorer d’autres solutions, chacune d’entre elles impliquant une
modification du balisage HTML et l’ajout d’une dépendance JS.&lt;/p&gt;
 &lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;IMPORTANT&lt;/strong&gt; Vous n’avez pas besoin – et ne devriez pas –
appliquer un lazyload à toutes vos images. Si vous savez que certains images
seront affichées la plupart du temps, laissez-les être chargées et rendues
normalement. Le &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; est uniquement recommandé
pour les autres images. N’ajoutez pas de complexité si ça n’est pas nécessaire !&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Traditionnellement, on utilise JS pour évaluer, à intervalles réguliers, si
chaque image (ou chaque élément affichant une image en arrière-plan) doit être
chargée et affichée. Les bibliothèques JS très performantes comme
&lt;a href=&quot;https://github.com/aFarkas/lazysizes&quot;&gt;lazysizes&lt;/a&gt; sont construites sur ce
paradigme et sont compatibles avec les anciens navigateurs. lazysizes peut même
détecter si le User-Agent est capable de scroller et, sinon, charger les images
sans attendre.&lt;/p&gt;
&lt;p&gt;Cependant, l’exécution régulière de ces tests a un coût dont on peut
s’affranchir sur les navigateurs qui exposent les APIs Intersection et Mutation
Observer. Ces API permettent de réagir à des états spécifiques du DOM plutôt que
d’avoir à tester continuellement. &lt;a href=&quot;https://github.com/malchata/yall.js&quot;&gt;yall.js&lt;/a&gt;
et &lt;a href=&quot;https://apoorv.pro/lozad.js/&quot;&gt;lozad.js&lt;/a&gt; sont de bons exemples
d’implémentations de ce type mais sont seulement compatibles avec les
navigateurs modernes, ou exigent que vous utilisiez une autre bibliothèque,
appelée
&lt;a href=&quot;https://github.com/w3c/IntersectionObserver/tree/master/polyfill&quot;&gt;polyfill&lt;/a&gt;,
pour émuler la fonctionnalité manquante au navigateur.&lt;/p&gt;
&lt;div class=&quot;inline-note&quot;&gt;&lt;p&gt;&lt;strong&gt;À NOTER&lt;/strong&gt; Pour éviter que le navigateur ne considère son
absence comme une erreur, je vous recommande fortement de toujours définir la
valeur de l’attribut &lt;code&gt;src&lt;/code&gt;, en utilisant une très petite image transparente pour
occuper l’espace, comme :&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Quelle que soit la solution JavaScript que vous choisissez côté client, vous
devez modifier votre backend pour retourner le bon code HTML. Le balisage HTML
pour le lazyload d’une image est toujours similaire : l’attribut &lt;code&gt;src&lt;/code&gt; est
remplacé temporairement par un attribut &lt;code&gt;data-src&lt;/code&gt; qui empêche l’élément &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;
de charger l’image finale immédiatement.&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded image: before --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;data-src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;placeholder.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;js-lazyload&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data…&quot;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded background image: before --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data-class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bg-image-garden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;La bibliothèque identifie ses images cibles à l’aide d’un attribut, très souvent
en utilisant une classe spécifique (par exemple, ici, nous utilisons la classe
&lt;code&gt;js-lazyload&lt;/code&gt;). Lorsque la bibliothèque détecte qu’il est temps de charger
l’image, l’attribut &lt;code&gt;data-src&lt;/code&gt; est utilisé pour remplir l’attribut &lt;code&gt;src&lt;/code&gt; et le
navigateur commence à charger l’image. La technique est la même pour d’autres
types de médias (vidéo, iframes) ou d’images adaptées pour le Responsive Web
Design (par exemple, l’attribut &lt;code&gt;data-srcset&lt;/code&gt; peut être utilisé pour conserver
temporairement la valeur finale de l’attribut &lt;code&gt;srcset&lt;/code&gt;)&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded image: after --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;js-lazyload&quot;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Lazy loaded background image: after --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload bg-image-garden&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2&gt;Pas de JavaScript ? Contourner avec style (et &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt;).&lt;/h2&gt;
&lt;p&gt;Les robots d’indexation, comme par exemple les Googlebots, sont des logiciels
qui parcourent le Web dans le but d’en indexer le contenu. Personne ne sait avec
certitude quand les Googlebots vont exécuter le code JavaScript de leurs pages,
et sous quelles contraintes. Comme
&lt;a href=&quot;https://www.stephanboyer.com/post/122/does-google-execute-javascript&quot;&gt;démontré par Stephan Boyer en 2016 [EN]&lt;/a&gt;
et confirmé plus tard par
&lt;a href=&quot;https://youtu.be/PFwUbgvpdaQ?t=845&quot;&gt;Tom Greenaway pendant Google IO 2018 [EN]&lt;/a&gt;,
les Googlebots n’exécutent pas JavaScript durant leur première visite. Pour
obtenir une indexation se basant sur un rendu complet, il est parfois nécessaire
d’attendre plusieurs jours.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Comme les Googlebots indexent le contenu web en deux temps, il est possible
que certains détails nous échappent. &lt;cite&gt;Tom Greeaway&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Comme certaines images.&lt;/p&gt;
&lt;p&gt;Parce que si JavaScript n’est pas disponible, les images qui devraient être
chargées en &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; ne le seront pas, car l’attribut
&lt;code&gt;src&lt;/code&gt; ne sera jamais rempli, empêchant le navigateur de démarrer le
téléchargement et d’afficher les images. Ne pas télécharger et afficher les
images en lazyload impliquent malheureusement qu’elles ne seront pas indexées
par les moteurs de recherche.&lt;/p&gt;
&lt;p&gt;Comment servir ces images malgré l’absence de JavaScript ? Il y a un élément
HTML spécifique que vous pouvez utiliser : &lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt;. Le contenu d’un élément
&lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt; n’est affiché que si les fonctions de script ne sont pas supportées
ou sont désactivées. C’est exactement ce qu’il nous faut !&lt;/p&gt;
&lt;p&gt;Donc si votre réponse HTML contient :&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;data-src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data/…&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A spacious garden dominated by a large pine tree.&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lazyload&quot;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;noscript&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;garden.jpg&quot;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A spacious garden dominated by a large pine tree.&quot;&lt;/span&gt;
        &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/noscript&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;alors :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lorsque JavaScript est disponible, seul le premier élément &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; est
affiché ;&lt;/li&gt;
&lt;li&gt;lorsque JavaScript n’est pas disponible, les deux éléments &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; sont pris
en compte lors de l’affichage de la page. Le second (dans l’élément
&lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt;), est affiché et indexé par les moteurs de recherche. La
technique,
&lt;a href=&quot;https://www.youtube.com/watch?time_continue=4308&amp;amp;v=7m-cd8XXovQ&quot;&gt;confirmée par John Mueller [EN]&lt;/a&gt;,
Webmaster Trends Analyst chez Google, est exactement la même pour les images
de fond :&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data-class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bg-image-garden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container js-lazyload&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;…&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;noscript&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;container bg-image-garden&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        … A spacious garden dominated by a large pine tree. …
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/noscript&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Attention : ne manquez pas d’ajouter un style spécifique qui sera appliqué
lorsque JavaScript n’est pas disponible, masquant les images qui n’auront pas
été chargées en &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Comme le code de chaque image est plus que dupliqué, vous pourriez craindre que
cette implémentation ne produise un code HTML verbeux. Ne vous inquiétez pas,
vos documents HTML sont normalement compressés avec gzip ou brotli avant d’être
envoyés sur le réseau. L’impact de ces duplications sur le poids du transfert
est donc négligeable (si vous n’êtes pas sûr·e que votre site utilise une
compression, &lt;a href=&quot;https://www.dareboost.com/&quot;&gt;testez vos pages avec Dareboost&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Reste bien sûr que saisir toutes ces balises n’est pas évident. En gérant les
images responsives, la direction artistique… le balisage des images peut être
très, très pénible. De toutes façons, vous ne devriez pas saisir ce code HTML à
la main : gérer cette complexité automatiquement devrait être de la
responsabilité de votre CMS, ou une tâche dédié de votre processus de
contribution.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_686/https://boris.schapira.dev/assets/images/2019-03-20/guardians_rwd_image.png 686w&quot; sizes=&quot;80vw&quot;  alt=&quot;Un cinquantaine de lignes de HTML bien
dense.&quot; loading=&quot;lazy&quot; width=&quot;686&quot; height=&quot;420&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Balisage d’une image de The
Guardian, avant-même la mise en place d’un &lt;span lang=&amp;quot;en&amp;quot;&gt;Lazy
Loading&lt;/span&gt;&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Tester l’implémentation&lt;/h2&gt;
&lt;p&gt;Une fois le &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; implémenté, vous devrez tester
qu’il fonctionne. La solution la plus simple est, bien sûr, d’exécuter
&lt;a href=&quot;https://www.dareboost.com/fr/service/analyse-site-web&quot;&gt;un audit complet de performance web&lt;/a&gt;
avec Dareboost pour détecter si toutes les images hors du viewport sont chargées
tardivement ou à la demande. Si ce n’est pas le cas, l’outil vous remontera les
URL des images pour lesquelles le chargement peut être reporté.&lt;/p&gt;
&lt;p&gt;Si vous avez conditionné le chargement de vos images à la survenue d’un
événement navigateur ou personnalisé, n’hésitez pas à consulter
&lt;a href=&quot;https://www.dareboost.com/fr/doc/rapport-analyse/timeline-waterfall&quot;&gt;la Waterfall de votre rapport&lt;/a&gt;
pour vérifier que le chargement des images respecte votre chronologie. S’il
s’agit d’un événement personnalisé, n’hésitez pas à utiliser un
&lt;a href=&quot;https://blog.dareboost.com/fr/2018/05/monitoring-custom-timings/&quot;&gt;Custom Timing&lt;/a&gt;
pour être en mesure de le retrouver dans la Waterfall.&lt;/p&gt;
&lt;p&gt;Il peut aussi être utile de faire des tests manuels. Ouvrez votre navigateur sur
la page web concernée, ouvrez les outils de développement et sélectionnez
l’onglet Réseau (tous les navigateurs modernes le proposent). Videz la pile
réseau pour mieux visualiser les nouveaux appels, puis provoquez l’interaction
destinée à démarrer le &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Voici un exemple sur Chrome, avec un &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; activé
au défilement :&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/Z4jRe3KRcf4&quot; title=&quot;Visualization of lazyloading during scrolling in the Chrome DevTools Network tab&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Vous pouvez envisager d’automatiser ces tests en utilisant des outils basés sur
un navigateur. Puppeteer est l’un d’entre eux et
&lt;a href=&quot;https://github.com/GoogleChromeLabs/puppeteer-examples/blob/master/lazyimages_without_scroll_events.js&quot;&gt;peut être utilisé pour tester le comportement&lt;/a&gt;
de votre &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; avec Chrome ou Chromium, pour
s’assurer que vos vrai·e·s visiteurs·euses verront vos images.&lt;/p&gt;
&lt;p&gt;Pour vérifier que les robots d’indexation verront également vos images, vous
pouvez demander à Google lui-même, en utilisant l’outil Inspecteur d’URL de la
&lt;a href=&quot;https://search.google.com/search-console&quot;&gt;Google Search Console&lt;/a&gt;. Vous
afficherez votre page exactement comme si elle avait été récupérée par Google.
Insérez simplement votre URL pour que le Googlebot teste votre page et réalise
une capture d’écran du résultat pour confirmer que votre contournement
&lt;code&gt;&amp;lt;noscript&amp;gt;&lt;/code&gt; fonctionne comme prévu.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Et voilà, vous savez maintenant tout ce qu’il y a à savoir sur le
&lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; d’images, son impact SEO et la meilleure
façon de le contourner. Il est temps de faire un peu de ménage !&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 20 Mar 2019 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/fr/2019/03/lazy-loading-des-pages-web-plus-rapides-sans-risque-seo/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2019/03/lazy-loading-des-pages-web-plus-rapides-sans-risque-seo/</guid>
      
      <category>Performance Web</category>
      
      <category>Images</category>
      
      <category>SEO</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Optimisation du temps de compilation de Jekyll</title>
      
      <description>
          &lt;p&gt;Il y a trois ans, fatigué par WordPress et de sa galaxie de plugins douteux,
j’ai décidé de migrer vers un générateur de site statique. Après quelques essais
avec diverses solutions, j’ai opté pour Jekyll, dont la communauté me semblait
plus mature.&lt;/p&gt;
&lt;p&gt;Trois ans plus tard, je commence à comprendre les forces et les faiblesses de la
solution, mais je reste loin d’en maîtriser tous les mystères. Je l’ai
bidouillée pour publier du contenu multilingue, j’ai développé mes propres
plugins, j’ai intégré des éléments d’architecture piochés chez des amis… Disons
que je suis désormais assez à l’aise.&lt;/p&gt;
&lt;p&gt;Par contre, à force de manipulations, mon Jekyll ressemblait moins au célèbre
docteur qu’au monstre de Frankenstein : un assemblage de portions de code
grossièrement liées entre elles par des liens fragiles, se déplaçant lentement
en gémissant… En un mot comme en cent : mon &lt;em lang=&quot;en&quot;&gt;build&lt;/em&gt; était lent.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://jamstatic.fr/2018/11/28/optimisation-compilation-jekyll/&quot;&gt;Optimisation du temps de compilation de Jekyll&lt;/a&gt;.
&lt;/div&gt;
&lt;hr /&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Constatant que ma compilation Jekyll était des plus lentes, j’ai contacté la
communauté JAMstack francophone pour des conseils.&lt;/li&gt;
&lt;li&gt;Plusieurs choses ont émergé, chaque conseil permettant d’optimiser le temps
de compilation.&lt;/li&gt;
&lt;li&gt;Le plus gros gain provient des évolutions de Jekyll lui-même, sur lequel
l’équipe est en train de faire un énorme travail.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;Pour générer &lt;a href=&quot;https://boris.schapira.dev&quot;&gt;mon site&lt;/a&gt;
(&lt;a href=&quot;https://github.com/borisschapira/boris.schapira.dev&quot; title=&quot;Dépôt GitHub boris.schapira.dev&quot;&gt;source&lt;/a&gt;),
j’ai développé un ensemble de commandes Rake&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; qui se chargent de nettoyer
l’espace de travail, de déterminer l’environnement de destination et de
configurer la compilation en conséquence, de vérifier l’intégrité des en-têtes
front matter de mes articles, de générer le site avec Jekyll et, enfin, de
contrôler ce qui est produit en utilisant
&lt;a href=&quot;https://rubygems.org/gems/html-proofer/&quot;&gt;la gemme &lt;code&gt;html-proofer&lt;/code&gt;&lt;/a&gt;. Je n’exécute
pas tout cela sur mon ordinateur : à la place, je délègue cette tâche à Netlify,
branché sur mon dépôt GitHub pour compiler et déployer mes branches.&lt;/p&gt;
&lt;p&gt;Toutes ces tâches prenaient individuellement du temps, mais la partie dédiée à
la génération avec Jekyll restait la plus consommatrice de CPU, prenant
plusieurs minutes. Résultat : pendant des mois, mes compilations Netlify ont
duré plus de 10 minutes. Chaque compilation était plus lente que la précédente.&lt;/p&gt;
&lt;p&gt;Il y a quelques jours, Netlify a complètement arrêté le déploiement du site web
car mes compilations prenaient tellement de temps qu’elles dépassaient la limite
imposée par le système d’intégration continue de Netlify&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Il était temps d’agir.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Un proverbe africain dit :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Seul, on va plus vite. Ensemble, on va plus loin.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Je ne pense pas que ce soit tout à fait vrai. Je crois que lorsque nous nous
entourons des bonnes personnes, nous pouvons aller &lt;em&gt;ailleurs&lt;/em&gt;, vers des
possibilités que nous n’avions même pas envisagées.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Quand j’ai pensé que j’atteignais la limite de mes compétences, j’ai demandé
l’aide à la communauté que je connais le mieux : les membres de JAMstatic. Et
parmi eux, un membre de la &lt;span lang=&quot;en&quot;&gt;Core Team&lt;/span&gt; de Jekyll,
&lt;a href=&quot;https://github.com/DirtyF&quot;&gt;Frank&lt;/a&gt;. Il m’a beaucoup aidé (et continue de le
faire) en me montrant des possibilités que je n’avais pas envisagées.&lt;/p&gt;
&lt;h2&gt;Inclusions : à consommer avec modération&lt;/h2&gt;
&lt;p&gt;L’expérience m’a appris qu’il est souvent plus difficile de maintenir un projet
que de le réaliser en premier lieu. Pour augmenter ses chances de succès, mieux
vaut trouver des techniques d’organisation du code qui soient adaptées à sa
compréhension sur le long terme. À mon sens, diviser le code en portions
significatives est l’une des astuces de maintenance les plus efficaces.&lt;/p&gt;
&lt;p&gt;Dans Jekyll, cela se fait avec des inclusions, via la balise
&lt;code&gt;{% include %}&lt;/code&gt;. Mais attention, une décomposition de code
trop ambitieuse aura un coût sur votre temps de compilation, que vous pourrez
visualiser avec le
&lt;a href=&quot;https://jekyllrb.com/docs/configuration/options/#build-command-options&quot;&gt;profileur Liquid [EN]&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;D’après &lt;a href=&quot;https://github.com/pathawks/&quot;&gt;Pat Hawks&lt;/a&gt;, membre de la
&lt;span lang=&quot;en&quot;&gt;Core Team&lt;/span&gt; Jekyll :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Chaque fois que vous utilisez une balise &lt;code&gt;{% include %}&lt;/code&gt;,
Jekyll doit ouvrir le fichier concerné, lire son contenu en mémoire, puis
analyser le gabarit avec Liquid. Cela se produit à chaque
&lt;code&gt;{% include %}&lt;/code&gt;, et pas une seule fois par fichier ! Donc
l’utilisation d’une même inclusion sur 100 pages provoquera le chargement et
l’analyse de cette inclusion 100 fois. Le problème s’aggrave très rapidement
si vous commencez à faire des inclusions dans vos inclusions…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Une façon de surmonter ce coût supplémentaire est de mettre en cache les blocs
compilés pendant l’interprétation de votre &lt;code&gt;{% include %}&lt;/code&gt;.
Il y a un plugin pour cela : le plugin
&lt;a href=&quot;https://github.com/benbalter/jekyll-include-cache&quot;&gt;jekyll-include-cache&lt;/a&gt; de Ben
Balter. Mais attention à deux choses très importantes :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;assurez-vous de passer toutes les données nécessaires à votre
&lt;code&gt;{% include %}&lt;/code&gt; en paramètres, car elles seront
utilisées comme clés pour le cache ;&lt;/li&gt;
&lt;li&gt;si vous le pouvez, n’utilisez des inclusions que pour générer des portions de
code réutilisables. Si les paramètres de l’inclusion la rendent si spécifique
qu’elle n’est pas réutilisable ailleurs, alors le cache relatif à cette
inclusion aura été construit pour rien et n’apportera aucun gain de
performance.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ces deux contraintes sont si fortes qu’elles m’ont obligé à réintégrer plus de
la moitié de mes inclusions dans mes gabarits (&lt;em&gt;_layouts&lt;/em&gt;). Je ne suis pas
entièrement satisfait de cette situation (car, en conséquence, je trouve que les
capacités de maintenance sont dégradées) mais je dois avouer que j’ai gagné près
de &lt;strong&gt;10 %&lt;/strong&gt; de temps de compilation&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; en sacrifiant ce petit confort.&lt;/p&gt;
&lt;p&gt;Et avec des commentaires Liquid
(&lt;code&gt;{% comment %}This is a comment{% endcomment %}&lt;/code&gt;), je peux
toujours organiser efficacement mon code, même réintégré dans un seul fichier.&lt;/p&gt;
&lt;h2&gt;Faites confiance aux gemmes compilées en C&lt;/h2&gt;
&lt;p&gt;Par défaut, Jekyll est basé sur un ensemble de gemmes écrites en Ruby.
Récemment, de nouvelles gemmes sont apparues, partiellement écrites en C, ce qui
améliore leur performance d’exécution. L’équipe Jekyll a eu la gentillesse
d’ajouter des tests conditionnels dans le générateur pour utiliser ces gemmes si
elles sont référencées dans votre Gemfile. Vous n’avez donc qu’à ajouter les
gemmes à votre Gemfile pour tirer parti de ces améliorations.&lt;/p&gt;
&lt;p&gt;Il en existe certainement d’autres, mais en voici au moins deux :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Shopify/liquid-c&quot;&gt;la gemme &lt;code&gt;liquid-c&lt;/code&gt;&lt;/a&gt;, pour optimiser
la compilation Liquid ;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sass/sassc-ruby&quot;&gt;la gemme &lt;code&gt;sassc&lt;/code&gt;&lt;/a&gt;, si vous avez besoin
de Jekyll pour compiler des fichiers Sass plus efficacement.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Je n’ai pas besoin de Jekyll pour mes fichiers Sass mais en utilisant
&lt;code&gt;liquid-c&lt;/code&gt;, j’ai économisé &lt;strong&gt;9 %&lt;/strong&gt; du temps de compilation.&lt;/p&gt;
&lt;h2&gt;Si vous pouvez l’éviter, n’utilisez pas LSI&lt;/h2&gt;
&lt;p&gt;Jekyll est livré avec une option très pratique appelée &lt;em lang=&quot;en&quot;&gt;Latent
Semantic Indexing&lt;/em&gt; (LSI) dont le rôle est d’analyser tout le contenu avant
de générer le site, afin d’alimenter, pour chaque article, une collection
qualitative d’articles connexes (au lieu des dix articles les plus récents). LSI
fait un très bon travail mais si vous avez des centaines d’articles comme moi,
il fonctionnera lentement, très lentement&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn4&quot; id=&quot;fnref4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Après une très rapide non-analyse des données analytiques dont je ne dispose
pas&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn5&quot; id=&quot;fnref5&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;, j’ai décidé de me séparer de la proposition d’articles associés
et d’économiser &lt;strong&gt;17 %&lt;/strong&gt; du temps de compilation.&lt;/p&gt;
&lt;h2&gt;Markdown : choisissez la bonne variante&lt;/h2&gt;
&lt;p&gt;Markdown est un langage à balisage léger vraiment sympa mais il lui manque une
chose très importante : une standardisation. Il existe des douzaines de parseurs
Markdown, chacun avec ses caractéristiques spécifiques. Depuis quelque temps,
une initiative de standardisation émerge autour de
&lt;a href=&quot;https://commonmark.org/&quot;&gt;CommonMark&lt;/a&gt;, et les projets l’implémentant
fleurissent.&lt;/p&gt;
&lt;p&gt;Par défaut, Jekyll utilise &lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;kramdown&lt;/a&gt;, un
surensemble de Markdown développé en Ruby qui fait du très bon boulot. Pour le
remplacer par CommonMark, j’ai voulu utiliser
&lt;a href=&quot;https://github.com/gjtorikian/commonmarker&quot;&gt;commonmarker&lt;/a&gt; qui est, encore une
fois, un wrapper Ruby pour une implémentation en C. Pour en tirer parti dans
Jekyll, vous pouvez utiliser
&lt;a href=&quot;https://github.com/jekyll/jekyll-commonmark&quot;&gt;le plugin jekyll-commonmark de Pat Hawks&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Attention, la transition n’est pas sans adaptations. kramdown et CommonMark sont
assez différents : en passant de l’un à l’autre, j’ai dû sacrifier quelques
sucres syntaxiques.&lt;/p&gt;
&lt;p&gt;Par exemple, CommonMark ne supporte pas les attributs de bloc tels que
&lt;code&gt;{ :.myclass}&lt;/code&gt; pour décorer un paragraphe de contenu. Vous
aurez besoin d’utiliser de bonnes vieilles balises HTML. N’oubliez pas d’activer
l’option &lt;code&gt;UNSAFE&lt;/code&gt; dans votre configuration Jekyll (&lt;code&gt;_config.yml&lt;/code&gt;) si vous ne
voulez pas générer beaucoup de commentaires du type &lt;code&gt;&amp;lt;!-- raw HTML omitted --&amp;gt;&lt;/code&gt;
:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;markdown: CommonMark
commonmark:
  options: [&quot;SMART&quot;, &quot;FOOTNOTES&quot;, &quot;UNSAFE&quot;, &quot;HARDBREAKS&quot;]
  extensions: [&quot;strikethrough&quot;, &quot;autolink&quot;, &quot;table&quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Vous remarquerez peut-être aussi que CommonMark est moins tolérant que kramdown,
qui corrige à la volée de nombreuses approximations de contribution. Passer à
cet analyseur m’a aidé à détecter des problèmes dans mes articles que je n’avais
jamais remarqué auparavant. Si vous avez un contenu conséquent, attendez-vous à
devoir corriger quelques coquilles.&lt;/p&gt;
&lt;p&gt;Un petit prix à payer pour gagner encore &lt;strong&gt;9 %&lt;/strong&gt; de temps de compilation.&lt;/p&gt;
&lt;h2&gt;Faites confiance à la &lt;em lang=&quot;en&quot;&gt;Team&lt;/em&gt; pour aller dans la bonne direction&lt;/h2&gt;
&lt;p&gt;Enfin, l’une des dernières améliorations apportées a été le passage à la version
&lt;code&gt;master&lt;/code&gt; de Jekyll. Depuis la version 3.8.5 (ma version précédente), de
nombreuses améliorations ont été apportées, et le gain de performance est
vraiment considérable : &lt;strong&gt;93 %&lt;/strong&gt; !&lt;/p&gt;
&lt;p&gt;Je n’arrivais tellement pas à y croire que j’ai temporairement versionné mon
dossier &lt;code&gt;_site&lt;/code&gt; et vérifié qu’il n’y avait rien de cassé en changeant de
version. Et dans mon cas : rien à redire, tout est parfait.&lt;/p&gt;
&lt;p&gt;Si vous ne deviez retenir, ou tester, qu’une seule optimisation, c’est celle-ci.
Faites confiance à la &lt;span lang=&quot;en&quot;&gt;Core Team&lt;/span&gt;, la performance est une
de leurs priorités.&lt;/p&gt;
&lt;h2&gt;Qu’en est-il de mon chantier multilingue ?&lt;/h2&gt;
&lt;p&gt;Avec toutes ces optimisations, ma compilation Jekyll est passée de plus de 15
minutes à environ une minute. C’est encore beaucoup, et je sais pourquoi : ma
gestion “fait maison” de l’internationalisation, et plus particulièrement de la
traduction de mes articles, est sous-optimale.&lt;/p&gt;
&lt;p&gt;Elle est basée sur une clé front matter &lt;code&gt;i18n-key&lt;/code&gt; qui me permet de faire se
correspondre mes articles et pages d’une langue à l’autre et sur un plugin qui,
pour chaque contenu, scanne tous les autres contenus pour trouver ceux qui sont
des traductions du contenu courant. Cette stratégie O(n²), bien que facile à
mettre en œuvre, n’est pas efficace du tout et pénalise mes performances de
compilation.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ashmaroli&quot;&gt;Ashwin Maroli&lt;/a&gt;, l’un des membres de la
&lt;em lang=&quot;en&quot;&gt;Jekyll Plugin Core Team&lt;/em&gt;, travaille sur un plugin qui utilise
une convention d’organisation des fichiers pour trouver les traductions, ce qui
devrait considérablement améliorer les choses :
&lt;a href=&quot;https://github.com/ashmaroli/jekyll-locale&quot;&gt;jekyll-locale&lt;/a&gt;. J’ai essayé
d’implémenter le plugin sur mon blog mais j’ai rencontré quelques impondérables
lors de cette première tentative. J’y reviendrai plus tard, une fois que
j’aurais simplifié mon organisation des contenus. J’aurais également besoin que
certains autres plugins soit modifiés pour être compatibles, comme
&lt;a href=&quot;https://github.com/sverrirs/jekyll-paginate-v2&quot;&gt;jekyll-paginate-v2 de Sverrir Sigmundarson&lt;/a&gt;,
qui me sert pour la pagination.&lt;/p&gt;
&lt;p&gt;Je ne manquerai pas d’en parler quand j’attaquerai à nouveau ce chantier&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Protocole expérimental&lt;/h2&gt;
&lt;p&gt;Comme les optimisations ci-dessus nécessitent également de modifier le contenu,
je n’ai pas effectué de benchmark en parallèle de l’implémentation itérative des
optimisations. J’ai attendu d’avoir complètement terminé, et donc d’avoir le
contenu final, puis j’ai repris ma configuration d’avant optimisation et j’ai
analysé les gains étape par étape.&lt;/p&gt;
&lt;p&gt;Voici mon protocole de test : Je suis parti d’une installation sans aucune de
ces optimisations, puis j’ai écrit un script implémentant les optimisations une
par une et compilant le site (sauf la suppression des inclusions, car… j’étais
trop paresseux pour scripter la modification des gabarits, je l’avoue). J’ai
ensuite programmé l’exécution du script 10 fois et je me suis couché pendant que
mon ordinateur passait près de 16 heures à passer ces optimisations au banc
d’essai.&lt;/p&gt;
&lt;p&gt;Voici les données brutes, si certains veulent jouer avec :&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Run&lt;/th&gt;
&lt;th&gt;Step&lt;/th&gt;
&lt;th&gt;Done in… (s)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1337,872&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1509,997&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1264,981&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1282,607&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 1&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;64,949&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1510,356&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1457,161&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1239,278&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1058,934&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 2&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;72,335&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;2148,253&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1465,446&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1253,785&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;886,152&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 3&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;92,384&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1621,322&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1506,737&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1225,414&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1057,497&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 4&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;87,943&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1589,323&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1607,33&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1261,815&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;914,124&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 5&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;77,526&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1643,596&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1481,98&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1237,843&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1336,47&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 6&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,099&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1456,432&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1487,558&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1268,737&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1106,233&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 7&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;2943,453&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1492,383&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1229,34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1321,156&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 8&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;70,332&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1587,532&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1586,698&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1264,424&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;950,634&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 9&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,907&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;1 - Before&lt;/td&gt;
&lt;td&gt;1643,22&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;2 - Switch to liquid-c&lt;/td&gt;
&lt;td&gt;1581,063&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;3 - Remove LSI&lt;/td&gt;
&lt;td&gt;1229,119&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;4 - Switch to CommonMark&lt;/td&gt;
&lt;td&gt;1332,547&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Test 10&lt;/td&gt;
&lt;td&gt;5 - Switch to master&lt;/td&gt;
&lt;td&gt;69,022&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Rake est un orchestrateur similaire à make, mais en Ruby
(&lt;a href=&quot;https://rubygems.org/gems/rake/&quot;&gt;en savoir plus&lt;/a&gt;). &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;15 minutes, comme confirmé par Chris McCraw dans son article
“&lt;a href=&quot;https://www.netlify.com/blog/2016/10/18/how-our-build-bots-build-sites/&quot;&gt;How Our Build Bots Build Sites&lt;/a&gt;”. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;Vous allez devoir me croire sur parole, parce que mon protocole
d’expérimentation ne contenait pas de test avec et sans inclusions. Il
s’agit donc d’une estimation personnelle. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn4&quot;&gt;
&lt;p&gt;Il semblerait que &lt;a href=&quot;https://rubygems.org/gems/gsl&quot;&gt;la gemme gsl&lt;/a&gt; permette
d’améliorer cela, mais je ne l’ai pas testé. Vos retours m’intéressent. &lt;a href=&quot;#fnref4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn5&quot;&gt;
&lt;p&gt;Parce que je n’ai pas besoin de ça pour connaître les personnes qui me
lisent, car elles interagissent souvent avec moi dans les commentaires ou
sur Twitter. &lt;a href=&quot;#fnref5&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 28 Nov 2018 00:00:00 +0100</pubDate>
      <link>https://jamstatic.fr/2018/11/28/optimisation-compilation-jekyll/</link>
      <guid isPermaLink="true">https://jamstatic.fr/2018/11/28/optimisation-compilation-jekyll/</guid>
      
      <category>Jekyll</category>
      
      <category>JAMStatic</category>
      
      <category>Outils</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Content Encoding: pourquoi utiliser la balise meta charset et l'en-tête Content-Type</title>
      
      <description>
          &lt;p&gt;Améliorer la vitesse à laquelle une page Web est affichée implique souvent de
rendre la vie du navigateur aussi facile que possible. Lorsque le navigateur
reçoit une réponse HTTP, il reçoit en fait du texte encodé en octets, où chaque
octet ou séquence d’octets représente un caractère donné. Si le navigateur ne
sait pas clairement quel encodage utiliser, il perdra du temps à essayer de le
deviner et sera susceptible d’échouer dans certains cas.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2018/11/encodage-meta-charset-content-type-header/&quot;&gt;Content Encoding: pourquoi utiliser la balise meta charset et l'en-tête Content-Type&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Bien que le Web se veuille universel, les différents groupes humains qui
l’utilisent ont leurs propres spécificités. L’une de ces spécificités est le
langage, surtout lorsqu’il est écrit. Tout contenu textuel est composé de
caractères, provenant d’un répertoire destiné à un type donné d’utilisation. Les
hiraganas, par exemple, constituent un système phonétique destiné à la
transcription sans ambiguïté de la langue japonaise.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1200/https://boris.schapira.dev/assets/images/2018-11-16/hiragana.png 1200w&quot; sizes=&quot;80vw&quot;  alt=&quot;Hiraganas&quot; loading=&quot;lazy&quot; width=&quot;1200&quot; height=&quot;698&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Tableau
montrant le sens d’écriture des hiraganas&lt;br /&gt;
par Karine WIDMER
(&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA-3.0&lt;/a&gt; ·
&lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Table_hiragana.svg&quot;&gt;Source&lt;/a&gt;)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Pour pouvoir désigner chaque caractère sans ambiguïté, il faut attribuer à
chacun d’eux un identifiant unique. L’ensemble des identifiants sera appelé un
jeu de caractères. Une fois cette table de correspondance définie, chaque
caractère doit être converti en une séquence d’octets afin que nous puissions
les stocker ou les partager entre systèmes informatiques. C’est ce qu’on appelle
l’encodage de caractères (encoding).&lt;/p&gt;
&lt;p&gt;Imaginez que j’utilise un jeu de caractères pour écrire du texte et un encodage
correspondant pour le convertir en octets, et qu’enfin, je vous l’envoie.
Comment le décoder et lire le contenu, sans savoir quel encodage ou quel jeu de
caractères j’ai utilisé ? Vous n’aurez pas d’autre choix que d’essayer les jeux
de caractères les plus couramment utilisés, en espérant que le résultat ait un
sens… Au pire, que pourrait-il bien se passer ?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Remplacer un point-virgule (;) par un point d’interrogation grec (;) dans le
code JavaScript de vos amis puis regardez-les s’arracher les cheveux sur les
erreurs de syntaxe. &lt;cite&gt;Ben Johnson (@benbjohnson),
&lt;a href=&quot;https://twitter.com/benbjohnson/status/533848879423578112&quot;&gt;16 novembre 2014&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Oui, bon… ce n’est visiblement pas une bonne idée.&lt;/p&gt;
&lt;p&gt;À titre d’exemple, la séquence de bits 1100 0011 1010 1001 correspond au
caractère “é” dans l’encoding UTF-8. Si vous décodez cette séquence en
supposant devoir utiliser l’encoding Latin-1 et non de l’UTF-8, vous lirez “Ã
©”.&lt;br /&gt;
En Latin-1, le caractère “é” est représenté par la séquence 1110 1001.&lt;/p&gt;
&lt;p&gt;Lorsque le navigateur reçoit des octets, il doit identifier la collection de
lettres et de symboles qui ont été utilisés pour écrire le texte qui a été
converti en ces octets, ainsi que le codage utilisé pour cette conversion, afin
de l’inverser. Si aucune information de ce type n’a été transmise, le navigateur
tentera de trouver des motifs reconnaissables dans les octets pour déterminer
l’encodage lui-même, et éventuellement essayer certains jeux de caractères
courants, ce qui prendra du temps, retardant le traitement ultérieur de la page.&lt;/p&gt;
&lt;p&gt;Pour accélérer l’affichage de vos pages, vous devez spécifier l’encodage du
contenu dans votre réponse HTTP.&lt;/p&gt;
&lt;h2&gt;Comment choisir le bon jeu de caractères ?&lt;/h2&gt;
&lt;p&gt;Il fut un temps où coexistaient des centaines d’encodages de caractères, tous
limités et ne pouvant pas contenir suffisamment de caractères pour convenir à la
plupart des langues du monde. Parfois, aucun encodage n’était adéquat pour
toutes les lettres dans une seule langue.&lt;/p&gt;
&lt;p&gt;Aujourd’hui, Unicode (un jeu de caractères universel, définissant tous les
caractères nécessaires pour écrire la majorité des langues) est devenu un
standard, quelle que soit la plate-forme, le périphérique, l’application ou la
langue que vous visez. UTF-8 est l’un des encodages Unicode et celui qui devrait
être utilisé pour le contenu Web, selon le W3C :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Tous ceux qui développent du contenu, qu’ils soient des auteurs de contenus ou
des programmeurs, devraient utiliser l’encodage de caractères UTF-8, sauf s’il
existe des raisons très spéciales pour utiliser autre chose. (Si vous décidez
de ne pas utiliser UTF-8, vous devrez choisir l’un des quelques encodages
interopérables mis en place sur tous les navigateurs.)
&lt;cite&gt;”&lt;a href=&quot;https://www.w3.org/International/getting-started/characters.fr&quot;&gt;Présentation des jeux et encodages de caractères&lt;/a&gt;”,
W3C&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Note : si vous utilisez une base de données pour stocker votre contenu côté
serveur, vous pourriez être tenté d’utiliser aussi le jeu de caractères “utf-8”.
Attention : sur MySQL et MariaDB, c’est un alias pour “utf8mb3”, un encodage
UTF-8 appelé “Basic Multilingual Plane” (ou BMP) qui ne stocke qu’un maximum de
trois octets par caractère. Préférez plutôt utiliser “utf8mb4”, un encodage qui
stocke un maximum de quatre octets par caractère. Sinon, vous ne pourrez pas
utiliser certains caractères populaires, tels que 🚀, autrement connu sous le
nom de “U+1F680 ROCKET” !&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Comment communiquer l’encodage utilisé… et la meilleure façon de le faire.&lt;/h2&gt;
&lt;p&gt;Avant d’aller plus loin, faisons un point sur le vocabulaire usité :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Historiquement, les termes “character encoding”, “character map”, “character
set” et “code page” étaient synonymes en informatique […]. de nos jours, les
termes ont des significations connexes bien que distinctes […] Quoi qu’il en
soit, les termes sont toujours utilisés de façon interchangeable, “character
set” s’imposant presque partout.
&lt;cite&gt;”&lt;a href=&quot;https://en.wikipedia.org/wiki/Character_encoding#Character_sets,_character_maps_and_code_pages&quot;&gt;Character encoding&lt;/a&gt;”,
Wikipedia, traduction française&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;On retrouve cette utilisation de “character set” ou “charset” pour désigner, en
réalité, un encodage, dans les spécifications HTML. Nous ferons de même dans la
suite de cet article. Une des façons les plus simples de spécifier un jeu de
caractères dans une page HTML est de mettre une balise &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; dans l’élément :&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Déclarer un jeu de caractères de cette façon nécessite de
&lt;a href=&quot;https://www.w3.org/TR/html5/document-metadata.html#specifying-the-documents-character-encoding&quot;&gt;respecter certaines contraintes [EN]&lt;/a&gt;,
l’une d’entre elles étant que l’élément contenant la déclaration d’encodage de
caractères doit être complètement sérialisé sur les premiers 1024 octets du
document. Cela permet de s’assurer que les navigateurs recevront l’information
par les premiers paquets IPs transitant sur le réseau, et qu’ils seront ensuite
en mesure de décoder le contenu du document de manière fiable. Comme la balise
charset &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; est la seule à présenter ce type d’impératifs, il est de bon
ton de la placer directement après la balise ouvrante :&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si vous avez peur d’oublier, ne vous inquiétez pas. C’est évidemment l’un des
contrôles que Dareboost effectuera pour vous au sein de notre
&lt;a href=&quot;https://www.dareboost.com/fr/service/analyse-site-web&quot;&gt;outil d’analyse de la qualité web&lt;/a&gt;.
Cependant, il se peut que vous vous trouviez dans la situation où cette
déclaration n’est pas suffisante, et que le navigateur n’en tienne pas compte.
Pourquoi ? Parce que les métadonnées de la page peuvent indiquer un autre jeu de
caractères et qu’en cas de conflit, ces informations, définies dans les en-têtes
HTTP, sont prioritaires.&lt;/p&gt;
&lt;p&gt;Pour s’assurer de l’information transmise par les métadonnées de la page, vous
pouvez utiliser
&lt;a href=&quot;https://www.dareboost.com/fr/doc/rapport-analyse/timeline-waterfall&quot;&gt;notre fonctionnalité d’affichage de la Timeline/Waterfall&lt;/a&gt;.
Dépliez les informations détaillées de votre document principal pour afficher
les en-têtes HTTP de la réponse, y compris l’en-tête &lt;code&gt;Content-Type&lt;/code&gt;, contenant
les métadonnées d’encodage.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-11-16/content-type.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_273/https://boris.schapira.dev/assets/images/2018-11-16/content-type.png 273w&quot; sizes=&quot;80vw&quot;   alt=&quot;En-tête de type de contenu dans une réponse
HTTP&quot; loading=&quot;lazy&quot; width=&quot;273&quot; height=&quot;86&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Pour changer cet en-tête HTTP, vous devrez vous adresser à la personne qui gère
votre serveur web, qu’il s’agisse de votre hébergeur ou d’un responsable de
votre organisation, car la configuration des en-têtes HTTP est très spécifique
au serveur Web utilisé, et vous aurez besoin des droits d’administration
appropriés pour pouvoir modifier ces paramètres.&lt;/p&gt;
&lt;p&gt;Sur &lt;strong&gt;Apache 2.2+&lt;/strong&gt;, la configuration de l’UTF-8 comme jeu de caractères par
défaut pour les fichiers de types &lt;code&gt;text/plain&lt;/code&gt; ou &lt;code&gt;text/html&lt;/code&gt; implique
d’utiliser
&lt;a href=&quot;https://httpd.apache.org/docs/2.2/en/mod/core.html#adddefaultcharset&quot;&gt;la directive &lt;code&gt;AddDefaultCharset&lt;/code&gt; [EN]&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddDefaultCharset utf-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pour les autres types de fichiers, vous aurez besoin d’utiliser la directive
&lt;a href=&quot;https://httpd.apache.org/docs/current/fr/mod/mod_mime.html#addcharset&quot;&gt;&lt;code&gt;AddCharset&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AddCharset utf-8 .js .css …
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Dans &lt;strong&gt;nginx&lt;/strong&gt;, vous devrez vous assurer que le
&lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_charset_module.html&quot;&gt;module ngx_http_charset_module est chargé&lt;/a&gt;,
puis utiliser la directive &lt;code&gt;charset&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;charset utf-8;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ici aussi, il est possible d’affiner le champs d’application pour que d’autres
types de fichiers que &lt;code&gt;text/html&lt;/code&gt; soient livrés en utf-8, en utilisant la
directive &lt;code&gt;charset_types&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;charset_types text/html text/css application/javascript
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bien sûr, vous pouvez aussi configurer l’en-tête HTTP &lt;code&gt;Content-Type&lt;/code&gt; dans votre
code côté serveur. En &lt;strong&gt;PHP&lt;/strong&gt;, par exemple, vous pouvez utiliser
&lt;a href=&quot;http://php.net/manual/fr/function.header.php&quot;&gt;la fonction réseau the header()&lt;/a&gt;.
N’oubliez pas, si vous le faites, de définir le type de média (ou type MIME) du
corps de la réponse, en plus du jeu de caractères.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;header('Content-type: text/html; charset=utf-8');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Attention : si vos pages sont délivrées par un Content Delivery Network (CDN),
vous devrez peut-être configurer l’en-tête &lt;code&gt;Content-Type&lt;/code&gt; dans la configuration
du CDN, car la plupart d’entre eux ne répercutent pas les en-têtes qu’ils
trouvent sur vos serveurs.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Additional Resources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.iana.org/assignments/media-types/media-types.xhtml&quot;&gt;La liste des types de médias de l’IAN [EN]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.unicode.org/&quot;&gt;Le site web d’Unicode [EN]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;“&lt;a href=&quot;https://www.w3.org/International/articles/definitions-characters/#httpheader&quot;&gt;Character encodings: Essential concepts [EN]&lt;/a&gt;”,
sur le site du W3C dédié à l’internationalisation&lt;/li&gt;
&lt;li&gt;Vous pensez toujours que l’encodage de caractères est une question triviale
? Regardez
“&lt;a href=&quot;https://www.youtube.com/watch?v=yQaRUEwEKxE&quot;&gt;Anatomy of a Critical Security Bug&lt;/a&gt;”,
par Andrew Nacin lors de Loop Conf 2015.&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 19 Nov 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/fr/2018/11/encodage-meta-charset-content-type-header/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2018/11/encodage-meta-charset-content-type-header/</guid>
      
      <category>Performance Web</category>
      
      <category>Headers</category>
      
      <category>Encoding</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Un fichier hosts pour les bloquer tous</title>
      
      <description>
          &lt;p&gt;En tant qu’expert du domaine, les gens me demandent souvent comment améliorer la
performance des sites Web. Parfois, ils me demandent aussi comment améliorer les
performances du Web sur leur propre machine, pour leur propre expérience de
navigation. Dans ce cas, ma réponse est toujours la même : commencer par le
fichier &lt;strong&gt;hosts&lt;/strong&gt;.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-09-07/gollum.jpg 640w&quot; sizes=&quot;80vw&quot;  alt=&quot;Gollum, tenant l&amp;#39;Anneau unique dans l&amp;#39;adaptation du
Seigneur des Anneaux de Peter Jackson&quot; loading=&quot;lazy&quot; width=&quot;640&quot; height=&quot;480&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Je manquais d’inspiration pour trouver une illustration
plus sympa…&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;!-- more --&gt;
&lt;h2&gt;Filtrer les polluants&lt;/h2&gt;
&lt;p&gt;Le Web d’aujourd’hui est blindé de saletés. La plupart des sites sont bourrés de
traqueurs, de publicités et de beaucoup d’autres choses désagréables qui
pénalisent le chargement des sites Web. Pour éviter cela, les gens utilisent de
plus en plus d’AdBlockers&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. Ils offrent une solution simple et rapide (la
plupart du temps, une extension de navigateur) qui bloque la plupart des
contenus indésirables.&lt;/p&gt;
&lt;p&gt;Malheureusement, au niveau de l’UX, les AdBlockers ne font pas toujours
l’affaire. Ils augmentent souvent la quantité de mémoire vive et de cycles CPU
utilisés par votre navigateur Web, ce qui ralentit votre expérience de
navigation au lieu de l’améliorer. Certains font mieux que d’autres, et des
navigateurs entiers&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; ont été conçus pour bloquer les contenus
indésirables, et font en cela un travail incroyable. Mais le web ne se limite
pas à votre navigateur, n’est-ce pas ?&lt;/p&gt;
&lt;p&gt;Tout votre ordinateur consomme du Web. La plupart des applications grand public
sont autant remplies de trackers que n’importe quel site web de Presse. Parfois,
vous pouvez même voir les publicités affichées dans votre interface utilisateur
(&lt;em&gt;Bonjour, Skype. Oui, je parle de toi, vilain garçon&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Les AdBlockers ne peuvent rien y faire. Mais un simple fichier hosts, si.&lt;/p&gt;
&lt;h2&gt;Hosts… kézako ?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Le fichier &lt;strong&gt;hosts&lt;/strong&gt; est un fichier utilisé par le système d’exploitation d’un
ordinateur lors de l’accès à un réseau, comme Internet par exemple. Son rôle
est d’associer des noms d’hôtes à des adresses IP.
&lt;cite&gt;”&lt;a href=&quot;https://fr.wikipedia.org/wiki/Hosts&quot;&gt;hosts&lt;/a&gt;”, sur Wikipedia&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Chaque fois que votre navigateur interagit avec un site Web, il requête en
réalité un serveur, identifié via son adresse IP, comme 185.31.40.11 (IPv4) ou
2a00:b6e0:1:20:2::1 (IPv6). Cette adresse est assez semblable à une adresse
postale.&lt;/p&gt;
&lt;p&gt;Imaginez que vous accédez à une page web, comme &lt;a href=&quot;https://boris.schapira.dev&quot;&gt;https://boris.schapira.dev&lt;/a&gt;.
Comment votre navigateur sait-il quelle adresse IP contacter ? Eh bien, le
navigateur demande simplement à l’annuaire Internet. Enfin, à l’un d’entre eux.
Et l’annuaire, appelé &lt;abbr title=&quot;Domain Name Server&quot;&gt;DNS&lt;/abbr&gt;, trouve
l’adresse IP correspondante et la donne au navigateur.&lt;/p&gt;
&lt;p&gt;Je ne sais pas pour vous, mais moi je n’utilise jamais d’annuaire. La plupart du
temps, j’ai recueilli l’adresse des personnes à qui je veux écrire dans mon
carnet d’adresses personnel et je pioche dedans. C’est exactement à cela que
sert le fichier &lt;strong&gt;hôtes&lt;/strong&gt;. Chaque fois qu’un processus sur votre ordinateur a
besoin d’accéder à une ressource sur Internet, il passe d’abord par le fichier
hosts pour savoir où la trouver.&lt;/p&gt;
&lt;p&gt;Maintenant, imaginons que vous ne vouliez pas que le processus trouve la
ressource en question. Rien de plus simple, lancez-le sur une mauvaise piste, en
associant le domaine badthings.com à une adresse non spécifiée comme 0.0.0.0.0.&lt;/p&gt;
&lt;p&gt;Donc, si quelqu’un fait une liste de tous les domaines contenant des ressources
problématiques, nous pouvons tous les rediriger vers 0.0.0.0.0 dans notre
fichier hosts, et faire de &lt;strong&gt;notre propre Web&lt;/strong&gt; un endroit beaucoup plus sympa.&lt;/p&gt;
&lt;h2&gt;Un projet pour tous les rassembler&lt;/h2&gt;
&lt;p&gt;Il n’y a rien de nouveau dans ce que je décris ici. Les gens cool font ça depuis
des années, partageant leurs fichiers hôtes. Les sites de &lt;span lang=&quot;en&quot;&gt;fake
news&lt;/span&gt;, les plates-formes de jeu d’argent, les groupements de sites
pornographiques, les pages qui cryptominent sur votre ordinateurs, les
tentatives de fraude et les escroqueries sont tous patiemment identifiés et
répertoriés dans des fichiers en accès libre.&lt;/p&gt;
&lt;p&gt;J’utilise
&lt;a href=&quot;https://github.com/StevenBlack/hosts&quot;&gt; le projet “hosts” de Steven Black&lt;/a&gt;, un
script python, pour les agréger en
&lt;a href=&quot;https://raw.githubusercontent.com/borisschapira/hosts/master/hosts&quot;&gt;un fichier hosts unique de 2MB&lt;/a&gt;
contenant plus de 70k domaines. Au cas où vous vous poseriez la question : je
peux modifier le résultat avec ma propre liste d’acceptation (des domaines qui
seraient bloqués normalement, mais dont je veux quand même laisser passer les
requêtes) et des redirections (ce qui me permet d’écrire cet article et de
vérifier le résultat sur &lt;a href=&quot;https://boris.schapira.local:10443/&quot;&gt;https://boris.schapira.local:10443/&lt;/a&gt; qui pointe, en
fait, vers ma propre machine).&lt;/p&gt;
&lt;p&gt;Si vous n’êtes pas à l’aise avec la ligne de commande et utilisez Windows 10,
l’application hostsman vous offrira les mêmes fonctionnalités (&lt;em&gt;malheureusement,
au moment où je publie ce billet, le site web ne semble pas joignable.
Heureusement, il existe une
&lt;a href=&quot;https://portapps.github.io/app/hostsman-portable/&quot;&gt;version portable&lt;/a&gt; de
l’application&lt;/em&gt;).&lt;br /&gt;
Je ne recommanderai pas de modifier votre fichier hôte sur les versions
précédentes de Windows même si
&lt;a href=&quot;/2015/08/de-windows-a-mac/&quot;&gt;je le faisais, avant 2015&lt;/a&gt;, sauf si vous aimez
exécuter &lt;code&gt;ipconfig /flushdns&lt;/code&gt; toutes les 30 minutes. Sur Linux, j’ai vu des gens
discuter de &lt;a href=&quot;https://github.com/jedisct1/dnscrypt-proxy&quot;&gt;dnscrypt-proxy&lt;/a&gt;… mais
je ne l’ai jamais testé.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_578/https://boris.schapira.dev/assets/images/2018-09-07/hostsman.png 578w&quot; sizes=&quot;80vw&quot;  alt=&quot;Un capture de la fenêtre de hostsman, lors de la gestion
des sources.&quot; loading=&quot;lazy&quot; width=&quot;578&quot; height=&quot;436&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Vous pouvez gérer des
sources pour vos mises à jour dans hostsman&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Quelques astuces pratiques&lt;/h2&gt;
&lt;p&gt;Parfois, j’ai besoin de désactiver temporairement ce fichier hosts. Par exemple,
quand j’ai besoin d’aider des clients &lt;a href=&quot;https://www.dareboost.com/&quot;&gt;Dareboost&lt;/a&gt; à
comprendre l’impact des scripts tiers sur leurs pages (et que j’ai donc besoin
de charger ces scripts tiers également).&lt;/p&gt;
&lt;p&gt;Pour activer ou désactiver mon fichier hosts, j’utilise une fonction en ligne de
commande que j’ai développée et placée dans mon fichier &lt;code&gt;~/.profile&lt;/code&gt; &lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;togglehost&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; /etc/host.bak &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo mv&lt;/span&gt; /etc/host.bak /etc/hosts
        &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Fichier host réactivé&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo mv&lt;/span&gt; /etc/hosts /etc/host.bak
        &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Fichier hosts mis de côté&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Une fois cette fonction chargée, l’activation ou la désactivation de mon fichier
hosts est très simple :&lt;/p&gt;
&lt;div class=&quot;language-terminal highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;terminal&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;togglehost
&lt;span class=&quot;go&quot;&gt;Fichier hosts mis de côté
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;togglehost
&lt;span class=&quot;go&quot;&gt;Fichier host réactivé
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Mais comme j’oublie parfois de le remettre en place, j’ai mis en place une
routine qui vérifie chaque minute que le fichier est bien là et, si ce n’est pas
le cas, me prévient en utilisant &lt;a href=&quot;https://github.com/variadico/noti&quot;&gt;noti&lt;/a&gt;, de
Jaime Piña, pour déclencher une notification. Pour exécuter ce contrôle
régulier, j’utilise &lt;code&gt;crontab&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* * * * * if [ ! -e /etc/hosts ]; then /usr/local/bin/noti -t &quot;Fichier hosts&quot; -m &quot;introuvable&quot;; fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Cela fait des années que j’utilise cette technique et il m’arrive d’oublier que
mon fichier hosts me protège à ce point. Chaque fois que j’ai besoin d’utiliser
l’ordinateur de quelqu’un d’autre, ou de désactiver temporairement mon fichier
hosts, je réalise le niveau de confort qu’il me procure.&lt;/p&gt;
&lt;p&gt;Je suis bien conscient que la manipulation de son propre fichier hosts est une
solution efficace mais qui recquiert un certain niveau de compétence technique.
Il ne remplace pas complètement un AdBlocker (ou je n’ai pas encore agrégé assez
de fichiers) mais c’est un gain de performance incroyable, que je recommande
fortement pour la navigation quotidienne.&lt;/p&gt;
&lt;p&gt;Essayez par vous-même, et dites-moi ce que vous en pensez !&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Synthèse&lt;/h2&gt;
&lt;p&gt;Le &lt;strong&gt;fichier hosts&lt;/strong&gt; est le carnet d’adresses interne de votre ordinateur qui
guident les requêtes Web vers les bons serveurs. Remplissez votre fichier hosts
avec des domaines pointant dans le vide vous permet de vous assurer que les
requêtes pointant vers ces domaines échoueront rapidement et efficacement. Des
gens partagent leurs fichiers hôtes depuis des années. Il existe maintenant des
solutions pour les concaténer, ce qui permet de co-construire une solution pour
lutter contre le Web pollué auquel nous devons faire face tous les jours.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Le taux de pénétration des bloqueurs publicitaires aux États-Unis est
d’environ 30 % sur les ordinateurs de bureau, et d’environ 12 % sur les
téléphones mobiles, selon cette
&lt;a href=&quot;https://www.statista.com/statistics/351862/adblocking-usage/&quot;&gt;étude eMaketer sur le blocage des publicités à partir de mars 2017&lt;/a&gt;. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;Si vous n’avez jamais testé &lt;a href=&quot;https://brave.com/&quot;&gt;le navigateur Brave&lt;/a&gt;, je ne
peux que vous encourager à le faire, et à rejoindre les 4 millions de
personnes qui lui font confiance pour réparer leur Web. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;En réalité, je l’ai mises dans mon &lt;code&gt;~/.zprofile&lt;/code&gt;, car j’utilise
&lt;a href=&quot;https://ohmyz.sh/&quot;&gt;Oh My ZSH&lt;/a&gt;. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Fri, 07 Sep 2018 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2018/09/un-fichier-hosts-pour-les-bloquer-tous/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2018/09/un-fichier-hosts-pour-les-bloquer-tous/</guid>
      
      <category>Performance Web</category>
      
      <category>Me, myself and I</category>
      
      <category>Outils</category>
      
      <category>Productivité</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Netflix : augmenter la luminosité des vidéos</title>
      
      <description>
          &lt;p&gt;Mes enfants sont en vacances chez leurs grand-mères, ce qui me laisse beaucoup
de temps libre pour binge-watcher des séries TV sur Netflix. Sauf que je trouve
que sur Netflix, l’image est souvent trop sombre. Pas vous ?&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;Du coup, entre une partie de PS4&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; et un chapitre de roman&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; (parce
qu’il y a une vie en dehors de Netflix), j’ai préparé un petit bookmarklet qui
augmente la luminosité des vidéos de la page courante. Pour en profiter :&lt;/p&gt;
&lt;p&gt;Cliquez-glissez le lien suivant dans votre barre de favoris&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; :&lt;/p&gt;
&lt;!-- nomicrotypo --&gt;
&lt;p&gt;&amp;lt;a href=“javascript:(function(){var a=prompt(“Video
brightness?”,“100%”);a=/^\d+(.\d+)?%$/.test(a)?a:“100%”;Array.from(document.getElementsByTagName(“video”)).forEach(function(b){b.setAttribute(“style”,b.getAttribute(“style”)+“filter:
brightness(”+a+”);”)})})();” title=“Gérer la luminosité des vidéos”&amp;gt;Gérer la
luminosité des vidéos&lt;/a&gt;&lt;/p&gt;
&lt;!-- endnomicrotypo --&gt;
&lt;p&gt;Ensuite rendez-vous sur Netflix, lancez votre série ou film préféré et cliquez
sur “☀️” !&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2018-08-08/joker.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-08-08/joker.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-08-08/joker.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Le Joker applaudit&lt;/em&gt;&lt;/figure&gt;
&lt;p&gt;Notez que cela doit marcher un peu partout, pas que sur Netflix. Un clic sur le
bookmarklet et votre navigateur augmentera la luminosité de toutes les vidéos
présentes sur la page, à condition que la page
&lt;a href=&quot;https://blog.dareboost.com/fr/2016/08/content-security-policy-securiser-site-web-xss/&quot;&gt;ne verrouille pas les injections de style à l’aide d’une Content-Security-Policy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;J’ai testé sur Firefox et Chrome, dernières versions, sur Mac. Je n’irai pas
plus loin et n’assurerai pas le support ; considérez ce petit bout de code comme
étant sous &lt;a href=&quot;https://fr.wikipedia.org/wiki/WTFPL&quot;&gt;licence WTFPL&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;ins datetime=&quot;2019-04-18&quot;&gt;Pressé·e ? Il y a aussi un bookmark pour
&lt;a href=&quot;/2019/04/bookmark-netflix-vitesse/&quot;&gt;accélerer votre vidéo Netflix&lt;/a&gt; ?&lt;/ins&gt;&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Je joue à “Arkham Knight”, de Rocksteady, et c’est une tuerie. Je passe
d’excellents moments et je pense énormément à mon ex-collègue Stéphane,
&lt;a href=&quot;https://nota-bene.org/Trois-jolis-souvenirs-de-traduction&quot;&gt;auteur génial du célèbre “Batou” que le Joker utilise pour s’adresser à Batman&lt;/a&gt;,
ce qui donne au jeu une saveur particulière. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;Je lis en anglais “The Golden Fool” de Robin Hobb, deuxième tome de la
“Tawny Man Trilogy” (en français, le découpage est différent. D’après
Wikipédia, je suis en train de lire
“&lt;a href=&quot;https://fr.wikipedia.org/wiki/Serments_et_Deuils&quot;&gt;Serments et Deuils&lt;/a&gt;”),
qui elle-même fait partie de la saga “The Realm of the Elderlings” dont j’ai
déjà lu les sept livres précédents (en français, cela fait 18 livres). Et je
compte bien lire les huit suivant aussi (soit l’équivalent de 17 livres
français) dans l’année ! &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;N’hésitez pas à renommer le favori avec un libellé plus court. Par exemple,
j’utilise l’émoji ☀️ (soleil). &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 08 Aug 2018 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2018/08/bookmark-netflix-luminosite/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2018/08/bookmark-netflix-luminosite/</guid>
      
      <category>Netflix</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Meilleure UX, meilleures performances : la nouvelle donne du web statique</title>
      
      <description>
          &lt;p&gt;Générateurs de sites statiques, CMS “headless”, plateformes d’intégration
continue et de déploiement… depuis plusieurs années, une nouvelle gamme de
solutions émerge dans le paysage des technologies web. Ces solutions contribuent
à une tendance globale qui ressemble à un retour aux sources du Web. On parle de
“La mouvance statique” ou de la “JAMStack” mais aucun de ces noms ne caractérise
vraiment ce qui n’est pas moins qu’une nouvelle façon d’architecturer des
applications web.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-02-21/0_rouages.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;De grands rouages métalliques emboités&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1281&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2&gt;Aux origines du Web&lt;/h2&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2018/02/site-statique-performance-web/&quot;&gt;Meilleure UX, meilleures performances : la nouvelle donne du web statique&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Lorsqu’un utilisateur tente d’accéder à une page Web, son navigateur envoie une
requête au serveur qui l’héberge. Soit le serveur retourne immédiatement la page
telle qu’elle est stockée, soit le serveur la génère en exécutant du code, à la
demande.&lt;/p&gt;
&lt;p&gt;Bien que le Web ait été conçu comme un enchevêtrement de fichiers statiques, les
langages de programmation côté serveur sont apparus très tôt et sont maintenant
largement utilisés.
&lt;a href=&quot;https://w3techs.com/technologies/overview/programming_language/all&quot;&gt;Selon W3Techs&lt;/a&gt;,
plus de 80 % des serveurs qui utilisent un langage côté serveur tournent en PHP.
Dans la mesure où les hébergeurs offrant des serveurs qui n’exécutent pas au
moins un langage sont pratiquement introuvables, il y a fort à parier qu’une
écrasante majorité de sites web sont aujourd’hui générés dynamiquement.&lt;/p&gt;
&lt;p&gt;Pourtant, la génération dynamique de réponses HTTP présente des inconvénients
importants en termes de performance web. Une page web dynamique est délivrée par
un serveur web, qui charge un langage d’exécution, qui analyse la requête HTTP,
interroge souvent une base de données (parfois localisée sur un autre serveur
dans le datacenter) et des services tiers, alimente un modèle logique qui se
révèle à travers un agrégat de vues pour générer une réponse HTML. Ces
opérations prennent du temps, donc logiquement, le
&lt;a href=&quot;https://www.dareboost.com/en/glossary#ttfb&quot;&gt;Time To First Byte&lt;/a&gt; est plus long.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_975/https://boris.schapira.dev/assets/images/2018-02-21/1_ttfb_en.png 975w&quot; sizes=&quot;80vw&quot;  alt=&quot;Un graphique Dareboost Dareboost sur lequel on peut voir
plusieurs indicateurs. Les pics de TTFB coincident avec les pics de Speed
Index.&quot; loading=&quot;lazy&quot; width=&quot;975&quot; height=&quot;569&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Un TTFB elevé pénalise le Speed
Index d’une page.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Afin d’optimiser les temps de réponse, de nombreuses solutions de mise en cache
sont apparues au fil des ans. Avec ces solutions, le premier utilisateur qui
requête la page continue de subir le coût de génération mais le résultat est
stocké sur un ou plusieurs serveurs proxy et parfois synchronisé sur différents
endroits, partout dans le monde. Ces pages “mises en cache” sont ensuite
utilisées pour répondre à toutes les requêtes considérées identiques, ce qui
assure des temps de réponse rapides et uniformes. Il est possible de trouver des
solutions de mise en cache logicielles (comme
&lt;a href=&quot;https://varnish-cache.org/&quot;&gt;Varnish&lt;/a&gt;) mais également des plateformes et des
infrastructures (les Content Delivery Networks). À chaque fois, le principe est
le même : transformer ce qui est dynamique en pages statiques. Chassez le
naturel…&lt;/p&gt;
&lt;h2&gt;Mais l’utilisation de contenus statiques présente d’autres avantages !&lt;/h2&gt;
&lt;p&gt;Si vous voulez livrer vos pages statiques, vous devez les avoir compilées à
l’avance. Ce fait, aussi banal qu’il puisse paraître, change tout. En effet, la
compilation constitue le principal avantage du statique : déplacer la complexité
de l’environnement de production vers le processus d’intégration.&lt;/p&gt;
&lt;p&gt;Si vos pages sont servies par un serveur web sans avoir besoin d’être générées à
la volée, vous n’avez pas besoin d’exécuter un langage côté serveur. Sans ce
langage, de nombreux vecteurs d’attaque disparaissent. On ne peut pas vous voler
des données confidentielles en injectant du code malveillant si vous n’avez ni
base de données, ni langage d’exécution côté serveur.&lt;/p&gt;
&lt;p&gt;Ne pas exécuter de code sur le serveur signifie également que la consommation
CPU est très faible pour chaque réponse HTTP, ce qui améliore considérablement
votre capacité de montée en charge. Attention toutefois : comme nous le verrons,
le déploiement est un facteur clé et peut prendre du temps CPU.&lt;/p&gt;
&lt;p&gt;Autre avantage : votre infrastructure sera plus résiliente. Imaginons qu’une
erreur advienne, cela serait nécessairement pendant la génération. Vous pourriez
alors la détecter avant le déploiement (par des tests automatisés, par exemple).
Les problèmes techniques résultant d’une mauvaise contribution n’ont donc plus
d’impact sur le site consulté par les visiteurs. Au pire des cas, c’est-à-dire
si la compilation échoue, le contenu ne sera pas livré et le contenu du site ne
sera pas à jour.&lt;/p&gt;
&lt;p&gt;Ces avantages ne sont que la partie visible de l’iceberg. La tendance statique
vous permet de transformer complètement la façon dont un site est publié. Pas
étonnant que
&lt;a href=&quot;https://www.smashingmagazine.com/2017/03/a-little-surprise-is-waiting-for-you-here/&quot;&gt;Smashing Magazine ait déjà migré (EN)&lt;/a&gt;
!&lt;/p&gt;
&lt;h2&gt;La statique est une modalité de distribution. Quelle est sa &lt;em&gt;stack&lt;/em&gt; technique ?&lt;/h2&gt;
&lt;p&gt;Un générateur de site statique (SSG) est un logiciel exécuté localement ou en
tant que service. Il produit (et parfois déploie) un site Web statique en
utilisant certaines sources de données pour le modèle et la configuration, ainsi
que des templates contenant de la logique métier.&lt;/p&gt;
&lt;p&gt;Le marché des SSG est en plein essor, avec
&lt;a href=&quot;https://www.staticgen.com/&quot;&gt;un nouveau produit lancé toutes les deux semaines&lt;/a&gt;.
La plupart d’entre eux génèrent un site Web à partir d’un ensemble de fichiers,
souvent écrits avec une syntaxe légère comme
&lt;a href=&quot;https://daringfireball.net/projects/markdown/&quot;&gt;Markdown&lt;/a&gt; ou Asciidoc. La
responsabilité de la conversion en HTML est attribuée à la fois à un moteur de
templating (Liquid, Go Template, Nunjucks) - responsable de la logique - et à un
moteur de rendu (&lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;kramdown&lt;/a&gt;,
&lt;a href=&quot;https://commonmark.org/&quot;&gt;commonmark&lt;/a&gt;,
&lt;a href=&quot;https://github.com/russross/blackfriday&quot;&gt;blackfriday&lt;/a&gt;,
&lt;a href=&quot;https://asciidoctor.org/&quot;&gt;Asciidoctor&lt;/a&gt;…) responsable de la transformation du
balisage en HTML. Les SSG ne sont rien de plus que les orchestrateurs techniques
de la génération du site web. Par conséquent, ils sont principalement un terrain
de jeu pour les développeurs front-end qui en connaissent les rouages.&lt;/p&gt;
&lt;p&gt;En effet, les SSG sont des outils techniques et non des substituts aux CMS.
Toutefois, ils deviennent vraiment intéressants quand vous suivez la piste de
leur alimentation par des sources de données externes. Parce qu’alors, nous
pouvons introduire des CMS qui ne seraient pas utilisés pour le rendu HTML, mais
seulement pour stocker et exposer les données. On les appelle les CMS Headless.&lt;/p&gt;
&lt;p&gt;Un CMS Headless est constitué :&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;d’un système de stockage de données ;&lt;/li&gt;
&lt;li&gt;d’une interface CRUD ;&lt;/li&gt;
&lt;li&gt;d’une API pour accéder au données.
&lt;cite&gt;”&lt;a href=&quot;https://css-tricks.com/what-is-a-headless-cms/&quot;&gt;What is a Headless CMS? (EN)&lt;/a&gt;”,
Chris Coyier&lt;/cite&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Et vous pouvez fabriquer des CMS Headless à partir de vos solutions habituelles.
Wordpress, par exemple, a une
&lt;a href=&quot;https://developer.wordpress.org/rest-api/&quot;&gt;API REST&lt;/a&gt;. Côté Drupal, il y a tout
un &lt;a href=&quot;https://groups.drupal.org/headless-drupal&quot;&gt;groupe de travail&lt;/a&gt; qui travaille
sur le Headless. Là encore, le marché est en plein essor avec de nombreux
nouveaux &lt;a href=&quot;https://www.headlesscms.org/&quot;&gt;logiciels et services&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Mais pourquoi diable voudrions-nous séparer l’environnement contributif et
l’outil de production? Pour une meilleure séparation des préoccupations.&lt;/p&gt;
&lt;p&gt;L’équipe de développement, libérée du fardeau de la maintenance d’une base de
données, peut se concentrer sur l’évolution technique de la plate-forme et le
pipeline de production des ressources statiques tandis que l’équipe de
contribution, de son côté, peut affiner les contenus.&lt;/p&gt;
&lt;p&gt;Les contributeurs peuvent travailler sur des fichiers plats faciles à stocker et
à modifier. Leur seul langage commun avec les développeurs devient les
métadonnées passées dans chaque fichier, souvent écrites avec
&lt;a href=&quot;https://jekyllrb.com/docs/frontmatter/&quot;&gt;Front-Matter&lt;/a&gt;. Ils peuvent utiliser un
outil dédié à l’édition ou le service en ligne de leur choix, même certains qui
facilitent la collaboration. Ils peuvent également bénéficier du versionning de
fichiers pour consulter l’historique de leurs fichiers, fusionner plusieurs
versions ou créer des branches pour écrire du contenu qu’ils ne veulent pas
publier tout de suite.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-02-21/2_carrot.png 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot;Un diagramme des flux de contribution et de développement
d&amp;#39;un site qui montre clairement la séparation des préoccuppations entre
développeurs et contributeurs.&quot; loading=&quot;lazy&quot; width=&quot;1604&quot; height=&quot;976&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Le flux
de contribution du CMS statique de Carrot (une agence numérique), tel que décrit
&lt;a href=&quot;https://carrot.is/coding/static_cms.html&quot;&gt;sur leur blog&lt;/a&gt;.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Après la contribution des contenus, la génération du site web et le déploiement
sont souvent opérés par le même composant de l’infrastructure. Pour évaluer la
performance de cette étape, il faut surveiller la performance du serveur de
compilation durant la génération et du déploiement (durée, consommation CPU,
mémoire). Mais ce n’est pas tout : pensez à surveiller également
l’infrastructure ciblée (composée d’un ou plusieurs serveurs), car les tâches de
copie peuvent être gourmandes.&lt;/p&gt;
&lt;p&gt;Nous ne sommes plus alors dans un système où la métrique principale de montée en
charge est le nombre de visiteurs simultanés. Les DevOps doivent complètement
changer leur façon de penser pour créer un système capable de s’adapter plutôt à
la fréquence de génération et de déploiement demandée par les contributeurs.&lt;/p&gt;
&lt;p&gt;Là encore,
&lt;a href=&quot;https://www.thenewdynamic.org/tools/hosting-deployment/&quot;&gt;de nouveaux acteurs sont apparus&lt;/a&gt;.
Le plus connu et probablement le plus efficace d’entre eux est sûrement Netlify.
Son interface claire et simple aide à rattacher un dépôt de code source en
quelques clics. Netlify va ensuite générer et déployer votre site web pour
chaque commit, à la volée.&lt;/p&gt;
&lt;p&gt;Un CMS Headless, un SSG et un orchestrateur de déploiement : nous avons
maintenant notre stack back-end complète. Pourtant, nous produisons toujours un
site web statique sans contenu personnalisé. La demande de dynamisme et de
personnalisation des utilisateurs n’ayant jamais été aussi forte, ne
faisons-nous pas fausse route ?&lt;/p&gt;
&lt;h2&gt;Statique ? Pas tant que ça.&lt;/h2&gt;
&lt;p&gt;Nous avons vu que cette stack statique produit un balisage très standardisé.
Afin d’introduire du dynamisme et de la personnalisation, nous devrons importer
des données – fournies par le biais d’API – et les traiter du côté client – donc
utiliser Javascript.&lt;/p&gt;
&lt;p&gt;Cette nouvelle stack “&lt;strong&gt;J&lt;/strong&gt;avaScript + &lt;strong&gt;A&lt;/strong&gt;PI à couplage léger + &lt;strong&gt;M&lt;/strong&gt;arkup
HTML” a un nom : &lt;a href=&quot;https://jamstack.org/&quot;&gt;JAMStack&lt;/a&gt; et le marché affiche déjà
plusieurs acteurs de premier plan, chacun d’entre eux disposant d’une gamme de
services bien spécifique : &lt;a href=&quot;https://stripe.com/&quot;&gt;Stripe&lt;/a&gt; pour le paiement,
&lt;a href=&quot;https://www.algolia.com/&quot;&gt;Algolia&lt;/a&gt; pour la recherche instantanée,
&lt;a href=&quot;https://disqus.com/&quot;&gt;Disqus&lt;/a&gt; ou &lt;a href=&quot;https://www.intensedebate.com/&quot;&gt;IntenseDebate&lt;/a&gt;
pour les commentaires, &lt;a href=&quot;https://snipcart.com/&quot;&gt;Snipcart&lt;/a&gt; pour le e-commerce,
&lt;a href=&quot;https://cloudinary.com/&quot;&gt;Cloudinary&lt;/a&gt; ou &lt;a href=&quot;https://www.twicpics.com/&quot;&gt;Twicpics&lt;/a&gt;
pour la gestion des médias, &lt;a href=&quot;https://formspree.io/&quot;&gt;Formspree&lt;/a&gt; ou
&lt;a href=&quot;https://staticman.net/&quot;&gt;Staticman&lt;/a&gt; pour les formulaires… Notez que tous ces
produits ne sont pas conçus pour la JAMStack à proprement parler : vous pouvez
parfaitement utiliser les fulgurantes API d’Algolia côté serveur.&lt;/p&gt;
&lt;p&gt;JAMStack est un véritable changement de paradigme. Le site Web servi au visiteur
devient plus que jamais une coquille dans lequel des services, qu’ils soient
auto-hébergés ou tiers, sont dynamiquement injectés. Il est même possible de
s’appuyer sur plusieurs services pour un seul objectif et passer de l’un à
l’autre en cas d’indisponibilité ou pour maximiser la performance.&lt;/p&gt;
&lt;p&gt;Et puisque vous déportez une grande partie de vos efforts côté Front, pourquoi
ne pas aller plus loin et le construire avec un framework Single Page App (SPA)
comme Vue, Angular ou React ou le transformer en Progressive Web App (PWA)
complète, conçue pour être “offline first” ? Rien de tout ça n’est inhérent à la
JAMStack, mais facilité par le changement de paradigme de développement.&lt;/p&gt;
&lt;p&gt;Pour l’utilisateur, en revanche, la différence est imperceptible. Essayez de
rechercher un produit
&lt;a href=&quot;https://community.algolia.com/instantsearch.js/v2/examples/e-commerce/&quot;&gt;sur ce site&lt;/a&gt;.
Avez-vous l’impression d’utiliser un site différent par rapport à un site
développé en PHP ?&lt;/p&gt;
&lt;p&gt;Pour les contributeurs, le changement de paradigme est total puisqu’il sépare la
plateforme de contribution de celle qui héberge le site Web, leur laissant une
plus grande liberté dans leurs usages. Certains d’entre eux préféreront utiliser
des logiciels qui intègrent des outils d’aide à l’écriture (correcteur de
langue, suggestions de vocabulaire, intégrations documentaires). D’autres
trouveront leur bonheur auprès de plateformes de contribution en ligne. En
supposant que le stockage du contenu soit indépendant de la solution utilisée,
chacun d’entre eux pourra utiliser son outil préféré sans interférer avec les
autres.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1459/https://boris.schapira.dev/assets/images/2018-02-21/3_forestry.png 1459w&quot; sizes=&quot;80vw&quot;  alt=&quot;Forestry.io editing interface&quot; loading=&quot;lazy&quot; width=&quot;1459&quot; height=&quot;858&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Interface de contribution de
&lt;a href=&quot;https://forestry.io/&quot;&gt;Forestry.io&lt;/a&gt;. Les contenus sont sauvegardés dans les
fichiers d’un dépôt git et peuvent être également modifiés avec un éditeur de
texte.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Mais certains produits vont plus loin et transforment la contribution en
expérience de première classe. Les contributeurs peuvent alors bénéficier
d’outils de saisie sur mesure, avec des options de contribution riches et une
intégration multimédias, sans impact sur le flux de publication ou la
performance du site web ciblé.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2018-02-21/4_prismic.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-02-21/4_prismic.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2018-02-21/4_prismic.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Prismic.io slices&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;&lt;a href=&quot;https://prismic.io/&quot;&gt;Prismic.io&lt;/a&gt; est l’une des
plates-formes de contenu les plus personnalisables (ici, des « slices
» réutilisables). Les contenus comme les gabarits sont contribués sur la
plateforme. Pendant la compilation, le SSG requête l’API de Prismic.io pour
récupérer les informations.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h2&gt;Statique ou dynamique ? Du pareil au même.&lt;/h2&gt;
&lt;p&gt;Bien que l’approche JAMStack présente de nombreux avantages, dont la sécurité,
la performance, la montée en charge et la manière dont on développe et
contribue, elle implique également de nouveaux risques qu’il serait dangereux
d’ignorer.&lt;/p&gt;
&lt;p&gt;Premier danger : se perdre dans l’offre pléthorique de CMS Headless, générateurs
de sites statiques et plateformes de services. Prenez le temps d’évaluer vos
besoins car chaque solution a ses avantages et ses inconvénients.
&lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;, par exemple, est un SSG bien connu, développé
en Ruby, bien documenté mais assez lent. &lt;a href=&quot;https://gohugo.io/&quot;&gt;Hugo&lt;/a&gt;, en
revanche, est un SSG beaucoup plus rapide mais aussi plus complexe à manier pour
un novice. Si vous ne publiez pas du contenu à très haute fréquence, le temps de
génération est-il un critère de choix si important, à résultat équivalent ?&lt;/p&gt;
&lt;p&gt;Pensez également à inspecter les conditions d’utilisation des services tiers que
vous envisagez d’utiliser. Chez Dareboost, nous avertissons souvent nos
utilisateurs contre les abus de scripts tiers. Si vous avez besoin de
commentaires et utilisez Disqus, acceptez-vous pour autant d’injecter
dynamiquement leurs publicités ? Heureusement, si vous avez suivi
&lt;a href=&quot;https://blog.dareboost.com/fr/2016/08/comment-implementer-content-security-policy/&quot;&gt;nos conseils sur les Content Security Policies&lt;/a&gt;,
vous ne devriez pas vous être trop dérangés 😉.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;fr&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Disqus started injecting adverts into pages that use their comment system, like my blog. Their problem is that my CSP doesn&amp;#39;t allow their adverts to be included 😎 &lt;a href=&quot;https://t.co/c3lTAhCjS7&quot;&gt;pic.twitter.com/c3lTAhCjS7&lt;/a&gt;&lt;/p&gt;&amp;mdash; Scott Helme (@Scott_Helme) &lt;a href=&quot;https://twitter.com/Scott_Helme/status/961612668992966656?ref_src=twsrc%5Etfw&quot;&gt;8 février 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;Un autre risque, et pas le moindre : même si votre site Web est moins sujet aux
problèmes de sécurité, il peut quand même être attaqué au travers de ses appels
à des API. Vous devez absolument vous assurer que les scripts que vous utilisez
&lt;a href=&quot;https://blog.dareboost.com/fr/2017/01/analyse-sites-maj-bonnes-pratiques-dareboost/#chargement-de-ressources-provenant-de-tierces-parties&quot;&gt;n’ont pas été altérés&lt;/a&gt;
et que chaque échange avec un service tiers est sécurisé via HTTPS. Assurez-vous
également que vos API auto-hébergées sont conformes aux bonnes pratiques de
sécurité et n’hésitez pas à inspecter minutieusement les garanties
contractuelles des services tiers dont vous dépendez.&lt;/p&gt;
&lt;p&gt;Enfin, pensez à choisir vos API en fonction de la pérennité des organisations
qui les exposent. Si vous transférez la responsabilité de vos fonctionnalités
clés à des services tiers, vous feriez mieux de vous assurer qu’ils perdurent
dans le temps et maintiennent un niveau de qualité constant. Une bonne façon de
surveiller ces services est de recourir à l’exécution régulière de
&lt;a href=&quot;https://www.dareboost.com/fr/service/monitoring-parcours-utilisateur&quot;&gt;Parcours Utilisateurs&lt;/a&gt;
qui sont capables de simuler les interactions fonctionnelles avec votre site
web.&lt;/p&gt;
&lt;h2&gt;Un nouvel horizon&lt;/h2&gt;
&lt;p&gt;Une fois que vous avez bien appréhendé les risques spécifiques et mis en place
les workflows appropriés, le JAMStack présente de nombreuses opportunités.&lt;/p&gt;
&lt;p&gt;Le coût de migration d’une solution Headless CMS ou SSG vers une autre sont
souvent très réduits. Vous pouvez facilement passer d’une contribution locale
sur fichiers à une infrastructure de contenu comme Netlify CMS, Forestry,
Contentful ou Prismic, ce qui vous permet d’évaluer rapidement la solution qui
répond le mieux à vos besoins. Reste que la création d’un site statique prend du
temps et nécessite une architecture capable d’orchestrer plusieurs solutions.&lt;/p&gt;
&lt;p&gt;Aujourd’hui, cela peut sembler complexe mais rappelez-vous votre premier site
dynamique: choisir un hébergeur, maîtriser FTP, jonglez avec les logs du serveur
web… ça n’était pas facile à apprendre non plus. Vous découvrirez cette
nouvelle façon d’organiser votre projet étape par étape. Pour les utilisateurs
expérimentés de la JAMStack, cela devient naturel.&lt;/p&gt;
&lt;p&gt;D’autant qu’en dépit du risque de centralisation qu’elles constituent, les
plates-formes unifiées comme Netlify offrent un catalogue impressionnant de
services : génération et déploiement de sites web, enregistrement DNS, gestion
des certificats et formulaires SSL, fonctions lambdas, Content Delivery Network,
etc.&lt;/p&gt;
&lt;p&gt;De quoi permettre à votre équipe de se concentrer sur le développement du
Front-End et l’optimisation des performances Web. Avec un Time To First Byte
aussi bas, l’équipe peut pleinement se concentrer sur l’UX grâce à la mesure du
&lt;a href=&quot;https://blog.dareboost.com/en/2018/02/speed-index-web-performance/&quot;&gt;Speed Index&lt;/a&gt;
et la maitrise des interactions utilisateurs.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Mes remerciements à Erin Symons,
&lt;a href=&quot;https://twitter.com/dirtyf&quot;&gt;Frank Taillandier&lt;/a&gt; et toute la
&lt;a href=&quot;https://jamstatic.fr/&quot;&gt;communauté jamstatic.fr&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/budparr&quot;&gt;Bud Parr&lt;/a&gt;,
&lt;a href=&quot;https://twitter.com/Nico3333fr&quot;&gt;Nicolas Hoffmann&lt;/a&gt; et mes collègues
&lt;a href=&quot;https://twitter.com/GuilbertPhil&quot;&gt;Philippe Guilbert&lt;/a&gt; et
&lt;a href=&quot;https://twitter.com/DamienJubeau&quot;&gt;Damien Jubeau&lt;/a&gt; pour leur temps et leurs
conseils.&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Ressources additionnelles&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;“&lt;a href=&quot;https://www.smashingmagazine.com/2015/11/modern-static-website-generators-next-big-thing/&quot;&gt;Why Static Site Generators Are The Next Big Thing (EN)&lt;/a&gt;”,
Matt Biilmann&lt;/li&gt;
&lt;li&gt;“&lt;a href=&quot;https://bertrandkeller.info/2018/01/30/contentful-pas-un-cms/&quot;&gt;Contentful n’est pas un CMS&lt;/a&gt;”,
Michelle Gienow, adapté par Bertrand Keller&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 22 Feb 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/fr/2018/02/site-statique-performance-web/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2018/02/site-statique-performance-web/</guid>
      
      <category>Performance Web</category>
      
      <category>JAMStack</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Vidéo : optimisez vos MP4 pour de meilleures performances</title>
      
      <description>
          &lt;p&gt;Le format MP4 représente plus de 75 % des vidéos diffusées sur Internet
aujourd’hui. Cependant, il est souvent mal utilisé, ce qui peut dégrader
l’expérience utilisateur. Voyons ensemble comment améliorer ça.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2018-01-18/0_video_usage.png 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot;Graphique de courbes&quot; loading=&quot;lazy&quot; width=&quot;2189&quot; height=&quot;1016&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Évolution des usages des différents types de formats
video sur le Web. Source : Données HttpArchive requêtées via
&lt;a href=&quot;https://goo.gl/srggsf&quot;&gt;BigQuery&lt;/a&gt;.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2018/01/video-optimisez-vos-mp4-pour-de-meilleures-performances/&quot;&gt;Vidéo : optimisez vos MP4 pour de meilleures performances&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Que vous soyez un acteur du Luxe désireux de diffuser des vidéos de très haute
qualité ou une plateforme d’information à la recherche d’une proposition de
contenu accrocheuse, la vidéo est devenue en quelques années un élément
incontournable du Web. Mais l’ajout d’une vidéo à un site peut être complexe.&lt;/p&gt;
&lt;p&gt;L’encodage le plus largement utilisé et supporté aujourd’hui est sans aucun
doute H.264, servi dans un fichier MP4. Ce format est supporté par la plupart
des logiciels de manipulation vidéo : &lt;a href=&quot;https://handbrake.fr/&quot;&gt;Handbrake&lt;/a&gt;,
&lt;a href=&quot;http://www.squared5.com/&quot;&gt;MPEG Streamclip&lt;/a&gt;,
&lt;a href=&quot;https://www.openshot.org/&quot;&gt;OpenShot&lt;/a&gt;… même &lt;a href=&quot;https://www.videolan.org/&quot;&gt;VLC&lt;/a&gt; !
Mais peu d’entre eux offrent une fonctionnalité d’export d’une vidéo optimisée
pour le Web.&lt;/p&gt;
&lt;p&gt;Pourtant, on ne diffuse par une vidéo sur Internet comme on la lit sur un
ordinateur de bureau. Il faut faire attention à plusieurs choses.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_687/https://boris.schapira.dev/assets/images/2018-01-18/1_vlc_convert.png 687w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture du logiciel VLC&quot; loading=&quot;lazy&quot; width=&quot;687&quot; height=&quot;535&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Interface de conversion de VLC&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;Note : les exemples qui suivent feront un usage intensif de
&lt;a href=&quot;https://www.ffmpeg.org/&quot;&gt;ffmpeg&lt;/a&gt;, l’un des outils de manipulation vidéo les
plus populaires parmi les développeurs. Mais la plupart des optimisations
décrites devraient être disponibles dans votre logiciel de manipulation vidéo
préféré.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Réduire le poids des fichiers: le juste équilibre entre qualité et performance&lt;/h2&gt;
&lt;p&gt;Une vidéo trop lourde entraînera une augmentation du poids total de la page. Or
n’oubliez pas que certains fournisseurs Internet vendent des forfaits dont la
bande passante totale est limitée. Rendre vos pages inutilement lourdes ne
rendra donc pas service à vos visiteurs.&lt;/p&gt;
&lt;p&gt;Pour réduire le poids de votre vidéo, vous devez vous demander comment elle
diffuse son contenu sur le réseau. Même si la taille de votre fichier semble
déjà raisonnable, il est peut-être possible d’en améliorer le
&lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; pour une diffusion optimale.&lt;/p&gt;
&lt;p&gt;Qu’est-ce que le &lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; ? Pour faire simple, le
&lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; est la quantité de données nécessaires pour
encoder une seconde de vidéo. Plus vous allouez de données par seconde,
meilleure est la qualité mais plus le fichier est lourd.&lt;br /&gt;
Je n’ai pas de formule magique à partager qui permettrait de calculer le
&lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; parfait. Je voudrais plutôt vous inviter à vous
interroger au cas par cas sur la qualité nécessaire.&lt;/p&gt;
&lt;p&gt;Par exemple, vous pouvez évaluer le &lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; nécessaire en
fonction des changements brusques présents dans la vidéo : plus le contenu est
fixe, moins vous aurez de données à allouer à chaque seconde de la vidéo. À
l’inverse, si la vidéo contient beaucoup de mouvement, le débit requis, à
qualité visuelle équivalente, augmentera.&lt;/p&gt;
&lt;p&gt;Vous pouvez facilement anticiper le poids d’une vidéo après l’encodage en
utilisant soit un &lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; constant sur l’ensemble de la
vidéo, soit un encodage à plusieurs passes pour un
&lt;a href=&quot;https://fr.wikipedia.org/wiki/Variable_bitrate&quot;&gt;&lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; variable&lt;/a&gt;.
Voici une comparaison entre un extrait original de 10 secondes d’une séquence du
décollage d’Endeavour et un encodage à deux passes avec ffmpeg. La vidéo à
gauche pesait 85 Mo, celle de droite pèse 1,2 Mo après optimisation :&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/M99TPB7qMsQ&quot; title=&quot;Original vs. Constant Rate Factor 24 (ffmpeg h264)&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Cet exemple montre ce qui peut techniquement être fait pour améliorer le poids
d’une vidéo, mais nous pouvons aussi extrapoler des optimisations à partir des
objectifs métier de la vidéo. Il est assez courant, par exemple, de visiter des
sites dont la page d’accueil affiche une large zone avec un message de
bienvenue, occupant l’ensemble de la fenêtre. Parfois, derrière cette zone,
qu’on appelle “Hero Container”, une vidéo de fond est diffusée.&lt;/p&gt;
&lt;p&gt;Ces vidéos ne sont ni destinées à être véritablement visionnées, ni utiles pour
la conversion. Il s’agit souvent d’améliorations subtiles, destinées uniquement
à embellir les pages et pas à distraire les visiteurs et visiteuses.
Souhaitez-vous vraiment que cette vidéo soit de la plus haute qualité possible ?
En utilisant un effet de flou comme l’effet “iirblur” de
&lt;a href=&quot;https://yalantis.com/blog/experiments-with-ffmpeg-filters-and-frei0r-plugin-effects/&quot;&gt;la librairie frei0r (EN)&lt;/a&gt;”,
vous pouvez flouter votre contenu original, ce qui vous permet de gagner de
précieux kilo-octets.&lt;/p&gt;
&lt;p&gt;Avec ffmpeg :&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ffmpeg -i origin.mp4 -vf frei0r=iirblur:0.4 -a:c copy blurred.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;L’option &lt;code&gt;-vf frei0r=iirblur:0.4&lt;/code&gt; indique à ffmpeg de flouter avec un
coefficient de 40 % tandis que l’option &lt;code&gt;-a:c copy&lt;/code&gt; lui indique de garder la
piste audio telle quelle.&lt;/p&gt;
&lt;p&gt;Résultat :&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/nwGDXk9eE8s&quot; title=&quot;Clear vs Blur (ffmpeg+frei0r)&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Autre optimisation possible : la piste audio. Si votre vidéo n’est pas destinée
à jouer du son, pourquoi garder cette piste ? N’hésitez pas à la retirer :&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; origin.mp4 &lt;span class=&quot;nt&quot;&gt;-an&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-vcodec&lt;/span&gt; copy muted.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;L’option &lt;code&gt;-an&lt;/code&gt; indique à ffmpeg de supprimer la piste audio tandis que l’option
&lt;code&gt;-vcodec copy&lt;/code&gt; lui dit de garder la piste vidéo telle quelle. N’oubliez pas
d’expliciter également l’absence de son au navigateur en utilisant
&lt;a href=&quot;https://developer.mozilla.org/fr/docs/Web/HTML/Element/Video#attr-muted&quot;&gt;l’attribut &lt;code&gt;muted&lt;/code&gt; de l’élément &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Même si votre vidéo est légère, votre travail n’est pas terminé. Vous devez
maintenant vous concentrer sur le mode de diffusion de la vidéo, qui est assez
souvent le streaming.&lt;/p&gt;
&lt;h2&gt;Démarrer la lecture avant d’avoir téléchargé tout le contenu&lt;/h2&gt;
&lt;p&gt;Voici comment fonctionne le streaming : lorsqu’une lecture vidéo est demandée,
le navigateur va chercher le fichier pour trouver les métadonnées vidéo. Les
métadonnées vidéo MP4 comprennent des éléments tels que les caractéristiques
d’affichage, l’échelle de temps et la durée. Sans ces informations, le
navigateur ne peut pas démarrer la lecture.&lt;/p&gt;
&lt;p&gt;Si votre serveur est configuré pour accepter le
&lt;a href=&quot;https://fr.wikipedia.org/wiki/Service_d%27octet&quot;&gt;Service d’Octet&lt;/a&gt;, ce qui
signifie qu’il a inclus un en-tête Accept-Ranges dans sa réponse HTTP initiale,
le navigateur va chercher le fichier morceau par morceau au travers de plusieurs
requêtes de contenu partiel (code HTTP 206). Dès qu’il trouve les métadonnées
vidéo, il peut démarrer la lecture tout en téléchargeant le reste du fichier.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_851/https://boris.schapira.dev/assets/images/2018-01-18/2_devtools_capture.png 851w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture des ChromeDevTools, onglet
&amp;quot;Network&amp;quot;&quot; loading=&quot;lazy&quot; width=&quot;851&quot; height=&quot;210&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Dans cet exemple, le
navigateur exécute trois requêtes avant d’obtenir les métadonnées et de
commencer la lecture.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Si votre serveur ne prend pas en charge ces
“&lt;span lang=&quot;en&quot;&gt;Range-Request&lt;/span&gt;”, le navigateur n’a pas d’autre choix que
de télécharger le fichier complet. Si votre vidéo est en lecture automatique, la
bande passante disponible pour télécharger d’autres ressources, par exemple
celles nécessaires au rendu de la page, sera réduite. Le temps requis pour
l’affichage augmentera, ce qui dégradera l’expérience utilisateur.&lt;/p&gt;
&lt;h2&gt;Où sont stockées mes métadonnées vidéo ?&lt;/h2&gt;
&lt;p&gt;Un fichier MP4 se décompose en plusieurs unités de données appelées atomes. Les
métadonnées sont contenues dans l’atome “&lt;span lang=&quot;en&quot;&gt;movie&lt;/span&gt;”,
également appelé &lt;code&gt;moov&lt;/code&gt;. Des logiciels comme
&lt;a href=&quot;http://mp4creator.sourceforge.net/&quot;&gt;MP4creator&lt;/a&gt; ou
&lt;a href=&quot;http://atomicparsley.sourceforge.net/&quot;&gt;AtomicParsley&lt;/a&gt; permettent de visualiser
les atomes d’un fichier MP4.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_730/https://boris.schapira.dev/assets/images/2018-01-18/3_console_capture.png 730w&quot; sizes=&quot;80vw&quot;  alt=&quot;Utilisation d&amp;#39;AtomicParsley en ligne de
commande&quot; loading=&quot;lazy&quot; width=&quot;730&quot; height=&quot;389&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Dans l’exemple ci-dessus,
l’atome &lt;code&gt;moov&lt;/code&gt; vient après l’atome &lt;code&gt;mdat&lt;/code&gt; (4e ligne)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Il existe plusieurs méthodes pour déplacer l’atome &lt;code&gt;moov&lt;/code&gt; en première position.
Un logiciel comme Handbrake offre une option “Optimiser pour le Web”
(&lt;a href=&quot;https://handbrake.fr/docs/en/latest/advanced/web-optimised.html&quot;&gt;documentation d’Handbrake en anglais&lt;/a&gt;).
Dans d’autres logiciels, cette option est appelée “&lt;span lang=&quot;en&quot;&gt;MP4 Fast
Start&lt;/span&gt;”.&lt;/p&gt;
&lt;p&gt;ffmpeg peut rapidement corriger une vidéo grâce à l’option
&lt;code&gt;-movflags faststart&lt;/code&gt;, qui exécute une seconde passe et déplace l’atome &lt;code&gt;moov&lt;/code&gt;
au début du fichier
(&lt;a href=&quot;https://ffmpeg.org/ffmpeg-formats.html#toc-Options-8&quot;&gt;documentation de ffmpeg en anglais&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; origin.mp4 &lt;span class=&quot;nt&quot;&gt;-acodec&lt;/span&gt; copy &lt;span class=&quot;nt&quot;&gt;-vcodec&lt;/span&gt; copy &lt;span class=&quot;nt&quot;&gt;-movflags&lt;/span&gt; faststart fast_start.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si vous voulez en savoir plus sur l’atome &lt;code&gt;moov&lt;/code&gt;, ne manquez pas
“&lt;a href=&quot;https://www.adobe.com/devnet/video/articles/mp4_movie_atom.html&quot;&gt;Understanding the MPEG-4 Movie Atom (EN)&lt;/a&gt;”
de Maxim Levkov.&lt;/p&gt;
&lt;h2&gt;Des sources multiples pour une performance ciblée&lt;/h2&gt;
&lt;p&gt;Bien que H.264 soit le codec le plus largement utilisé et supporté, il n’est pas
nécessairement le plus efficace à chaque fois. Nous avons déjà vu que
&lt;a href=&quot;/2017/10/optimiser-les-images-et-reduire-leur-poids-formats-outils-et-rwd/&quot;&gt;la balise &lt;code&gt;&amp;lt;image&amp;gt;&lt;/code&gt; accepte plusieurs sources&lt;/a&gt;,
ce qui lui permet d’offrir des images WebP aux utilisateurs et utilisatrices de
Chrome. L’élément &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt; peut également accepter plusieurs sources.
L’équivalent de WebP pour les vidéos est WebM.&lt;/p&gt;
&lt;p&gt;ffmpeg est capable d’encoder des fichiers en WebM, à condition qu’il ait été
installé avec l’option &lt;code&gt;--with-libvpx&lt;/code&gt;. Voici un exemple d’encodage à deux
passes avec un &lt;span lang=&quot;en&quot;&gt;bitrate&lt;/span&gt; cible de 1 Mo, en utilisant
l’encodeur VP9
(&lt;a href=&quot;https://trac.ffmpeg.org/wiki/Encode/VP9&quot;&gt;documentation de l’encodeur VP9&lt;/a&gt;).
Sur Windows, il faut remplacer &lt;code&gt;/dev/null&lt;/code&gt; par &lt;code&gt;NUL&lt;/code&gt; :&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;shell&quot;&gt;ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; source.mp4 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:v libvpx-vp9 &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt;:v 1M &lt;span class=&quot;nt&quot;&gt;-pass&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; webm /dev/null &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ffmpeg &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; source.mp4 &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt;:v libvpx-vp9 &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt;:v 1M &lt;span class=&quot;nt&quot;&gt;-pass&lt;/span&gt; 2 output.webm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;À partir de la vidéo optimisée de la navette Endeavour présentée au début de
l’article, qui pesait 1,2 Mo, cette commande génère un fichier WebM de 715 Ko,
soit &lt;strong&gt;une réduction de poids de 40 %&lt;/strong&gt;. Dommage que WebM ne soit pas
&lt;a href=&quot;https://caniuse.com/#feat=webm&quot; title=&quot;Support de WebM sur CanIUse&quot;&gt;plus largement supporté&lt;/a&gt;
!&lt;/p&gt;
&lt;h2&gt;Quelques conseils supplémentaires&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Faites attention à l’&lt;span lang=&quot;en&quot;&gt;autoplay&lt;/span&gt;&lt;/strong&gt;. Non seulement son
usage est perçu négativement par de nombreux utilisateurs s’il n’est pas utilisé
correctement (d’une manière subtile et non-bloquante, derrière un arrière-plan
par exemple) mais en plus la lecture de la vidéo consomme toujours une certaine
bande passante, ce qui ralentit le téléchargement d’autres ressources.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pour jouer des vidéos en Full HD ou maximiser l’UX, utilisez des solutions
dédiées.&lt;/strong&gt; Il existe une grande variété de solutions
&lt;abbr title=&quot;Software as a Service&quot; lang=&quot;en&quot;&gt;SaaS&lt;/abbr&gt; ou en déploiement sur
site pour gérer, encoder et diffuser du contenu. Ces solutions, qu’elles soient
spécialisées dans la diffusion, la fourniture d’une plate-forme vidéo en ligne
(&lt;abbr title=&quot;Online Video Platform&quot; lang=&quot;en&quot;&gt;OVP&lt;/abbr&gt;) ou la gestion de
contenu vidéo d’entreprise
(&lt;abbr title=&quot;Enterprise Video Content Management&quot; lang=&quot;en&quot;&gt;ECVM&lt;/abbr&gt;),
proposent souvent une fonctionnalité appelée &lt;span lang=&quot;en&quot;&gt;Adaptative
Bitrate&lt;/span&gt;, ou débit adaptatif. Si vous avez accès à un réseau de qualité :
la vidéo est claire et les couleurs sont riches. Si votre réseau perd subitement
en capacité, la vidéo s’adapte en sacrifiant un peu de qualité, pour préserver
la fluidité de la lecture. Pour réaliser ce tour de force, un script JavaScript
détecte la bande passante courante de l’utilisateur et le fait basculer
dynamiquement entre plusieurs versions d’une vidéo encodée avec différents
&lt;span lang=&quot;en&quot;&gt;bitrates&lt;/span&gt;, assurant une expérience utilisateur optimale
dans n’importe quel contexte. Si vous êtes intéressé·e·s, regardez du côté de
&lt;a href=&quot;https://www.brightcove.com/fr/&quot;&gt;Brightcove&lt;/a&gt;,
&lt;a href=&quot;https://fr.corp.kaltura.com/&quot;&gt;Kaltura&lt;/a&gt;, &lt;a href=&quot;https://www.qumu.com/&quot;&gt;Qumu&lt;/a&gt;, etc.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Souvent, la meilleure solution est de retirer la vidéo.&lt;/strong&gt; N’ayez pas peur de
ne pas afficher vos vidéos dans certaines situations, surtout si elles sont
décoratives. Une media-query CSS bien placée protègera vos utilisateurs mobiles
d’une mauvaise expérience. Envisagez également de prendre en charge le
&lt;a href=&quot;https://tools.ietf.org/html/draft-ietf-httpbis-client-hints-04#section-3.5&quot;&gt;Client Hint “Save-Data” (EN)&lt;/a&gt;,
une instruction explicitement donnée par le navigateur au serveur pour que ce
dernier lui communique une quantité de données réduite.&lt;/p&gt;
&lt;h2&gt;En résumé&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Réduisez le poids&lt;/strong&gt; de vos vidéos en utilisant des stratégies
d’optimisations qui dépendent du contenu et de l’objectif de vos vidéos.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Optimisez le streaming&lt;/strong&gt; en encodant vos vidéos de manière à servir les
métadonnées au plus tôt.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proposez des alternatives à MP4&lt;/strong&gt;, comme WebM, qui peuvent être plus
performantes.&lt;/li&gt;
&lt;li&gt;Faites attention à l’&lt;span lang=&quot;en&quot;&gt;autoplay&lt;/span&gt;, envisagez des
solutions dédiées pour le Full HD et n’hésitez pas à ne pas proposer de
vidéos quand le contexte le demande.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Merci à &lt;a href=&quot;https://www.linkedin.com/in/ravana/&quot;&gt;Ravana Renoncé&lt;/a&gt; et
&lt;a href=&quot;https://twitter.com/rick_viscomi&quot;&gt;Rick Viscomi&lt;/a&gt; pour leur aide.&lt;/em&gt;&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Thu, 18 Jan 2018 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/fr/2018/01/video-optimisez-vos-mp4-pour-de-meilleures-performances/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2018/01/video-optimisez-vos-mp4-pour-de-meilleures-performances/</guid>
      
      <category>Performance Web</category>
      
      <category>Video</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Comment différer l'exécution d'un script ?</title>
      
      <description>
          &lt;p&gt;Les artistes ne sont pas les seul·e·s à redouter les pages blanches, les
internautes aussi. Leur frustration peut les pousser à abandonner votre site
plus tôt qu’ils ou elles ne l’auraient voulu. Pour éviter ça, plusieurs
techniques d’optimisation du rendu existent. Comme différer l’analyse et
l’exécution des fichiers JavaScript.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2017-12-18/0_chess.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;Un jeu d&amp;#39;échec avant le début d&amp;#39;un partie. Zoom sur les noirs.&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1280&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2017/12/differer-les-scripts-pour-accelerer-le-rendu/&quot;&gt;Comment différer l'exécution d'un script ?&lt;/a&gt;.
&lt;/div&gt;
&lt;p&gt;Les navigateurs modernes sont conçus pour afficher les pages plus rapidement.
Par exemple, ils analysent la page au fur et à mesure qu’elle est envoyée par le
serveur, recherchant les URL des ressources qui sont nécessaires pour afficher
la page (images, CSS mais plus spécifiquement, fichiers JavaScript). C’est ce
qu’on appelle
“&lt;a href=&quot;https://plus.google.com/+IlyaGrigorik/posts/8AwRUE7wqAE&quot;&gt;&lt;i lang=&quot;en&quot;&gt;preload scan&lt;/i&gt;&lt;/a&gt;”
dans Chrome et Safari,
“&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing&quot;&gt;&lt;i lang=&quot;en&quot;&gt;speculative parsing&lt;/i&gt;&lt;/a&gt;”
dans Firefox et “&lt;i lang=&quot;en&quot;&gt;lookahead download&lt;/i&gt;” dans Internet Explorer.
Cette fonctionnalité permet au navigateur de commencer à récupérer les
ressources tout en construisant sa propre modélisation du code HTML, le Document
Object Model (DOM) et sa propre modélisation du code CSS, le CSS Object Model
(CSSOM).&lt;/p&gt;
&lt;p&gt;Dans la mesure où JavaScript est à la fois capable de modifier le contenu HTML
et le style des éléments, le navigateur arrête la construction du DOM à chaque
fois qu’il récupère un nouveau fichier JavaScript, au cas où. Il attend ensuite
d’avoir fini de construire le CSSOM pour exécuter le script. Pendant ce
temps-là, comme le DOM et le CSSOM sont la fondation du rendu visuel de la page,
le navigateur n’affiche rien tant qu’ils ne sont pas construits.&lt;/p&gt;
&lt;p&gt;Dans cet article, nous allons nous intéresser à ce qui peut être fait en
JavaScript pour améliorer les délais d’affichage.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_548/https://boris.schapira.dev/assets/images/2017-12-18/1_block.png 548w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de l&amp;#39;onglet Performance des Chrome DevTools. Une
chronologie du chargement affiche les différentes étapes en couleurs. Une grande
zone jaune est entourée de bleu. La première image n&amp;#39;apparait qu&amp;#39;à la
fin.&quot; loading=&quot;lazy&quot; width=&quot;548&quot; height=&quot;100&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Même si la construction du DOM (en
bleu) se produit majoritairement avant l’exécution du JavaScript (en jaune),
elle ne se termine qu’après. Dans cette configuration &amp;quot;par défaut&amp;quot; du chargement
d’un script, le DOM est fini d’être construit très tardivement. L’affichage est
retardé.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Distinguer JS critique ou non-critique&lt;/h2&gt;
&lt;p&gt;Pour accélérer le rendu, vous devez décaler au maximum le parcours et
l’évaluation des fichiers JavaScript. Facile à dire, plus difficile à faire.&lt;/p&gt;
&lt;p&gt;En effet, il y a fort à parier que vos fichiers JavaScript contiennent des
portions de code de différents types. Parmi elles, certaines doivent être
chargées le plus tôt possible. C’est le cas des portions de JS orientées métier
(les analytiques, par exemple), des librairies ayant un impact visuel important
ou des scripts tiers que vous ne pouvez pas différer.&lt;/p&gt;
&lt;p&gt;L’ensemble de ces éléments constitue votre “JavaScript critique”. Groupez ce
code dans un fichier identifiable simplement, nommé communément “critical.js”.
Comme pour tout fichier JavaScript, le navigateur devra le récupérer, le
parcourir et l’analyser avant d’être en mesure de l’exécuter.&lt;/p&gt;
&lt;p&gt;Même si vous appliquez toutes les optimisations connues (nettoyage du code
inutile, minification, compression, mise en cache côté client et côté serveur),
le navigateur aura toujours besoin de parcourir et d’évaluer le code JavaScript.
Comme
&lt;a href=&quot;https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e&quot;&gt;cette étape prend un temps considérable&lt;/a&gt;,
vous devez vraiment garder votre script critical.js aussi réduit que possible.&lt;/p&gt;
&lt;p&gt;Tous les autres scripts peuvent être retardés, rendus asynchrones, ou déplacés
en bas de page. Dans certains cas, vous pouvez leur appliquer plusieurs de ces
comportements à la fois. Jetons un coup d’oeil à ces différentes techniques.&lt;/p&gt;
&lt;h2&gt;Déplacer les scripts non-critiques au bas de la page&lt;/h2&gt;
&lt;p&gt;Un moyen très simple et intuitif de différer l’analyse des fichiers JavaScript
par le navigateur est de placer les déclarations à la fin de la page HTML, juste
avant le tag &lt;code&gt;&amp;lt;/body&amp;gt;&lt;/code&gt;. Ainsi, le navigateur n’aura aucune connaissance des
scripts tant qu’il n’aura pas quasiment achevé la construction du DOM.&lt;/p&gt;
&lt;p&gt;Bien que cette technique semble convenir à la majorité des cas, elle présente un
inconvénient majeur : elle retarde non seulement l’évaluation des scripts, mais
aussi leur téléchargement, ce qui exclut son utilisation pour les scripts
volumineux. Si vos ressources ne sont pas desservies par HTTP/2 ou ne
proviennent pas d’un domaine externe, vous devrez également ajouter un
substantiel temps de résolution au temps de récupération déjà important.&lt;/p&gt;
&lt;p&gt;Évidemment, puisque cette technique intervient à la fin de la construction du
DOM, nous vous recommandons encore une fois de ne pas recourir à des scripts qui
utilisent &lt;code&gt;document.write&lt;/code&gt;, car le navigateur aurait à le reconstruire
complètement.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_570/https://boris.schapira.dev/assets/images/2017-12-18/2_end.png 570w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de l&amp;#39;onglet Performance des Chrome DevTools. Une
chronologie du chargement affiche les différentes étapes en couleurs.
L&amp;#39;intégralité du bleu est avant le jaune. Une première image apparait très tôt
dans le chargement.&quot; loading=&quot;lazy&quot; width=&quot;570&quot; height=&quot;101&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;En repoussant les
scripts en fin de page, la complétion de la zone d’affichage est bien plus
rapide mais n’est pas définitive (une partie du contenu est altéré par
l’exécution du JavaScript)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;Et si on injectait une balise &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; dynamiquement ?&lt;/h2&gt;
&lt;p&gt;Comme mentionné ci-dessus, retarder le téléchargement d’un script n’est pas
toujours une bonne idée. Ce que l’on veut parfois, c’est rendre le script
asynchrone : le script est immédiatement récupéré sans que cette phase ne bloque
la construction du DOM. Une fois disponible, la construction du DOM est
interrompue pour que le navigateur puisse analyser et évaluer son contenu.&lt;/p&gt;
&lt;p&gt;Pour obtenir ce comportement, il est nécessaire de ne pas déclarer ce script
dans la source de la page, mais d’utiliser un autre script qui l’injecte
directement dans le DOM. Cette technique, appelée “dynamic script tag”, est
l’épine dorsale de la plupart des services tiers.&lt;/p&gt;
&lt;p&gt;L’un des principaux avantages de cette technique est que vous pouvez choisir
quand le script sera injecté. Si vous voulez l’injecter immédiatement, vous
pouvez utiliser une IIFE (Immediately Invoked Function Expression) :&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://mydomain.com/script.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// See the following explanation&lt;/span&gt;
       &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;childNodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;childNodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}());&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Mais vous pouvez aussi retarder l’injection pour qu’elle ne se produise que
lorsqu’un événement spécifique est déclenché. Voici comment injecter un script
lorsque le DOM est prêt :&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code data-lang=&quot;js&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// IE9+&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attachEvent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;readyState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;complete&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;readyState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;DOMContentLoaded&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;nx&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;[https://mydomain.com/script.js](https://mydomain.com/script.js)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// See the following explanation&lt;/span&gt;
       &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;childNodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;childNodes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si vous êtes surpris par l’utilisation d’un &lt;code&gt;insertBefore&lt;/code&gt; complexe à la place
d’une plus simple &lt;code&gt;appendChild&lt;/code&gt;, je vous invite à lire
“&lt;a href=&quot;https://www.paulirish.com/2011/surefire-dom-element-insertion/&quot;&gt;Surefire DOM Element Insertion&lt;/a&gt;”,
de Paul Irish.&lt;/p&gt;
&lt;p&gt;Aussi intéressante que puisse paraître cette technique, elle a aussi ses
inconvénients. Tout d’abord, les scripts injectés de cette façon ne sont plus
évalués séquentiellement dans l’ordre de leur injection. Vous ne pouvez donc pas
y recourir pour injecter plusieurs scripts qui dépendent l’un de l’autre.&lt;/p&gt;
&lt;p&gt;Deuxièmement, les balises de script dynamiques ne sont pas totalement
asynchrones. Comme expliqué dans l’introduction, le navigateur s’assure que la
construction du modèle objet CSS est terminée avant d’exécuter le code JS du
script injecté. Le script n’est donc pas exécuté immédiatement. Afin d’expliquer
au navigateur que le script peut être chargé sans attendre la construction du
CSSOM, vous devez ajouter l’attribut &lt;code&gt;async&lt;/code&gt; au script.&lt;/p&gt;
&lt;p&gt;Mais attention : un script, même avec un attribut async, est toujours considéré
comme une ressource de la page. L’événement &lt;code&gt;window. onload&lt;/code&gt; sera donc retardé
par son exécution. Si vous avez d’autres scripts qui dépendent de cet événement,
anticipez un retard.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_528/https://boris.schapira.dev/assets/images/2017-12-18/3_dynamic.png 528w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de l&amp;#39;onglet Performance des Chrome DevTools. Une
chronologie du chargement affiche les différentes étapes en couleurs.
L&amp;#39;intégralité du bleu est avant le jaune. Une première image apparait très tôt
dans le chargement.&quot; loading=&quot;lazy&quot; width=&quot;528&quot; height=&quot;100&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Bien maitrisé, le
tag dynamique est une des techniques les plus efficaces avec un DOM construit
rapidement et un affichage quasiment immédiat. Attention cependant à l’absence
d’ordre d’exécution des scripts !&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2&gt;&lt;code&gt;async&lt;/code&gt;, &lt;code&gt;defer&lt;/code&gt;, ou les deux&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;async&lt;/code&gt; et &lt;code&gt;defer&lt;/code&gt; sont deux attributs standardisés par HTML5. Ils permettent de
modifier le comportement par défaut du navigateur lors du chargement d’un
script.&lt;/p&gt;
&lt;p&gt;Si l’attribut &lt;code&gt;async&lt;/code&gt; est présent, alors le script est récupéré aussitôt que
possible, puis exécuté. L’ordre de déclaration des scripts &lt;code&gt;async&lt;/code&gt; n’est pas
préservé: les scripts sont exécutés dès qu’ils sont disponibles. Notez cependant
que même si la récupération du script n’arrête pas la construction du DOM, son
exécution l’interrompt.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_559/https://boris.schapira.dev/assets/images/2017-12-18/4_async.png 559w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de l&amp;#39;onglet Performance des Chrome DevTools. Une
chronologie du chargement affiche les différentes étapes en couleurs.
L&amp;#39;intégralité du bleu est avant le jaune. Une première image apparait très tôt
dans le chargement.&quot; loading=&quot;lazy&quot; width=&quot;559&quot; height=&quot;101&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Ici, à nouveau, un
chargement très progressif. En revanche, comme pour le script dynamique, on perd
l’ordre d’exécution des JS.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Si l’attribut &lt;code&gt;defer&lt;/code&gt; est présent, le script sera récupéré aussitôt que
possible, mais le navigateur attendra que l’arborescence DOM soit terminée avant
de l’exécuter. Comme la plupart des navigateurs implémentent maintenant un
&lt;em&gt;preloader&lt;/em&gt;, le comportement d’un script ayant uniquement l’attribut &lt;code&gt;defer&lt;/code&gt; est
très similaire à celui d’un script placé à la fin du contenu HTML.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_734/https://boris.schapira.dev/assets/images/2017-12-18/6_defer_details.png 734w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de l&amp;#39;onglet Performance des Chrome DevTools. Une
chronologie du chargement affiche les différentes étapes en couleurs, les unes
sous les autres. On voit l&amp;#39;étape bleu et l&amp;#39;étape jaune se dérouler en
simultané.&quot; loading=&quot;lazy&quot; width=&quot;734&quot; height=&quot;227&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Cette autre mode de
visualisation permet de bien comprendre la simultanéité de l’évaluation du DOM
(en bleu) et du script (en jaune). Même si l’exécution du script est plus
tardive, c’est toujours ce temps-là de gagné.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Quant à utiliser &lt;code&gt;async&lt;/code&gt; et &lt;code&gt;defer&lt;/code&gt; ensemble, ce n’est pas très utile, sauf pour
un cas d’utilisation, la rétro-compatibilité :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;L’attribut &lt;code&gt;defer&lt;/code&gt; peut être spécifié même si l’attribut &lt;code&gt;async&lt;/code&gt; est spécifié,
pour que les navigateurs Web existants qui ne prennent en charge que &lt;code&gt;defer&lt;/code&gt;
(et non &lt;code&gt;async&lt;/code&gt;) tombent dans le comportement &lt;code&gt;defer&lt;/code&gt; au lieu du comportement
de blocage par défaut. &lt;cite&gt;Extrait de
&lt;a href=&quot;https://www.w3.org/TR/html/semantics-scripting.html#element-attrdef-script-async&quot;&gt;HTML
5.1 2nd Edition, W3C Recommendation 3 October 2017&lt;/a&gt;, traduit par Boris
Schapira&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Chargement de fichiers JavaScript : récupérez le contrôle, même sur vos scripts tiers&lt;/h2&gt;
&lt;p&gt;Nous avons vu que les techniques ne manquent pas quand il s’agit de rendre la
récupération et l’exécution des scripts JavaScript asynchrone. Néanmoins,
certains scripts ont encore besoin d’être déclarés synchrones comme les scripts
de test A/B, qui bloquent parfois intentionnellement le rendu pour masquer le
contenu à l’utilisateur jusqu’à ce que le script l’ait personnalisé. Comme ces
scripts modifient souvent l’aspect visuel du site, il est censé bloquer le DOM
et le CSSOM pendant leur exécution.&lt;/p&gt;
&lt;p&gt;Cependant, même dans cette situation, vous n’avez pas à perdre le contrôle. Nous
vous encourageons à choisir une solution qui tient compte des performances web.
Certains acteurs sérieux comme Google Optimize, Kameleoon ou Optimizely limitent
le temps alloué à la récupération et à l’exécution de leurs scripts. En cas de
dépassement de cette durée, le navigateur interrompt la récupération ou
l’exécution du script A/B. N’hésitez pas à réduire ce délai au minimum pour
assurer la qualité de l’expérience de vos visiteurs.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 18 Dec 2017 00:00:00 +0100</pubDate>
      <link>https://blog.dareboost.com/fr/2017/12/differer-les-scripts-pour-accelerer-le-rendu/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2017/12/differer-les-scripts-pour-accelerer-le-rendu/</guid>
      
      <category>Performance Web</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Optimiser les images et réduire leur poids : formats, outils et RWD</title>
      
      <description>
          &lt;p&gt;“Réduisez le poids de la page” : voici l’un des conseils les plus couramment
délivrés dans les rapports Dareboost. Selon les tendances mesurées par HTTP
Archive, les images représentent 53 % du poids moyen des pages web, qu’elles
soient consultées sur ordinateurs de bureau ou périphériques mobiles. Lorsque
vous cherchez à réduire le poids de votre page Web, l’optimisation des images
remonte donc logiquement dans le top de vos priorités.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2017-10-29/square.jpg 1600w&quot; sizes=&quot;80vw&quot;   alt=&quot;Sur un carré blanc sont disposés plusieurs pixels en
camaïeu de bleu, au dessus de la diagonale, de manière
progressive&quot; loading=&quot;lazy&quot; width=&quot;1920&quot; height=&quot;1920&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2017/10/optimiser-les-images-et-reduire-leur-poids-formats-outils-et-rwd/&quot;&gt;Optimiser les images et réduire leur poids : formats, outils et RWD&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;À chaque image son format&lt;/h2&gt;
&lt;p&gt;Il n’est pas toujours simple de trouver le format d’image le plus adapté.
Prenons par exemple notre logo. Nous pourrions l’enregistrer en
&lt;abbr lang=&quot;en&quot; title=&quot;Portable Network Graphics&quot;&gt;PNG&lt;/abbr&gt;, en
&lt;abbr lang=&quot;en&quot; title=&quot;Joint Photographic Experts Group&quot;&gt;JPEG&lt;/abbr&gt;, en WebP ou
en &lt;abbr lang=&quot;en&quot; title=&quot;Scalar Vector Graphics&quot;&gt;SVG&lt;/abbr&gt;. Le poids des
images serait très différent. Un test empirique nous permet de le constater :&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/logo_fr_580.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/logo_fr_580.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/logo_fr_580.png 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;PNG 6 Ko ; JPEG 38 Ko ; WebP 9 Ko ; SVG 2,5 Ko (1,3
gzippé)&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;446&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Dans ce cas précis, le format le plus adapté semble être SVG, suivi de près par
PNG. Il s’agit en effet d’une image dont les couleurs sont unies, non-animée,
représentant des formes géométriques. Autant de facteurs qui tendent à favoriser
ces formats.&lt;/p&gt;
&lt;p&gt;Prenons un second exemple, avec cette fois la photographie d’une fusée qui
décolle. SVG s’avère incapable de représenter cette image correctement (nous
expliquerons pourquoi un peu plus loin). Voici ce que nous obtenons, à
perception visuelle équivalente, pour les formats JPEG, PNG et WebP :&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/rocket_fr_580.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/rocket_fr_580.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/rocket_fr_580.jpg 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;PNG 171 Ko ; JPEG 33 Ko ; WebP : 13 Ko. Pas de différence
notable.&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;446&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Ici, les résultats sont radicalement différents. Pour représenter toute la
complexité d’une photographie, le format WebP se démarque nettement.
Malheureusement, il n’est supporté que sur Chrome et Opéra, nous lui préférerons
donc souvent le format JPEG.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;A savoir :&lt;/strong&gt; pour chacun de vos
&lt;a href=&quot;https://www.dareboost.com/&quot;&gt;tests de performance avec Dareboost&lt;/a&gt;,
notre outil d’analyse vérifie systématiquement si le format PNG n’est pas
utilisé pour des images trop complexes où d’autres formats seraient plus
indiqués.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Au moment de l’enregistrement en JPEG, la plupart des logiciels demandent quelle
qualité conserver, car il s’agit d’un format d’encodage avec pertes. En
choisissant une qualité inférieure à 100%, il est ainsi possible d’économiser de
précieux octets en modifiant uniquement certains points de l’image. Essayons
avec notre image, en qualité 80%. Le résultat est très intéressant avec un gain
de poids de plus de 50%, alors que seuls quelques points de l’image ont été
modifiés en profondeur.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/diff_fr_580.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/diff_fr_580.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-10-29/diff_fr_580.jpg 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;JPEG d&amp;#39;origine : 33 Ko. JPEG optimisé : 16 Ko. Entre les
deux, très peu de modifications.&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;250&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Comme les exemples ci-dessus le montrent, choisir un format n’est pas anodin et
tous les formats ne sont pas adaptés à toutes les images. Tout cela mérite
quelques explications.&lt;/p&gt;
&lt;h2&gt;Comment choisir le bon format d’image ?&lt;/h2&gt;
&lt;p&gt;Certes, au final, toutes les images s’affichent à l’écran de la même manière :
un rectangle composé de plusieurs points de différentes couleur. Mais ce n’est
pas forcément comme ça qu’elle sont enregistrées dans la machine. Et chaque
format de fichiers image s’appuie sur différentes techniques d’encodage des
informations visuelles.&lt;/p&gt;
&lt;h3&gt;Que représente mon image ?&lt;/h3&gt;
&lt;p&gt;Certains formats de fichiers encodent les images de la même manière qu’elle
s’affiche à l’écran : comme des matrices de points de couleur. Chaque point de
couleur est codé sur plusieurs octets (bits) et positionné au sein d’une carte
(map) en fonction de ses coordonnées. C’est pour cela que ces formats sont
parfois appelés « bitmap ». Divers algorithmes de compression viennent ensuite
réduire l’espace pris par ces informations sur le disque. On parle, pour ces
formats, d’images « &lt;strong&gt;matricielles&lt;/strong&gt; ». Leur avantage : ils peuvent
encoder n’importe quelle photographie et certains d’entre eux, comme le format
PNG, ont des fonctionnalités avancées comme l’optimisation de la palette de
couleurs ou la transparence.&lt;/p&gt;
&lt;p&gt;Malheureusement, ce processus d’encodage doit définir en premier lieu les
dimensions de la matrice, c’est-à-dire la résolution de l’image, avant d’y
positionner les points. Du coup, si vous agrandissez une image matricielle
&lt;strong&gt;JPG&lt;/strong&gt;, &lt;strong&gt;PNG&lt;/strong&gt; ou &lt;strong&gt;WebP&lt;/strong&gt; existante,
vous perdrez grandement en qualité.&lt;/p&gt;
&lt;p&gt;D’autres formats de fichiers n’ont pas ce défaut, car ils encodent les images
comme un ensemble de formes géométriques. Ils définissent une image à travers
les lignes, les points et les polygones qui la compose. Chaque fois que l’image
doit être affichée, l’ordinateur la redessine en suivant cette spécification de
dessin virtuel. Ces &lt;strong&gt;images vectorielles&lt;/strong&gt; sont très adaptées pour
le rendu des formes simples, des logotypes et des graphiques de données. Comme
ils ne sont pas dépendants de la résolution, ils sont particulièrement adaptés
aux conceptions Web Responsive. Les images &lt;strong&gt;SVG&lt;/strong&gt; et les polices
d’icônes sont des formats vectoriels. Revers de la médaille : les graphiques
vectoriels sont assez peu adaptés aux photographies.&lt;/p&gt;
&lt;h3&gt;Réduire le poids des images en sacrifiant des informations&lt;/h3&gt;
&lt;p&gt;Il est possible d’aller plus loin dans l’optimisation en acceptant de perdre
quelques informations en route. L’enjeu est bien sûr de perdre le strict
nécessaire, tout en maintenant un niveau de qualité intéressant. C’est ce qu’on
appelle la &lt;strong&gt;phase d’optimisation avec perte&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Pour les &lt;strong&gt;images vectorielles&lt;/strong&gt;,
&lt;a href=&quot;https://github.com/svg/svgo&quot;&gt;svgo&lt;/a&gt; est aujourd’hui un outil de
référence pour lequel il existe même une interface en ligne :
&lt;a href=&quot;https://jakearchibald.github.io/svgomg/&quot;&gt;svgomg&lt;/a&gt;. L’outil est
capable de réduire la quantité de code en nettoyant des métadonnées qui sont
inutiles pour l’affichage (par exemple, les informations concernant l’outil qui
a servi à générer le fichier) mais aussi en réunissant plusieurs formes
géométriques ou transformations qui leurs sont appliquées en une seule. Pour
réduire le poids d’une police d’icônes, la logique est la même, à ceci près que
vous pourrez également réduire son périmètre d’action en sélectionnant
uniquement les caractères utilisés pour fabriquer votre jeu de caractères
sur-mesure. Plusieurs sites, comme &lt;a href=&quot;https://icomoon.io/&quot;&gt;Icomoon&lt;/a&gt;,
permettent de créer sa propre webfont.&lt;/p&gt;
&lt;p&gt;Comme nous l’avons vu dans l’exemple de la fusée, des optimisations avec ou sans
pertes sont possibles également sur les &lt;strong&gt;images matricielles&lt;/strong&gt;.
Comme chaque format d’image a ses propres caractéristiques (par exemple, la
transparence du support PNG), chaque algorithme a un mode d’action différent et
un impact visuel spécifique.&lt;/p&gt;
&lt;p&gt;Voici quelques formats de fichiers et certains outils d’optimisation adaptés,
dont certains sont inclus dans les outils graphiques comme Photoshop ou GIMP :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PNG: Zopfli-png, PNGOUT, OptiPNG, AdvPNG, PNGCrush, PNGQuant&lt;/li&gt;
&lt;li&gt;JPG: JPEGOptim, MozJPEG, Jpegtran, Guetzli&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://nikkhokkho.sourceforge.net/static.php?page=FileOptimizer&quot;&gt;FileOptimizer&lt;/a&gt;
(Windows), &lt;a href=&quot;https://imageoptim.com/mac&quot;&gt;ImageOptim&lt;/a&gt; (Mac) ou
&lt;a href=&quot;https://trimage.org/&quot;&gt;Trimage&lt;/a&gt; (Linux) sont des logiciels qui
réunissent plusieurs algorithmes en un seul endroit. Ils vous permettront de
tester ces optimisations avec différents niveaux de perte et exportent
directement une image optimisée. Ils sont même capables de déterminer quand une
image PNG peut être enregistrée en PNG-8 (une variante de PNG à 256 couleurs
seulement) plutôt que PNG-24 pour gagner quelques précieux octets.&lt;/p&gt;
&lt;h3&gt;Pourquoi ne parle-t-on pas de GIF ?&lt;/h3&gt;
&lt;p&gt;GIF est un format très contraint (il ne peut décrire que 256 couleurs) qui
supporte la transparence et l’animation. Utilisé depuis des années pour encoder
des logotypes, des pictogrammes et de courtes animations, il est temps que GIF,
disons-le clairement, prenne sa retraite..&lt;/p&gt;
&lt;p&gt;Vous pouvez trouver des fonctionnalités estampillées GIF dans tous les réseaux
sociaux ou applications de messagerie instantanée, mais ce n’est pas vraiment la
réalité. En fait, beaucoup de ces services utilisent des formats vidéos, avec
des fichiers bien plus légers ! Nous reviendrons sur ce sujet dans un prochain
article.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-10-29/lenny.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/lenny.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/lenny.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Capture des Chrome DevTools où l'on voit une vidéo être jouée comme un GIF et à côté, le code HTML de cette vidéo.&lt;/em&gt;&lt;/figure&gt;
&lt;p&gt;Si vous avez néanmoins besoin du format GIF, sachez qu’un outil de compression
en ligne de commande existe aussi : gifsicle. Il peut être très utile pour
manipuler les contenus GIF : réduire la palette de couleurs, redimensionner,
couper et rogner… J’utilise parfois gifsicle pour encoder de courts
enregistrements de mon écran et les intégrer dans des emails, car beaucoup de
clients mail ne peuvent toujours pas lire les vidéos intégrées aux emails.&lt;/p&gt;
&lt;h2&gt;Servir la bonne taille de fichier en fonction du contexte&lt;/h2&gt;
&lt;p&gt;Choisir le bon format de fichier n’est pas suffisant pour garantir que vous
servirez l’image optimale dans tous les contextes d’usage.&lt;/p&gt;
&lt;p&gt;Imaginons que vous utilisiez une image d’une largeur de 2680 pixels pour décorer
le background d’un site pensé pour une consultation depuis un ordinateur de
bureau à écran haute résolution
(&lt;abbr lang=&quot;en&quot; title=&quot;Hight Dot Per Inch&quot;&gt;HiDPI&lt;/abbr&gt;, ex-Retina™). Sur un
appareil mobile de plus faible résolution, en 3G, non seulement le navigateur
chargera une quantité importante de données superflues mais, pour que l’image
rentre dans la largeur du téléphone, il devra également la redimensionner avec
son algorithme interne. Le résultat final sera dégradé, sans parler de la
vitesse d’affichage… Ce qu’il aurait mieux valu faire, c’est produire
plusieurs versions de cette image, dans différentes résolutions et laisser le
navigateur choisir l’image à télécharger en fonction de son contexte
d’exécution.&lt;/p&gt;
&lt;p&gt;On appelle « &lt;strong&gt;Images Responsives&lt;/strong&gt; » ces techniques qui consistent
à produire, pour la même zone d’une page Web, plusieurs images adaptées aux
contextes possibles de navigation. Pour les images d’arrière-plan et
décoratives, vous pouvez utiliser les media-queries CSS.&lt;/p&gt;
&lt;p&gt;Pour les images non-décoratives, la spécification &lt;strong&gt;picture&lt;/strong&gt; a
ajouté, en 2014 (oui, trois ans déjà !), l’attribut &lt;code&gt;srcset&lt;/code&gt; à
l’élément &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;. Le &lt;code&gt;srcset&lt;/code&gt; est une collection
d’URLs pointant vers plusieurs versions d’une même image de résolutions
différentes (mais toujours le même rapport largeur/hauteur). Il confie au
navigateur la responsabilité de choisir la version de l’image à télécharger, en
fonction du contexte courant. Malheureusement, sans avoir téléchargé les
fichiers CSS de la page Web, le navigateur ne peut pas comprendre l’espace
relatif occupé par l’image dans la fenêtre, donc l’attribut &lt;code&gt;sizes&lt;/code&gt;
doit également être défini.&lt;/p&gt;
&lt;p&gt;Si vous voulez proposer, en plus de votre image optimisée, des formats supportés
par un nombre limité de navigateurs (comme WebP) ou si vous voulez gérer
différents rapports largeur/hauteur en fonction du contexte (une question de
direction artistique), vous pouvez encadrer votre image par un élément
&lt;code&gt;picture&lt;/code&gt; et plusieurs éléments &lt;code&gt;source&lt;/code&gt; :&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_739/https://boris.schapira.dev/assets/images/2017-10-29/theguardian.png 739w&quot; sizes=&quot;80vw&quot;  alt=&quot;Capture de code&quot; loading=&quot;lazy&quot; width=&quot;739&quot; height=&quot;441&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Extrait de code d’image responsive du
Guardian&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Avec tous les médias possibles, les questions de direction artistique, de
tailles, de densité de pixel et de support de formats, le balisage HTML des
images responsives peut aboutir à un résultat assez impressionnant. Mais
n’oubliez pas que vos réponses HTTP doivent être gzippées. La différence de
500 o entre ce balisage et un simple élément &lt;code&gt;img&lt;/code&gt; sera au final
largement compensée par le gain sur le poids de l’image servie.&lt;/p&gt;
&lt;p&gt;À noter que même si le support des éléments HTML nécessaires est assez récent,
une librairie fiable et reconnue permet un support sur des navigateurs plus
anciens : &lt;a href=&quot;https://scottjehl.github.io/picturefill/&quot;&gt;picturefill&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Automatiser, automatiser, automatiser&lt;/h3&gt;
&lt;p&gt;Choisir le bon format d’image, générer des miniatures, utiliser parfois des
formats alternatifs plus adaptés suivant le contexte (comme WebP) et donc
générer encore d’autres miniatures…&lt;/p&gt;
&lt;p&gt;Réaliser manuellement ce travail sur une quantité importante d’images de base de
grande qualité relève du titanesque. Très peu d’outils, qu’ils s’agissent des
&lt;abbr title=&quot;Content Management System&quot;&gt;CMS&lt;/abbr&gt; ou des plateformes
e-commerce, intègrent des fonctionnalités abouties sur la gestion d’images. Même
les solutions de Digital Asset Management, dédiées normalement à la gestion des
ressources visuelle et dont cela devrait être une des prérogatives, sont souvent
inutiles.&lt;/p&gt;
&lt;p&gt;Quelques solutions existent tout-de-même, comme
&lt;a href=&quot;https://cloudinary.com/&quot;&gt;Cloudinary&lt;/a&gt; qui est un service tiers
accessible en SaaS ou &lt;a href=&quot;http://thumbor.org/&quot;&gt;Thumbor&lt;/a&gt;, qui s’installe
sur un de vos serveurs. Discutez avec votre équipe de développement Web pour
déterminer le meilleur outil et n’oubliez pas d’expliquer les problématiques aux
contributeurs et de les former à la solution retenue.&lt;/p&gt;
&lt;p&gt;N’oubliez pas non plus de toujours conserver les images d’origine (celles qui
sont de la meilleure qualité disponible) et de bien réfléchir aux optimisations,
notamment avec pertes, que vous souhaitez appliquer.&lt;/p&gt;
&lt;p&gt;Par exemple, sur un site e-commerce, les visuels produits sont plus critiques
que les images décoratives, donc vous ne voudrez pas perdre trop de qualité. De
même, si vous êtes dans le marché du Luxe, vos visiteurs attendent une qualité
d’image irréprochable. Il faudra donc être très fin dans la configuration des
optimisations. Parfois,
&lt;a title=&quot;Perceptual Image Compression at Flickr&quot; href=&quot;http://code.flickr.net/2015/09/25/perceptual-image-compression-at-flickr/&quot;&gt;comme
ce fut le cas chez Flickr&lt;/a&gt;, le bon réglage peut prendre plusieurs mois.&lt;/p&gt;
&lt;h2&gt;Le &lt;span lang=&quot;en&quot;&gt;Lazy Load&lt;/span&gt; quand c’est possible (avec ou sans effet visuel)&lt;/h2&gt;
&lt;p&gt;Une autre façon d’améliorer les performances d’une page Web, consiste à se
passer des images inutiles lors du chargement initial. Par exemple, vous pouvez
retarder le chargement de toutes les images qui ne sont pas affichées dans la
zone visible de la page Web (&lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt;). Il y a
beaucoup de bibliothèques JS pour faire cela mais toutes ne seront pas
compatibles avec votre code existant : demandez son avis à votre équipe de
développement ou suggérez-leur une librairie sans dépendance comme
&lt;a href=&quot;https://apoorv.pro/lozad.js/&quot;&gt;Lozad&lt;/a&gt;. Une fonctionnalité de
&lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; est également disponible sur Apache et nginx
:
&lt;a href=&quot;https://www.modpagespeed.com/doc/filter-lazyload-images&quot; lang=&quot;en&quot;&gt;ModPageSpeed
Lazyload&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Un des problèmes du &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; est que la zone dédiée à
l’image reste souvent vide jusqu’à ce que, brutalement, l’image apparaisse. Il
faut donc déterminer quand et comment charger les images ainsi retardées pour
que l’utilisateur soit le moins possible témoin de ce phénomène : après le
chargement initial
(&lt;a href=&quot;https://www.dareboost.com/fr/doc/test-performance-web/indicateurs/onload&quot;&gt;onload&lt;/a&gt;)
de la page Web ? Lorsque l’utilisateur fait défiler le contenu et s’apprête donc
à rendre visible la zone concernée ? Le &lt;span lang=&quot;en&quot;&gt;Lazy Loading&lt;/span&gt; doit
être discuté avec les concepteurs UX qui peuvent avoir des idées sur la façon de
l’animer pour le rendre moins abrupt.&lt;/p&gt;
&lt;p&gt;Certains sites Web occupent la zone de l’image avec un contenu standard aux
couleurs de la marque. D’autres utilisent la couleur majoritaire de l’image ou
même une silhouette de l’image réelle en SVG.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-10-29/placeholders.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/placeholders.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-10-29/placeholders.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Chargement progressif d'images : pendant que les images se charge, une silhouette floue occupe l'espace.&lt;/em&gt;&lt;/figure&gt;
&lt;h2&gt;Réduire le nombre d’images avec une pile d’images&lt;/h2&gt;
&lt;p&gt;Sur les réseaux où la latence est importante, on peut rapidement gagner du temps
en réduisant le nombre d’images à télécharger. Plutôt que d’inclure chaque image
dans un fichier image séparé, les images peuvent être regroupées dans un seul
fichier. Les Sprites d’images sont un exemple de cette technique appliquée aux
images matricielles. Les polices d’icônes ou les symboles SVG sont
l’implémentation équivalente pour les images vectorielles.&lt;/p&gt;
&lt;p&gt;Bien que l’idée soit séduisante, sa mise en œuvre peut se révéler complexe.
Utiliser un sprite image est une technique utile si vous utilisez vraiment
toutes les images empilées sur la page Web où la ressource est chargée, ce qui
est assez rare. De plus, si vous devez remplacer un seul élément de la pile, le
sprite entier doit être invalidé dans le cache du navigateur.&lt;/p&gt;
&lt;p&gt;Enfin : le problème initial, la latence, n’est pas une fatalité.
&lt;a title=&quot;HTTP/2 : la transition est en marche ! Quels changements pour le développeur front-end ? &amp;mid; Blog Dareboost&quot; href=&quot;https://blog.dareboost.com/fr/2016/11/http2-changements-bonnes-pratiques-http1-front-end/&quot;&gt;En
HTTP/2&lt;/a&gt;, un protocole dans lequel les connexions sont optimisées pour
télécharger simultanément plusieurs ressources, la technique perdrait tout son
sens. Du moins,
&lt;a title=&quot;Ne jetez pas les sprites avec HTTP/2 &amp;mid; Octo Talks&quot; href=&quot;https://blog.octo.com/ne-jetez-pas-les-sprites-avec-http2/&quot;&gt;en
théorie&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Fin ?&lt;/h2&gt;
&lt;p&gt;Oh que non !&lt;/p&gt;
&lt;p&gt;L’état de l’art de la gestion des images responsives est loin d’être parfait. Au
lieu d’envoyer beaucoup d’informations au navigateur et lui laisser choisir la
bonne image en fonction du contexte, pourquoi ne pas demander au navigateur de
passer le contexte lors de la requête initiale puis calculer toute la
contextualisation côté serveur ?&lt;/p&gt;
&lt;p&gt;C’est ce à quoi réfléchissent certains membres du What Working Group dans
&lt;a href=&quot;http://httpwg.org/http-extensions/client-hints.html&quot;&gt;la spécification
Client Hints&lt;/a&gt;. Le support est
encore&lt;a href=&quot;http://caniuse.com/#feat=client-hints-dpr-width-viewport&quot;&gt; très
limité&lt;/a&gt; mais le concept est en cours de normalisation à
l’&lt;abbr lang=&quot;en&quot; title=&quot;Internet Engineering Task Force&quot;&gt;IETF&lt;/abbr&gt;. Cela
ressemble beaucoup à une initiative du début du début des années 2010, appelée
&lt;a href=&quot;https://www.lukew.com/ff/entry.asp?1392&quot;&gt;Responsive Web Design + Server
Side Components, aka RESS&lt;/a&gt;, qui essayait déjà de déporter une partie de la
mécanique d’adaptation du contenu côté serveur.&lt;/p&gt;
&lt;p&gt;L’essai sera-t-il transformé cette fois ? La gestion des images nous réserve
encore bien des surprises !&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Sun, 29 Oct 2017 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/fr/2017/10/optimiser-les-images-et-reduire-leur-poids-formats-outils-et-rwd/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2017/10/optimiser-les-images-et-reduire-leur-poids-formats-outils-et-rwd/</guid>
      
      <category>Performance Web</category>
      
      <category>Images</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Fiabiliser les connexions sécurisées avec HSTS (HTTP Strict Transport Security)</title>
      
      <description>
          &lt;p&gt;Si vous fréquentez [le blog de Dareboost], il ne vous aura pas échappé
&lt;a href=&quot;https://blog.dareboost.com/fr/2016/03/https-necessaire-pas-uniquement-pour-le-seo/&quot;&gt;qu’il est urgent de passer au HTTPS&lt;/a&gt;.
L’échéance est d’autant plus forte que les géants du Web ont déjà tiré leurs
coups de semonce en affichant des alertes sur certaines pages en HTTP dans
Google Chrome et Mozilla Firefox. Bientôt, ce seront tous les formulaires qui
seront concernés.&lt;/p&gt;
&lt;p&gt;Cela étant dit, avoir un site accessible en HTTPS ne suffit pas à basculer
l’ensemble de son trafic automatiquement vers cette nouvelle version.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-09-18/2.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_300/https://boris.schapira.dev/assets/images/2017-09-18/2.png 300w&quot; sizes=&quot;80vw&quot;   alt=&quot;Le long d&amp;#39;un aiguillage ferroviaire, un feu bicolore
indique si un train peut passer.&quot; loading=&quot;lazy&quot; width=&quot;300&quot; height=&quot;138&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.dareboost.com/fr/2017/09/hsts-fiabiliser-connexions-securisees/&quot;&gt;Fiabiliser les connexions sécurisées avec HSTS (HTTP Strict Transport Security)&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;Mise en place d’une redirection : une technique qui présente des limites&lt;/h2&gt;
&lt;p&gt;Une des manières les plus efficaces de rediriger le trafic vers la version HTTPS
de votre site est la mise en place d’une redirection permanente (code 301, avec
un entête HTTP &lt;em&gt;Location&lt;/em&gt; indiquant la page destination). Utilisateurs comme
moteurs de recherche visitant le site HTTP seront ainsi redirigés
automatiquement vers la version HTTPS.&lt;/p&gt;
&lt;p&gt;Cela suffit-il ? Malheureusement non. Car cette redirection ne corrigera pas,
pour la plupart des utilisateurs, l’action d’origine les ayant amenés à
interroger cette URL non-sécurisée. Certains auront tapé directement l’URL en
HTTP, d’autres auront cliqué sur une icône de leur barre de favoris, d’autres
encore auront suivi un lien situé sur un site tiers. L’erreur étant humaine,
vous n’êtes pas, vous-même, à l’abri de laisser traîner un lien interne en HTTP
dans votre site Web HTTPS. Dans tous ces cas, la redirection ne suffit pas à
garantir la sécurité du trafic de vos visiteurs et ajoute à la navigation le
coût d’une requête supplémentaire, affectant ainsi la performance.&lt;/p&gt;
&lt;p&gt;De plus, subir une redirection vers une version sécurisée implique que l’on a
d’abord cherché à joindre une page non-sécurisée. Durant cette requête initiale,
la navigation est susceptible d’être capturée. Si un individu mal intentionné a
accès au réseau de votre visiteur, il sera en mesure d’intercepter le trafic et,
pire encore, de le détourner pour acquérir des données de navigation. La liste
des situations à risque est longue : bornes Wi-Fi publiques, connexion internet
fournies par les compagnies de transport (qui sont parfois les premières à
injecter des contenus dans le trafic non-sécurisé), réseau privé compromis, etc.&lt;/p&gt;
&lt;p&gt;Que l’on parle de sécurité ou de performance, il est donc nécessaire d’éviter
autant que possible cette redirection.&lt;/p&gt;
&lt;h2&gt;&lt;abbr lang=&quot;en&quot; title=&quot;HTTP Strict Transport Security&quot;&gt;HSTS&lt;/abbr&gt; pour forcer le trafic vers HTTPS&lt;/h2&gt;
&lt;p&gt;HTTP Strict Transport Security
(&lt;abbr lang=&quot;en&quot; title=&quot;HTTP Strict Transport Security&quot;&gt;HSTS&lt;/abbr&gt;) est une
directive, dont la spécification complète se trouve dans la
&lt;a href=&quot;https://tools.ietf.org/html/rfc6797&quot;&gt;RFC 6797&lt;/a&gt;. Elle se présente comme un
entête de réponse envoyé par le serveur au navigateur &lt;strong&gt;lui déclarant que le
domaine interrogé est destiné à être visité uniquement en HTTPS&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Le navigateur enregistre l’information et, si à l’avenir l’URL non-sécurisée est
interrogée, il effectuera automatiquement une redirection interne (code 307)
vers la version HTTPS. Comme HSTS ne concerne que les appels futurs, la mise en
place de redirections 301 sur les appels HTTP reste pertinente.&lt;/p&gt;
&lt;p&gt;La directive dispose une durée de validité exprimée en secondes dans le
paramètre &lt;code&gt;max-age&lt;/code&gt;. Une valeur à 300 ordonne au navigateur de mémoriser l’URL
sécurisée pendant cinq minutes. Une valeur à 63072000, pendant deux ans.&lt;/p&gt;
&lt;p&gt;Il est recommandé d’implémenter HSTS avec une faible durée de rétention, puis
d’augmenter progressivement. À chaque étape, attendez a minima le temps
paramétré dans &lt;code&gt;max-age&lt;/code&gt; puis détectez les requêtes infructueuses et surveillez
les métriques de votre domaine. Corrigez les problèmes constatés.&lt;/p&gt;
&lt;p&gt;Voici un exemple d’implémentation avec Apache, pour une rétention de 5 minutes :&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Header always set Strict-Transport-Security &quot;max-age=300; includeSubDomains;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Le paramètre &lt;code&gt;includeSubDomains&lt;/code&gt; permet de forcer le HTTPS pour l’ensemble des
sous-domaines : attention, si certaines de vos ressources sont uniquement
accessibles en HTTP, mieux vaut ne pas activer cette option !&lt;/p&gt;
&lt;p&gt;En cas d’erreur, sachez cependant qu’un retour en arrière est possible en
modifiant votre directive HSTS avec un &lt;code&gt;max-age&lt;/code&gt; à 0.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A max-age value of zero (i.e., &lt;code&gt;max-age=0&lt;/code&gt;) signals the UA to cease regarding
the host as a Known HSTS Host, including the includeSubDomains directive (if
asserted for that HSTS Host).
&lt;cite&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6797#section-6.1.1&quot;&gt;RFC6797, Section 6.1.1&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Récapitulons. La directive HSTS permet, en complément d’une redirection 301, de
sécuriser le trafic futur d’un visiteur pendant une période donnée, sur un
contexte de domaine défini (domaine courant ou domaine et ensemble des
sous-domaines). Reste toutefois un problème de sécurité : l’accès initial du
visiteur à la version non-sécurisée.&lt;/p&gt;
&lt;h2&gt;Un trafic totalement sécurisé et fiable avec HSTS Preloading&lt;/h2&gt;
&lt;p&gt;Pour sécuriser davantage l’ensemble du trafic des sites sécurisés, le projet
Chromium maintient une liste des domaines “valides HSTS”, c’est-à-dire :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;disposant d’une version sécurisée à l’aide d’un certificat valide ;&lt;/li&gt;
&lt;li&gt;ayant mis en place des redirections 301 de HTTP vers HTTPS ;&lt;/li&gt;
&lt;li&gt;dont tous les sous-domaines sont sécurisés ;&lt;/li&gt;
&lt;li&gt;proposant une directive HSTS (y compris sur la redirection 301) d’une
validité minimale de
&lt;del datetime=&quot;2017-10-16T07:25:54.566Z&quot; cite=&quot;https://hstspreload.org/&quot;&gt;18
semaines (10886400 secondes)&lt;/del&gt;
&lt;ins datetime=&quot;2017-10-16T07:25:54.566Z&quot; cite=&quot;https://hstspreload.org/&quot;&gt;un
an (31536000 secondes)&lt;/ins&gt;[^twalle], incluant les sous-domaines et
spécifiant l’attribut &lt;code&gt;preload&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un site éligible pourra alors
&lt;a href=&quot;https://hstspreload.org/&quot; title=&quot;HSTS Preload List Submission&quot;&gt;rejoindre le registre HSTS Preloading&lt;/a&gt;
embarqué dans Chrome,
&lt;a href=&quot;https://blog.mozilla.org/security/2012/11/01/preloading-hsts/&quot; title=&quot;Preloading HSTS ∣ Mozilla Security Blog&quot;&gt;Firefox&lt;/a&gt;,
Opera, Safari,
&lt;a href=&quot;https://blogs.windows.com/msedgedev/2015/06/09/http-strict-transport-security-comes-to-internet-explorer-11-on-windows-8-1-and-windows-7/&quot; title=&quot;HTTP Strict Transport Security comes to Internet Explorer 11 on Windows 8.1 and Windows 7 - Microsoft Edge Dev BlogMicrosoft Edge Dev Blog&quot;&gt;IE 11 et Edge&lt;/a&gt;.
Toute requête non-sécurisée vers ce domaine bénéficiera alors d’une redirection
interne (code 307) avant même que ne démarre la requête.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-09-18/2.png&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_300/https://boris.schapira.dev/assets/images/2017-09-18/2.png 300w&quot; sizes=&quot;80vw&quot;  alt=&quot;Une capture des Chrome DevTools&quot; loading=&quot;lazy&quot; width=&quot;300&quot; height=&quot;138&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Redirection interne lors d’une tentative d’accès à
Facebook en HTTP dans Chrome 60.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Attention : contrairement au chapitre précédent, modifier la directive pour
revenir en arrière en cas d’erreur de votre part ne suffira pas. Des domaines
peuvent être supprimés du registre, mais il faut des mois pour que tous les
utilisateurs concernés voient leur navigateur mis à jour avec cette nouvelle
liste. Ne demandez donc pas à être inclus à HSTS Preload à moins d’être sûr que
vous supporterez HTTPS pour votre domaine et tous ses sous-domaines à long
terme.&lt;/p&gt;
&lt;h2&gt;Protégez vos utilisateurs avec HSTS&lt;/h2&gt;
&lt;p&gt;La directive HSTS existe depuis plusieurs années. Elle permet de sécuriser le
trafic futur de vos visiteurs et, couplée à l’inscription dans le registre HSTS
Preloading, de fiabiliser même leur première connexion. Sa mise en place doit
être faite avec précaution, car elle impose la sécurisation de l’ensemble des
sous-domaines du domaine concerné. Une fois mise en place, elle fiabilise
durablement le trafic sécurisé des visiteurs, améliore la performance en
supprimant des redirections 301 et, dans la mesure où ce trafic sécurisé est
valorisé par l’algorithme de Google, améliore le référencement.&lt;/p&gt;
&lt;h2&gt;Bonus : avec HSTS Preload, protégez votre domaine des attaques de type &lt;i lang=&quot;en&quot;&gt;SSL strip&lt;/i&gt;&lt;/h2&gt;
&lt;p&gt;Celles et ceux qui suivent l’actualité du Web auront remarqué le danger
représenté par &lt;a href=&quot;https://www.krackattacks.com/&quot;&gt;Krack Attacks&lt;/a&gt;, une démonstration
de piratage du protocole WiFi WPA2. Une des étapes de l’attaque consiste, pour
le logiciel malveillant, à intercepter les requêtes SSL émises par l’internaute,
les réaliser lui-même puis répondre le résultat en HTTP. Un simple instant
d’inattention suffit alors pour qu’un pirate s’empare d’informations privées. Si
votre domaine est indexé dans la liste HSTS Preload, alors le navigateur
refusera de basculer en HTTP pour le visiter, protégeant ainsi vos visiteurs.&lt;/p&gt;
&lt;h2&gt;Lectures complémentaires&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.chromium.org/hsts&quot;&gt;[EN] HTTP Strict Transport Security – The Chromium Projects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.owasp.org/index.php/HTTP_Strict_Transport_Security_Cheat_Sheet&quot;&gt;[EN] HTTP Strict Transport Security Cheat Sheet – OWASP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 18 Sep 2017 00:00:00 +0200</pubDate>
      <link>https://blog.dareboost.com/fr/2017/09/hsts-fiabiliser-connexions-securisees/</link>
      <guid isPermaLink="true">https://blog.dareboost.com/fr/2017/09/hsts-fiabiliser-connexions-securisees/</guid>
      
      <category>Performance Web</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Enfermés dans un sous-sol</title>
      
      <description>
          &lt;p&gt;Alors que je m’apprête à tourner une page professionnelle, je ressens le besoin
de partager des anecdotes de ma vie de consultant. Celle-ci, rétrospectivement,
me fait rire. Mais je faisais moins mon fier en 2011…&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;Ce projet e-commerce était relativement simple mais la stack technologique
choisie par le client en amont du projet était peu mature. Bien que les langages
utilisés soient robustes, le projet reposait sur des solutions récentes qui
n’avaient jamais, ou très peu, été confrontée à la réalité du terrain.&lt;/p&gt;
&lt;p&gt;Nous n’avions jamais travaillé sur ces solutions donc nous avons décidé de
monter rapidement en compétence en incluant dans l’équipe des sous-traitants
expérimentés. Durant la réunion de lancement, le partage des tâches avait été
acté. Certaines composantes du projet, notamment liées aux responsabilités
légales et bancaires, restaient à la charge du client.&lt;/p&gt;
&lt;h2&gt;Tomber et se relever&lt;/h2&gt;
&lt;p&gt;Plusieurs mois plus tard, force est de constater que nous avions tous été trop
ambitieux.&lt;/p&gt;
&lt;p&gt;Le recrutement de personnes expérimentés ne s’étant pas passé comme prévu, nous
avions perdu trois semaines sur le planning de développement. Le client n’avait
pas encore souscrit de terminal de paiement, donc nous ne l’avions évidemment
pas intégré. L’éditeur de la solution, enfin, ne corrigeait les bugs remontés
que dans les nouvelles versions majeures, nous obligeant à migrer plusieurs fois
ce qui n’était pas évident dans la mesure où d’autres projets étaient installés
sur les mêmes serveurs et ces migrations entrainaient des incompatibilités.&lt;/p&gt;
&lt;p&gt;Bref, nous avons dépassé la date de livraison initialement prévue.&lt;/p&gt;
&lt;p&gt;Réunion de crise, toutes les parties actent l’échec et s’accordent pour se
donner un mois, manches relevées, pour corriger le tir. L’éditeur redescend ses
correctifs sur notre version, le client accélère la commande du
&lt;abbr title=&quot;Terminal de Paiement Électronique&quot;&gt;TPE&lt;/abbr&gt;, nous embauchons un
sous-traitant supplémentaire sans discuter le tarif. Un mois plus tard, au
lendemain de la souscription du
&lt;abbr title=&quot;Terminal de Paiement Électronique&quot;&gt;TPE&lt;/abbr&gt;, le site est en
ligne.&lt;/p&gt;
&lt;h2&gt;Un rendez-vous mystérieux&lt;/h2&gt;
&lt;p&gt;Quelques semaines plus tard, mon commercial et moi recevons une invitation pour
discuter des fonctionnalités du prochain lot. L’adresse est inconnue, sur Paris,
et le rendez-vous est, de manière surprenante pour ce type de réunion, programmé
très tôt. Je prends le train la veille pour être sûr d’être à l’heure. Tandis
que Paris s’éveille, je rejoins mon commercial devant les locaux d’une très
grande structure de banque-assurance française qu’on appellera DUPONT.&lt;/p&gt;
&lt;p&gt;Nous attendons notre interlocuteur quelques minutes. Il arrive dans la hall avec
trois autres personnes que nous n’avions jamais croisées auparavant, puis nous
emmène dans une petite salle de réunion, au deuxième sous-sol. Nous nous
installons silencieusement. Notre contact chez le client nous lance des regards
inquiet. Je comprends qu’il n’est pas à l’initiative de ce qui va se passer et
que quelque chose cloche.&lt;/p&gt;
&lt;p&gt;Un des trois hommes nous tend une feuille.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Avant de parler des nouvelles fonctionnalités à développer, nous allons faire
un rétroplanning du projet.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Sur la feuille sont reprises toutes les principales dates du projet. En face de
chaque date se trouve un commentaire nous inculpant :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;xx/xx/XXXX : élement non livré, échéance non respectée xx/xx/XXXX : élément
non livré, échéance non respectée&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Je suis abassourdi.&lt;/p&gt;
&lt;p&gt;D’une part, la plupart des éléments listés n’étaient pas de notre
responsabilité. D’autre part, nos retards allaient de pair avec d’autres, en
dehors de notre champs d’action. Même si nous avions livré notre code plus tôt,
le client n’aurait toujours pas souscrit son
&lt;abbr title=&quot;Terminal de Paiement Électronique&quot;&gt;TPE&lt;/abbr&gt; et nous n’aurions pas
mis en Production. Mon commercial, rouge de colère, se tient à deux mains au dos
de sa chaise, crispé, dents serrées. La situation est inédite et incroyable.&lt;/p&gt;
&lt;p&gt;Un autre homme embraie :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Nous sommes avocats spécialisés, détachés par DUPONT pour aider votre client à
faire valoir ses droits. Nous souhaitons un nouveau lot de développement et
vous allez le réaliser gratuitement.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hors de question. Mon commercial exprime son désaccord d’un calme ardent.
J’explique pour ma part que ce document n’a aucune valeur. Nous n’avons jamais
enfreint nos obligations d’information et de conseil.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Là n’est pas la question. Nous avons les moyens de faire couler votre
entreprise et nous le ferons.&lt;br /&gt;
— Vous seriez prêts à mettre 120 personnes sur le carreau ?&lt;br /&gt;
— Oh, vous savez, dans l’informatique, vous retrouverez vite un emploi.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;J’en eus froid dans le dos. C’en était trop pour mon commercial qui se leva,
menaçant, et m’ordonna de faire pareil. Merci, au revoir, le temps que je
comprennes ce qui s’était passé, nous étions déjà dehors, en route vers le
métro. J’étais encore sous le choc.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Tu crois qu’ils peuvent faire ce qu’ils ont dit ?&lt;br /&gt;
— Non, aucune chance. Ils sont juste aux abois parce qu’ils ne doivent plus
avoir d’argent.&lt;br /&gt;
— Je ne comprends pas.&lt;br /&gt;
— Ils doivent avoir un partenariat avec DUPONT. Comme ils n’ont plus de fonds,
ils ont dû demander à DUPONT de faire pression pour voir s’ils pouvaient
obtenir quelque chose. C’est un mouvement stupide : nous ne développerons rien
de plus. Ils peuvent toujours se brosser pour avoir leur nouveau lot.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;On n’a jamais entendu parler d’eux à nouveau. Le site n’a jamais connu
d’évolutions ou de nouvelle contribution. Le pied de page mentionne toujours un
&lt;span lang=&quot;en&quot;&gt;copyright&lt;/span&gt; en 2011…&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Tue, 11 Jul 2017 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2017/07/enfermes-dans-un-sous-sol/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2017/07/enfermes-dans-un-sous-sol/</guid>
      
      <category>anecdotes</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Évaluations</title>
      
      <description>
          &lt;blockquote&gt;
&lt;p&gt;[…] enseigner en école était de loin &lt;strong&gt;l’expérience de transmission la plus
contre-intuitive&lt;/strong&gt;, et donc la plus fascinante pour moi.&lt;br /&gt;
&lt;cite&gt;”&lt;a href=&quot;https://medium.com/scribe/enseigner-le-d%C3%A9veloppement-web-%C3%A0-85-%C3%A9tudiants-sans-sarracher-les-cheveux-%EF%B8%8F-e518274f7063&quot;&gt;Enseigner le développement web à 85 étudiants sans s’arracher les cheveux ✌️&lt;/a&gt;”,
Adrien Joly&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Adrien écrit avec beaucoup de justesse ce qu’il a appris en enseignant. Son
article donne envie d’en savoir plus et je ne peux pas m’empêcher d’y entendre
des échos de ma propre expérience.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;Quelle que soit la taille de la classe (de 8 à 40 élèves), le type de cursus (en
temps plein ou en alternance) ou l’année d’enseignement (de BAC+1 à BAC+5 ou
auprès de professionnels en formation continue) :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;même si on veut tous être
&lt;a href=&quot;https://www.youtube.com/watch?v=4lj185DaZ_o&quot;&gt;Robin Williams&lt;/a&gt;, il est
difficile de se passer de réaliser un enseignement classique avec des cours
magistraux ;&lt;/li&gt;
&lt;li&gt;les élèves ne sont souvent pas, ou mal, formé·e·s à la prise de notes. Elles
et ils &lt;strong&gt;se dispersent très vite&lt;/strong&gt; sur les réseaux sociaux si on leur en
laisse l’occasion ;&lt;/li&gt;
&lt;li&gt;être né·e·s avec Internet ne signifie pas savoir s’en servir, ou avoir le
recul pour
&lt;a href=&quot;/2016/11/infobesite-et-rebellion/&quot;&gt;comprendre et mettre en perspective ce qu’on y lit&lt;/a&gt;.
Il faut donc &lt;strong&gt;reprendre tout ce qu’on considère soi-même comme une base&lt;/strong&gt; ;&lt;/li&gt;
&lt;li&gt;le cours et les exercices ne suffisent pas : &lt;strong&gt;les élèves ont besoin de
supports&lt;/strong&gt;. Adrien fournit son cours. Je le fais aussi, a posteriori, en
ligne. Je me rends compte, cependant, que la plupart du temps ce sont les
supports de TD qui sont les plus demandés. Les élèves sont parfois
d’apprentis artisans : elles et ils ont besoin de répéter pour &lt;strong&gt;acquérir la
mémoire du geste&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Mes expériences&lt;/h2&gt;
&lt;p&gt;J’ai enseigné, ces dernières années, plusieurs matières. En vrac : ASP.NET ; le
développement Windows Phone ; le &lt;span lang=&quot;en&quot;&gt;Lean Canvas&lt;/span&gt; ;
l’introduction aux CMS .NET et PHP ; le PHP ; les
&lt;abbr title=&quot;Systèmes de gestion de bases de données relationelles&quot;&gt;SGBDR&lt;/abbr&gt;
via l’usage de MySQL ; le framework Symfony ; le
&lt;abbr title=&quot;Responsive Web Design&quot; lang=&quot;en&quot;&gt;RWD&lt;/abbr&gt; ; la gestion de projet
&lt;abbr title=&quot;Capability Maturity Model integration&quot;&gt;CMMi&lt;/abbr&gt; ; la gestion de
projet Agile ; l’accessibilité Web ; le
&lt;span lang=&quot;en&quot; title=&quot;gestion de version de code source&quot;&gt;versionning&lt;/span&gt;
avec git et, une première cette année, l’obtention de la certification Opquast.&lt;/p&gt;
&lt;p&gt;Au fil de ces cursus, j’ai tenté différents types d’évaluations qui me
permettent de remplir mes obligations de prof (“une note toutes les trois
heures”).&lt;/p&gt;
&lt;h3&gt;Des QCM “rigoureux”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;succès binaire (pas de ½ ou ¼ de points) ;&lt;/li&gt;
&lt;li&gt;des questions liées entre elles (si l’élève ratait une question mais en
réussissait une autre sur le même sujet, je ne mettais aucun point,
considérant qu’il s’agissait de chance)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;C’était le type de questionnaires avec lesquels j’avais été moi-même formé en
cursus d’ingénieur
&lt;a href=&quot;http://www.esiee.fr/&quot; title=&quot;Site Web de l'École Supérieur d'Ingénieurs en Électronique et Électrotechnique&quot;&gt;ESIEE&lt;/a&gt;.
J’ai rencontré un franc échec avec des notes très basses et un très faible écart
type (comprendre : c’était une vraie boucherie). J’ai rapidement arrêté.&lt;/p&gt;
&lt;h3&gt;Des TP notés avec la connaissance du sujet en amont&lt;/h3&gt;
&lt;p&gt;J’ai proposé cela une année, sur la base d’un exercice non-corrigé que j’avais
contribué sur &lt;a href=&quot;https://traindrop.github.io/&quot;&gt;Traindrop&lt;/a&gt;. Le résultat ne m’a pas
satisfait : les disparités entre les élèves ne représentaient pas leur niveau
mais plutôt :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;leur disponibilité : les élèves occupés par une activité autre (par exemple,
de l’entrepreunariat pour payer l’École ou leur loyer) n’avaient pas autant
de temps à consacrer au projet ;&lt;/li&gt;
&lt;li&gt;leur capacité à s’organiser en groupes sociaux : les élèves constitués en
groupes soudés s’échangaient les réponses (ce qui était assez facile à voir
une fois leur code passé dans mon Sonar&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;). Les élèves plus isolés
n’avaient pas accès au même niveau d’informations. Ils trichaient moins mais
avançaient moins vite ;&lt;/li&gt;
&lt;li&gt;collectivement : leur faible investissement sur le projet (parfois, même les
points vus en cours n’étaient pas traités).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Des rédactions (oui, oui)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Vous postulez chez { insérer ici une société au site plus ou moins adapté à la
navigation sur mobiles ou tablettes }. La responsable vous demande de rédiger
vos recommandations argumentées sur les pistes d’amélioration que vous
envisagez sur le &lt;em&gt;Front&lt;/em&gt; du site web. Vous soulignerez les problèmes
identifiés, les solutions possibles et les modalités de la direction de projet
qui en découlent.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;J’ai proposé un sujet de ce type deux fois. La première fois, j’avais pas loin
de 35 élèves et j’ai mis trois mois à corriger. Donc premier point : envisagez
d’avoir du temps et une grille de notation posée en amont avant de vous lancer
dans la correction.&lt;/p&gt;
&lt;p&gt;L’examen, s’il est très instructif, présente également ses limites : &lt;strong&gt;les
élèves ne sont pas rompus aux usages de la communication en entreprise&lt;/strong&gt;. Ils se
perdent souvent dans les circonvolutions d’un niveau de français soutenu plutôt
que d’aller à l’essentiel. Au final, j’ai moins pu juger du niveau de
compréhension des élèves que de leur niveau de synthèse. L’exercice reste
pertinent, mais trop consommateur de temps de correction pour être pratiqué à
grande échelle et doit être complété par d’autres modes d’évaluation.&lt;/p&gt;
&lt;h2&gt;Mes modes d’évaluations favoris&lt;/h2&gt;
&lt;p&gt;Aujourd’hui, j’évalue souvent les élèves avec des &lt;strong&gt;QCM faciles&lt;/strong&gt; mais
réguliers. Google Forms&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; est très pratique pour ça, puisque depuis cette
année, on peut pré-affecter des points aux questions. La correction est ainsi
immédiate.&lt;/p&gt;
&lt;p&gt;Je demande aux élèves de pratiquer une veille sur le sujet en cours. Je leur
impose &lt;strong&gt;un ou plusieurs oraux “de veille”&lt;/strong&gt;. Elles et ils doivent choisir une
source de leur choix (je fournis des références pour les moins à l’aise) et la
présenter au reste de la classe en cinq à dix minutes : auteur·trice, contexte,
objet, critique, pistes de lecture pour approfondir… Chaque présentation est, en
général, suivie d’une série de questions et réponses pour encourager la
curiosité et l’esprit critique des élèves. Je n’organise pas de tours de passage
mais je préviens en amont que ma notation sera dégressive : les premiers à
passer auront facilement plus de 18/20 mais que j’attends de chaque nouveau
passage qu’il ait au moins le même niveau d’analyse que le précédent, voire
qu’il aille plus loin. Le dernier à passer aura donc beaucoup plus de travail à
fournir pour avoir une bonne note.&lt;/p&gt;
&lt;p&gt;Quand nous profitons de plusieurs jours consécutifs sur le même sujet, nous
basculons en mode projet. Comme tout est fait pour assurer aux élèves une grande
autonomie (je pilote les apports pédagogiques en affectant tel ou tel ticket à
une équipe qui n’aurait pas abordé la notion en question), j’en profite pour
mener en dehors de la classe &lt;strong&gt;des interviews en face-à-face&lt;/strong&gt;, pendant
lesquelles je tente d’évaluer la compréhension de l’élève.&lt;/p&gt;
&lt;p&gt;Enfin, nous pratiquons des &lt;strong&gt;évaluations pratiques en pair-à-pair&lt;/strong&gt; pour
lesquelles j’applique le protocole suivant :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;toute la classe découvre le sujet ;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nous élaborons collectivement les critères objectifs qui constituent la
grille de notation&lt;/strong&gt;. Idéalement, chaque critère ne doit pas être noté sur
plus de deux points ;&lt;/li&gt;
&lt;li&gt;les élèves traitent l’énoncé ;&lt;/li&gt;
&lt;li&gt;nous faisons passer les “copies” (souvent, les fichiers) vers les
correcteurs (affectés aléatoirement) et l’évaluation a lieu. Les élèves me
l’envoient par e-mail ;&lt;/li&gt;
&lt;li&gt;j’évalue &lt;em&gt;a posteriori&lt;/em&gt; et compare mes notes aux notes envoyées par les
élèves. Quand ma note diverge fortement, j’écris une réponse au correcteur
pour qu’il sache pourquoi.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Idéalement, il faudrait le faire deux fois : la première fois, les élèves
prennent conscience de la difficulté que représente une notation. Ils se rendent
compte qu’on ne note pas entre 10 et 20, mais bien entre 0 et 20, et que
&lt;strong&gt;sortir de la zone située entre 8 et 12 sur 20 est difficile&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;En réalité, nous sommes souvent limités par le temps que cela consomme sur le
volume d’heure du cursus. Cependant, je note toujours une différence de
comportement après l’exercice. Il n’y a rien de plus difficile que de noter
objectivement un ou une camarade.&lt;/p&gt;
&lt;p&gt;Et vous, comment notez-vous ?&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.sonarqube.org/&quot;&gt;SonarQube&lt;/a&gt; est un outil d’inspection continue
de la qualité de code. Je m’en sers surtout pour sa fonctionnalité de
détection de code dupliqué, qui permet de découvrir assez rapidement les
“petits raccourcis” que prennent des étudiants en “s’empruntant” du code. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;Je serais ravi d’utiliser un autre service que Google pour cet usage. Je
surveille les évolutions de &lt;a href=&quot;https://framaforms.org/&quot;&gt;FramaForms&lt;/a&gt; pour,
justement, me défaire de cette dépendance. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Sun, 02 Jul 2017 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2017/07/evaluations/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2017/07/evaluations/</guid>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Où est le WeChat occidental ?</title>
      
      <description>
          &lt;p&gt;Il devient de plus en plus évident que la Chine est train de changer la façon
dont Internet intègre le quotidien. Ce changement a un nom :
&lt;a href=&quot;https://blog.clever-age.com/fr/2017/06/07/wechat-10-fonctionnalites-cles-pour-votre-entreprise/&quot;&gt;WeChat&lt;/a&gt;.
Quel impact pour le Web en occident ?&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class=&quot;canonical&quot;&gt;
&lt;strong&gt;Note :&lt;/strong&gt; cet article a d'abord été publié sur &lt;a href=&quot;https://blog.clever-age.com/fr/2017/06/20/ou-est-le-wechat-occidental/&quot;&gt;Où est le WeChat occidental ?&lt;/a&gt;.
&lt;/div&gt;
&lt;h2&gt;WeChat réinvente les usages du Web&lt;/h2&gt;
&lt;p&gt;WeChat n’est pas un réseau social comme un autre, c’est un point de connexion
avec les services qui entourent l’utilisateur : découverte de produits,
dialogues en &lt;abbr lang=&quot;en&quot; title=&quot;Business To Business&quot;&gt;B2B&lt;/abbr&gt;,
&lt;abbr lang=&quot;en&quot; title=&quot;Business To Consumer&quot;&gt;B2C&lt;/abbr&gt; ou
&lt;abbr lang=&quot;en&quot; title=&quot;Consumer To Consumer(s)&quot;&gt;C2C&lt;/abbr&gt;, prises de
rendez-vous, informations, paiement… les possibilités sont assez larges et c’est
bien normal : l’application agit comme un centre regroupant de multiples
services, des micro-applications, qui proposent chacune des services spécialisés
simples à identifier. Pour résumer, WeChat est un centre de services s’exécutant
au dessus du système d’exploitation de l’appareil mobile.&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;480&quot; height=&quot;321&quot; src=&quot;https://static01.nyt.com/video/players/offsite/index.html?videoId=100000004574648&quot; title=&quot;&amp;quot;How China Is Changing Your Internet&amp;quot; By JONAH M. KESSEL and PAUL MOZUR&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2&gt;Pourquoi n’a-t-on pas la même chose en Occident ?&lt;/h2&gt;
&lt;p&gt;Facebook n’est pas à sa première tentative, sans que la magie n’opère, car les
réponses à cette problématique sont nombreuses.&lt;/p&gt;
&lt;p&gt;D’abord notre marché est plus contraint. Bien que la Chine soit limitée dans son
accès au monde extérieur par la présence du Great Firewall&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, son marché
intérieur est assez, voire très libéral. La protection de la vie privée y est
balbutiante, les normes de contrôle très réduites et les réglementations
laxistes, quand elles existent (au contraire de l’Union Européenne, qui suis
exactement le chemin inverse)&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Autre élément de réponse : les barrières à l’entrée constituée par les App
Store. Le système de rémunération applicatif d’Apple, mis en place il y a près
de 10 ans et copié par Google pour Android, est aujourd’hui très bien implanté
et génère plusieurs milliards de dollars de revenus. Il offre aux éditeurs la
possibilité de commercialiser leur production et d’inclure des modalités d’achat
à la volée au sein de l’application via des App Stores. Le gestionnaire de l’App
Store assure la rotation de l’offre, la cohérence de l’expérience utilisateur et
touche une commission.&lt;/p&gt;
&lt;h2&gt;La rigidité des App Store&lt;/h2&gt;
&lt;p&gt;Le système des App Store, aussi satisfaisant qu’il soit, atteint ses limites. Il
noie l’utilisateur sous une offre pléthorique qui manque de contexte. Le nombre
de Stores alternatifs explose dans un certain nombre de marché émergents, où
l’on trouve, par exemple, des Stores offrant des applications adaptées à des
matériels bas de gamme sur lesquelles les applications “classiques” ne tournent
pas.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-06-20/50614.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-06-20/50614.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-06-20/50614.jpg 580w&quot; sizes=&quot;80vw&quot;   alt=&quot;Une main tenant un téléphone de face. On y voit de
nombreuses applications Android listées dans un menu.&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;387&quot; crossorigin=&quot;anonymous&quot; /&gt;&lt;/p&gt;
&lt;p&gt;La découverte des services est également problématique sur un système centralisé
de ce type. En regroupant l’offre d’applications, les App Store la rendent moins
contextuelle, moins locale, moins ciblée. La découverte d’applications est
alourdie et la proposition de service est, in fine, moins efficace. WeChat
fonctionne mieux en proposant des services locaux, basés sur l’utilisateur et
son réseau. Plutôt que de chercher dans un App Store, il est courant que les
utilisateurs de WeChat scannent directement un QR Code qui leur donne accès au
service dont ils ont besoin immédiatement.&lt;/p&gt;
&lt;h2&gt;L’alternative est déjà dans votre poche&lt;/h2&gt;
&lt;p&gt;Comment égaler l’application WeChat ? C’est déjà (presque) fait. Nous disposons
déjà d’applications capables d’en héberger d’autres, de créer des
interconnexions entre services et contenus Web, d’offrir des services sans
passer par les App Store et les contraintes qu’ils imposent. Vous pensez à
Facebook ? Raté. Je parlais de nos navigateurs.&lt;/p&gt;
&lt;p&gt;Google, fort de la position hégémonique de son navigateur Chrome, a pris le
train en marche en adhérant massivement aux applications web “comme des vraies”,
allant jusqu’à inventer le concept de
&lt;a href=&quot;https://blog.clever-age.com/fr/2016/12/29/les-progressive-web-apps-pour-booster-ux/&quot;&gt;Progressive Web App&lt;/a&gt;,
quitte à disrupter son propre modèle économique là où Apple freine encore des
quatre fers. Alphabet, sa maison-mère, a en effet compris comment faire des
&lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web Apps&quot;&gt;PWA&lt;/abbr&gt; des applications à part
entière, y compris au niveau de l’expérience utilisateur
(&lt;a href=&quot;https://mobile.twitter.com/&quot;&gt;Twitter Lite&lt;/a&gt;, par exemple, est une version PWA
de Twitter qui n’a pas grand-chose à envier à l’application native).&lt;/p&gt;
&lt;h2&gt;Vers la fin des App Store ?&lt;/h2&gt;
&lt;p&gt;Même en prenant en compte ces possibilités, la disparition des App Stores
poserait encore certains problèmes :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;disparition de la “présence de marque”, c’est-à-dire de la capacité pour les
utilisateurs de retrouver leurs marques préférées dans un annuaire de
services ;&lt;/li&gt;
&lt;li&gt;absence d’un module applicatif donnant les mêmes capacités de paiement à une
&lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web App&quot;&gt;PWA&lt;/abbr&gt; que ce qu’on trouve
sur un App Store.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Rien de plus facile, pour Apple ou Google, que de transformer leurs annuaires
applicatifs en annuaire de
&lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web Apps&quot;&gt;PWA&lt;/abbr&gt;. Ils pourront garder des
mécanismes de contrôle automatisé de la qualité (comme
&lt;a href=&quot;https://developers.google.com/web/tools/lighthouse/&quot;&gt;Lighthouse&lt;/a&gt;) mais déléguer
le rôle de répertoire aux éditeurs.&lt;/p&gt;
&lt;p&gt;Quant aux QR codes, qui ne recontrent pas nécessairement leur succès en
occident, il y a fort à parier pour qu’ils soient complétés par d’autres modes
de découverte : géo-localisation fine, conciergerie numérique plus ou moins
intégrée à un système de Chat Bots… des sujets sur lesquels Google est également
en pointe avec Google Now, Google Allo…&lt;/p&gt;
&lt;h2&gt;Reste enfin le sujet du paiement&lt;/h2&gt;
&lt;p&gt;Géraldine aime la course à pieds, et voudrait commencer un suivi précis de ses
trajets de course. Ne sachant pas quelle application installer, elle fait une
recherche sur Google et trouve un site spécialisé.&lt;/p&gt;
&lt;p&gt;À sa troisième visite, son navigateur lui signale que le site est disponible en
tant qu’application, et lui propose de l’installer, ce qu’elle fait. Au sein de
cette application, elle trouve un outil de suivi des trajets qui correspond à
ses besoins.&lt;/p&gt;
&lt;p&gt;Quelques mois plus tard, l’application lui signale qu’en analysant ses données
de courses, elle a détecté une chance assez importante de foulée supinatrice et
lui propose, en partenariat avec une grande marque de sport, de nouvelles
chaussures de courses adaptées. Géraldine procède au paiement dans
l’application, qui utilise sont profil Google pour récupérer ses coordonnées
postales et bancaires, sans aucune friction.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-06-20/260290.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-06-20/260290.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_580/https://boris.schapira.dev/assets/images/2017-06-20/260290.jpg 580w&quot; sizes=&quot;80vw&quot;  alt=&quot;Une personne fine est assise sur le sol, en tenue de sport.
L&amp;#39;objectif se focalise sur sa chaussure droite, qui semble être une chaussure de
running.&quot; loading=&quot;lazy&quot; width=&quot;580&quot; height=&quot;326&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Un scénario mêlant Web,
application et achats de manière transparente pour
l’utilisatrice.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Ce sujet va cristalliser l’avenir du Web ces prochains mois, voire ces
prochaines années. C’est
&lt;a href=&quot;https://www.w3.org/Payments/&quot; title=&quot;Web Payments at W3C: Making Payments Easy on the Web&quot;&gt;un des sujets d’études “chaud” du &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt;&lt;/a&gt;.
Les &lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web Apps&quot;&gt;PWA&lt;/abbr&gt; seront rapidement le
cheval de Troie de librairies proposées par les éditeurs de systèmes
d’exploitation pour faciliter et encadrer le paiement en échange d’une
commission, sur la base d’un standard comme la
&lt;a href=&quot;https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/&quot;&gt;Payment Request API&lt;/a&gt;.
Le marché est conséquent et la lutte sera féroce avec d’autres acteurs qui n’ont
pas l’intention de se faire damer le pion.&lt;/p&gt;
&lt;p&gt;Il n’est pas impossible que Google attaque ce marché par le biais
d’&lt;abbr lang=&quot;en&quot; title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; : en entrant
par la porte de la performance Web, cette alternative à
&lt;abbr lang=&quot;en&quot; title=&quot;HyperText Markup Language, le fondement sémantique du Web&quot;&gt;HTML&lt;/abbr&gt;
est une façon détournée de prendre le contrôle du Web et de ses processus de
développement économique (s’assurant au passage de meilleures capacités
d’indexation, à des coûts plus faibles, ce qui ne fait pas de mal quand la
donnée est la matière première de son business et que la bande passante est un
de ses plus gros centre de coût). Le paiement est d’ailleurs en bonne position
dans la
&lt;a href=&quot;https://www.ampproject.org/roadmap/&quot; title=&quot;Feuille de route du projet AMP&quot;&gt;feuille de route&lt;/a&gt;.
&lt;/abbr&gt;&lt;/p&gt;
&lt;p&gt;Autant d’indices concordant laissant à penser que les
&lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web Apps&quot;&gt;PWA&lt;/abbr&gt; s’intégreront
progressivement à l’offre applicative de Google Play.&lt;/p&gt;
&lt;h2&gt;TL;DR : Google est sur les rails, et il va vite&lt;/h2&gt;
&lt;p&gt;WeChat révolutionne le Web et le mobile en Chine mais la transposition de son
modèle en Occident n’est pas triviale. Beaucoup s’y sont essayé (à commencer par
Facebook) sans y parvenir. Il y a fort à parier que la pression chinoise amorce
une nouvelle évolution logicielle du Web, par le biais des navigateurs, des
&lt;abbr lang=&quot;en&quot; title=&quot;Progressive Web Apps&quot;&gt;PWA&lt;/abbr&gt;, des moteurs de
recherche et de la conciergerie de services géo-localisée, quatre domaines dans
lesquels Google (Alphabet) excelle aujourd’hui.&lt;/p&gt;
&lt;p&gt;Cette nouvelle révolution ne pourra pas se produire sans de vraies avancées
concernant la standardisation des modalités de paiement, un sujet sur lequel le
&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; travaille activement.&lt;/p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol&gt;
&lt;li id=&quot;fn1&quot;&gt;
&lt;p&gt;Dont nous parlions dans notre article
“&lt;a href=&quot;https://blog.clever-age.com/fr/2014/07/28/s-implanter-en-chine-etat-des-lieux/&quot;&gt;S’implanter en Chine : état des lieux&lt;/a&gt;”. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot;&gt;
&lt;p&gt;Nous en parlions plus en détails dans notre article
“&lt;a href=&quot;https://blog.clever-age.com/fr/2017/04/04/reglement-general-sur-la-protection-des-donnees-personnel-petit-guide-pour-entreprises_rgpd/&quot;&gt;Réglement Général sur la Protection des Données Personnelles : petit guide pour les entreprises&lt;/a&gt;”. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot;&gt;
&lt;p&gt;Lire à ce sujet :
“&lt;a href=&quot;https://blog.clever-age.com/fr/2016/02/08/amp-project-booste-le-chargement-des-pages-web/&quot;&gt;AMP Project booste le chargement des pages web&lt;/a&gt;” &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Tue, 20 Jun 2017 00:00:00 +0200</pubDate>
      <link>https://blog.clever-age.com/fr/2017/06/20/ou-est-le-wechat-occidental/</link>
      <guid isPermaLink="true">https://blog.clever-age.com/fr/2017/06/20/ou-est-le-wechat-occidental/</guid>
      
      <category>User eXperience</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>À l'aventure</title>
      
      <description>
          &lt;p&gt;J’ai tourné et retourné dix fois la manière dont j’allais écrire ça, mais je
n’arrive pas à trouver “la” bonne manière. Tourner une page de sa vie n’est
jamais facile…&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2&gt;Des fourmis dans les pieds&lt;/h2&gt;
&lt;p&gt;Ça faisait longtemps que nous avions envie de bouger. Début 2015, nous avions
pensé à l’Australie, où ma belle-sœur et
&lt;a href=&quot;http://wearemoving.net/&quot;&gt;d’anciens collègues&lt;/a&gt; partaient vivre. Le Canada nous
bottait bien aussi. Nous cherchions un endroit où parler anglais, parce que nous
le parlons tous deux assez bien (enfin, pour des français) et que nous avions
besoin de voir autre chose.&lt;/p&gt;
&lt;p&gt;Petit à petit, nous avons fait le deuil de cette aventure. Mon fils aîné a eu
besoin d’un accompagnement plus poussé au niveau orthophonique comme au niveau
psychomoteur : ajouter un déracinement aurait probablement été trop difficile
pour lui et pour nous. Nous avons oublié nos projets et nous sommes investis
encore plus dans nos emplois respectifs (oui, nous sommes tous les deux comme
ça).&lt;/p&gt;
&lt;p&gt;Fin août 2016, j’ai su que Clever Age rachetait &lt;a href=&quot;http://www.x2i.fr/&quot;&gt;X2i&lt;/a&gt;, une
entreprise toulousaine. J’en ai parlé à ma femme et nous nous sommes dit que
c’était peut-être une opportunité à tenter : l’occasion de se déplacer sans
aller trop loin, de trouver facilement l’accompagnement nécessaire pour notre
grand garçon, sans que nous soyons obligés de quitter tous les deux nos emplois.&lt;/p&gt;
&lt;p&gt;L’idée faisait son chemin depuis quelques semaines quand elle décida d’en parler
à son employeur. Elle voulait être honnête, lui dire qu’elle avait besoin d’un
nouveau souffle professionnel. Par un jeu de circonstances, ce jour-là, elle est
revenue du travail en m’expliquant qu’elle avait, à son tour, entendu parler
d’une opportunité interne. Du genre qu’on ne laisse pas filer. Quelque chose de
difficile, d’ambitieux, quelque chose pour lequel il faudrait que nous nous
investissions ensemble, acceptant de faire des concessions. Quelque chose
d’important pour elle. Quelque chose… à quinze minutes au nord de Périgueux.&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;600&quot; height=&quot;450&quot; src=&quot;https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d89875.86587460003!2d0.616802677960981!3d45.255460096260165!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47ff7381360949e9%3A0x406651748180c80!2zMjQ0NjAgQ2jDonRlYXUtbCfDiXbDqnF1ZQ!5e0!3m2!1sfr!2sfr!4v1496178486173&quot; title=&quot;Carte de Champcevinel&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2&gt;Angoisses et doutes&lt;/h2&gt;
&lt;p&gt;J’ai toujours été intéressé par ma carrière. J’ai fait ce qu’il fallait pour
avoir de grandes entreprises sur mon CV, pour travailler dans les contextes les
plus délicats et montrer ma capacité d’implication. Si nous saisissions cette
opportunité, il fallait tirer un trait, au moins temporaire, sur tout ça. Son
travail risquerait de lui prendre beaucoup de temps, y compris parfois le soir
et le week-end. De mon côté, il était donc nécessaire que mes horaires soient
plus réguliers, que je limite mes déplacements professionnels, que je quitte mon
équipe bordelaise, que j’arrête de donner des cours à l’ECV…&lt;/p&gt;
&lt;p&gt;Il a fallu quelques mois pour que les enjeux relatifs à son potentiel nouveau
poste se précisent. J’étais à la fois très excité à l’idée de passer un peu plus
de temps avec mes garçons mais aussi très angoissé, au point de m’en réveiller
parfois la nuit. J’avais peur de ce qui se passerait si je perdais le sentiment
d’accomplissement que me procure mon emploi, la manière dont ma communauté me
regarderait si je n’étais plus “Boris, de Clever Age”. Et être le parent sur
lequel repose en grande partie la logistique familiale est très difficile. C’est
peut-être le truc le plus difficile au monde… tout en étant le moins gratifiant.&lt;/p&gt;
&lt;p&gt;J’étais emballé et très fier de ma femme mais j’avais peur.&lt;/p&gt;
&lt;h2&gt;L’égoïsme de l’homme&lt;/h2&gt;
&lt;p&gt;Début mars 2017, Sébastien Dugué, le responsable de l’agence Clever Age de
Bordeaux, est venu me parler de mon très prochain entretien annuel. Il m’a
laissé entrevoir une nouvelle opportunité de faire encore davantage de conseil —
une des missions dans lesquelles je me réalise le plus aujourd’hui (en liaison
avec Olivier Martinerie) à Paris. Un tiraillement de plus dans une décision qui
n’était déjà pas facile !&lt;/p&gt;
&lt;p&gt;Ce soir-là, je me suis levé vers 1h et ne me suis pas recouché avant 5h. Je me
rappelais les deux grossesses de ma femme et des doutes que j’avais lu dans ses
yeux : serait-elle la même quand elle reviendrait au travail ? Serait-t-elle
aussi “capable” ? Lors de la deuxième grossesse, elle était au chômage.
S’ajoutait donc aussi un questionnement personnel sur son projet professionnel
et l’angoisse de tirer notre foyer vers le bas en ne ramenant pas d’argent alors
que nous avions bientôt une bouche de plus à nourrir.&lt;/p&gt;
&lt;p&gt;Je me suis rappelé de nos conversations de l’époque, sa propre angoisse. J’ai
soudain réalisé tout le ridicule de mon dilemme : ce que je ne voulais pas
vivre, qui me faisait peur au point d’être parfois inacceptable, ma femme
l’avait déjà vécu deux fois, avec courage, sans que cela n’handicape son
potentiel professionnel.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2016-12-26/kintsugi.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2016-12-26/kintsugi.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2016-12-26/kintsugi.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2016-12-26/kintsugi.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1196/https://boris.schapira.dev/assets/images/2016-12-26/kintsugi.jpg 1196w&quot; sizes=&quot;80vw&quot;  alt=&quot;Un bol en céramique parsemé de jointures d&amp;#39;or qui laissent
paraitre qu&amp;#39;il a été au préalable brisé&quot; loading=&quot;lazy&quot; width=&quot;1196&quot; height=&quot;788&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;Un exemple de &lt;span lang=&amp;quot;ja&amp;quot;&gt;kintsugi&lt;/span&gt;. Au lieu
de cacher les cicatrices d’un objet brisé ou fragilisé, le
&lt;span lang=&amp;quot;ja&amp;quot;&gt;kintsugi&lt;/span&gt; les valorise. Au lieu de n’avoir qu’une existence
dans l’instant, l’objet s’enrichit d’une histoire qui raconte ses faiblesses et
le rend unique.&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Trois jours plus tard, décidé, je suis allé voir Sébastien pour lui remettre une
lettre.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Objet : Démission&lt;/p&gt;
&lt;p&gt;Cher Sébastien,&lt;/p&gt;
&lt;p&gt;Je te présente officiellement, par ce courrier, ma démission du poste de
CONSULTANT que j’occupe chez Clever Age depuis le 15 janvier 2010.&lt;/p&gt;
&lt;p&gt;J’ai bien noté que les termes de notre convention collective prévoient un
préavis d’une durée de trois mois. Cependant, j’aimerais prolonger ce délai
jusqu’au 31 juillet 2017. J’espère que cela facilitera la transition et
offrira suffisamment de temps pour trouver des remplaçants sur l’ensemble des
missions que j’assure aujourd’hui pour l’entreprise.&lt;/p&gt;
&lt;p&gt;Je profite de cette lettre pour te renouveler, ainsi qu’à Clever Age, mes
remerciements pour les opportunités qui m’ont été offertes pendant toutes ces
années à Bordeaux et ailleurs en Europe, le cadre de travail de l’agence
bordelaise et la confiance que tu m’as témoigné et me témoigne encore dans
l’accomplissement de mes missions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;J’ai ensuite appelé Olivier, pour le remercier également de l’opportunité que je
venais de refuser. Enfin, j’ai laissé un message sur le répondeur de Frédéric
Bon, le Président de Clever Age. Ce fut la demi-heure ma plus longue depuis la
naissance de mon fils aîné et probablement un des moments de ma vie où j’ai dû
faire preuve du plus de détermination. Plusieurs mois plus tard, j’ai encore une
grande émotion en l’écrivant.&lt;/p&gt;
&lt;h2&gt;Et la suite ?&lt;/h2&gt;
&lt;p&gt;Depuis mars, je continue bien sûr à travailler pour Clever Age dans le cadre de
mes missions mais je prends aussi du temps, pour préparer mon départ et veiller
à ce qu’un certain nombre de choses que j’y faisais se déroulent, comme elles
doivent, sans moi. On ne peut pas passer sept ans à expliquer à ses clients que
la réversibilité est une valeur capitale et partir ensuite comme un voleur. J’ai
démissionné de mon rôle de Délégué du Personnel, j’ai passé les rênes du blog de
veille à une de mes collaboratrices les plus rigoureuses et, petit à petit, je
transmets la gouvernance de mes projets à d’autres, en occupant des tâches à
moindre responsabilité.&lt;/p&gt;
&lt;p&gt;Je n’ai pas encore cherché d’emploi sur Périgueux, mais cela ne m’a pas empêché
d’être curieux sur les entreprises implantées là-bas et, plus globalement, en
Dordogne. J’ai également suivi deux ateliers au Node sur la fixation des prix et
le développement d’une activité d’entrepreneur “au cas où”. Autant profiter de
ce que Bordeaux peut offrir de meilleur tant que j’y suis encore.&lt;/p&gt;
&lt;p&gt;L’isolation géographique ne m’inquiète pas. J’ai, depuis longtemps, pris
conscience que mon identité était indissociable du Réseau et que je serais un
peu chez moi partout, tant que j’aurais une connexion. Que les gens soient
physiquement proches de moi ne renforce pas mes relations avec eux et
&lt;a href=&quot;/2014/04/relations-virtuelles/&quot;&gt;mes amitiés les plus sincères sont virtuelles&lt;/a&gt;.&lt;/p&gt;
&lt;figure &gt;
&lt;img src=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg&quot; srcset=&quot;https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_320/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg 320w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_640/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg 640w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_960/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg 960w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1280/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg 1280w,
https://res.cloudinary.com/borisschapira/image/fetch/c_limit,f_auto,q_auto,w_1600/https://boris.schapira.dev/assets/images/2017-05-31/forest.jpg 1600w&quot; sizes=&quot;80vw&quot;  alt=&quot;Une forêt&quot; loading=&quot;lazy&quot; width=&quot;2048&quot; height=&quot;1189&quot; /&gt;
&lt;figcaption&gt;&lt;p&gt;par Nejc
Košir
(&amp;lt;a href=&amp;quot;&lt;a href=&quot;https://creativecommons.org/publicdomain/zero/1.0/deed.fr&quot;&gt;https://creativecommons.org/publicdomain/zero/1.0/deed.fr&lt;/a&gt;&amp;quot; title=&amp;quot;Description de la licence Creative Commons 0&amp;quot;&amp;gt;licence
CC0&lt;/a&gt;)&lt;/p&gt;
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;Sept ans, c’est long. Il restera sûrement toujours un peu de Clever Age en moi,
cette entreprise dans laquelle je me suis tant investi et qui me l’a bien rendu.
Mes collègues bordelais me manqueront, mais aussi les nantais, les lyonnais, les
parisiens, les montpelliérains de Clever Institut, les visites en Suisse, les
conf-call avec Hong-Kong ou Singapour. Hasard du calendrier, je quitte Clever
tandis que par le biais
&lt;a href=&quot;https://www.clever-age.com/fr/news/clevertoday-rejoint-le-groupe-cleverage/&quot;&gt;d’un autre rachat&lt;/a&gt;,
un ami d’un autre temps rejoint le navire depuis le Québec. Puisque je vous dis
que le monde virtuel est tout petit !&lt;/p&gt;
&lt;p&gt;Je me sens comme celui qui attaque le dernier chapitre d’un livre qu’il a
beaucoup aimé et dans lequel il a corné les pages les plus mémorables pour
pouvoir s’y plonger, par nostalgie, un autre jour. J’ai plusieurs pistes pour de
futures lectures, mais je compte bien profiter de celle-ci jusqu’à la dernière
ligne.&lt;/p&gt;
&lt;div class=&quot;videoWrapper&quot;&gt;
    &lt;iframe loading=&quot;lazy&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/rnAvdZJ-gRU&quot; title=&quot;MT 2012&quot; frameborder=&quot;0&quot; allow=&quot;encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 31 May 2017 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2017/05/a-l-aventure/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2017/05/a-l-aventure/</guid>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Le rendez-vous</title>
      
      <description>
          &lt;p&gt;&lt;a href=&quot;/2017/04/de-vrais-gens-derriere/&quot;&gt;Le souvenir du mois dernier&lt;/a&gt; en a appelé un
autre, tout aussi mémorable…&lt;/p&gt;
&lt;!-- more --&gt;
&lt;hr /&gt;
&lt;p&gt;Aujourd’hui, c’est le grand jour !&lt;/p&gt;
&lt;p&gt;J’accompagne une équipe interne d’une Grosse-Organisation pour la présentation
officielle d’un projet auprès du Grand-Patron. L’interface est ultra-léchée,
avec une vraie démarche de navigation et d’organisation des données et un
travail poussé sur l’univers graphique. La moitié de la boite a participé à
l’éloboration de l’UX et de l’UI.&lt;/p&gt;
&lt;p&gt;Le moment est crucial : le site n’est destiné qu’à un usage interne, pour les
hauts cadres de l’entreprise et niveau cadre, on ne peut pas faire plus haut que
lui. Son avis sur le projet est crucial, pour ne pas dire que la petite dizaine
de gens présents avec moi appelle ce projet “Le projet Grand-Patron”.&lt;/p&gt;
&lt;p&gt;Après plusieurs escaliers et de nombreux couloirs, nous arrivons dans
l’antichambre de son bureau. Une table basse, quelques larges fauteuils, des
magazines qui vantent tous l’organisation en question. J’ai du mal à croire
qu’il y a un salon expressement dédié à attendre avant d’être reçu dans cet
unique bureau. Je suis un peu intimidé.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/waiting.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/waiting.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/waiting.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Lenny, du dessin annimé Les Simpsons, est concentré.&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Je reste concentré, en attendant que la porte s’ouvre.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Tandis que nous attendons, deux travailleurs sortent des bureaux situés dans le
couloir adjacent et se dirigent vers la photocopieuse. Ils sont jovials, se
tancent. Ils ne nous ont pas vu, mais nous les regardons, faute d’avoir mieux à
faire. Leur discussion est parsemée de rires, puis tourne véritablement au jeu.
Le premier se retrouve à poursuivre le second dans le couloir mais le perd de
vue quand il se cache derrière une autre photocopieuse. Depuis l’antichambre,
j’observe avec un œil perplexe.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/dafuq.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/dafuq.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/dafuq.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Ron Winsley se demande se qui se passe.&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Comme dirait Ron : quel est le fuck ?&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Nous attendrons plus de 30 minutes avant que la porte du bureau ne s’ouvre et
que le Grand-Patron aparaisse, le téléphone portable vissé à l’oreille. Il nous
regarde depuis l’encadrure de la porte sans avoir l’air gêné de son retard. Il
congédie son interlocutrice, puis s’adresse à nous pour nous expliquer qu’il
faut qu’on attende encore un peu parce qu’il est absolument débordé et qu’il n’a
pas eu le temps de résoudre un problème urgent.&lt;/p&gt;
&lt;p&gt;Aussitôt dit, aussitôt fait, il téléphone à sa femme devant nous et engage une
discussion très mouvementée sur l’importance qu’elle aille faire les courses au
plus vite, car sinon ce sera à lui de les faire le soir-même. Nous attendons
toujours. Ils enchainent sur l’état de santé d’une tante, puis sur des
récipissés fiscaux à déposer quelque part.&lt;/p&gt;
&lt;p&gt;L’appel terminé, nous nous lançons des regards.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/excited.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/excited.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/excited.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Un jeune garçon, visiblement content d'être filmé par la caméra du stade où il se trouve pour assister à un match, entâme une danse très… particulière.&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Ça va être notre tour !&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Mais non.&lt;/p&gt;
&lt;p&gt;Grand-Patron part à la recherche de son adjoint en nous disant de bien vouloir
patienter.&lt;/p&gt;
&lt;p&gt;Il revient accompagné. Nous reconnaissons la personne qui s’était cachée
derrière la photocopieuse. Il a encore les joues toutes roses de la bonne
tranche de rire de trente minutes plus tôt. Visiblement, cette fois, sa cachette
était meilleure car il a fallu dix longues minutes à Grand-Patron pour le
retrouver, dans un couloir de dix mètres.&lt;/p&gt;
&lt;p&gt;On nous fait signe d’entrer dans le bureau. Je tends la main vers nos hôtes pour
échanger une poignée de mains. Grand-Patron, la regarde fixement en gardant les
bras le long du corps. Une seconde flottement lui suffit à se dire qu’il
s’ennuie et bien que mon bras soit toujours tendu dans sa direction, il se met
en marche et entre dans le bureau en me frôlant. L’air qu’il déplace en avançant
m’assène une gifle de mépris. Super premier contact.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/blow.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/blow.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/blow.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Des visages de jeunes femmes capturés en slow motion, tandis qu'un souffle très fort est envoyé de face&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;À ce niveau de vent, les pupilles se dilattent.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;L’adjoint s’empresse de prendre sa place, saisit ma main et la sert
vigoureusement en se présentant longuement, prenant soin d’insister sur la
longue collaboration entre nos organisations et &lt;strong&gt;son&lt;/strong&gt; rôle &lt;strong&gt;central&lt;/strong&gt; ayant
vocation à devenir &lt;strong&gt;primordial&lt;/strong&gt; dans les mois ou années qui viennent. “Arg,
encore un Iznogoud”, me dis-je en décalant mes pieds pour éviter que ses canines
n’abîment ma chaussure.&lt;/p&gt;
&lt;p&gt;Le bureau est gigantesque et richement décoré. Je n’ai jamais vu un bureau aussi
grand pour une seule personne : j’ai vécu avec ma femme dans des appartements
plus petits. Sur les commodes et les tables, des piles de papiers bien rangés
s’alignent dans un agencement trop ordonné pour que quiconque soit allé un jour
fouiller dedans. Les toiles aux murs et les bois nobles utilisés pour le
mobilier sont savament éclairées par les imposantes surfaces vitrées qui
entourent la pièce. Ce n’est pas un bureau, c’est un espace de richesse au
milieu du ciel.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/waterfall.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/waterfall.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/waterfall.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Une cascade au milieu d'un paysage montagneux ensoleillé&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Il ne manque qu’une cascade, le long d’un mur, pour que j’ai envie de passer mes prochaines vacances dans ce bureau.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Nous nous installons autour d’une table de réunion, faisons un tour de table et
démarrons la présentation. Un projecteur est disponible, mais on m’a expliqué
avant qu’il n’était pas pertinent de l’utiliser : des captures d’écran ont été
imprimées sur cartons plume pour “mieux” présenter l’interface. On n’y perçoit
pas tout le travail ayant été fait sur l’ergonomie de navigation mais, au moins,
ça rend bien. J’aurais préféré valider les interactions en amont avec un
prototype dynamique mais l’entourage de Grand-Patron m’avait refusé cette
opportunité.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;C’est quelqu’un de pressé. Il n’a pas le temps de “jouer” avec des produits
qui ne sont pas finis. Ça ferait trop “gadget”.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nous présentons donc rapidement les gabarits Front Office et les modalités de
contribution tandis que Grand-Patron regarde des messages sur son téléphone.
Impossible de savoir s’il nous écoute. L’adjoint, lui, boit nos paroles mais au
vu des questions qu’il soulève, je comprends vite qu’il n’a pas été briefé et
découvre complètement le projet.&lt;/p&gt;
&lt;p&gt;Soudain, Grand-Patron lève la tête :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Les données, elles viennent d’où ?&lt;br /&gt;
— De ce Back Office qui sera mis à disposition pour les saisir.&lt;br /&gt;
— Non mais merci, hein. Mais chez nous, elles viennent d’où ?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Je suis pris de court par la question. Je regarde autour de moi et établis un
contact visuel avec la personne qui, jusqu’à présent, me fournissait des données
pour nos tests. Le format des données fournies était très standardisé. Pour moi,
il était évident qu’il s’agissait d’un livrable issu d’un processus interne.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Pour l’instant, on est partis des chiffres de la direction XXXX, représentée
par Mr YYYYYY ici présent.&lt;br /&gt;
— Les chiffres de la direction XXXX ? Vous ne parlez quand même pas des
saloperies qu’on balance dans nos communiqués internes ?&lt;br /&gt;
— Et bien, euh… si.&lt;br /&gt;
— Ah non mais ces chiffres-là, ils sont faux, tout le monde le sait. On les
signe, on les annonce en interne, mais ils sont faux. On le sait, les
concurrents qui nous observent le savent, tout le monde le sait !&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/surprised.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/surprised.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/surprised.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Lindsay Lohann est surprise.&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Je suis sur le cul.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Malaise chez les collaborateurs. Personne ne semble vouloir répondre. Étant le
seul à ne pas être directement concerné, je sors l’équipe de son embarras en
embrayant rapidement sur la capacité d’adaptation du projet aux différents
périphériques de consultation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Ah donc je peux y accéder sur mon téléphone ? Parce que jusqu’ici, ce
n’était pas possible.&lt;br /&gt;
— Assurément, nous avons développé une interface compatible avec les
smartphones récents, mais aussi les tablettes. En réalité, l’interface
s’adapte à la largeur disponible…&lt;br /&gt;
— Oui, bon, tout ça c’est très bien… mais est-ce que je vais pouvoir le voir
sur mon téléphone ? Oui, ou non ?&lt;br /&gt;
— Oui, je pense pouvoir dire que oui. En réalité, nous avions pris les devant
en demandant quel était votre téléphone à vos collaborateurs et ils nous ont
donné la version précise de votre iPhone. Tous nos tests ont été faits sur ce
modèle, spécifiquement.&lt;br /&gt;
— Ah non mais je ne m’en sers pas de l’iPhone. Je me sers de celui-là.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Il sort de la poche de sa veste un Nokia sorti entre 2004 et 2006, écran LCD,
clavier physique, 2G et pas de navigateur ou de système de gestion
d’applications.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Il ne capte pas très bien mais il tient longtemps sans être rechargé !&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/panic.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/panic.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/panic.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Sheldon, de The Big Bang Theory, panique et souffle dans un sac en papier&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Je suis en totale panique.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;L’ensemble du projet tombe à l’eau. Je regarde autour de moi, espérant que
quelqu’un me sauvera à mon tour et détournera la conversation vers un autre
sujet. J’oublie qu’ils sont tous bien plus terrifiés que moi. Personne ne dit
rien. Un silence pesant s’installe pendant une minute qui me semble durer une
éternité.&lt;/p&gt;
&lt;p&gt;Grand-Patron comprend, s’emporte sur le temps qu’on lui fait perdre et nous
demande de sortir.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/getout.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/getout.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/getout.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Cary Grant demander à ce qu'on sorte&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Son ton autoritaire nous fait déguerpir rapidement.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Alors que je m’apprêtais à fermer la marche, cependant, il m’attrape la manche
et me parle de manière très calme :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Vous… quand vous vous êtes présentés, vous avez bien parlé dans vos
références de l’entreprise ZZZZZZ ?&lt;br /&gt;
— Oui, c’est un de mes clients…&lt;br /&gt;
— Et vous connaissez le Directeur ?&lt;br /&gt;
— Oui, nous avons travaillé ensemble sur…&lt;br /&gt;
— Très bien, dites-lui qu’il est le bienvenu dans mon bureau quand il le
souhaite. N’hésitez pas à revenir avec lui, nous demanderons à Corinne de
réserver une bonne table.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Il dégaine son sourire le plus forcé tout en me poussant dans le dos pour mieux
refermer la porte derrière moi. Le temps que je comprenne ce qui se passe, c’est
déjà fini.&lt;/p&gt;
&lt;p&gt;Toute l’équipe semble anesthésiée, groggy. Après un silence lourd de honte et de
gêne, j’interroge les autres :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Les données, elles sont vraiment fausses ?&lt;br /&gt;
— Non, il exagère, elles sont “presque” vraies.&lt;br /&gt;
— Presque ?! Et l’iPhone, pourquoi vous m’avez dit qu’il avait un iPhone ?&lt;br /&gt;
— On savait qu’il ne s’en servait pas trop, mais on espérait que ça allait
changer. Attendez, on va demander à sa secrétaire…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Je les suis dans le couloir, jusqu’à un bureau recouvert du sol au plafond de
dossiers. Une femme semble bûcher sur une tâche impossible. Elle lève la tête et
se rend immédiatement disponible pour nous. Visiblement, elle a l’habitude
d’être interompue.&lt;/p&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/business.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/business.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/business.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Big Ang ne rigole pas avec le taf&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;Droit au but.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;— Corinne, il s’en sert, de son iPhone, Grand-Patron ?&lt;br /&gt;
— Quoi ?!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Elle me regarde. Je hoche la tête et exprime le “bonjour” et le “pardon de vous
déranger” que les autres ne semblent être décidés à lui offrir. L’autre
collaborateur enchaine aussitôt.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;— Oui, oui, bon… Il s’en sert, de son iPhone ?&lt;br /&gt;
— Il n’a pas d’iPhone. Il n’a jamais eu d’iPhone, il a un Galaxy S. Tu veux la
facture ?&lt;br /&gt;
— Non, on s’en fout de la facture… il s’en sert ou pas, de son Galaxy S ?&lt;br /&gt;
— Je crois bien qu’il m’a envoyé un SMS une fois. Ah, non, un MMS ! Je me
souviens, il était très fier de lui, il avait compris comment joindre une
photo. Vous savez, il n’est pas trop branché technologie, ordinateur, tout ça.
C’est tout juste s’il se sert de son PC. C’est moi qui lui lit ses emails à
voix haute.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure&gt;
  &lt;div class=&quot;videoWrapper gif&quot;&gt;&lt;video crossOrigin=&quot;anonymous&quot; muted controls loop playsinline preload=&quot;auto&quot; poster=&quot;/assets/images/2017-05-15/facepalm.jpg&quot;aria-describedBy=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/facepalm.webm&quot; type=&quot;video/webm&quot;&gt;
  &lt;source src=&quot;/assets/images/2017-05-15/facepalm.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/video&gt;&lt;/div&gt;&lt;em id=&quot;80b874742cf9858a6cd668d6a20edabc0dca2e6e&quot; class=&quot;sr-only&quot;&gt;GIF: Stehen Colbert a besoin de 4 mains pour se lamenter&lt;/em&gt;&lt;figcaption&gt;&lt;p&gt;FIN.&lt;/p&gt;
&lt;/figcaption&gt;&lt;/figure&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Mon, 15 May 2017 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2017/05/le-rendez-vous/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2017/05/le-rendez-vous/</guid>
      
      <category>anecdotes</category>
      
      <category>web</category>
      
    </item>
    
    <item>
      <title>Entretien d'embauche : évaluer les savoir-être</title>
      
      <description>
          &lt;p&gt;Lors de la réalisation d’un entretien d’embauche, il est souvent nécessaire
d’estimer les compétences techniques d’une candidate ou d’un candidat.
Cependant, l’évaluation technique est loin de valider à elle-seule la pertinence
du recrutement d’un·e futur·e collaborateur·trice. Il existe des personnes très
compétentes qui sont incapables de travailler avec des personnes novices et
d’autres qui sont, à l’inverse, de très bonnes facilitatrices et ont un rôle à
jouer dans une équipe sans détenir
&lt;a href=&quot;/2015/09/expert-ou-pas/&quot; title=&quot;Expert ou pas ?&quot;&gt;d’expertise&lt;/a&gt; particulière.&lt;/p&gt;
&lt;p&gt;Au fil des années, j’ai donc établi une grille d’évaluation personnelle qui me
permet de mieux cerner les candidat·e·s, en dehors de leurs simples compétences
techniques. Je m’en sers comme base d’analyse et la relis avant et après chaque
rendez-vous pour ensuite pouvoir écrire un compte-rendu d’entretien de qualité
aux personnes qui m’ont demandé de m’en occuper.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Avertissement&lt;/em&gt; : je ne suis pas responsable des ressources humaines, rien n’est
absolu ou gravé dans le marbre et j’ai déjà donné des avis favorables sur des
personnes qui ne rentraient absolument pas dans ces critères. Dans l’absolu, je
recommande toujours de faire l’entretien à deux ou d’inviter la candidate ou le
candidat pour un second entretien avec une autre personne sans lui transmettre
mon avis en amont pour éviter de l’influencer.&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2&gt;Quelques signes que le ou la candidate “joue le jeu”&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tenue correcte&lt;/li&gt;
&lt;li&gt;Posture&lt;/li&gt;
&lt;li&gt;Calme&lt;/li&gt;
&lt;li&gt;Qualité d’écoute&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un entretien, qu’on le fasse par Skype ou en face-à-face, est constitué d’un
ensemble de règles culturelles et consensuelles auxquelles un·e candidat·e doit
savoir se plier. J’ai totalement conscience qu’en soi, c’est stupide. Cependant,
c’est un signal fort quant à la capacité du ou de la candidate à s’adapter à
d’autres situations codifiées à l’avenir, situations qui sont encore nombreuses
dans le monde professionnel.&lt;/p&gt;
&lt;h2&gt;S’exprimer&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Expression claire (à l’oral ou par écrit)&lt;/li&gt;
&lt;li&gt;Vocabulaire adapté au contexte et précis&lt;/li&gt;
&lt;li&gt;Discours sincère, authentique&lt;/li&gt;
&lt;li&gt;Capacité de synthèse, concision&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Peu importe le poste occupé, tout le monde a besoin de savoir s’exprimer d’une
manière ou d’une autre, à l’écrit ou à l’oral. De nombreuses choses seront
perçues ou perdues dans l’échange en fonction de ces capacités. Il faut donc que
l’expression, qu’elle soit orale ou écrite, soit précise, concise et agréable.&lt;/p&gt;
&lt;h2&gt;Travailler en équipe&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Évite les jugements, exprime de la bienveillance&lt;/li&gt;
&lt;li&gt;Apprécie la vie en groupe, le dialogue&lt;/li&gt;
&lt;li&gt;Exprime un sens du “commun”, de l’intérêt général&lt;/li&gt;
&lt;li&gt;Ouvert à l’égalité, à la diversité&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un·e candidat·e ne connait pas, &lt;span lang=&quot;la&quot;&gt;a priori&lt;/span&gt;, l’organisation
du travail et les profils de ses futurs collaborateurs. Même s’il a le profil
d’un travailleur ou d’un travailleuse autonome (je reviendrai sur les profils
dans un autre article), il doit montrer qu’il est capable d’observer, de prendre
du recul, d’être patient avant de juger…&lt;/p&gt;
&lt;h2&gt;Curiosité, exhaustivité&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Se pose des questions sur le poste, le secteur, le marché…&lt;/li&gt;
&lt;li&gt;Cherche à s’informer sur les savoir-faire&lt;/li&gt;
&lt;li&gt;S’informe sur l’organisation du travail&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Les tâches confiées et l’équipe à qui elles sont confiées ne sont qu’une partie
du travail. L’organisation du travail, à la fois dans la méthode que dans les
réglementations internes, constitue une part importante de la vie de
l’entreprise. Je serais assez peu enclin à embaucher une personne qui ne serait
pas sensible à son environnement ou exprimerait, dès l’entretien, peu d’intérêt
pour le collectif.&lt;/p&gt;
&lt;h2&gt;Capacité à affirmer des positions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Développe des points de vue personnels&lt;/li&gt;
&lt;li&gt;Assume ses choix, se prononce clairement&lt;/li&gt;
&lt;li&gt;Illustre, argumente et remet en question&lt;/li&gt;
&lt;li&gt;Reconnait ses limites&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pour enrichir l’équipe un·e candidat·e doit aussi être capable d’émettre une
analyse non-stéréotypée et de l’assumer par des explications claires et
convaincantes. Je détermine souvent ce point en posant à la personne des
questions qui divisent la communauté. Le point de vue du candidat ou de la
candidate m’intéresse alors peu, c’est la qualité de l’argumentation que
j’analyse. Un aveu de méconnaissance du sujet est également une bonne chose, si
tant est que le candidat ou la candidate propose ensuite d’émettre des
hypothèses construites.&lt;/p&gt;
&lt;h2&gt;Capacité d’investissement&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Capacité à prendre des décisions et les assumer&lt;/li&gt;
&lt;li&gt;Maitrise de l’effort (ténacité, endurance, mais aussi remise en cause et
repos)&lt;/li&gt;
&lt;li&gt;Investissement dans un projet&lt;/li&gt;
&lt;li&gt;Prise de recul sur la valeur ajoutée des autres individus&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ces points nécessitent presque toujours de faire parler la personne de ses
projets précédents pour savoir si elle sait prendre du recul sur sa propre
pratique du métier et son rapport aux autres collaborateurs et collaboratrices.
Cela permet d’évaluer le dynamisme mais aussi la sagesse, l’ambition mais aussi
la capacité à participer à un projet dans ce qu’il constitue de patrimoine
commun.&lt;/p&gt;
&lt;h2&gt;Capacité d’innovation (?)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Capacité à identifier le cadre&lt;/li&gt;
&lt;li&gt;Capacité à proposer des alternatives&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;C’est encore un des points que j’ai le plus de mal à évaluer car j’ai souvent
moi-même l’impression de manquer de fantaisie. L’idée ici est d’estimer la
capacité du candidat ou de la candidate à sortir des sentiers battus et,
surtout, comment il ou elle le fait et provoque la réflexion chez les autres. Il
y a plusieurs façons d’y parvenir et il existe une grande littérature sur le
sujet, donc je ne vais pas m’attarder dessus ici.&lt;/p&gt;
&lt;h2&gt;Positionnement personnel par rapport au positionnement de l’entreprise&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;S’est renseigné sur l’entreprise, connait ses valeurs&lt;/li&gt;
&lt;li&gt;Explique clairement son intérêt propre&lt;/li&gt;
&lt;li&gt;Se projette dans l’avenir dans une construction commune&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cette dernière partie est souvent la plus délicate pour le candidat ou la
candidate car il ne connait jamais aussi bien l’entreprise qu’après la
présentation qu’on lui en fait en début d’entretien. Il ou elle doit donc
rapidement définir ce qui, dans les valeurs présentées, fait écho à son propre
jeu de valeurs et expliciter ce à quoi il adhère et, c’est nécessaire, ce qu’il
compte apporter.&lt;/p&gt;

          &lt;hr&gt;
          &lt;div style=&quot;font-style:italic&quot;&gt;
              &lt;p&gt;
                  Vous êtes abonné·e au flux des articles&amp;nbsp;:
              &lt;/p&gt;
              &lt;ul&gt;
                  &lt;li&gt;de la catégorie&amp;nbsp;: Web&lt;/li&gt;
                  &lt;li&gt;rédigés en français.&lt;/li&gt;
              &lt;/ul&gt;
              
          &lt;/div&gt;
          
      </description>
      <pubDate>Wed, 26 Apr 2017 00:00:00 +0200</pubDate>
      <link>https://boris.schapira.dev/2017/04/les-savoir-etre/</link>
      <guid isPermaLink="true">https://boris.schapira.dev/2017/04/les-savoir-etre/</guid>
      
      <category>web</category>
      
    </item>
    
  </channel>
</rss>
