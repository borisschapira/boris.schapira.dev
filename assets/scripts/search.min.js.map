{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/classnames/index.js","webpack:///./node_modules/preact/dist/preact.module.js","webpack:///./node_modules/prop-types/index.js","webpack:///./node_modules/algoliasearch-helper/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/find.js","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./node_modules/algoliasearch-helper/src/functions/merge.js","webpack:///./node_modules/algoliasearch-helper/src/functions/defaultsPure.js","webpack:///./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","webpack:///./node_modules/qs/lib/utils.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./node_modules/hogan.js/lib/hogan.js","webpack:///./node_modules/algoliasearch-helper/src/SearchParameters/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/omit.js","webpack:///./node_modules/algoliasearch-helper/src/SearchResults/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/orderBy.js","webpack:///./node_modules/algoliasearch-helper/src/functions/formatSort.js","webpack:///./node_modules/algoliasearch-helper/src/functions/inherits.js","webpack:///./node_modules/algoliasearch-helper/src/version.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./node_modules/algoliasearch-helper/src/algoliasearch.helper.js","webpack:///./node_modules/algoliasearch-helper/src/functions/intersection.js","webpack:///./node_modules/algoliasearch-helper/src/functions/valToNumber.js","webpack:///./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","webpack:///./node_modules/algoliasearch-helper/src/functions/compact.js","webpack:///./node_modules/algoliasearch-helper/src/functions/findIndex.js","webpack:///./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","webpack:///./node_modules/algoliasearch-helper/src/DerivedHelper/index.js","webpack:///./node_modules/algoliasearch-helper/src/requestBuilder.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/parse.js","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/hogan.js/lib/compiler.js","webpack:///./node_modules/hogan.js/lib/template.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/documentation.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/findIndex.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/uniq.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js","webpack:///./node_modules/instantsearch.js/es/widgets/index/index.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/escape.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js","webpack:///./node_modules/instantsearch.js/es/lib/escape-highlight.js","webpack:///./node_modules/instantsearch.js/es/lib/suit.js","webpack:///./node_modules/instantsearch.js/es/helpers/highlight.js","webpack:///./node_modules/instantsearch.js/es/helpers/snippet.js","webpack:///./node_modules/instantsearch.js/es/helpers/insights.js","webpack:///./node_modules/instantsearch.js/es/lib/createHelpers.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/defer.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/noop.js","webpack:///./node_modules/instantsearch.js/es/lib/stateMappings/simple.js","webpack:///./node_modules/instantsearch.js/es/lib/routers/history.js","webpack:///./node_modules/instantsearch.js/es/middleware/createRouter.js","webpack:///./node_modules/instantsearch.js/es/lib/InstantSearch.js","webpack:///./node_modules/instantsearch.js/es/lib/version.js","webpack:///./node_modules/instantsearch.js/es/index.js","webpack:///./node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isDomElement.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getObjectType.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/checkRendering.js","webpack:///./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isEqual.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/renderTemplate.js","webpack:///./node_modules/instantsearch.js/es/components/Template/Template.js","webpack:///./node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js","webpack:///./node_modules/instantsearch.js/es/widgets/search-box/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/widgets/search-box/search-box.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js","webpack:///./node_modules/instantsearch.js/es/components/RefinementList/RefinementListItem.js","webpack:///./node_modules/instantsearch.js/es/components/RefinementList/RefinementList.js","webpack:///./node_modules/instantsearch.js/es/connectors/refinement-list/connectRefinementList.js","webpack:///./node_modules/instantsearch.js/es/widgets/refinement-list/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/prepareTemplateProps.js","webpack:///./node_modules/instantsearch.js/es/widgets/refinement-list/refinement-list.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js","webpack:///./node_modules/instantsearch.js/es/connectors/hits/connectHits.js","webpack:///./node_modules/instantsearch.js/es/components/Hits/Hits.js","webpack:///./node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/lib/insights/listener.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/find.js","webpack:///./node_modules/instantsearch.js/es/lib/insights/client.js","webpack:///./node_modules/instantsearch.js/es/widgets/hits/hits.js","webpack:///./node_modules/instantsearch.js/es/components/Pagination/PaginationLink.js","webpack:///./node_modules/instantsearch.js/es/components/Pagination/Pagination.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/range.js","webpack:///./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js","webpack:///./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js","webpack:///./node_modules/instantsearch.js/es/widgets/pagination/pagination.js","webpack:///./_src/scripts/search.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","hasOwn","classNames","classes","arguments","length","arg","argType","push","Array","isArray","inner","apply","join","default","u","e","a","v","parentNode","removeChild","h","children","defaultProps","ref","type","props","__k","__","__b","__e","__d","__c","constructor","__v","vnode","this","context","w","indexOf","g","base","k","debounceRendering","_","sort","some","f","__P","A","__n","ownerSVGElement","T","b","y","x","appendChild","nextSibling","insertBefore","D","j","C","setProperty","test","N","style","cssText","replace","toLowerCase","slice","addEventListener","z","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","P","contextType","__E","render","E","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","__r","getChildContext","getSnapshotBeforeUpdate","$","diffed","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","unmount","componentWillUnmount","H","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","resolve","setTimeout","AlgoliaSearchHelper","SearchParameters","SearchResults","algoliasearchHelper","client","index","opts","version","array","comparator","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","Error","String","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","isObjectOrArrayOrFunction","toString","_merge","source","sourceVal","targetVal","sources","reduceRight","acc","forEach","obj","has","hexTable","toUpperCase","arrayToObject","options","plainObjects","assign","reduce","combine","compact","queue","prop","refs","item","val","compacted","compactQueue","decode","str","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","encode","defaultEncoder","string","escape","$0","parseInt","out","charCodeAt","charAt","isBuffer","isRegExp","merge","allowPrototypes","mergeTarget","targetItem","stringify","parse","formats","Hogan","Template","template","defaultsPure","intersection","find","valToNumber","omit","objectHasKeys","RefinementList","isEqualNumericRefinement","every","el","newParameters","params","_parseNumbers","facets","disjunctiveFacets","hierarchicalFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements","self","paramName","isKeyKnown","PARAMETERS","isValueDefined","partialState","numbers","parsedValue","parseFloat","insideBoundingBox","map","geoRect","attribute","operators","operator","parsedValues","vPrime","make","instance","facet","rootPath","currentRefinement","getHierarchicalRefinement","clearRefinements","toggleHierarchicalFacetRefinement","validate","currentState","parameters","tagFilters","numericFilters","patch","_clearNumericRefinements","clearRefinement","setQueryParameters","clearTags","setIndex","setQuery","newQuery","query","setPage","newPage","page","setFacets","setDisjunctiveFacets","setHitsPerPage","hitsPerPage","setTypoTolerance","typoTolerance","addNumericRefinement","isNumericRefined","mod","getConjunctiveRefinements","facetName","isConjunctiveFacet","getDisjunctiveRefinements","isDisjunctiveFacet","getExcludeRefinements","removeNumericRefinement","paramValue","op","getNumericRefinements","getNumericRefinement","hasChanged","newNumericRefinements","memo","operatorList","values","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","isHierarchicalFacet","addFacetRefinement","isRefined","addRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","tag","isTagRefined","modification","removeFacet","filter","removeDisjunctiveFacet","removeHierarchicalFacet","removeFacetRefinement","removeRefinement","removeExcludeRefinement","removeDisjunctiveFacetRefinement","removeTagRefinement","toggleRefinement","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","separator","_getHierarchicalFacetSeparator","getHierarchicalFacetByName","lastIndexOf","addHierarchicalFacetRefinement","path","isHierarchicalFacetRefined","removeHierarchicalFacetRefinement","toggleTagRefinement","isFacetRefined","isExcludeRefined","isDisjunctiveFacetRefined","refinements","isOperatorDefined","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","setQueryParameter","parameter","nextWithNumbers","previousPlainObject","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","resetPage","_getHierarchicalFacetSortBy","sortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","getHierarchicalFacetBreadcrumb","refinement","split","part","trim","JSON","excluded","sourceKeys","orderBy","findIndex","formatSort","generateHierarchicalTree","getIndices","indices","idx","assignFacetStats","dest","facetStats","stats","results","mainSubResponse","_rawResults","parsedQuery","hits","nbHits","nbPages","processingTimeMS","sum","result","aroundLatLng","automaticRadius","serverUsed","timeoutCounts","timeoutHits","exhaustiveFacetsCount","exhaustiveNbHits","userData","queryID","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustive","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","attributeIndex","dataFromMainRequest","refinementValue","refinedFacet","defaultData","root","excludes","facetValue","_state","recSort","sortFn","node","childNode","sortedChildren","getFacetStatsIfAvailable","facetList","getRefinement","attributeName","resultsFacets","getFacetByName","predicate","DEFAULT_SORT","getFacetValues","facetValues","isExcluded","extractNormalizedFacetValues","order","hierarchicalFacetValues","vanillaSortFn","getFacetStats","getRefinements","res","facetDeclaration","rootFacet","intermediateFacet","newFacet","numericValue","compareAscending","other","valIsDefined","valIsNull","othIsDefined","othIsNull","collection","iteratees","orders","criteria","iteratee","defaults","defaultInstructions","sortInstruction","matchingDefault","defaultInstruction","ctor","superCtor","writable","configurable","percentTwenties","util","Format","RFC1738","RFC3986","formatters","DerivedHelper","requestBuilder","inherits","addAlgoliaAgent","setClient","lastResults","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","isPageReset","getCurrentPage","search","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","_getHitsSearchParams","searchOnce","cb","tempState","queries","_getQueries","content","_originalResponse","catch","searchForFacetValues","maxFacetHits","userState","clientHasSFFV","initIndex","isDisjunctive","algoliaQuery","getSearchForFacetQuery","indexName","facetHits","q","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getPage","getTags","states","mainQueries","queriesCount","helper","derivedQueries","derivedHelper","derivedState","getModifiedState","derivedStateQueries","queryId","_dispatchAlgoliaResponse","_dispatchAlgoliaError","specificResults","splice","formattedResponse","containsRefinement","facetFilters","_hasDisjunctiveRefinements","disjunctiveRefinements","clearCache","newClient","getClient","derive","fn","detachDerivedHelper","pos","hasPendingRequests","arr1","arr2","lib","refinementList","valueAsString","facetRefinement","refinementType","newRefinementList","containsRefinements","refinementValueAsString","Boolean","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","rootExhaustive","facetResult","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","parent","level","subtree","picked","tuple","parentPath","onlyMatchingTree","facetCount","parts","format","mainHelper","main","detach","_getDisjunctiveFacetSearchParams","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","_getNumericFilters","additionalParams","_getTagFilters","hierarchicalRootLevel","attributesToRetrieve","attributesToHighlight","attributesToSnippet","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","stateForSearchForFacetValues","searchForFacetSearchParameters","facetQuery","utils","arrayPrefixGenerators","brackets","prefix","comma","repeat","pushToArray","valueOrArray","toISO","Date","toISOString","defaultFormat","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","encodeValuesOnly","formatter","serializeDate","date","skipNulls","strictNullHandling","generateArrayPrefix","objKeys","normalizeStringifyOptions","arrayFormat","joined","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseArrayValue","maybeMap","mapped","parseKeys","givenKey","valuesParsed","child","segment","exec","chain","leaf","cleanRoot","0","parseObject","normalizeParseOptions","tempObj","cleanStr","limit","Infinity","skipIndex","bracketEqualsPos","encodedVal","parseValues","newObj","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bool","func","number","symbol","any","arrayOf","element","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","rIsWhitespace","rQuot","rNewline","rCr","rSlash","rLineSep","rParagraphSep","cleanTripleStache","token","substr","substring","tagChange","text","tags","scan","delimiters","tagType","buf","tokens","seenTag","lineStart","otag","ctag","addBuf","filterLine","haveSeenTag","noNewLine","isAllWhitespace","match","lineIsWhitespace","next","indent","changeDelimiters","close","closeIndex","allowedInSuper","isOpener","isCloser","open","stringifyPartials","codeObj","partials","esc","items","stringifySubstitutions","subs","wrapMain","code","serialNo","chooseMethod","createPartial","sym","tripleStache","write","generate","tree","walk","asString","makeTemplate","makePartials","codegen","end","nodes","ctx","inPartial","last","nodelist","buildTree","kind","stack","customTags","tail","instructions","opener","sectionTags","cache","cacheKey","disableLambda","modelGet","compile","findInScope","scope","doModelGet","compiler","coerceToString","hChars","rAmp","rLt","rGt","rApos","ri","ep","partial","stackText","activeSub","stackSubs","stackPartials","PartialTemplate","Substitutions","subsText","createSpecializedPartial","rp","rs","section","inverted","start","pass","ms","returnFound","found","names","cx","mv","ls","oldTags","ct","fl","textSource","createDocumentationLink","_ref","_ref$connector","connector","createDocumentationMessageGenerator","_len","widgets","_key","links","widget","enumerableOnly","symbols","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","mergeWithRest","left","right","ruleContexts","rest","mergeFacets","mergeDisjunctiveFacets","nextFacets","mergeTagRefinements","mergeFacetRefinements","mergeFacetsExcludes","mergeDisjunctiveFacetsRefinements","mergeNumericRefinements","mergeHierarchicalFacetsRefinements","hierarchicalFacetsRefinementsMerged","hierarchicalFacetsMerged","tagRefinementsMerged","numericRefinementsMerged","disjunctiveFacetsRefinementsMerged","facetsExcludesMerged","facetRefinementsMerged","disjunctiveFacetsMerged","ruleContextsMerged","facetsMerged","getParent","getHelper","_toConsumableArray","_arrayWithoutHoles","iter","iterator","from","_iterableToArray","_nonIterableSpread","withUsage","isIndexWidget","$$type","getLocalWidgetsState","widgetStateOptions","uiState","getWidgetState","getLocalWidgetsSearchParameters","widgetSearchParametersOptions","initialSearchParameters","getWidgetSearchParameters","resolveScopedResultsFromIndex","widgetParent","resolveScopedResultsFromWidgets","scopedResults","indexId","getIndexId","getResults","getWidgets","_props$indexId","localWidgets","localUiState","localInstantSearchInstance","localParent","createURL","nextState","_createURL","searchParameters","getIndexName","addWidgets","_this","instantSearchInstance","templatesConfig","scheduleSearch","removeWidgets","dispose","_this2","onStateChange","mainIndex","setUiState","mergeSearchParameters","_ref2","resetPageFromWidgets","indexWidgets","widgetHelper","scheduleStalledRender","_ref3","scheduleRender","_ref4","onInternalStateChange","_ref5","_this3","searchMetadata","isSearchStalled","_isSearchStalled","previousUiState","innerIndex","_ref6","refreshUiState","htmlEscapes","regexUnescapedHtml","regexHasUnescapedHtml","RegExp","character","_typeof","isObjectLike","getTag","proto","TAG_PLACEHOLDER","highlightPreTag","highlightPostTag","TAG_REPLACEMENT","replaceTagsAndEscape","recursiveEscape","input","escapeHits","__escaped","hit","_highlightResult","_snippetResult","escapeFacets","highlighted","component","descendantName","modifierName","descendent","modifier","suit","_ref$highlightedTagNa","highlightedTagName","_ref$cssClasses","cssClasses","attributeValue","className","method","payload","serializedPayload","btoa","writeDataAttributes","hoganHelpers","numberLocale","formatNumber","toLocaleString","highlight","snippet","insights","_JSON$parse","objectIDs","objectID","nextMicroTask","callback","progress","cancelled","wait","cancel","getIndexStateWithoutConfigure","configure","simpleStateMapping","stateToRoute","routeToState","routeState","isNativeReflectConstruct","construct","sham","Proxy","_construct","Parent","Class","_setPrototypeOf","setPrototypeOf","__proto__","_classCallCheck","Constructor","_defineProperties","descriptor","defaultCreateURL","qsModule","protocol","hostname","_location$port","port","pathname","hash","queryString","portWithPrefix","defaultParseURL","setWindowTitle","title","window","BrowserHistory","windowTitle","_ref3$writeDelay","writeDelay","_ref3$createURL","_ref3$parseURL","parseURL","writeTimer","read","protoProps","staticProps","url","clearTimeout","history","pushState","_onPopState","_getPrototypeOf","_assertThisInitialized","ReferenceError","_EventEmitter","InstantSearch","_searchStalledTimer","nextUiState","setIndexHelperState","indexWidget","middleware","_options$indexName","_options$initialUiSta","initialUiState","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","started","helpers","compileOptions","_stalledSearchDelay","_initialUiState","_searchFunction","routerOptions","EXPERIMENTAL_use","_props$router","router","_props$stateMapping","stateMapping","route","subscribe","onUpdate","indexUiState","unsubscribe","subClass","superClass","_inherits","newMiddlewareList","newMiddleware","fakeClient","_mainHelperSearch","mainIndexHelper","searchFunctionHelper","_this4","getInsightsAnonymousUserToken","cookies","cookie","getCookie","HTMLElement","selectorOrHTMLElement","isSelectorString","domElement","querySelector","errorMessage","rendering","usage","connectSearchBox","renderFn","unmountFn","widgetParams","queryHook","clear","_clear","_cachedClear","setQueryAndSearch","_refine","refine","isPrimitive","isEqual","first","second","_i","_Object$keys","templates","templateKey","templateType","isTemplateFunction","transformedHelpers","helperKey","transformHelpersToHogan","spaces","_extends","_Component","nextProps","rootProps","RootTagName","rootTagName","useCustomCompileOptions","SearchBox","_getPrototypeOf2","focused","_this$props","searchAsYouType","onChange","_this$props2","onSubmit","preventDefault","stopPropagation","blur","_this$props3","onReset","focus","_this$props4","placeholder","autofocus","showSubmit","showReset","showLoadingIndicator","action","role","form","noValidate","inputRef","disabled","autoFocus","autoComplete","autoCorrect","autoCapitalize","spellCheck","maxLength","onInput","onBlur","onFocus","submit","hidden","reset","loadingIndicator","containerNode","button","altKey","ctrlKey","metaKey","shiftKey","handleClick","facetValueToRefine","templateProps","templateData","subItems","onClick","originalEvent","handleItemClick","isStateDifferent","areFacetValuesDifferent","_cx","hasChildren","_this$props$cssClasse","showMore","childList","isFromSearch","selectedItem","disabledItem","parentItem","tagName","currentTarget","href","searchBox","resetInput","firstValue","actualValue","cssClassList","showMoreButtonClassName","disabledShowMore","canToggleShowMore","showMoreButton","toggleShowMore","isShowingMore","shouldDisableSearchBox","searchIsAlwaysActive","hasExhaustiveItems","searchFacetValues","searchBoxRef","searchPlaceholder","searchable","refineFirstValue","_generateFacetItem","noResults","noRefinementRoot","connectRefinementList","_widgetParams$operato","_widgetParams$limit","_widgetParams$showMor","_widgetParams$showMor2","showMoreLimit","_widgetParams$sortBy","_widgetParams$escapeF","escapeFacetValues","_widgetParams$transfo","transformItems","triggerRefine","formatItems","label","_getLimit","lastResultsFromMainSearch","_render","helperSpecializedSearchFacetValues","isFirstSearch","searchForItems","canRefine","createSearchForFacetValues","normalizedFacetValues","cachedToggleShowMore","createToggleShowMore","renderOptions","getLimit","maxValuesPerFacetConfig","maxValuesPerFacet","currentLimit","withoutMaxValuesPerFacet","_ref7","withoutRefinements","withFacetConfiguration","currentMaxValuesPerFacet","nextMaxValuesPerFacet","Math","max","withMaxValuesPerFacet","showMoreText","searchableNoResults","searchableReset","searchableSubmit","searchableLoadingIndicator","defaultTemplates","allKeys","config","defaultTemplate","customTemplate","isCustomTemplate","prepareTemplates","searchBoxSuit","transformTemplates","allTemplates","renderState","searchablePlaceholder","searchableIsAlwaysActive","isFirstRendering","addAbsolutePosition","__position","addQueryID","__queryID","connectHits","_widgetParams$escapeH","escapeHTML","initialEscaped","emptyRoot","__hitIndex","empty","BaseComponent","insightsTarget","startElement","endElement","hasAttribute","parentElement","_readDataAttributes","getAttribute","atob","readDataAttributes","thisArg","inferPayload","selectedHits","selectedObjectIDs","queryIDs","positions","getPositions","withInsights","wrapRenderFn","isFirstRender","aa","withInstantSearchUsage","inferredPayload","HitsWithInsightsListener","ariaLabel","isDisabled","pageNumber","link","Pagination","_ref$additionalClassN","additionalClassName","_ref$isDisabled","_ref$isSelected","isSelected","isFirstPage","currentPage","pageLink","previousPageItem","isLastPage","nextPageItem","firstPageItem","lastPageItem","_pages","pages","pageItem","showFirst","firstPageLink","showPrevious","previousPageLink","showNext","nextPageLink","showLast","lastPageLink","_ref$start","_ref$step","step","limitStep","arrayLength","round","Paginator","total","padding","totalDisplayedPages","nbPagesDisplayed","paddingLeft","calculatePaddingLeft","min","connectPagination","totalPages","_widgetParams$padding","pager","getMaxPage","scrollToNode","scrollIntoView","instantsearch","getElementById","algoliasearch","container","_ref3$placeholder","_ref3$cssClasses","userCssClasses","_ref3$autofocus","_ref3$searchAsYouType","_ref3$showReset","_ref3$showSubmit","_ref3$showLoadingIndi","submitIcon","resetIcon","loadingIcon","specializedRenderer","makeWidget","poweredBy","_ref3$searchable","_ref3$searchablePlace","_ref3$searchableEscap","searchableEscapeFacetValues","_ref3$searchableIsAlw","_ref3$templates","userTemplates","checkbox","labelText","searchableRoot","searchableForm","searchableInput","searchableSubmitIcon","searchableResetIcon","searchableLoadingIcon","receivedHits","makeHits","_ref3$showFirst","_ref3$showLast","_ref3$showPrevious","_ref3$showNext","_ref3$scrollTo","scrollTo","userScrollTo","pagination","maxPages","showFirstLast"],"mappings":"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","file":"scripts/search.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function v(n){var l=n.parentNode;l&&l.removeChild(n)}function h(n,l,u){var i,t=arguments,o={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(o[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(o.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===o[i]&&(o[i]=n.defaultProps[i]);return p(n,o,l&&l.key,l&&l.ref,null)}function p(l,u,i,t,o){var r={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(r.__v=r),n.vnode&&n.vnode(r),r}function y(){return{}}function d(n){return n.children}function m(n,l){this.props=n,this.context=l}function w(n,l){if(null==l)return n.__?w(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?w(n):null}function g(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return g(n)}}function k(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!i++||o!==n.debounceRendering)&&((o=n.debounceRendering)||t)(_)}function _(){for(var n;i=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,o,r,f;n.__d&&(r=(o=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=a({},o)).__v=i,t=A(f,o,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==r?w(o):r),T(u,o),t!=r&&g(o)))})}function b(n,l,u,i,t,o,r,f,s){var a,h,p,y,d,m,g,k=u&&u.__k||c,_=k.length;if(f==e&&(f=null!=o?o[0]:_?w(u,0):null),a=0,l.__k=x(l.__k,function(u){if(null!=u){if(u.__=l,u.__b=l.__b+1,null===(p=k[a])||p&&u.key==p.key&&u.type===p.type)k[a]=void 0;else for(h=0;h<_;h++){if((p=k[h])&&u.key==p.key&&u.type===p.type){k[h]=void 0;break}p=null}if(y=A(n,u,p=p||e,i,t,o,r,f,s),(h=u.ref)&&p.ref!=h&&(g||(g=[]),p.ref&&g.push(p.ref,null,u),g.push(h,u.__c||y,u)),null!=y){var c;if(null==m&&(m=y),void 0!==u.__d)c=u.__d,u.__d=void 0;else if(o==p||y!=f||null==y.parentNode){n:if(null==f||f.parentNode!==n)n.appendChild(y),c=null;else{for(d=f,h=0;(d=d.nextSibling)&&h<_;h+=2)if(d==y)break n;n.insertBefore(y,f),c=f}\"option\"==l.type&&(n.value=\"\")}f=void 0!==c?c:y.nextSibling,\"function\"==typeof l.type&&(l.__d=f)}else f&&p.__e==f&&f.parentNode!=n&&(f=w(p))}return a++,u}),l.__e=m,null!=o&&\"function\"!=typeof l.type)for(a=o.length;a--;)null!=o[a]&&v(o[a]);for(a=_;a--;)null!=k[a]&&D(k[a],k[a]);if(g)for(a=0;a<g.length;a++)j(g[a],g[++a],g[++a])}function x(n,l,u){if(null==u&&(u=[]),null==n||\"boolean\"==typeof n)l&&u.push(l(null));else if(Array.isArray(n))for(var i=0;i<n.length;i++)x(n[i],l,u);else u.push(l?l(\"string\"==typeof n||\"number\"==typeof n?p(null,n,null,null,n):null!=n.__e||null!=n.__c?p(n.type,n.props,n.key,null,n.__v):n):n);return u}function P(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||N(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||N(n,o,l[o],u[o],i)}function C(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===s.test(l)?u+\"px\":null==u?\"\":u}function N(n,l,u,i,t){var o,r,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"style\"===l)if(o=n.style,\"string\"==typeof u)o.cssText=u;else{if(\"string\"==typeof i&&(o.cssText=\"\",i=null),i)for(e in i)u&&e in u||C(o,e,\"\");if(u)for(c in u)i&&u[c]===i[c]||C(o,c,u[c])}else\"o\"===l[0]&&\"n\"===l[1]?(r=l!==(l=l.replace(/Capture$/,\"\")),f=l.toLowerCase(),l=(f in n?f:l).slice(2),u?(i||n.addEventListener(l,z,r),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,z,r)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function z(l){this.l[l.type](n.event?n.event(l):l)}function A(l,u,i,t,o,r,f,e,c){var s,v,h,p,y,w,g,k,_,x,P=u.type;if(void 0!==u.constructor)return null;(s=n.__b)&&s(u);try{n:if(\"function\"==typeof P){if(k=u.props,_=(s=P.contextType)&&t[s.__c],x=s?_?_.props.value:s.__:t,i.__c?g=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(k,x):(u.__c=v=new m(k,x),v.constructor=P,v.render=E),_&&_.sub(v),v.props=k,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=a({},v.__s)),a(v.__s,P.getDerivedStateFromProps(k,v.__s))),p=v.props,y=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&k!==p&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(k,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(k,v.__s,x)||u.__v===i.__v&&!v.__){for(v.props=k,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),s=0;s<u.__k.length;s++)u.__k[s]&&(u.__k[s].__=u);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(k,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(p,y,w)})}v.context=x,v.props=k,v.state=v.__s,(s=n.__r)&&s(u),v.__d=!1,v.__v=u,v.__P=l,s=v.render(v.props,v.state,v.context),u.__k=null!=s&&s.type==d&&null==s.key?s.props.children:Array.isArray(s)?s:[s],null!=v.getChildContext&&(t=a(a({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(p,y)),b(l,u,i,t,o,r,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),g&&(v.__E=v.__=null),v.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=$(i.__e,u,i,t,o,r,f,c);(s=n.diffed)&&s(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function T(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function $(n,l,u,i,t,o,r,f){var s,a,v,h,p,y=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=o)for(s=0;s<o.length;s++)if(null!=(a=o[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,o[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),o=null,f=!1}if(null===l.type)y!==d&&n.data!=d&&(n.data=d);else{if(null!=o&&(o=c.slice.call(n.childNodes)),v=(y=u.props||e).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!f){if(y===e)for(y={},p=0;p<n.attributes.length;p++)y[n.attributes[p].name]=n.attributes[p].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}P(n,d,y,t,f),l.__k=l.props.children,h||b(n,l,u,i,\"foreignObject\"!==l.type&&t,o,r,e,f),f||(\"value\"in d&&void 0!==d.value&&d.value!==n.value&&(n.value=null==d.value?\"\":d.value),\"checked\"in d&&void 0!==d.checked&&d.checked!==n.checked&&(n.checked=d.checked))}return n}function j(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function D(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||j(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&D(t[r],u,i);null!=o&&v(o)}function E(n,l,u){return this.constructor(n,u)}function H(l,u,i){var t,o,f;n.__&&n.__(l,u),o=(t=i===r)?null:i&&i.__k||u.__k,l=h(d,null,[l]),f=[],A(u,(t?u:i||u).__k=l,o||e,e,void 0!==u.ownerSVGElement,i&&!t?[i]:o?null:c.slice.call(u.childNodes),f,i||e,t),T(f,l)}function I(n,l){H(n,l,r)}function L(n,l){return l=a(a({},n.props),l),arguments.length>2&&(l.children=c.slice.call(arguments,2)),p(n.type,l,l.key||n.key,l.ref||n.ref,null)}function M(n){var l={},u={__c:\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(n){t.props.value!==n.value&&i.some(function(l){l.context=n.value,k(l)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return k(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},m.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),k(this))},m.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),k(this))},m.prototype.render=d,u=[],i=0,t=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,r=e,f=0;export{H as render,I as hydrate,h as createElement,h,d as Fragment,y as createRef,l as isValidElement,m as Component,L as cloneElement,M as createContext,x as toChildArray,D as _unmount,n as options};\n//# sourceMappingURL=preact.module.js.map\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  for (var key in source) {\n    if (!Object.prototype.hasOwnProperty.call(source, key)) {\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      continue;\n    }\n\n    if (isObjectOrArrayOrFunction(targetVal) && isObjectOrArrayOrFunction(sourceVal)) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\n\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n  return sources.reduceRight(function(acc, source) {\n    Object.keys(Object(source)).forEach(function(key) {\n      if (source[key] !== undefined) {\n        acc[key] = source[key];\n      }\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar intersection = require('../functions/intersection');\nvar find = require('../functions/find');\nvar valToNumber = require('../functions/valToNumber');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function(el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  var self = this;\n  Object.keys(params).forEach(function(paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  numberKeys.forEach(function(k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      return geoRect.map(function(value) {\n        return parseFloat(value);\n      });\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function(attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function(v) {\n          if (Array.isArray(v)) {\n            return v.map(function(vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      )\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList[]} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      if (!objectHasKeys(this.numericRefinements[attribute])) {\n        return this.numericRefinements;\n      }\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {\n        var operators = numericRefinements[key];\n        var operatorList = {};\n\n        operators = operators || {};\n        Object.keys(operators).forEach(function(operator) {\n          var values = operators[operator] || [];\n          var outValues = [];\n          values.forEach(function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (outValues.length !== values.length) {\n            hasChanged = true;\n          }\n          operatorList[operator] = outValues;\n        });\n\n        memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function(t) {\n        return t !== tag;\n      })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function(facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {\n      return self.disjunctiveFacetsRefinements[facet].length > 0;\n    })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function(facet) { return facet.name; }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function(f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n    'facets', 'disjunctiveFacets', 'facetsRefinements',\n    'facetsExcludes', 'disjunctiveFacetsRefinements',\n    'numericRefinements', 'tagRefinements', 'hierarchicalFacets', 'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    var self = this;\n    Object.keys(this).forEach(function(paramName) {\n      var paramValue = self[paramName];\n      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(\n      function(previous, key) {\n        var isPreviousValueDefined = previous[key] !== undefined;\n        var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n        if (isPreviousValueDefined && !isNextValueDefined) {\n          return omit(previous, [key]);\n        }\n\n        if (isNextValueDefined) {\n          previous[key] = nextWithNumbers[key];\n        }\n\n        return previous;\n      },\n      previousPlainObject\n    );\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function() {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      function(f) {\n        return f.name === hierarchicalFacetName;\n      }\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function(part) {\n      return part.trim();\n    });\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar orderBy = require('../functions/orderBy');\nvar compact = require('../functions/compact');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * @param {string[]} attributes\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function(val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets\n * @param {string} hierarchicalAttributeName\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(hierarchicalFacets, function facetKeyMatchesAttribute(\n    hierarchicalFacet\n  ) {\n    var facetNames = hierarchicalFacet.attributes || [];\n    return facetNames.indexOf(hierarchicalAttributeName) > -1;\n  });\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devid=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex\": 202,\n            \"Insignia\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  /**\n   * query used to generate the results\n   * @member {string}\n   */\n  this.query = mainSubResponse.query;\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @member {string}\n   */\n  this.parsedQuery = mainSubResponse.parsedQuery;\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @member {object[]}\n   */\n  this.hits = mainSubResponse.hits;\n  /**\n   * index where the results come from\n   * @member {string}\n   */\n  this.index = mainSubResponse.index;\n  /**\n   * number of hits per page requested\n   * @member {number}\n   */\n  this.hitsPerPage = mainSubResponse.hitsPerPage;\n  /**\n   * total number of hits of this query on the index\n   * @member {number}\n   */\n  this.nbHits = mainSubResponse.nbHits;\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @member {number}\n   */\n  this.nbPages = mainSubResponse.nbPages;\n  /**\n   * current page\n   * @member {number}\n   */\n  this.page = mainSubResponse.page;\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = results.reduce(function(sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n  /**\n   * The position if the position was guessed by IP.\n   * @member {string}\n   * @example \"48.8637,2.3615\",\n   */\n  this.aroundLatLng = mainSubResponse.aroundLatLng;\n  /**\n   * The radius computed by Algolia.\n   * @member {string}\n   * @example \"126792922\",\n   */\n  this.automaticRadius = mainSubResponse.automaticRadius;\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @member {string}\n   * @example \"c7-use-2.algolia.net\",\n   */\n  this.serverUsed = mainSubResponse.serverUsed;\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutCounts = mainSubResponse.timeoutCounts;\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutHits = mainSubResponse.timeoutHits;\n\n  /**\n   * True if the counts of the facets is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveFacetsCount = mainSubResponse.exhaustiveFacetsCount;\n\n  /**\n   * True if the number of hits is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveNbHits = mainSubResponse.exhaustiveNbHits;\n\n\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @member {object[]}\n   */\n  this.userData = mainSubResponse.userData;\n\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @member {string}\n   */\n  this.queryID = mainSubResponse.queryID;\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  var self = this;\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function(facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(refinementValue) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some root level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets\n      ? result.facets\n      : {};\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n      var position = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n        return f.attribute === dfacet;\n      });\n\n      // previous refinements and no results so not able to find it\n      if (attributeIndex === -1) {\n        return;\n      }\n\n      // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n      // then the disjunctive values will be `beers` (count: 100),\n      // but we do not want to display\n      //   | beers (100)\n      //     > IPA (5)\n      // We want\n      //   | beers (5)\n      //     > IPA (5)\n      var defaultData = {};\n\n      if (currentRefinement.length > 0) {\n        var root = currentRefinement[0].split(separator)[0];\n        defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n      }\n\n      self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n        defaultData,\n        facetResults,\n        self.hierarchicalFacets[position][attributeIndex].data\n      );\n    });\n\n    nextDisjunctiveResult++;\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function(facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    excludes.forEach(function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function(name) {\n      return {\n        name: name,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, name),\n        isExcluded: results._state.isExcludeRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function(name) {\n      return {\n        name: name,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    return find(results.hierarchicalFacets, predicate);\n  }\n}\n\n/**\n * Sort nodes of a hierarchical facet results\n * @private\n * @param {HierarchicalFacet} node node to upon which we want to apply the sort\n */\nfunction recSort(sortFn, node) {\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function(childNode) {\n    return recSort(sortFn, childNode);\n  });\n  var sortedChildren = sortFn(children);\n  var newNode = merge({}, node, {data: sortedChildren});\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {sortBy: SearchResults.DEFAULT_SORT});\n\n  if (Array.isArray(options.sortBy)) {\n    var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n    if (Array.isArray(facetValues)) {\n      return orderBy(facetValues, order[0], order[1]);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(function(hierarchicalFacetValues) {\n      return orderBy(hierarchicalFacetValues, order[0], order[1]);\n    }, facetValues);\n  } else if (typeof options.sortBy === 'function') {\n    if (Array.isArray(facetValues)) {\n      return facetValues.sort(options.sortBy);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(function(data) {\n      return vanillaSortFn(options.sortBy, data);\n    }, facetValues);\n  }\n  throw new Error(\n    'options.sortBy is optional but if defined it must be ' +\n    'either an array of string (predicates) or a sorting function'\n  );\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function(facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function(attributeName) {\n    state.facetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function(attributeName) {\n    state.facetsExcludes[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n\n  Object.keys(state.numericRefinements).forEach(function(attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function(operator) {\n      operators[operator].forEach(function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {*} state\n * @param {*} type\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function(f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\n/**\n * @param {*} state\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function(facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function(intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet && find(intermediateFacet.data, function(f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function(value, index) {\n    return {\n      criteria: iteratees.map(function(iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function(res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function(sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(defaultInstructions, function(\n        defaultInstruction\n      ) {\n        return defaultInstruction[0] === sortInstruction[0];\n      });\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nmodule.exports = '3.1.1';\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar events = require('events');\nvar inherits = require('./functions/inherits');\nvar objectHasKeys = require('./functions/objectHasKeys');\n\nvar version = require('./version');\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, events.EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search({onlyWithDerivedHelpers: false});\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {\n  this._search({onlyWithDerivedHelpers: true});\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  if (\n    !clientHasSFFV &&\n    typeof this.client.initIndex !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query\n  });\n\n  var searchForFacetValuesPromise = clientHasSFFV\n    ? this.client.searchForFacetValues([{indexName: state.index, params: algoliaQuery}])\n    : this.client.initIndex(state.index).searchForFacetValues(algoliaQuery);\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits.forEach(function(f) {\n      f.isRefined = isDisjunctive\n        ? state.isDisjunctiveFacetRefined(facet, f.value)\n        : state.isFacetRefined(facet, f.value);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    disjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function(operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function(options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error\n    });\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: formattedResponse,\n      state: state\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function(value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parsable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function(v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (value === undefined) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n        memo[key] = facetList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar orderBy = require('../functions/orderBy');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(\n      hierarchicalFacet\n    );\n    var hierarchicalRootPath = state._getHierarchicalRootPath(\n      hierarchicalFacet\n    );\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(\n      hierarchicalFacet\n    );\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      exhaustive: rootExhaustive,\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function(subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bires'],\n      //       level1: ['beers > IPA', 'bires > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bires > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function(facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function(tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function(tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            currentRefinement,\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null\n  };\n}\n","'use strict';\n\nvar events = require('events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, events.EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // maybe more to get the root level of hierarchical facets when activated\n    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      // if we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get the root values\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        queries.push({\n          indexName: index,\n          params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet, true)\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 1,\n      page: 0,\n      attributesToRetrieve: [],\n      attributesToHighlight: [],\n      attributesToSnippet: [],\n      tagFilters: tagFilters,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function(attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function(value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements).forEach(function(facetName) {\n      var facetValues = facetsRefinements[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes).forEach(function(facetName) {\n      var facetValues = facetsExcludes[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {\n      var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n      if (facetName === facet || !facetValues || facetValues.length === 0) {\n        return;\n      }\n      var orFilters = [];\n\n      facetValues.forEach(function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {\n      var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return merge(\n      {},\n      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n      searchForFacetSearchParameters\n    );\n  }\n};\n\nmodule.exports = requestBuilder;\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = obj.join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (isArray(obj)) {\n            pushToArray(values, stringify(\n                obj[key],\n                typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix,\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        } else {\n            pushToArray(values, stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        }\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","export var createDocumentationLink = function createDocumentationLink(_ref) {\n  var name = _ref.name,\n      _ref$connector = _ref.connector,\n      connector = _ref$connector === void 0 ? false : _ref$connector;\n  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');\n};\nexport var createDocumentationMessageGenerator = function createDocumentationMessageGenerator() {\n  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {\n    widgets[_key] = arguments[_key];\n  }\n\n  var links = widgets.map(function (widget) {\n    return createDocumentationLink(widget);\n  }).join(', ');\n  return function (message) {\n    return [message, \"See documentation: \".concat(links)].filter(Boolean).join('\\n\\n');\n  };\n};","// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.findIndex` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\nfunction findIndex(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nexport default findIndex;","function uniq(array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n\nexport default uniq;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport findIndex from './findIndex';\nimport uniq from './uniq';\n\nvar mergeWithRest = function mergeWithRest(left, right) {\n  var facets = right.facets,\n      disjunctiveFacets = right.disjunctiveFacets,\n      facetsRefinements = right.facetsRefinements,\n      facetsExcludes = right.facetsExcludes,\n      disjunctiveFacetsRefinements = right.disjunctiveFacetsRefinements,\n      numericRefinements = right.numericRefinements,\n      tagRefinements = right.tagRefinements,\n      hierarchicalFacets = right.hierarchicalFacets,\n      hierarchicalFacetsRefinements = right.hierarchicalFacetsRefinements,\n      ruleContexts = right.ruleContexts,\n      rest = _objectWithoutProperties(right, [\"facets\", \"disjunctiveFacets\", \"facetsRefinements\", \"facetsExcludes\", \"disjunctiveFacetsRefinements\", \"numericRefinements\", \"tagRefinements\", \"hierarchicalFacets\", \"hierarchicalFacetsRefinements\", \"ruleContexts\"]);\n\n  return left.setQueryParameters(rest);\n}; // Merge facets\n\n\nvar mergeFacets = function mergeFacets(left, right) {\n  return right.facets.reduce(function (_, name) {\n    return _.addFacet(name);\n  }, left);\n};\n\nvar mergeDisjunctiveFacets = function mergeDisjunctiveFacets(left, right) {\n  return right.disjunctiveFacets.reduce(function (_, name) {\n    return _.addDisjunctiveFacet(name);\n  }, left);\n};\n\nvar mergeHierarchicalFacets = function mergeHierarchicalFacets(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacets: right.hierarchicalFacets.reduce(function (facets, facet) {\n      var index = findIndex(facets, function (_) {\n        return _.name === facet.name;\n      });\n\n      if (index === -1) {\n        return facets.concat(facet);\n      }\n\n      var nextFacets = facets.slice();\n      nextFacets.splice(index, 1, facet);\n      return nextFacets;\n    }, left.hierarchicalFacets)\n  });\n}; // Merge facet refinements\n\n\nvar mergeTagRefinements = function mergeTagRefinements(left, right) {\n  return right.tagRefinements.reduce(function (_, value) {\n    return _.addTagRefinement(value);\n  }, left);\n};\n\nvar mergeFacetRefinements = function mergeFacetRefinements(left, right) {\n  return left.setQueryParameters({\n    facetsRefinements: _objectSpread({}, left.facetsRefinements, {}, right.facetsRefinements)\n  });\n};\n\nvar mergeFacetsExcludes = function mergeFacetsExcludes(left, right) {\n  return left.setQueryParameters({\n    facetsExcludes: _objectSpread({}, left.facetsExcludes, {}, right.facetsExcludes)\n  });\n};\n\nvar mergeDisjunctiveFacetsRefinements = function mergeDisjunctiveFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    disjunctiveFacetsRefinements: _objectSpread({}, left.disjunctiveFacetsRefinements, {}, right.disjunctiveFacetsRefinements)\n  });\n};\n\nvar mergeNumericRefinements = function mergeNumericRefinements(left, right) {\n  return left.setQueryParameters({\n    numericRefinements: _objectSpread({}, left.numericRefinements, {}, right.numericRefinements)\n  });\n};\n\nvar mergeHierarchicalFacetsRefinements = function mergeHierarchicalFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacetsRefinements: _objectSpread({}, left.hierarchicalFacetsRefinements, {}, right.hierarchicalFacetsRefinements)\n  });\n};\n\nvar mergeRuleContexts = function mergeRuleContexts(left, right) {\n  var ruleContexts = uniq([].concat(left.ruleContexts).concat(right.ruleContexts).filter(Boolean));\n\n  if (ruleContexts.length > 0) {\n    return left.setQueryParameters({\n      ruleContexts: ruleContexts\n    });\n  }\n\n  return left;\n};\n\nvar merge = function merge() {\n  for (var _len = arguments.length, parameters = new Array(_len), _key = 0; _key < _len; _key++) {\n    parameters[_key] = arguments[_key];\n  }\n\n  return parameters.reduce(function (left, right) {\n    var hierarchicalFacetsRefinementsMerged = mergeHierarchicalFacetsRefinements(left, right);\n    var hierarchicalFacetsMerged = mergeHierarchicalFacets(hierarchicalFacetsRefinementsMerged, right);\n    var tagRefinementsMerged = mergeTagRefinements(hierarchicalFacetsMerged, right);\n    var numericRefinementsMerged = mergeNumericRefinements(tagRefinementsMerged, right);\n    var disjunctiveFacetsRefinementsMerged = mergeDisjunctiveFacetsRefinements(numericRefinementsMerged, right);\n    var facetsExcludesMerged = mergeFacetsExcludes(disjunctiveFacetsRefinementsMerged, right);\n    var facetRefinementsMerged = mergeFacetRefinements(facetsExcludesMerged, right);\n    var disjunctiveFacetsMerged = mergeDisjunctiveFacets(facetRefinementsMerged, right);\n    var ruleContextsMerged = mergeRuleContexts(disjunctiveFacetsMerged, right);\n    var facetsMerged = mergeFacets(ruleContextsMerged, right);\n    return mergeWithRest(facetsMerged, right);\n  });\n};\n\nexport default merge;","var resolveSearchParameters = function resolveSearchParameters(current) {\n  var parent = current.getParent();\n  var states = [current.getHelper().state];\n\n  while (parent !== null) {\n    states = [parent.getHelper().state].concat(states);\n    parent = parent.getParent();\n  }\n\n  return states;\n};\n\nexport default resolveSearchParameters;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { checkIndexUiState, createDocumentationMessageGenerator, resolveSearchParameters, mergeSearchParameters } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'index-widget'\n});\nexport function isIndexWidget(widget) {\n  return widget.$$type === 'ais.index';\n}\n\nfunction getLocalWidgetsState(widgets, widgetStateOptions) {\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (uiState, widget) {\n    if (!widget.getWidgetState) {\n      return uiState;\n    }\n\n    return widget.getWidgetState(uiState, widgetStateOptions);\n  }, {});\n}\n\nfunction getLocalWidgetsSearchParameters(widgets, widgetSearchParametersOptions) {\n  var initialSearchParameters = widgetSearchParametersOptions.initialSearchParameters,\n      rest = _objectWithoutProperties(widgetSearchParametersOptions, [\"initialSearchParameters\"]);\n\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (state, widget) {\n    if (!widget.getWidgetSearchParameters) {\n      return state;\n    }\n\n    return widget.getWidgetSearchParameters(state, rest);\n  }, initialSearchParameters);\n}\n\nfunction resetPageFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n\n  if (indexWidgets.length === 0) {\n    return;\n  }\n\n  indexWidgets.forEach(function (widget) {\n    var widgetHelper = widget.getHelper(); // @ts-ignore @TODO: remove \"ts-ignore\" once `resetPage()` is typed in the helper\n\n    widgetHelper.setState(widgetHelper.state.resetPage());\n    resetPageFromWidgets(widget.getWidgets());\n  });\n}\n\nfunction resolveScopedResultsFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n  return indexWidgets.reduce(function (scopedResults, current) {\n    return scopedResults.concat.apply(scopedResults, [{\n      indexId: current.getIndexId(),\n      results: current.getResults(),\n      helper: current.getHelper()\n    }].concat(_toConsumableArray(resolveScopedResultsFromWidgets(current.getWidgets()))));\n  }, []);\n}\n\nfunction resolveScopedResultsFromIndex(widget) {\n  var widgetParent = widget.getParent(); // If the widget is the root, we consider itself as the only sibling.\n\n  var widgetSiblings = widgetParent ? widgetParent.getWidgets() : [widget];\n  return resolveScopedResultsFromWidgets(widgetSiblings);\n}\n\nvar index = function index(props) {\n  if (props === undefined || props.indexName === undefined) {\n    throw new Error(withUsage('The `indexName` option is required.'));\n  }\n\n  var indexName = props.indexName,\n      _props$indexId = props.indexId,\n      indexId = _props$indexId === void 0 ? indexName : _props$indexId;\n  var localWidgets = [];\n  var localUiState = {};\n  var localInstantSearchInstance = null;\n  var localParent = null;\n  var helper = null;\n  var derivedHelper = null;\n\n  var createURL = function createURL(nextState) {\n    return localInstantSearchInstance._createURL(_defineProperty({}, indexId, getLocalWidgetsState(localWidgets, {\n      searchParameters: nextState,\n      helper: helper\n    })));\n  };\n\n  return {\n    $$type: 'ais.index',\n    getIndexName: function getIndexName() {\n      return indexName;\n    },\n    getIndexId: function getIndexId() {\n      return indexId;\n    },\n    getHelper: function getHelper() {\n      return helper;\n    },\n    getResults: function getResults() {\n      return derivedHelper && derivedHelper.lastResults;\n    },\n    getParent: function getParent() {\n      return localParent;\n    },\n    getWidgets: function getWidgets() {\n      return localWidgets;\n    },\n    addWidgets: function addWidgets(widgets) {\n      var _this = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      localWidgets = localWidgets.concat(widgets);\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {\n          uiState: localUiState,\n          initialSearchParameters: helper.state\n        }));\n        widgets.forEach(function (widget) {\n          if (localInstantSearchInstance && widget.init) {\n            widget.init({\n              helper: helper,\n              parent: _this,\n              uiState: {},\n              instantSearchInstance: localInstantSearchInstance,\n              state: helper.state,\n              templatesConfig: localInstantSearchInstance.templatesConfig,\n              createURL: createURL\n            });\n          }\n        });\n        localInstantSearchInstance.scheduleSearch();\n      }\n\n      return this;\n    },\n    removeWidgets: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      localWidgets = localWidgets.filter(function (widget) {\n        return widgets.indexOf(widget) === -1;\n      });\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        var nextState = widgets.reduce(function (state, widget) {\n          // the `dispose` method exists at this point we already assert it\n          var next = widget.dispose({\n            helper: helper,\n            state: state\n          });\n          return next || state;\n        }, helper.state);\n        localUiState = getLocalWidgetsState(localWidgets, {\n          searchParameters: nextState,\n          helper: helper\n        });\n        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {\n          uiState: localUiState,\n          initialSearchParameters: nextState\n        }));\n\n        if (localWidgets.length) {\n          localInstantSearchInstance.scheduleSearch();\n        }\n      }\n\n      return this;\n    },\n    init: function init(_ref) {\n      var _this2 = this;\n\n      var instantSearchInstance = _ref.instantSearchInstance,\n          parent = _ref.parent,\n          uiState = _ref.uiState;\n      localInstantSearchInstance = instantSearchInstance;\n      localParent = parent;\n      localUiState = uiState[indexId] || {}; // The `mainHelper` is already defined at this point. The instance is created\n      // inside InstantSearch at the `start` method, which occurs before the `init`\n      // step.\n\n      var mainHelper = instantSearchInstance.mainHelper;\n      var parameters = getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: localUiState,\n        initialSearchParameters: new algoliasearchHelper.SearchParameters({\n          index: indexName\n        })\n      }); // This Helper is only used for state management we do not care about the\n      // `searchClient`. Only the \"main\" Helper created at the `InstantSearch`\n      // level is aware of the client.\n\n      helper = algoliasearchHelper({}, parameters.index, parameters); // We forward the call to `search` to the \"main\" instance of the Helper\n      // which is responsible for managing the queries (it's the only one that is\n      // aware of the `searchClient`).\n\n      helper.search = function () {\n        if (instantSearchInstance.onStateChange) {\n          instantSearchInstance.onStateChange({\n            uiState: instantSearchInstance.mainIndex.getWidgetState({}),\n            setUiState: instantSearchInstance.setUiState.bind(instantSearchInstance)\n          }); // We don't trigger a search when controlled because it becomes the\n          // responsibility of `setUiState`.\n\n          return mainHelper;\n        }\n\n        return mainHelper.search();\n      }; // We use the same pattern for the `searchForFacetValues`.\n\n\n      helper.searchForFacetValues = function (facetName, facetValue, maxFacetHits, userState) {\n        var state = helper.state.setQueryParameters(userState);\n        return mainHelper.searchForFacetValues(facetName, facetValue, maxFacetHits, state);\n      };\n\n      derivedHelper = mainHelper.derive(function () {\n        return mergeSearchParameters.apply(void 0, _toConsumableArray(resolveSearchParameters(_this2)));\n      }); // Subscribe to the Helper state changes for the page before widgets\n      // are initialized. This behavior mimics the original one of the Helper.\n      // It makes sense to replicate it at the `init` step. We have another\n      // listener on `change` below, once `init` is done.\n\n      helper.on('change', function (_ref2) {\n        var isPageReset = _ref2.isPageReset;\n\n        if (isPageReset) {\n          resetPageFromWidgets(localWidgets);\n        }\n      });\n      derivedHelper.on('search', function () {\n        // The index does not manage the \"staleness\" of the search. This is the\n        // responsibility of the main instance. It does not make sense to manage\n        // it at the index level because it's either: all of them or none of them\n        // that are stalled. The queries are performed into a single network request.\n        instantSearchInstance.scheduleStalledRender();\n\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: _this2,\n            indexUiState: localUiState\n          });\n        }\n      });\n      derivedHelper.on('result', function (_ref3) {\n        var results = _ref3.results;\n        // The index does not render the results it schedules a new render\n        // to let all the other indices emit their own results. It allows us to\n        // run the render process in one pass.\n        instantSearchInstance.scheduleRender(); // the derived helper is the one which actually searches, but the helper\n        // which is exposed e.g. via instance.helper, doesn't search, and thus\n        // does not have access to lastResults, which it used to in pre-federated\n        // search behavior.\n\n        helper.lastResults = results;\n      });\n      localWidgets.forEach(function (widget) {\n        if (widget.init) {\n          widget.init({\n            uiState: uiState,\n            helper: helper,\n            parent: _this2,\n            instantSearchInstance: instantSearchInstance,\n            state: helper.state,\n            templatesConfig: instantSearchInstance.templatesConfig,\n            createURL: createURL\n          });\n        }\n      }); // Subscribe to the Helper state changes for the `uiState` once widgets\n      // are initialized. Until the first render, state changes are part of the\n      // configuration step. This is mainly for backward compatibility with custom\n      // widgets. When the subscription happens before the `init` step, the (static)\n      // configuration of the widget is pushed in the URL. That's what we want to avoid.\n      // https://github.com/algolia/instantsearch.js/pull/994/commits/4a672ae3fd78809e213de0368549ef12e9dc9454\n\n      helper.on('change', function (_ref4) {\n        var state = _ref4.state;\n        localUiState = getLocalWidgetsState(localWidgets, {\n          searchParameters: state,\n          helper: helper\n        }); // We don't trigger an internal change when controlled because it\n        // becomes the responsibility of `setUiState`.\n\n        if (!instantSearchInstance.onStateChange) {\n          instantSearchInstance.onInternalStateChange();\n        }\n      });\n    },\n    render: function render(_ref5) {\n      var _this3 = this;\n\n      var instantSearchInstance = _ref5.instantSearchInstance;\n      localWidgets.forEach(function (widget) {\n        // At this point, all the variables used below are set. Both `helper`\n        // and `derivedHelper` have been created at the `init` step. The attribute\n        // `lastResults` might be `null` though. It's possible that a stalled render\n        // happens before the result e.g with a dynamically added index the request might\n        // be delayed. The render is triggered for the complete tree but some parts do\n        // not have results yet.\n        if (widget.render && derivedHelper.lastResults) {\n          widget.render({\n            helper: helper,\n            instantSearchInstance: instantSearchInstance,\n            results: derivedHelper.lastResults,\n            scopedResults: resolveScopedResultsFromIndex(_this3),\n            state: derivedHelper.lastResults._state,\n            templatesConfig: instantSearchInstance.templatesConfig,\n            createURL: createURL,\n            searchMetadata: {\n              isSearchStalled: instantSearchInstance._isSearchStalled\n            }\n          });\n        }\n      });\n    },\n    dispose: function dispose() {\n      localWidgets.forEach(function (widget) {\n        if (widget.dispose) {\n          // The dispose function is always called once the instance is started\n          // (it's an effect of `removeWidgets`). The index is initialized and\n          // the Helper is available. We don't care about the return value of\n          // `dispose` because the index is removed. We can't call `removeWidgets`\n          // because we want to keep the widgets on the instance, to allow idempotent\n          // operations on `add` & `remove`.\n          widget.dispose({\n            helper: helper,\n            state: helper.state\n          });\n        }\n      });\n      localInstantSearchInstance = null;\n      localParent = null;\n      helper.removeAllListeners();\n      helper = null;\n      derivedHelper.detach();\n      derivedHelper = null;\n    },\n    getWidgetState: function getWidgetState(uiState) {\n      return localWidgets.filter(isIndexWidget).reduce(function (previousUiState, innerIndex) {\n        return innerIndex.getWidgetState(previousUiState);\n      }, _objectSpread({}, uiState, _defineProperty({}, this.getIndexId(), localUiState)));\n    },\n    getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n      var uiState = _ref6.uiState;\n      return getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: uiState,\n        initialSearchParameters: searchParameters\n      });\n    },\n    refreshUiState: function refreshUiState() {\n      localUiState = getLocalWidgetsState(localWidgets, {\n        searchParameters: this.getHelper().state,\n        helper: this.getHelper()\n      });\n    }\n  };\n};\n\nexport default index;","function getPropertyByPath(object, path) {\n  var parts = path.split('.');\n  return parts.reduce(function (current, key) {\n    return current && current[key];\n  }, object);\n}\n\nexport default getPropertyByPath;","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js\n */\n// Used to map characters to HTML entities.\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}; // Used to match HTML entities and HTML characters.\n\nvar regexUnescapedHtml = /[&<>\"']/g;\nvar regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n */\n\nfunction escape(value) {\n  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {\n    return htmlEscapes[character];\n  }) : value;\n}\n\nexport default escape;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js\n */\nfunction getTag(value) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n\n  return Object.prototype.toString.call(value);\n}\n\nfunction isObjectLike(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\n/**\n * Checks if `value` is a plain object.\n *\n * A plain object is an object created by the `Object`\n * constructor or with a `[[Prototype]]` of `null`.\n */\n\n\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n}\n\nexport default isPlainObject;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isPlainObject, escape } from '../lib/utils';\nexport var TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\nexport var TAG_REPLACEMENT = {\n  highlightPreTag: '<mark>',\n  highlightPostTag: '</mark>'\n};\n\nfunction replaceTagsAndEscape(value) {\n  return escape(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);\n}\n\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return Object.keys(input).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, recursiveEscape(input[key])));\n    }, {});\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n\n  return _objectSpread({}, input, {\n    value: replaceTagsAndEscape(input.value)\n  });\n}\n\nexport default function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    hits = hits.map(function (hit) {\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n\n  return hits;\n}\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _objectSpread({}, h, {\n      highlighted: replaceTagsAndEscape(h.highlighted)\n    });\n  });\n}","var NAMESPACE = 'ais';\nexport var component = function component(componentName) {\n  return function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        descendantName = _ref.descendantName,\n        modifierName = _ref.modifierName;\n\n    var descendent = descendantName ? \"-\".concat(descendantName) : '';\n    var modifier = modifierName ? \"--\".concat(modifierName) : '';\n    return \"\".concat(NAMESPACE, \"-\").concat(componentName).concat(descendent).concat(modifier);\n  };\n};","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Highlight');\nexport default function highlight(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var attributeValue = getPropertyByPath(hit, \"_highlightResult.\".concat(attribute, \".value\")) || ''; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Snippet');\nexport default function snippet(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var attributeValue = getPropertyByPath(hit, \"_snippetResult.\".concat(attribute, \".value\")) || ''; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function readDataAttributes(domElement) {\n  var method = domElement.getAttribute('data-insights-method');\n  var serializedPayload = domElement.getAttribute('data-insights-payload');\n\n  if (typeof serializedPayload !== 'string') {\n    throw new Error('The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.');\n  }\n\n  try {\n    var payload = JSON.parse(atob(serializedPayload));\n    return {\n      method: method,\n      payload: payload\n    };\n  } catch (error) {\n    throw new Error('The insights helper was unable to parse `data-insights-payload`.');\n  }\n}\nexport function hasDataAttributes(domElement) {\n  return domElement.hasAttribute('data-insights-method');\n}\nexport function writeDataAttributes(_ref) {\n  var method = _ref.method,\n      payload = _ref.payload;\n\n  if (_typeof(payload) !== 'object') {\n    throw new Error(\"The insights helper expects the payload to be an object.\");\n  }\n\n  var serializedPayload;\n\n  try {\n    serializedPayload = btoa(JSON.stringify(payload));\n  } catch (error) {\n    throw new Error(\"Could not JSON serialize the payload object.\");\n  }\n\n  return \"data-insights-method=\\\"\".concat(method, \"\\\" data-insights-payload=\\\"\").concat(serializedPayload, \"\\\"\");\n}\nexport default function insights(method, payload) {\n  return writeDataAttributes({\n    method: method,\n    payload: payload\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { highlight as _highlight, snippet as _snippet, insights as _insights } from '../helpers';\nexport default function hoganHelpers(_ref) {\n  var numberLocale = _ref.numberLocale;\n  return {\n    formatNumber: function formatNumber(value, render) {\n      return Number(render(value)).toLocaleString(numberLocale);\n    },\n    highlight: function highlight(options, render) {\n      try {\n        var highlightOptions = JSON.parse(options);\n        return render(_highlight(_objectSpread({}, highlightOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe highlight helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    snippet: function snippet(options, render) {\n      try {\n        var snippetOptions = JSON.parse(options);\n        return render(_snippet(_objectSpread({}, snippetOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe snippet helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    insights: function insights(options, render) {\n      try {\n        var _JSON$parse = JSON.parse(options),\n            method = _JSON$parse.method,\n            payload = _JSON$parse.payload;\n\n        return render(_insights(method, _objectSpread({\n          objectIDs: [this.objectID]\n        }, payload)));\n      } catch (error) {\n        throw new Error(\"\\nThe insights helper expects a JSON object of the format:\\n{ \\\"method\\\": \\\"method-name\\\", \\\"payload\\\": { \\\"eventName\\\": \\\"name of the event\\\" } }\");\n      }\n    }\n  };\n}","var nextMicroTask = Promise.resolve();\n\nvar defer = function defer(callback) {\n  var progress = null;\n  var cancelled = false;\n\n  var fn = function fn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (progress !== null) {\n      return;\n    }\n\n    progress = nextMicroTask.then(function () {\n      progress = null;\n\n      if (cancelled) {\n        cancelled = false;\n        return;\n      }\n\n      callback.apply(void 0, args);\n    });\n  };\n\n  fn.wait = function () {\n    if (progress === null) {\n      throw new Error('The deferred function should be called before calling `wait()`');\n    }\n\n    return progress;\n  };\n\n  fn.cancel = function () {\n    if (progress === null) {\n      return;\n    }\n\n    cancelled = true;\n  };\n\n  return fn;\n};\n\nexport default defer;","function noop() {}\n\nexport default noop;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction getIndexStateWithoutConfigure(uiState) {\n  var configure = uiState.configure,\n      trackedUiState = _objectWithoutProperties(uiState, [\"configure\"]);\n\n  return trackedUiState;\n} // technically a URL could contain any key, since users provide it,\n// which is why the input to this function is UiState, not something\n// which excludes \"configure\" as this function does.\n\n\nexport default function simpleStateMapping() {\n  return {\n    stateToRoute: function stateToRoute(uiState) {\n      return Object.keys(uiState).reduce(function (state, indexId) {\n        return _objectSpread({}, state, _defineProperty({}, indexId, getIndexStateWithoutConfigure(uiState[indexId])));\n      }, {});\n    },\n    routeToState: function routeToState() {\n      var routeState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Object.keys(routeState).reduce(function (state, indexId) {\n        return _objectSpread({}, state, _defineProperty({}, indexId, getIndexStateWithoutConfigure(routeState[indexId])));\n      }, {});\n    }\n  };\n}","function isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport qs from 'qs';\n\nvar defaultCreateURL = function defaultCreateURL(_ref) {\n  var qsModule = _ref.qsModule,\n      routeState = _ref.routeState,\n      location = _ref.location;\n  var protocol = location.protocol,\n      hostname = location.hostname,\n      _location$port = location.port,\n      port = _location$port === void 0 ? '' : _location$port,\n      pathname = location.pathname,\n      hash = location.hash;\n  var queryString = qsModule.stringify(routeState);\n  var portWithPrefix = port === '' ? '' : \":\".concat(port); // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n\n  if (!queryString) {\n    return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);\n  }\n\n  return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname, \"?\").concat(queryString).concat(hash);\n};\n\nvar defaultParseURL = function defaultParseURL(_ref2) {\n  var qsModule = _ref2.qsModule,\n      location = _ref2.location;\n  // `qs` by default converts arrays with more than 20 items to an object.\n  // We want to avoid this because the data structure manipulated can therefore vary.\n  // Setting the limit to `100` seems a good number because the engine's default is 100\n  // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).\n  //\n  // Using an `arrayLimit` of `n` allows `n + 1` items.\n  //\n  // See:\n  //   - https://github.com/ljharb/qs#parsing-arrays\n  //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/\n  return qsModule.parse(location.search.slice(1), {\n    arrayLimit: 99\n  });\n};\n\nvar setWindowTitle = function setWindowTitle(title) {\n  if (title) {\n    window.document.title = title;\n  }\n};\n\nvar BrowserHistory =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Initializes a new storage provider that syncs the search state to the URL\n   * using web APIs (`window.location.pushState` and `onpopstate` event).\n   */\n  function BrowserHistory() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        windowTitle = _ref3.windowTitle,\n        _ref3$writeDelay = _ref3.writeDelay,\n        writeDelay = _ref3$writeDelay === void 0 ? 400 : _ref3$writeDelay,\n        _ref3$createURL = _ref3.createURL,\n        createURL = _ref3$createURL === void 0 ? defaultCreateURL : _ref3$createURL,\n        _ref3$parseURL = _ref3.parseURL,\n        parseURL = _ref3$parseURL === void 0 ? defaultParseURL : _ref3$parseURL;\n\n    _classCallCheck(this, BrowserHistory);\n\n    _defineProperty(this, \"windowTitle\", void 0);\n\n    _defineProperty(this, \"writeDelay\", void 0);\n\n    _defineProperty(this, \"_createURL\", void 0);\n\n    _defineProperty(this, \"parseURL\", void 0);\n\n    _defineProperty(this, \"writeTimer\", void 0);\n\n    this.windowTitle = windowTitle;\n    this.writeTimer = undefined;\n    this.writeDelay = writeDelay;\n    this._createURL = createURL;\n    this.parseURL = parseURL;\n    var title = this.windowTitle && this.windowTitle(this.read());\n    setWindowTitle(title);\n  }\n  /**\n   * Reads the URL and returns a syncable UI search state.\n   */\n\n\n  _createClass(BrowserHistory, [{\n    key: \"read\",\n    value: function read() {\n      return this.parseURL({\n        qsModule: qs,\n        location: window.location\n      });\n    }\n    /**\n     * Pushes a search state into the URL.\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(routeState) {\n      var _this = this;\n\n      var url = this.createURL(routeState);\n      var title = this.windowTitle && this.windowTitle(routeState);\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.writeTimer = window.setTimeout(function () {\n        setWindowTitle(title);\n        window.history.pushState(routeState, title || '', url);\n        _this.writeTimer = undefined;\n      }, this.writeDelay);\n    }\n    /**\n     * Sets a callback on the `onpopstate` event of the history API of the current page.\n     * It enables the URL sync to keep track of the changes.\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(callback) {\n      var _this2 = this;\n\n      this._onPopState = function (event) {\n        if (_this2.writeTimer) {\n          window.clearTimeout(_this2.writeTimer);\n          _this2.writeTimer = undefined;\n        }\n\n        var routeState = event.state; // At initial load, the state is read from the URL without update.\n        // Therefore the state object is not available.\n        // In this case, we fallback and read the URL.\n\n        if (!routeState) {\n          callback(_this2.read());\n        } else {\n          callback(routeState);\n        }\n      };\n\n      window.addEventListener('popstate', this._onPopState);\n    }\n    /**\n     * Creates a complete URL from a given syncable UI state.\n     *\n     * It always generates the full URL, not a relative one.\n     * This allows to handle cases like using a <base href>.\n     * See: https://github.com/algolia/instantsearch.js/issues/790\n     */\n\n  }, {\n    key: \"createURL\",\n    value: function createURL(routeState) {\n      return this._createURL({\n        qsModule: qs,\n        routeState: routeState,\n        location: window.location\n      });\n    }\n    /**\n     * Removes the event listener and cleans up the URL.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this._onPopState) {\n        window.removeEventListener('popstate', this._onPopState);\n      }\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.write({});\n    }\n  }]);\n\n  return BrowserHistory;\n}();\n\nexport default function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return _construct(BrowserHistory, args);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport simpleStateMapping from '../lib/stateMappings/simple';\nimport historyRouter from '../lib/routers/history';\n\nvar walk = function walk(current, callback) {\n  callback(current);\n  current.getWidgets().filter(function (widget) {\n    return widget.$$type === 'ais.index';\n  }).forEach(function (innerIndex) {\n    walk(innerIndex, callback);\n  });\n};\n\nexport var createRouter = function createRouter() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _props$router = props.router,\n      router = _props$router === void 0 ? historyRouter() : _props$router,\n      _props$stateMapping = props.stateMapping,\n      stateMapping = _props$stateMapping === void 0 ? simpleStateMapping() : _props$stateMapping;\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n\n    function topLevelCreateURL(nextState) {\n      var uiState = Object.keys(nextState).reduce(function (acc, indexId) {\n        return _objectSpread({}, acc, _defineProperty({}, indexId, nextState[indexId]));\n      }, instantSearchInstance.mainIndex.getWidgetState({}));\n      var route = stateMapping.stateToRoute(uiState);\n      return router.createURL(route);\n    }\n\n    instantSearchInstance._createURL = topLevelCreateURL;\n    instantSearchInstance._initialUiState = _objectSpread({}, instantSearchInstance._initialUiState, {}, stateMapping.routeToState(router.read()));\n    return {\n      onStateChange: function onStateChange(_ref2) {\n        var uiState = _ref2.uiState;\n        var route = stateMapping.stateToRoute(uiState);\n        router.write(route);\n      },\n      subscribe: function subscribe() {\n        router.onUpdate(function (route) {\n          var uiState = stateMapping.routeToState(route);\n          walk(instantSearchInstance.mainIndex, function (current) {\n            var widgets = current.getWidgets();\n            var indexUiState = uiState[current.getIndexId()] || {};\n            var searchParameters = widgets.reduce(function (parameters, widget) {\n              if (!widget.getWidgetSearchParameters) {\n                return parameters;\n              }\n\n              return widget.getWidgetSearchParameters(parameters, {\n                uiState: indexUiState\n              });\n            }, current.getHelper().state);\n            current.getHelper().overrideStateWithoutTriggeringChangeEvent(searchParameters);\n            instantSearchInstance.scheduleSearch();\n          });\n        });\n      },\n      unsubscribe: function unsubscribe() {\n        router.dispose();\n      }\n    };\n  };\n};","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from 'events';\nimport index, { isIndexWidget } from '../widgets/index/index';\nimport version from './version';\nimport createHelpers from './createHelpers';\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, checkIndexUiState } from './utils';\nimport hasDetectedInsightsClient from './utils/detect-insights-client';\nimport { createRouter } from '../middleware/createRouter';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\n\nfunction defaultCreateURL() {\n  return '#';\n}\n/**\n * Global options for an InstantSearch instance.\n */\n\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstantSearch).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isSearchStalled\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      _this.mainHelper.search();\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      if (!_this.mainHelper.hasPendingRequests()) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        _this._isSearchStalled = false;\n      }\n\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n\n      _this.emit('render');\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"setUiState\", function (uiState) {\n      if (!_this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      }\n\n      process.env.NODE_ENV === 'development' ? warning(false, \"\\n`setUiState` provides a powerful way to manage the UI state. This is considered experimental as the API might change in a next minor version.\\n\\nFeel free to give us feedback on GitHub: https://github.com/algolia/instantsearch.js/issues/new\\n    \") : void 0; // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n\n      _this.mainIndex.refreshUiState();\n\n      var nextUiState = typeof uiState === 'function' ? uiState(_this.mainIndex.getWidgetState({})) : uiState;\n\n      var setIndexHelperState = function setIndexHelperState(indexWidget) {\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: indexWidget,\n            indexUiState: nextUiState[indexWidget.getIndexId()]\n          });\n        }\n\n        indexWidget.getHelper().overrideStateWithoutTriggeringChangeEvent(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n          uiState: nextUiState[indexWidget.getIndexId()]\n        }));\n        indexWidget.getWidgets().filter(isIndexWidget).forEach(setIndexHelperState);\n      };\n\n      setIndexHelperState(_this.mainIndex);\n\n      _this.scheduleSearch();\n\n      _this.onInternalStateChange();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", function () {\n      var nextUiState = _this.mainIndex.getWidgetState({});\n\n      _this.middleware.forEach(function (m) {\n        m.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    });\n\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$initialUiSta = options.initialUiState,\n        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n        _options$onStateChang = options.onStateChange,\n        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(Boolean(insightsClient) || !hasDetectedInsightsClient(), withUsage(\"InstantSearch detected the Insights client in the global scope.\\nTo connect InstantSearch to the Insights client, make sure to specify the `insightsClient` option:\\n\\nconst search = instantsearch({\\n  /* ... */\\n  insightsClient: window.aa,\\n});\")) : void 0;\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._isSearchStalled = false;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n\n      _this.EXPERIMENTAL_use(createRouter(routerOptions));\n    }\n\n    return _this;\n  }\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   *\n   * This method is considered as experimental and is subject to change in\n   * minor versions.\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = fn({\n          instantSearchInstance: _this2\n        });\n\n        _this2.middleware.push(newMiddleware);\n\n        return newMiddleware;\n      }); // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      } // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n\n\n      var mainHelper = algoliasearchHelper(this.client, this.indexName);\n\n      mainHelper.search = function () {\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref) {\n            var state = _ref.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this3._mainHelperSearch();\n          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n\n          searchFunctionHelper.on('change', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.setState(state);\n          });\n\n          _this3._searchFunction(searchFunctionHelper);\n\n          return mainHelper;\n        };\n      } // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n\n\n      mainHelper.on('error', function (_ref3) {\n        var error = _ref3.error;\n\n        _this3.emit('error', {\n          error: error\n        });\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (m) {\n        m.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n      mainHelper.search(); // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n\n      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.removeAllListeners();\n      this.mainHelper.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (m) {\n        m.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4._isSearchStalled = true;\n\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport default InstantSearch;","export default '4.4.0';","import InstantSearch from './lib/InstantSearch';\nimport version from './lib/version';\nimport { snippet, highlight, insights, getInsightsAnonymousUserToken } from './helpers';\n\nvar instantsearch = function instantsearch(options) {\n  return new InstantSearch(options);\n};\n\ninstantsearch.version = version;\ninstantsearch.snippet = snippet;\ninstantsearch.highlight = highlight;\ninstantsearch.insights = insights;\ninstantsearch.getInsightsAnonymousUserToken = getInsightsAnonymousUserToken;\nObject.defineProperty(instantsearch, 'widgets', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.widgets\\\" are not available from the ES build.\\n\\nTo import the widgets:\\n\\nimport { searchBox } from 'instantsearch.js/es/widgets'\");\n  }\n});\nObject.defineProperty(instantsearch, 'connectors', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.connectors\\\" are not available from the ES build.\\n\\nTo import the connectors:\\n\\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'\");\n  }\n});\nexport default instantsearch;\n","export var ANONYMOUS_TOKEN_COOKIE_KEY = '_ALGOLIA';\n\nfunction getCookie(name) {\n  var prefix = \"\".concat(name, \"=\");\n  var cookies = document.cookie.split(';');\n\n  for (var i = 0; i < cookies.length; i++) {\n    var cookie = cookies[i];\n\n    while (cookie.charAt(0) === ' ') {\n      cookie = cookie.substring(1);\n    }\n\n    if (cookie.indexOf(prefix) === 0) {\n      return cookie.substring(prefix.length, cookie.length);\n    }\n  }\n\n  return undefined;\n}\n\nexport default function getInsightsAnonymousUserToken() {\n  return getCookie(ANONYMOUS_TOKEN_COOKIE_KEY);\n}","function isDomElement(object) {\n  return object instanceof HTMLElement || Boolean(object) && object.nodeType > 0;\n}\n\nexport default isDomElement;","import isDomElement from './isDomElement';\n/**\n * Return the container. If it's a string, it is considered a\n * css selector and retrieves the first matching element. Otherwise\n * test if it validates that it's a correct DOMElement.\n *\n * @param {string|HTMLElement} selectorOrHTMLElement CSS Selector or container node.\n * @return {HTMLElement} Container node\n * @throws Error when the type is not correct\n */\n\nfunction getContainerNode(selectorOrHTMLElement) {\n  var isSelectorString = typeof selectorOrHTMLElement === 'string';\n  var domElement = isSelectorString ? document.querySelector(selectorOrHTMLElement) : selectorOrHTMLElement;\n\n  if (!isDomElement(domElement)) {\n    var errorMessage = 'Container must be `string` or `HTMLElement`.';\n\n    if (isSelectorString) {\n      errorMessage += \" Unable to find \".concat(selectorOrHTMLElement);\n    }\n\n    throw new Error(errorMessage);\n  }\n\n  return domElement;\n}\n\nexport default getContainerNode;","function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}\n\nexport default getObjectType;","import getObjectType from './getObjectType';\n\nfunction checkRendering(rendering, usage) {\n  if (rendering === undefined || typeof rendering !== 'function') {\n    throw new Error(\"The render function is not valid (received type \".concat(getObjectType(rendering), \").\\n\\n\").concat(usage));\n  }\n}\n\nexport default checkRendering;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box',\n  connector: true\n});\n/**\n * @typedef {Object} CustomSearchBoxWidgetOptions\n * @property {function(string, function(string))} [queryHook = undefined] A function that will be called every time\n * a new value for the query is set. The first parameter is the query and the second is a\n * function to actually trigger the search. The function takes the query as the parameter.\n *\n * This queryHook can be used to debounce the number of searches done from the searchBox.\n */\n\n/**\n * @typedef {Object} SearchBoxRenderingOptions\n * @property {string} query The query from the last search.\n * @property {function(string)} refine Sets a new query and searches.\n * @property {function()} clear Remove the query and perform search.\n * @property {Object} widgetParams All original `CustomSearchBoxWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isSearchStalled `true` if the search results takes more than a certain time to come back\n * from Algolia servers. This can be configured on the InstantSearch constructor with the attribute\n * `stalledSearchDelay` which is 200ms, by default.\n */\n\n/**\n * **SearchBox** connector provides the logic to build a widget that will let the user search for a query.\n *\n * The connector provides to the rendering: `refine()` to set the query. The behaviour of this function\n * may be impacted by the `queryHook` widget parameter.\n * @type {Connector}\n * @param {function(SearchBoxRenderingOptions, boolean)} renderFn Rendering function for the custom **SearchBox** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomSearchBoxWidgetOptions)} Re-usable widget factory for a custom **SearchBox** widget.\n * @example\n * // custom `renderFn` to render the custom SearchBox widget\n * function renderFn(SearchBoxRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     SearchBoxRenderingOptions.widgetParams.containerNode.html('<input type=\"text\" />');\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .on('keyup', function() {\n *         SearchBoxRenderingOptions.refine($(this).val());\n *       });\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .val(SearchBoxRenderingOptions.query);\n *   }\n * }\n *\n * // connect `renderFn` to SearchBox logic\n * var customSearchBox = instantsearch.connectors.connectSearchBox(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customSearchBox({\n *     containerNode: $('#custom-searchbox'),\n *   })\n * ]);\n */\n\nexport default function connectSearchBox(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var queryHook = widgetParams.queryHook;\n\n    function clear(helper) {\n      return function () {\n        helper.setQuery('');\n        helper.search();\n      };\n    }\n\n    return {\n      $$type: 'ais.searchBox',\n      _clear: function _clear() {},\n      _cachedClear: function _cachedClear() {\n        this._clear();\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance;\n        this._cachedClear = this._cachedClear.bind(this);\n        this._clear = clear(helper);\n\n        var setQueryAndSearch = function setQueryAndSearch(query) {\n          if (query !== helper.state.query) {\n            helper.setQuery(query).search();\n          }\n        };\n\n        this._refine = function (query) {\n          if (queryHook) {\n            queryHook(query, setQueryAndSearch);\n            return;\n          }\n\n          setQueryAndSearch(query);\n        };\n\n        renderFn({\n          query: helper.state.query || '',\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance,\n            searchMetadata = _ref2.searchMetadata;\n        this._clear = clear(helper);\n        renderFn({\n          query: helper.state.query || '',\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance,\n          isSearchStalled: searchMetadata.isSearchStalled\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setQueryParameter('query', undefined);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var query = searchParameters.query || '';\n\n        if (query === '' || uiState && uiState.query === query) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          query: query\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        return searchParameters.setQueryParameter('query', uiState.query || '');\n      }\n    };\n  };\n}","function isPrimitive(obj) {\n  return obj !== Object(obj);\n}\n\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {\n    return first === second;\n  }\n\n  if (Object.keys(first).length !== Object.keys(second).length) {\n    return false;\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in second)) {\n      return false;\n    }\n\n    if (!isEqual(first[key], second[key])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default isEqual;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport hogan from 'hogan.js'; // We add all our template helper methods to the template as lambdas. Note\n// that lambdas in Mustache are supposed to accept a second argument of\n// `render` to get the rendered value, not the literal `{{value}}`. But\n// this is currently broken (see https://github.com/twitter/hogan.js/issues/222).\n\nfunction transformHelpersToHogan() {\n  var helpers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var compileOptions = arguments.length > 1 ? arguments[1] : undefined;\n  var data = arguments.length > 2 ? arguments[2] : undefined;\n  return Object.keys(helpers).reduce(function (acc, helperKey) {\n    return _objectSpread({}, acc, _defineProperty({}, helperKey, function () {\n      var _this = this;\n\n      return function (text) {\n        var render = function render(value) {\n          return hogan.compile(value, compileOptions).render(_this);\n        };\n\n        return helpers[helperKey].call(data, text, render);\n      };\n    }));\n  }, {});\n}\n\nfunction renderTemplate(_ref) {\n  var templates = _ref.templates,\n      templateKey = _ref.templateKey,\n      compileOptions = _ref.compileOptions,\n      helpers = _ref.helpers,\n      data = _ref.data;\n  var template = templates[templateKey];\n\n  var templateType = _typeof(template);\n\n  var isTemplateString = templateType === 'string';\n  var isTemplateFunction = templateType === 'function';\n\n  if (!isTemplateString && !isTemplateFunction) {\n    throw new Error(\"Template must be 'string' or 'function', was '\".concat(templateType, \"' (key: \").concat(templateKey, \")\"));\n  }\n\n  if (isTemplateFunction) {\n    return template(data);\n  }\n\n  var transformedHelpers = transformHelpersToHogan(helpers, compileOptions, data);\n  return hogan.compile(template, compileOptions).render(_objectSpread({}, data, {\n    helpers: transformedHelpers\n  })).replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  }).trim();\n}\n\nexport default renderTemplate;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport { renderTemplate, isEqual } from '../../lib/utils';\n\nvar Template =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Template, _Component);\n\n  function Template() {\n    _classCallCheck(this, Template);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Template).apply(this, arguments));\n  }\n\n  _createClass(Template, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !isEqual(this.props.data, nextProps.data) || this.props.templateKey !== nextProps.templateKey || !isEqual(this.props.rootProps, nextProps.rootProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var RootTagName = this.props.rootTagName;\n      var useCustomCompileOptions = this.props.useCustomCompileOptions[this.props.templateKey];\n      var compileOptions = useCustomCompileOptions ? this.props.templatesConfig.compileOptions : {};\n      var content = renderTemplate({\n        templates: this.props.templates,\n        templateKey: this.props.templateKey,\n        compileOptions: compileOptions,\n        helpers: this.props.templatesConfig.helpers,\n        data: this.props.data\n      });\n\n      if (content === null) {\n        // Adds a noscript to the DOM but virtual DOM is null\n        // See http://facebook.github.io/react/docs/component-specs.html#render\n        return null;\n      }\n\n      return h(RootTagName, _extends({}, this.props.rootProps, {\n        dangerouslySetInnerHTML: {\n          __html: content\n        }\n      }));\n    }\n  }]);\n\n  return Template;\n}(Component);\n\nTemplate.defaultProps = {\n  data: {},\n  rootTagName: 'div',\n  useCustomCompileOptions: {},\n  templates: {},\n  templatesConfig: {}\n};\nexport default Template;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport { noop } from '../../lib/utils';\nimport Template from '../Template/Template';\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBox, _Component);\n\n  function SearchBox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SearchBox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      query: _this.props.query,\n      focused: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInput\", function (event) {\n      var _this$props = _this.props,\n          searchAsYouType = _this$props.searchAsYouType,\n          refine = _this$props.refine,\n          onChange = _this$props.onChange;\n      var query = event.target.value;\n\n      if (searchAsYouType) {\n        refine(query);\n      }\n\n      _this.setState({\n        query: query\n      });\n\n      onChange(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      var _this$props2 = _this.props,\n          searchAsYouType = _this$props2.searchAsYouType,\n          refine = _this$props2.refine,\n          onSubmit = _this$props2.onSubmit;\n      event.preventDefault();\n      event.stopPropagation();\n\n      _this.input.blur();\n\n      if (!searchAsYouType) {\n        refine(_this.state.query);\n      }\n\n      onSubmit(event);\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props3 = _this.props,\n          refine = _this$props3.refine,\n          onReset = _this$props3.onReset;\n      var query = '';\n\n      _this.input.focus();\n\n      refine(query);\n\n      _this.setState({\n        query: query\n      });\n\n      onReset(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      _this.setState({\n        focused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      _this.setState({\n        focused: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(SearchBox, [{\n    key: \"resetInput\",\n\n    /**\n     * This public method is used in the RefinementList SFFV search box\n     * to reset the input state when an item is selected.\n     *\n     * @see RefinementList#componentWillReceiveProps\n     * @return {undefined}\n     */\n    value: function resetInput() {\n      this.setState({\n        query: ''\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      /**\n       * when the user is typing, we don't want to replace the query typed\n       * by the user (state.query) with the query exposed by the connector (props.query)\n       * see: https://github.com/algolia/instantsearch.js/issues/4141\n       */\n      if (!this.state.focused && nextProps.query !== this.state.query) {\n        this.setState({\n          query: nextProps.query\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          cssClasses = _this$props4.cssClasses,\n          placeholder = _this$props4.placeholder,\n          autofocus = _this$props4.autofocus,\n          showSubmit = _this$props4.showSubmit,\n          showReset = _this$props4.showReset,\n          showLoadingIndicator = _this$props4.showLoadingIndicator,\n          templates = _this$props4.templates,\n          isSearchStalled = _this$props4.isSearchStalled;\n      return h(\"div\", {\n        className: cssClasses.root\n      }, h(\"form\", {\n        action: \"\",\n        role: \"search\",\n        className: cssClasses.form,\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        onReset: this.onReset\n      }, h(\"input\", {\n        ref: function ref(inputRef) {\n          return _this2.input = inputRef;\n        },\n        value: this.state.query,\n        disabled: this.props.disabled,\n        className: cssClasses.input,\n        type: \"search\",\n        placeholder: placeholder,\n        autoFocus: autofocus,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        autoCapitalize: \"off\",\n        spellCheck: false,\n        maxLength: 512,\n        onInput: this.onInput,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus\n      }), h(Template, {\n        templateKey: \"submit\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.submit,\n          type: 'submit',\n          title: 'Submit the search query.',\n          hidden: !showSubmit\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), h(Template, {\n        templateKey: \"reset\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.reset,\n          type: 'reset',\n          title: 'Clear the search query.',\n          hidden: !(showReset && this.state.query.trim() && !isSearchStalled)\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), showLoadingIndicator && h(Template, {\n        templateKey: \"loadingIndicator\",\n        rootTagName: \"span\",\n        rootProps: {\n          className: cssClasses.loadingIndicator,\n          hidden: !isSearchStalled\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      })));\n    }\n  }]);\n\n  return SearchBox;\n}(Component);\n\n_defineProperty(SearchBox, \"defaultProps\", {\n  query: '',\n  showSubmit: true,\n  showReset: true,\n  showLoadingIndicator: true,\n  autofocus: false,\n  searchAsYouType: true,\n  isSearchStalled: false,\n  disabled: false,\n  onChange: noop,\n  onSubmit: noop,\n  onReset: noop,\n  refine: noop\n});\n\nexport default SearchBox;","/* eslint max-len: 0 */\nexport default {\n  reset: \"\\n<svg class=\\\"{{cssClasses.resetIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"10\\\" height=\\\"10\\\">\\n  <path d=\\\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\\\"></path>\\n</svg>\\n  \",\n  submit: \"\\n<svg class=\\\"{{cssClasses.submitIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"10\\\" height=\\\"10\\\" viewBox=\\\"0 0 40 40\\\">\\n  <path d=\\\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\\\"></path>\\n</svg>\\n  \",\n  loadingIndicator: \"\\n<svg class=\\\"{{cssClasses.loadingIcon}}\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 38 38\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" stroke=\\\"#444\\\">\\n  <g fill=\\\"none\\\" fillRule=\\\"evenodd\\\">\\n    <g transform=\\\"translate(1 1)\\\" strokeWidth=\\\"2\\\">\\n      <circle strokeOpacity=\\\".5\\\" cx=\\\"18\\\" cy=\\\"18\\\" r=\\\"18\\\" />\\n      <path d=\\\"M36 18c0-9.94-8.06-18-18-18\\\">\\n        <animateTransform\\n          attributeName=\\\"transform\\\"\\n          type=\\\"rotate\\\"\\n          from=\\\"0 18 18\\\"\\n          to=\\\"360 18 18\\\"\\n          dur=\\\"1s\\\"\\n          repeatCount=\\\"indefinite\\\"\\n        />\\n      </path>\\n    </g>\\n  </g>\\n</svg>\\n  \"\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport { getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nimport connectSearchBox from '../../connectors/search-box/connectSearchBox';\nimport SearchBox from '../../components/SearchBox/SearchBox';\nimport defaultTemplates from './defaultTemplates';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box'\n});\nvar suit = component('SearchBox');\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      placeholder = _ref.placeholder,\n      templates = _ref.templates,\n      autofocus = _ref.autofocus,\n      searchAsYouType = _ref.searchAsYouType,\n      showReset = _ref.showReset,\n      showSubmit = _ref.showSubmit,\n      showLoadingIndicator = _ref.showLoadingIndicator;\n  return function (_ref2) {\n    var refine = _ref2.refine,\n        query = _ref2.query,\n        isSearchStalled = _ref2.isSearchStalled;\n    render(h(SearchBox, {\n      query: query,\n      placeholder: placeholder,\n      autofocus: autofocus,\n      refine: refine,\n      searchAsYouType: searchAsYouType,\n      templates: templates,\n      showSubmit: showSubmit,\n      showReset: showReset,\n      showLoadingIndicator: showLoadingIndicator,\n      isSearchStalled: isSearchStalled,\n      cssClasses: cssClasses\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} SearchBoxTemplates\n * @property {function|string} submit Template used for displaying the submit. Can accept a function or a Hogan string.\n * @property {function|string} reset Template used for displaying the button. Can accept a function or a Hogan string.\n * @property {function|string} loadingIndicator Template used for displaying the button. Can accept a function or a Hogan string.\n */\n\n/**\n * @typedef {Object} SearchBoxCSSClasses\n * @property {string|string[]} [root] CSS class to add to the wrapping `<div>`\n * @property {string|string[]} [form] CSS class to add to the form\n * @property {string|string[]} [input] CSS class to add to the input.\n * @property {string|string[]} [submit] CSS classes added to the submit button.\n * @property {string|string[]} [submitIcon] CSS classes added to the submit icon.\n * @property {string|string[]} [reset] CSS classes added to the reset button.\n * @property {string|string[]} [resetIcon] CSS classes added to the reset icon.\n * @property {string|string[]} [loadingIndicator] CSS classes added to the loading indicator element.\n * @property {string|string[]} [loadingIcon] CSS classes added to the loading indicator icon.\n */\n\n/**\n * @typedef {Object} SearchBoxWidgetOptions\n * @property {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget\n * @property {string} [placeholder] The placeholder of the input\n * @property {boolean} [autofocus=false] Whether the input should be autofocused\n * @property {boolean} [searchAsYouType=true] If set, trigger the search\n * once `<Enter>` is pressed only.\n * @property {boolean} [showReset=true] Whether to show the reset button\n * @property {boolean} [showSubmit=true] Whether to show the submit button\n * @property {boolean} [showLoadingIndicator=true] Whether to show the loading indicator (replaces the submit if\n * the search is stalled)\n * @property {SearchBoxCSSClasses} [cssClasses] CSS classes to add\n * @property {SearchBoxTemplates} [templates] Templates used for customizing the rendering of the searchbox\n * @property {function} [queryHook] A function that is called every time a new search is done. You\n * will get the query as the first parameter and a search (query) function to call as the second parameter.\n * This `queryHook` can be used to debounce the number of searches done from the search box.\n */\n\n/**\n * The searchbox widget is used to let the user set a text based query.\n *\n * This is usually the  main entry point to start the search in an instantsearch context. For that\n * reason is usually placed on top, and not hidden so that the user can start searching right\n * away.\n *\n * @type {WidgetFactory}\n * @devNovel SearchBox\n * @category basic\n * @param {SearchBoxWidgetOptions} $0 Options used to configure a SearchBox widget.\n * @return {Widget} Creates a new instance of the SearchBox widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.searchBox({\n *     container: '#q',\n *     placeholder: 'Search for products',\n *   })\n * ]);\n */\n\n\nexport default function searchBox() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      _ref3$placeholder = _ref3.placeholder,\n      placeholder = _ref3$placeholder === void 0 ? '' : _ref3$placeholder,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      _ref3$autofocus = _ref3.autofocus,\n      autofocus = _ref3$autofocus === void 0 ? false : _ref3$autofocus,\n      _ref3$searchAsYouType = _ref3.searchAsYouType,\n      searchAsYouType = _ref3$searchAsYouType === void 0 ? true : _ref3$searchAsYouType,\n      _ref3$showReset = _ref3.showReset,\n      showReset = _ref3$showReset === void 0 ? true : _ref3$showReset,\n      _ref3$showSubmit = _ref3.showSubmit,\n      showSubmit = _ref3$showSubmit === void 0 ? true : _ref3$showSubmit,\n      _ref3$showLoadingIndi = _ref3.showLoadingIndicator,\n      showLoadingIndicator = _ref3$showLoadingIndi === void 0 ? true : _ref3$showLoadingIndi,\n      queryHook = _ref3.queryHook,\n      templates = _ref3.templates;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    form: cx(suit({\n      descendantName: 'form'\n    }), userCssClasses.form),\n    input: cx(suit({\n      descendantName: 'input'\n    }), userCssClasses.input),\n    submit: cx(suit({\n      descendantName: 'submit'\n    }), userCssClasses.submit),\n    submitIcon: cx(suit({\n      descendantName: 'submitIcon'\n    }), userCssClasses.submitIcon),\n    reset: cx(suit({\n      descendantName: 'reset'\n    }), userCssClasses.reset),\n    resetIcon: cx(suit({\n      descendantName: 'resetIcon'\n    }), userCssClasses.resetIcon),\n    loadingIndicator: cx(suit({\n      descendantName: 'loadingIndicator'\n    }), userCssClasses.loadingIndicator),\n    loadingIcon: cx(suit({\n      descendantName: 'loadingIcon'\n    }), userCssClasses.loadingIcon)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    placeholder: placeholder,\n    templates: _objectSpread({}, defaultTemplates, {}, templates),\n    autofocus: autofocus,\n    searchAsYouType: searchAsYouType,\n    showReset: showReset,\n    showSubmit: showSubmit,\n    showLoadingIndicator: showLoadingIndicator\n  });\n  var makeWidget = connectSearchBox(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    queryHook: queryHook\n  });\n}","function isSpecialClick(event) {\n  var isMiddleClick = event.button === 1;\n  return isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n}\n\nexport default isSpecialClick;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\nimport Template from '../Template/Template';\n\nfunction RefinementListItem(_ref) {\n  var className = _ref.className,\n      handleClick = _ref.handleClick,\n      facetValueToRefine = _ref.facetValueToRefine,\n      isRefined = _ref.isRefined,\n      templateProps = _ref.templateProps,\n      templateKey = _ref.templateKey,\n      templateData = _ref.templateData,\n      subItems = _ref.subItems;\n  return h(\"li\", {\n    className: className,\n    onClick: function onClick(originalEvent) {\n      handleClick({\n        facetValueToRefine: facetValueToRefine,\n        isRefined: isRefined,\n        originalEvent: originalEvent\n      });\n    }\n  }, h(Template, _extends({}, templateProps, {\n    templateKey: templateKey,\n    data: templateData\n  })), subItems);\n}\n\nexport default RefinementListItem;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { isSpecialClick, isEqual } from '../../lib/utils';\nimport Template from '../Template/Template';\nimport RefinementListItem from './RefinementListItem';\nimport SearchBox from '../SearchBox/SearchBox';\n\nvar RefinementList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RefinementList, _Component);\n\n  function RefinementList(props) {\n    var _this;\n\n    _classCallCheck(this, RefinementList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RefinementList).call(this, props));\n    _this.handleItemClick = _this.handleItemClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RefinementList, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var isStateDifferent = this.state !== nextState;\n      var areFacetValuesDifferent = !isEqual(this.props.facetValues, nextProps.facetValues);\n      return isStateDifferent || areFacetValuesDifferent;\n    }\n  }, {\n    key: \"refine\",\n    value: function refine(facetValueToRefine, isRefined) {\n      this.props.toggleRefinement(facetValueToRefine, isRefined);\n    }\n  }, {\n    key: \"_generateFacetItem\",\n    value: function _generateFacetItem(facetValue) {\n      var _cx;\n\n      var subItems;\n      var hasChildren = facetValue.data && facetValue.data.length > 0;\n\n      if (hasChildren) {\n        var _this$props$cssClasse = this.props.cssClasses,\n            root = _this$props$cssClasse.root,\n            cssClasses = _objectWithoutProperties(_this$props$cssClasse, [\"root\"]);\n\n        subItems = h(RefinementList, _extends({}, this.props, {\n          cssClasses: cssClasses,\n          depth: this.props.depth + 1,\n          facetValues: facetValue.data,\n          showMore: false,\n          className: this.props.cssClasses.childList\n        }));\n      }\n\n      var url = this.props.createURL(facetValue.value);\n\n      var templateData = _objectSpread({}, facetValue, {\n        url: url,\n        attribute: this.props.attribute,\n        cssClasses: this.props.cssClasses,\n        isFromSearch: this.props.isFromSearch\n      });\n\n      var key = facetValue.value;\n\n      if (facetValue.isRefined !== undefined) {\n        key += \"/\".concat(facetValue.isRefined);\n      }\n\n      if (facetValue.count !== undefined) {\n        key += \"/\".concat(facetValue.count);\n      }\n\n      return h(RefinementListItem, {\n        templateKey: \"item\",\n        key: key,\n        facetValueToRefine: facetValue.value,\n        handleClick: this.handleItemClick,\n        isRefined: facetValue.isRefined,\n        className: cx(this.props.cssClasses.item, (_cx = {}, _defineProperty(_cx, this.props.cssClasses.selectedItem, facetValue.isRefined), _defineProperty(_cx, this.props.cssClasses.disabledItem, !facetValue.count), _defineProperty(_cx, this.props.cssClasses.parentItem, hasChildren), _cx)),\n        subItems: subItems,\n        templateData: templateData,\n        templateProps: this.props.templateProps\n      });\n    } // Click events on DOM tree like LABEL > INPUT will result in two click events\n    // instead of one.\n    // No matter the framework, see https://www.google.com/search?q=click+label+twice\n    //\n    // Thus making it hard to distinguish activation from deactivation because both click events\n    // are very close. Debounce is a solution but hacky.\n    //\n    // So the code here checks if the click was done on or in a LABEL. If this LABEL\n    // has a checkbox inside, we ignore the first click event because we will get another one.\n    //\n    // We also check if the click was done inside a link and then e.preventDefault() because we already\n    // handle the url\n    //\n    // Finally, we always stop propagation of the event to avoid multiple levels RefinementLists to fail: click\n    // on child would click on parent also\n\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(_ref) {\n      var facetValueToRefine = _ref.facetValueToRefine,\n          originalEvent = _ref.originalEvent,\n          isRefined = _ref.isRefined;\n\n      if (isSpecialClick(originalEvent)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      if (isRefined && originalEvent.target.parentNode.querySelector('input[type=\"radio\"]:checked')) {\n        // Prevent refinement for being reset if the user clicks on an already checked radio button\n        return;\n      }\n\n      if (originalEvent.target.tagName === 'INPUT') {\n        this.refine(facetValueToRefine, isRefined);\n        return;\n      }\n\n      var parent = originalEvent.target;\n\n      while (parent !== originalEvent.currentTarget) {\n        if (parent.tagName === 'LABEL' && (parent.querySelector('input[type=\"checkbox\"]') || parent.querySelector('input[type=\"radio\"]'))) {\n          return;\n        }\n\n        if (parent.tagName === 'A' && parent.href) {\n          originalEvent.preventDefault();\n        }\n\n        parent = parent.parentNode;\n      }\n\n      originalEvent.stopPropagation();\n      this.refine(facetValueToRefine, isRefined);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.searchBox && !nextProps.isFromSearch) {\n        this.searchBox.resetInput();\n      }\n    }\n  }, {\n    key: \"refineFirstValue\",\n    value: function refineFirstValue() {\n      var firstValue = this.props.facetValues[0];\n\n      if (firstValue) {\n        var actualValue = firstValue.value;\n        this.props.toggleRefinement(actualValue);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // Adding `-lvl0` classes\n      var cssClassList = cx(this.props.cssClasses.list, _defineProperty({}, \"\".concat(this.props.cssClasses.depth).concat(this.props.depth), this.props.cssClasses.depth));\n      var showMoreButtonClassName = cx(this.props.cssClasses.showMore, _defineProperty({}, this.props.cssClasses.disabledShowMore, !(this.props.showMore === true && this.props.canToggleShowMore)));\n      var showMoreButton = this.props.showMore === true && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"showMoreText\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: showMoreButtonClassName,\n          disabled: !this.props.canToggleShowMore,\n          onClick: this.props.toggleShowMore\n        },\n        data: {\n          isShowingMore: this.props.isShowingMore\n        }\n      }));\n      var shouldDisableSearchBox = this.props.searchIsAlwaysActive !== true && !(this.props.isFromSearch || !this.props.hasExhaustiveItems);\n      var searchBox = this.props.searchFacetValues && h(\"div\", {\n        className: this.props.cssClasses.searchBox\n      }, h(SearchBox, {\n        ref: function ref(searchBoxRef) {\n          return _this2.searchBox = searchBoxRef;\n        },\n        placeholder: this.props.searchPlaceholder,\n        disabled: shouldDisableSearchBox,\n        cssClasses: this.props.cssClasses.searchable,\n        templates: this.props.templateProps.templates,\n        onChange: function onChange(event) {\n          return _this2.props.searchFacetValues(event.target.value);\n        },\n        onReset: function onReset() {\n          return _this2.props.searchFacetValues('');\n        },\n        onSubmit: function onSubmit() {\n          return _this2.refineFirstValue();\n        } // This sets the search box to a controlled state because\n        // we don't rely on the `refine` prop but on `onChange`.\n        ,\n        searchAsYouType: false\n      }));\n      var facetValues = this.props.facetValues && this.props.facetValues.length > 0 && h(\"ul\", {\n        className: cssClassList\n      }, this.props.facetValues.map(this._generateFacetItem, this));\n      var noResults = this.props.searchFacetValues && this.props.isFromSearch && this.props.facetValues.length === 0 && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"searchableNoResults\",\n        rootProps: {\n          className: this.props.cssClasses.noResults\n        }\n      }));\n      return h(\"div\", {\n        className: cx(this.props.cssClasses.root, _defineProperty({}, this.props.cssClasses.noRefinementRoot, !this.props.facetValues || this.props.facetValues.length === 0), this.props.className)\n      }, this.props.children, searchBox, facetValues, noResults, showMoreButton);\n    }\n  }]);\n\n  return RefinementList;\n}(Component);\n\nRefinementList.defaultProps = {\n  cssClasses: {},\n  depth: 0\n};\nexport default RefinementList;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT } from '../../lib/escape-highlight';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\n/**\n * @typedef {Object} RefinementListItem\n * @property {string} value The value of the refinement list item.\n * @property {string} label Human-readable value of the refinement list item.\n * @property {number} count Number of matched results after refinement is applied.\n * @property {boolean} isRefined Indicates if the list item is refined.\n */\n\n/**\n * @typedef {Object} CustomRefinementListWidgetOptions\n * @property {string} attribute The name of the attribute in the records.\n * @property {\"and\"|\"or\"} [operator = 'or'] How the filters are combined together.\n * @property {number} [limit = 10] The max number of items to display when\n * `showMoreLimit` is not set or if the widget is showing less value.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] The max number of items to display if the widget\n * is showing more items.\n * @property {string[]|function} [sortBy = ['isRefined', 'count:desc', 'name:asc']] How to sort refinements. Possible values: `count|isRefined|name:asc|name:desc`.\n * @property {boolean} [escapeFacetValues = true] Escapes the content of the facet values.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} RefinementListRenderingOptions\n * @property {RefinementListItem[]} items The list of filtering values returned from Algolia API.\n * @property {function(item.value): string} createURL Creates the next state url for a selected refinement.\n * @property {function(item.value)} refine Action to apply selected refinements.\n * @property {function} searchForItems Searches for values inside the list.\n * @property {boolean} isFromSearch `true` if the values are from an index search.\n * @property {boolean} canRefine `true` if a refinement can be applied.\n * @property {boolean} canToggleShowMore `true` if the toggleShowMore button can be activated (enough items to display more or\n * already displaying more than `limit` items)\n * @property {Object} widgetParams All original `CustomRefinementListWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isShowingMore True if the menu is displaying all the menu items.\n * @property {function} toggleShowMore Toggles the number of values displayed between `limit` and `showMoreLimit`.\n */\n\n/**\n * **RefinementList** connector provides the logic to build a custom widget that will let the\n * user filter the results based on the values of a specific facet.\n *\n * This connector provides a `toggleShowMore()` function to display more or less items and a `refine()`\n * function to select an item.\n * @type {Connector}\n * @param {function(RefinementListRenderingOptions, boolean)} renderFn Rendering function for the custom **RefinementList** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomRefinementListWidgetOptions)} Re-usable widget factory for a custom **RefinementList** widget.\n * @example\n * // custom `renderFn` to render the custom RefinementList widget\n * function renderFn(RefinementListRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .html('<ul></ul>')\n *   }\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() { $(this).off('click'); });\n *\n *   if (RefinementListRenderingOptions.canRefine) {\n *     var list = RefinementListRenderingOptions.items.map(function(item) {\n *       return `\n *         <li data-refine-value=\"${item.value}\">\n *           <input type=\"checkbox\" value=\"${item.value}\" ${item.isRefined ? 'checked' : ''} />\n *           <a href=\"${RefinementListRenderingOptions.createURL(item.value)}\">\n *             ${item.label} (${item.count})\n *           </a>\n *         </li>\n *       `;\n *     });\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() {\n *         $(this).on('click', function(event) {\n *           event.stopPropagation();\n *           event.preventDefault();\n *\n *           RefinementListRenderingOptions.refine($(this).data('refine-value'));\n *         });\n *       });\n *   } else {\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html('');\n *   }\n * }\n *\n * // connect `renderFn` to RefinementList logic\n * var customRefinementList = instantsearch.connectors.connectRefinementList(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customRefinementList({\n *     containerNode: $('#custom-refinement-list-container'),\n *     attribute: 'categories',\n *     limit: 10,\n *   })\n * ]);\n */\n\nexport default function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$operato = widgetParams.operator,\n        operator = _widgetParams$operato === void 0 ? 'or' : _widgetParams$operato,\n        _widgetParams$limit = widgetParams.limit,\n        limit = _widgetParams$limit === void 0 ? 10 : _widgetParams$limit,\n        _widgetParams$showMor = widgetParams.showMore,\n        showMore = _widgetParams$showMor === void 0 ? false : _widgetParams$showMor,\n        _widgetParams$showMor2 = widgetParams.showMoreLimit,\n        showMoreLimit = _widgetParams$showMor2 === void 0 ? 20 : _widgetParams$showMor2,\n        _widgetParams$sortBy = widgetParams.sortBy,\n        sortBy = _widgetParams$sortBy === void 0 ? ['isRefined', 'count:desc', 'name:asc'] : _widgetParams$sortBy,\n        _widgetParams$escapeF = widgetParams.escapeFacetValues,\n        escapeFacetValues = _widgetParams$escapeF === void 0 ? true : _widgetParams$escapeF,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n\n    var formatItems = function formatItems(_ref) {\n      var label = _ref.name,\n          item = _objectWithoutProperties(_ref, [\"name\"]);\n\n      return _objectSpread({}, item, {\n        label: label,\n        value: label,\n        highlighted: label\n      });\n    };\n\n    var _getLimit = function getLimit(isShowingMore) {\n      return isShowingMore ? showMoreLimit : limit;\n    };\n\n    var lastResultsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var searchForFacetValues;\n    var triggerRefine;\n\n    var _render = function render(_ref2) {\n      var items = _ref2.items,\n          state = _ref2.state,\n          createURL = _ref2.createURL,\n          helperSpecializedSearchFacetValues = _ref2.helperSpecializedSearchFacetValues,\n          refine = _ref2.refine,\n          isFromSearch = _ref2.isFromSearch,\n          isFirstSearch = _ref2.isFirstSearch,\n          isShowingMore = _ref2.isShowingMore,\n          toggleShowMore = _ref2.toggleShowMore,\n          instantSearchInstance = _ref2.instantSearchInstance;\n\n      // Compute a specific createURL method able to link to any facet value state change\n      var _createURL = function _createURL(facetValue) {\n        return createURL(state.toggleRefinement(attribute, facetValue));\n      }; // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n      // function\n\n\n      var searchFacetValues = helperSpecializedSearchFacetValues && helperSpecializedSearchFacetValues(state, createURL, helperSpecializedSearchFacetValues, refine, instantSearchInstance, isShowingMore);\n      var canShowLess = isShowingMore && lastResultsFromMainSearch.length > limit;\n      var canShowMore = showMore && !isFromSearch && !hasExhaustiveItems;\n      var canToggleShowMore = canShowLess || canShowMore;\n      renderFn({\n        createURL: _createURL,\n        items: items,\n        refine: refine,\n        searchForItems: searchFacetValues,\n        instantSearchInstance: instantSearchInstance,\n        isFromSearch: isFromSearch,\n        canRefine: isFromSearch || items.length > 0,\n        widgetParams: widgetParams,\n        isShowingMore: isShowingMore,\n        canToggleShowMore: canToggleShowMore,\n        toggleShowMore: toggleShowMore,\n        hasExhaustiveItems: hasExhaustiveItems\n      }, isFirstSearch);\n    };\n    /* eslint-disable max-params */\n\n\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, toggleShowMore) {\n      return function (state, createURL, helperSpecializedSearchFacetValues, toggleRefinement, instantSearchInstance, isShowingMore) {\n        return function (query) {\n          if (query === '' && lastResultsFromMainSearch) {\n            // render with previous data from the helper.\n            _render({\n              items: lastResultsFromMainSearch,\n              state: state,\n              createURL: createURL,\n              helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n              refine: toggleRefinement,\n              isFromSearch: false,\n              isFirstSearch: false,\n              instantSearchInstance: instantSearchInstance,\n              toggleShowMore: toggleShowMore,\n              // and yet it will be\n              isShowingMore: isShowingMore // so we need to restore in the state of show more as well\n\n            });\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query, _getLimit(isShowingMore), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var value = _ref3.value,\n                    item = _objectWithoutProperties(_ref3, [\"value\"]);\n\n                return _objectSpread({}, item, {\n                  value: value,\n                  label: value\n                });\n              }));\n\n              _render({\n                items: normalizedFacetValues,\n                state: state,\n                createURL: createURL,\n                helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n                refine: toggleRefinement,\n                isFromSearch: true,\n                isFirstSearch: false,\n                instantSearchInstance: instantSearchInstance,\n                isShowingMore: isShowingMore\n              });\n            });\n          }\n        };\n      };\n    };\n    /* eslint-enable max-params */\n\n\n    return {\n      $$type: 'ais.refinementList',\n      isShowingMore: false,\n      // Provide the same function to the `renderFn` so that way the user\n      // has to only bind it once when `isFirstRendering` for instance\n      toggleShowMore: function toggleShowMore() {},\n      cachedToggleShowMore: function cachedToggleShowMore() {\n        this.toggleShowMore();\n      },\n      createToggleShowMore: function createToggleShowMore(renderOptions) {\n        var _this = this;\n\n        return function () {\n          _this.isShowingMore = !_this.isShowingMore;\n\n          _this.render(renderOptions);\n        };\n      },\n      getLimit: function getLimit() {\n        return _getLimit(this.isShowingMore);\n      },\n      init: function init(_ref4) {\n        var helper = _ref4.helper,\n            createURL = _ref4.createURL,\n            instantSearchInstance = _ref4.instantSearchInstance;\n        this.cachedToggleShowMore = this.cachedToggleShowMore.bind(this);\n\n        triggerRefine = function triggerRefine(facetValue) {\n          return helper.toggleRefinement(attribute, facetValue).search();\n        };\n\n        searchForFacetValues = createSearchForFacetValues(helper, this.cachedToggleShowMore);\n\n        _render({\n          items: [],\n          state: helper.state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: true,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      render: function render(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance;\n        var facetValues = results.getFacetValues(attribute, {\n          sortBy: sortBy\n        }) || [];\n        var items = transformItems(facetValues.slice(0, this.getLimit()).map(formatItems));\n        var maxValuesPerFacetConfig = state.maxValuesPerFacet;\n        var currentLimit = this.getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n        // if the facets are exhaustive. The only moment we are sure it is exhaustive\n        // is when it is strictly under the number requested unless we know that another\n        // widget has requested more values (maxValuesPerFacet > getLimit()).\n        // Because this is used for making the search of facets unable or not, it is important\n        // to be conservative here.\n\n        hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n        lastResultsFromMainSearch = items;\n        this.toggleShowMore = this.createToggleShowMore(renderOptions);\n\n        _render({\n          items: items,\n          state: state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: false,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      dispose: function dispose(_ref5) {\n        var state = _ref5.state;\n        unmountFn();\n        var withoutMaxValuesPerFacet = state.setQueryParameter('maxValuesPerFacet', undefined);\n\n        if (operator === 'and') {\n          return withoutMaxValuesPerFacet.removeFacet(attribute);\n        }\n\n        return withoutMaxValuesPerFacet.removeDisjunctiveFacet(attribute);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref6) {\n        var searchParameters = _ref6.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n\n        if (!values.length) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          refinementList: _objectSpread({}, uiState.refinementList, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref7) {\n        var uiState = _ref7.uiState;\n        var isDisjunctive = operator === 'or';\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        var withoutRefinements = searchParameters.clearRefinements(attribute);\n        var withFacetConfiguration = isDisjunctive ? withoutRefinements.addDisjunctiveFacet(attribute) : withoutRefinements.addFacet(attribute);\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n\n        if (!values) {\n          var key = isDisjunctive ? 'disjunctiveFacetsRefinements' : 'facetsRefinements';\n          return withMaxValuesPerFacet.setQueryParameters(_defineProperty({}, key, _objectSpread({}, withMaxValuesPerFacet[key], _defineProperty({}, attribute, []))));\n        }\n\n        return values.reduce(function (parameters, value) {\n          return isDisjunctive ? parameters.addDisjunctiveFacetRefinement(attribute, value) : parameters.addFacetRefinement(attribute, value);\n        }, withMaxValuesPerFacet);\n      }\n    };\n  };\n}","export default {\n  item: \"<label class=\\\"{{cssClasses.label}}\\\">\\n  <input type=\\\"checkbox\\\"\\n         class=\\\"{{cssClasses.checkbox}}\\\"\\n         value=\\\"{{value}}\\\"\\n         {{#isRefined}}checked{{/isRefined}} />\\n  <span class=\\\"{{cssClasses.labelText}}\\\">{{#isFromSearch}}{{{highlighted}}}{{/isFromSearch}}{{^isFromSearch}}{{highlighted}}{{/isFromSearch}}</span>\\n  <span class=\\\"{{cssClasses.count}}\\\">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\\n</label>\",\n  showMoreText: \"\\n    {{#isShowingMore}}\\n      Show less\\n    {{/isShowingMore}}\\n    {{^isShowingMore}}\\n      Show more\\n    {{/isShowingMore}}\\n    \",\n  searchableNoResults: 'No results',\n  searchableReset: \"\\n  <svg class=\\\"{{cssClasses.resetIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"10\\\" height=\\\"10\\\">\\n    <path d=\\\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\\\"></path>\\n  </svg>\\n    \",\n  searchableSubmit: \"\\n  <svg class=\\\"{{cssClasses.submitIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"10\\\" height=\\\"10\\\" viewBox=\\\"0 0 40 40\\\">\\n    <path d=\\\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\\\"></path>\\n  </svg>\\n    \",\n  searchableLoadingIndicator: \"\\n  <svg class=\\\"{{cssClasses.loadingIcon}}\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 38 38\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" stroke=\\\"#444\\\">\\n    <g fill=\\\"none\\\" fillRule=\\\"evenodd\\\">\\n      <g transform=\\\"translate(1 1)\\\" strokeWidth=\\\"2\\\">\\n        <circle strokeOpacity=\\\".5\\\" cx=\\\"18\\\" cy=\\\"18\\\" r=\\\"18\\\" />\\n        <path d=\\\"M36 18c0-9.94-8.06-18-18-18\\\">\\n          <animateTransform\\n            attributeName=\\\"transform\\\"\\n            type=\\\"rotate\\\"\\n            from=\\\"0 18 18\\\"\\n            to=\\\"360 18 18\\\"\\n            dur=\\\"1s\\\"\\n            repeatCount=\\\"indefinite\\\"\\n          />\\n        </path>\\n      </g>\\n    </g>\\n  </svg>\\n    \"\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport uniq from './uniq';\n\nfunction prepareTemplates() {\n  var defaultTemplates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var templates = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var allKeys = uniq([].concat(_toConsumableArray(Object.keys(defaultTemplates)), _toConsumableArray(Object.keys(templates))));\n  return allKeys.reduce(function (config, key) {\n    var defaultTemplate = defaultTemplates[key];\n    var customTemplate = templates[key];\n    var isCustomTemplate = customTemplate !== undefined && customTemplate !== defaultTemplate;\n    config.templates[key] = isCustomTemplate ? customTemplate : defaultTemplate;\n    config.useCustomCompileOptions[key] = isCustomTemplate;\n    return config;\n  }, {\n    templates: {},\n    useCustomCompileOptions: {}\n  });\n}\n/**\n * Prepares an object to be passed to the Template widget\n */\n\n\nfunction prepareTemplateProps(_ref) {\n  var defaultTemplates = _ref.defaultTemplates,\n      templates = _ref.templates,\n      templatesConfig = _ref.templatesConfig;\n  var preparedTemplates = prepareTemplates(defaultTemplates, templates);\n  return _objectSpread({\n    templatesConfig: templatesConfig\n  }, preparedTemplates);\n}\n\nexport default prepareTemplateProps;","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport RefinementList from '../../components/RefinementList/RefinementList';\nimport connectRefinementList from '../../connectors/refinement-list/connectRefinementList';\nimport defaultTemplates from './defaultTemplates';\nimport { prepareTemplateProps, getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list'\n});\nvar suit = component('RefinementList');\nvar searchBoxSuit = component('SearchBox');\n/**\n * Transforms the searchable templates by removing the `searchable` prefix.\n *\n * This makes them usable in the `SearchBox` component.\n *\n * @param {object} templates The widget templates\n * @returns {object} the formatted templates\n */\n\nfunction transformTemplates(templates) {\n  var allTemplates = _objectSpread({}, templates, {\n    submit: templates.searchableSubmit,\n    reset: templates.searchableReset,\n    loadingIndicator: templates.searchableLoadingIndicator\n  });\n\n  var searchableReset = allTemplates.searchableReset,\n      searchableSubmit = allTemplates.searchableSubmit,\n      searchableLoadingIndicator = allTemplates.searchableLoadingIndicator,\n      transformedTemplates = _objectWithoutProperties(allTemplates, [\"searchableReset\", \"searchableSubmit\", \"searchableLoadingIndicator\"]);\n\n  return transformedTemplates;\n}\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      templates = _ref.templates,\n      renderState = _ref.renderState,\n      showMore = _ref.showMore,\n      searchable = _ref.searchable,\n      searchablePlaceholder = _ref.searchablePlaceholder,\n      searchableIsAlwaysActive = _ref.searchableIsAlwaysActive;\n  return function (_ref2, isFirstRendering) {\n    var refine = _ref2.refine,\n        items = _ref2.items,\n        createURL = _ref2.createURL,\n        searchForItems = _ref2.searchForItems,\n        isFromSearch = _ref2.isFromSearch,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        toggleShowMore = _ref2.toggleShowMore,\n        isShowingMore = _ref2.isShowingMore,\n        hasExhaustiveItems = _ref2.hasExhaustiveItems,\n        canToggleShowMore = _ref2.canToggleShowMore;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    render(h(RefinementList, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      facetValues: items,\n      templateProps: renderState.templateProps,\n      toggleRefinement: refine,\n      searchFacetValues: searchable ? searchForItems : undefined,\n      searchPlaceholder: searchablePlaceholder,\n      searchIsAlwaysActive: searchableIsAlwaysActive,\n      isFromSearch: isFromSearch,\n      showMore: showMore && !isFromSearch && items.length > 0,\n      toggleShowMore: toggleShowMore,\n      isShowingMore: isShowingMore,\n      hasExhaustiveItems: hasExhaustiveItems,\n      canToggleShowMore: canToggleShowMore\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} RefinementListTemplates\n * @property  {string|function(RefinementListItemData):string} [item] Item template, provided with `label`, `highlighted`, `value`, `count`, `isRefined`, `url` data properties.\n * @property {string|function} [searchableNoResults] Templates to use for search for facet values.\n * @property {string|function} [showMoreText] Template used for the show more text, provided with `isShowingMore` data property.\n */\n\n/**\n * @typedef {Object} RefinementListItemData\n * @property {number} count The number of occurrences of the facet in the result set.\n * @property {boolean} isRefined True if the value is selected.\n * @property {string} label The label to display.\n * @property {string} value The value used for refining.\n * @property {string} highlighted The label highlighted (when using search for facet values). This value is displayed in the default template.\n * @property {string} url The url with this refinement selected.\n * @property {object} cssClasses Object containing all the classes computed for the item.\n */\n\n/**\n * @typedef {Object} RefinementListCSSClasses\n * @property {string|string[]} [root] CSS class to add to the root element.\n * @property {string|string[]} [noRefinementRoot] CSS class to add to the root element when no refinements.\n * @property {string|string[]} [noResults] CSS class to add to the root element with no results.\n * @property {string|string[]} [list] CSS class to add to the list element.\n * @property {string|string[]} [item] CSS class to add to each item element.\n * @property {string|string[]} [selectedItem] CSS class to add to each selected element.\n * @property {string|string[]} [label] CSS class to add to each label element (when using the default template).\n * @property {string|string[]} [checkbox] CSS class to add to each checkbox element (when using the default template).\n * @property {string|string[]} [labelText] CSS class to add to each label text element.\n * @property {string|string[]} [showMore] CSS class to add to the show more element\n * @property {string|string[]} [disabledShowMore] CSS class to add to the disabledshow more element\n * @property {string|string[]} [count] CSS class to add to each count element (when using the default template).\n */\n\n/**\n * @typedef {Object} RefinementListWidgetOptions\n * @property {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget.\n * @property {string} attribute Name of the attribute for faceting.\n * @property {\"and\"|\"or\"} [operator=\"or\"] How to apply refinements. Possible values: `or`, `and`\n * @property {string[]|function} [sortBy=[\"isRefined\", \"count:desc\", \"name:asc\"]] How to sort refinements. Possible values: `count:asc` `count:desc` `name:asc` `name:desc` `isRefined`.\n *\n * You can also use a sort function that behaves like the standard Javascript [compareFunction](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Syntax).\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n * @property {boolean} [searchable=false] Add a search input to let the user search for more facet values. In order to make this feature work, you need to make the attribute searchable [using the API](https://www.algolia.com/doc/guides/searching/faceting/?language=js#declaring-a-searchable-attribute-for-faceting) or [the dashboard](https://www.algolia.com/explorer/display/).\n * @property {number} [limit = 10] The minimum number of facet values to retrieve.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] The max number of items to display if the widget\n * @property {string} [searchablePlaceholder] Value of the search field placeholder.\n * @property {boolean} [searchableIsAlwaysActive=true] When `false` the search field will become disabled if\n * there are less items to display than the `options.limit`, otherwise the search field is always usable.\n * @property {boolean} [searchableEscapeFacetValues=true] When activated, it will escape the facet values that are returned\n * from Algolia. In this case, the surrounding tags will always be `<mark></mark>`.\n * @property {RefinementListTemplates} [templates] Templates to use for the widget.\n * @property {RefinementListCSSClasses} [cssClasses] CSS classes to add to the wrapping elements.\n */\n\n/**\n * The refinement list widget is one of the most common widget that you can find\n * in a search UI. With this widget, the user can filter the dataset based on facets.\n *\n * The refinement list displays only the most relevant facets for the current search\n * context. The sort option only affects the facet that are returned by the engine,\n * not which facets are returned.\n *\n * This widget also implements search for facet values, which is a mini search inside the\n * values of the facets. This makes easy to deal with uncommon facet values.\n *\n * @requirements\n *\n * The attribute passed to `attribute` must be declared as an\n * [attribute for faceting](https://www.algolia.com/doc/guides/searching/faceting/#declaring-attributes-for-faceting)\n * in your Algolia settings.\n *\n * If you also want to use search for facet values on this attribute, you need to make it searchable using the [dashboard](https://www.algolia.com/explorer/display/) or using the [API](https://www.algolia.com/doc/guides/searching/faceting/#search-for-facet-values).\n *\n * @type {WidgetFactory}\n * @devNovel RefinementList\n * @category filter\n * @param {RefinementListWidgetOptions} $0 The RefinementList widget options that you use to customize the widget.\n * @return {Widget} Creates a new instance of the RefinementList widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.refinementList({\n *     container: '#brands',\n *     attribute: 'brand',\n *     operator: 'or',\n *     limit: 10,\n *   })\n * ]);\n */\n\n\nexport default function refinementList() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      attribute = _ref3.attribute,\n      operator = _ref3.operator,\n      sortBy = _ref3.sortBy,\n      limit = _ref3.limit,\n      showMore = _ref3.showMore,\n      showMoreLimit = _ref3.showMoreLimit,\n      _ref3$searchable = _ref3.searchable,\n      searchable = _ref3$searchable === void 0 ? false : _ref3$searchable,\n      _ref3$searchablePlace = _ref3.searchablePlaceholder,\n      searchablePlaceholder = _ref3$searchablePlace === void 0 ? 'Search...' : _ref3$searchablePlace,\n      _ref3$searchableEscap = _ref3.searchableEscapeFacetValues,\n      searchableEscapeFacetValues = _ref3$searchableEscap === void 0 ? true : _ref3$searchableEscap,\n      _ref3$searchableIsAlw = _ref3.searchableIsAlwaysActive,\n      searchableIsAlwaysActive = _ref3$searchableIsAlw === void 0 ? true : _ref3$searchableIsAlw,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      _ref3$templates = _ref3.templates,\n      userTemplates = _ref3$templates === void 0 ? defaultTemplates : _ref3$templates,\n      transformItems = _ref3.transformItems;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var escapeFacetValues = searchable ? Boolean(searchableEscapeFacetValues) : false;\n  var containerNode = getContainerNode(container);\n  var templates = transformTemplates(_objectSpread({}, defaultTemplates, {}, userTemplates));\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    searchBox: cx(suit({\n      descendantName: 'searchBox'\n    }), userCssClasses.searchBox),\n    label: cx(suit({\n      descendantName: 'label'\n    }), userCssClasses.label),\n    checkbox: cx(suit({\n      descendantName: 'checkbox'\n    }), userCssClasses.checkbox),\n    labelText: cx(suit({\n      descendantName: 'labelText'\n    }), userCssClasses.labelText),\n    count: cx(suit({\n      descendantName: 'count'\n    }), userCssClasses.count),\n    noResults: cx(suit({\n      descendantName: 'noResults'\n    }), userCssClasses.noResults),\n    showMore: cx(suit({\n      descendantName: 'showMore'\n    }), userCssClasses.showMore),\n    disabledShowMore: cx(suit({\n      descendantName: 'showMore',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledShowMore),\n    searchable: {\n      root: cx(searchBoxSuit(), userCssClasses.searchableRoot),\n      form: cx(searchBoxSuit({\n        descendantName: 'form'\n      }), userCssClasses.searchableForm),\n      input: cx(searchBoxSuit({\n        descendantName: 'input'\n      }), userCssClasses.searchableInput),\n      submit: cx(searchBoxSuit({\n        descendantName: 'submit'\n      }), userCssClasses.searchableSubmit),\n      submitIcon: cx(searchBoxSuit({\n        descendantName: 'submitIcon'\n      }), userCssClasses.searchableSubmitIcon),\n      reset: cx(searchBoxSuit({\n        descendantName: 'reset'\n      }), userCssClasses.searchableReset),\n      resetIcon: cx(searchBoxSuit({\n        descendantName: 'resetIcon'\n      }), userCssClasses.searchableResetIcon),\n      loadingIndicator: cx(searchBoxSuit({\n        descendantName: 'loadingIndicator'\n      }), userCssClasses.searchableLoadingIndicator),\n      loadingIcon: cx(searchBoxSuit({\n        descendantName: 'loadingIcon'\n      }), userCssClasses.searchableLoadingIcon)\n    }\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    templates: templates,\n    renderState: {},\n    searchable: searchable,\n    searchablePlaceholder: searchablePlaceholder,\n    searchableIsAlwaysActive: searchableIsAlwaysActive,\n    showMore: showMore\n  });\n  var makeWidget = connectRefinementList(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    attribute: attribute,\n    operator: operator,\n    limit: limit,\n    showMore: showMore,\n    showMoreLimit: showMoreLimit,\n    sortBy: sortBy,\n    escapeFacetValues: escapeFacetValues,\n    transformItems: transformItems\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addAbsolutePosition = function addAbsolutePosition(hits, page, hitsPerPage) {\n  return hits.map(function (hit, idx) {\n    return _objectSpread({}, hit, {\n      __position: hitsPerPage * page + idx + 1\n    });\n  });\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addQueryID = function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n\n  return hits.map(function (hit) {\n    return _objectSpread({}, hit, {\n      __queryID: queryID\n    });\n  });\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport escapeHits, { TAG_PLACEHOLDER } from '../../lib/escape-highlight';\nimport { checkRendering, createDocumentationMessageGenerator, addAbsolutePosition, addQueryID, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits',\n  connector: true\n});\n/**\n * @typedef {Object} HitsRenderingOptions\n * @property {Object[]} hits The matched hits from Algolia API.\n * @property {Object} results The complete results response from Algolia API.\n * @property {Object} widgetParams All original widget options forwarded to the `renderFn`.\n */\n\n/**\n * @typedef {Object} CustomHitsWidgetOptions\n * @property {boolean} [escapeHTML = true] Whether to escape HTML tags from `hits[i]._highlightResult`.\n * @property {function(Object[]):Object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * **Hits** connector provides the logic to create custom widgets that will render the results retrieved from Algolia.\n * @type {Connector}\n * @param {function(HitsRenderingOptions, boolean)} renderFn Rendering function for the custom **Hits** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomHitsWidgetOptions)} Re-usable widget factory for a custom **Hits** widget.\n * @example\n * // custom `renderFn` to render the custom Hits widget\n * function renderFn(HitsRenderingOptions) {\n *   HitsRenderingOptions.widgetParams.containerNode.html(\n *     HitsRenderingOptions.hits.map(function(hit) {\n *       return '<div>' + hit._highlightResult.name.value + '</div>';\n *     })\n *   );\n * }\n *\n * // connect `renderFn` to Hits logic\n * var customHits = instantsearch.connectors.connectHits(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customHits({\n *     containerNode: $('#custom-hits-container'),\n *   })\n * ]);\n */\n\nexport default function connectHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _widgetParams$escapeH = widgetParams.escapeHTML,\n        escapeHTML = _widgetParams$escapeH === void 0 ? true : _widgetParams$escapeH,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n    return {\n      $$type: 'ais.hits',\n      init: function init(_ref) {\n        var instantSearchInstance = _ref.instantSearchInstance;\n        renderFn({\n          hits: [],\n          results: undefined,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref2) {\n        var results = _ref2.results,\n            instantSearchInstance = _ref2.instantSearchInstance;\n\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        var initialEscaped = results.hits.__escaped;\n        results.hits = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        results.hits = addQueryID(results.hits, results.queryID);\n        results.hits = transformItems(results.hits); // Make sure the escaped tag stays, even after mapping over the hits.\n        // This prevents the hits from being double-escaped if there are multiple\n        // hits widgets mounted on the page.\n\n        results.hits.__escaped = initialEscaped;\n        renderFn({\n          hits: results.hits,\n          results: results,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(Object.keys(TAG_PLACEHOLDER).reduce(function (acc, key) {\n          return _objectSpread({}, acc, _defineProperty({}, key, undefined));\n        }, {}));\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state) {\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(TAG_PLACEHOLDER);\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Template from '../Template/Template';\n\nvar Hits = function Hits(_ref) {\n  var results = _ref.results,\n      hits = _ref.hits,\n      cssClasses = _ref.cssClasses,\n      templateProps = _ref.templateProps;\n\n  if (results.hits.length === 0) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"empty\",\n      rootProps: {\n        className: cx(cssClasses.root, cssClasses.emptyRoot)\n      },\n      data: results\n    }));\n  }\n\n  return h(\"div\", {\n    className: cssClasses.root\n  }, h(\"ol\", {\n    className: cssClasses.list\n  }, hits.map(function (hit, position) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"item\",\n      rootTagName: \"li\",\n      rootProps: {\n        className: cssClasses.item\n      },\n      key: hit.objectID,\n      data: _objectSpread({}, hit, {\n        __hitIndex: position\n      })\n    }));\n  })));\n};\n\nHits.defaultProps = {\n  results: {\n    hits: []\n  },\n  hits: []\n};\nexport default Hits;","export default {\n  empty: 'No results',\n  item: function item(data) {\n    return JSON.stringify(data, null, 2);\n  }\n};","/** @jsx h */\nimport { h } from 'preact';\nimport { readDataAttributes, hasDataAttributes } from '../../helpers/insights';\n\nvar findInsightsTarget = function findInsightsTarget(startElement, endElement) {\n  var element = startElement;\n\n  while (element && !hasDataAttributes(element)) {\n    if (element === endElement) {\n      return null;\n    }\n\n    element = element.parentElement;\n  }\n\n  return element;\n};\n\nvar insightsListener = function insightsListener(BaseComponent) {\n  function WithInsightsListener(props) {\n    var handleClick = function handleClick(event) {\n      var insightsTarget = findInsightsTarget(event.target, event.currentTarget);\n      if (!insightsTarget) return;\n\n      var _readDataAttributes = readDataAttributes(insightsTarget),\n          method = _readDataAttributes.method,\n          payload = _readDataAttributes.payload;\n\n      props.insights(method, payload);\n    };\n\n    return h(\"div\", {\n      onClick: handleClick\n    }, h(BaseComponent, props));\n  }\n\n  return WithInsightsListener;\n};\n\nexport default insightsListener;","// We aren't using the native `Array.prototype.find` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `find` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.find` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nfunction find(items, predicate, thisArg) {\n  if (!Array.prototype.find) {\n    return items.filter(predicate, thisArg)[0];\n  }\n\n  return items.find(predicate, thisArg);\n}\n\nexport default find;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { uniq, find, createDocumentationMessageGenerator } from '../utils';\n\nvar getSelectedHits = function getSelectedHits(hits, selectedObjectIDs) {\n  return selectedObjectIDs.map(function (objectID) {\n    var hit = find(hits, function (h) {\n      return h.objectID === objectID;\n    });\n\n    if (typeof hit === 'undefined') {\n      throw new Error(\"Could not find objectID \\\"\".concat(objectID, \"\\\" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.\"));\n    }\n\n    return hit;\n  });\n};\n\nvar getQueryID = function getQueryID(selectedHits) {\n  var queryIDs = uniq(selectedHits.map(function (hit) {\n    return hit.__queryID;\n  }));\n\n  if (queryIDs.length > 1) {\n    throw new Error('Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.');\n  }\n\n  var queryID = queryIDs[0];\n\n  if (typeof queryID !== 'string') {\n    throw new Error(\"Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\\n\\nSee: https://alg.li/lNiZZ7\");\n  }\n\n  return queryID;\n};\n\nvar getPositions = function getPositions(selectedHits) {\n  return selectedHits.map(function (hit) {\n    return hit.__position;\n  });\n};\n\nexport var inferPayload = function inferPayload(_ref) {\n  var method = _ref.method,\n      results = _ref.results,\n      hits = _ref.hits,\n      objectIDs = _ref.objectIDs;\n  var index = results.index;\n  var selectedHits = getSelectedHits(hits, objectIDs);\n  var queryID = getQueryID(selectedHits);\n\n  switch (method) {\n    case 'clickedObjectIDsAfterSearch':\n      {\n        var positions = getPositions(selectedHits);\n        return {\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDs,\n          positions: positions\n        };\n      }\n\n    case 'convertedObjectIDsAfterSearch':\n      return {\n        index: index,\n        queryID: queryID,\n        objectIDs: objectIDs\n      };\n\n    default:\n      throw new Error(\"Unsupported method passed to insights: \\\"\".concat(method, \"\\\".\"));\n  }\n};\n\nvar wrapInsightsClient = function wrapInsightsClient(aa, results, hits) {\n  return function (method, payload) {\n    if (!aa) {\n      var withInstantSearchUsage = createDocumentationMessageGenerator({\n        name: 'instantsearch'\n      });\n      throw new Error(withInstantSearchUsage('The `insightsClient` option has not been provided to `instantsearch`.'));\n    }\n\n    if (!Array.isArray(payload.objectIDs)) {\n      throw new TypeError('Expected `objectIDs` to be an array.');\n    }\n\n    var inferredPayload = inferPayload({\n      method: method,\n      results: results,\n      hits: hits,\n      objectIDs: payload.objectIDs\n    });\n    aa(method, _objectSpread({}, inferredPayload, {}, payload));\n  };\n};\n\nexport default function withInsights(connector) {\n  var wrapRenderFn = function wrapRenderFn(renderFn) {\n    return function (renderOptions, isFirstRender) {\n      var results = renderOptions.results,\n          hits = renderOptions.hits,\n          instantSearchInstance = renderOptions.instantSearchInstance;\n\n      if (results && hits && instantSearchInstance) {\n        var insights = wrapInsightsClient(instantSearchInstance.insightsClient, results, hits);\n        return renderFn(_objectSpread({}, renderOptions, {\n          insights: insights\n        }), isFirstRender);\n      }\n\n      return renderFn(renderOptions, isFirstRender);\n    };\n  };\n\n  return function (renderFn, unmountFn) {\n    return connector(wrapRenderFn(renderFn), unmountFn);\n  };\n}","/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport connectHits from '../../connectors/hits/connectHits';\nimport Hits from '../../components/Hits/Hits';\nimport defaultTemplates from './defaultTemplates';\nimport { prepareTemplateProps, getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nimport { withInsights, withInsightsListener } from '../../lib/insights';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits'\n});\nvar suit = component('Hits');\nvar HitsWithInsightsListener = withInsightsListener(Hits);\n\nvar renderer = function renderer(_ref) {\n  var renderState = _ref.renderState,\n      cssClasses = _ref.cssClasses,\n      containerNode = _ref.containerNode,\n      templates = _ref.templates;\n  return function (_ref2, isFirstRendering) {\n    var receivedHits = _ref2.hits,\n        results = _ref2.results,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        insights = _ref2.insights;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        defaultTemplates: defaultTemplates,\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    render(h(HitsWithInsightsListener, {\n      cssClasses: cssClasses,\n      hits: receivedHits,\n      results: results,\n      templateProps: renderState.templateProps,\n      insights: insights\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} HitsCSSClasses\n * @property {string|string[]} [root] CSS class to add to the wrapping element.\n * @property {string|string[]} [emptyRoot] CSS class to add to the wrapping element when no results.\n * @property {string|string[]} [list] CSS class to add to the list of results.\n * @property {string|string[]} [item] CSS class to add to each result.\n */\n\n/**\n * @typedef {Object} HitsTemplates\n * @property {string|function(object):string} [empty=''] Template to use when there are no results.\n * @property {string|function(object):string} [item=''] Template to use for each result. This template will receive an object containing a single record. The record will have a new property `__hitIndex` for the position of the record in the list of displayed hits.\n */\n\n/**\n * @typedef {Object} HitsWidgetOptions\n * @property {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget.\n * @property {HitsTemplates} [templates] Templates to use for the widget.\n * @property {HitsCSSClasses} [cssClasses] CSS classes to add.\n * @property {boolean} [escapeHTML = true] Escape HTML entities from hits string values.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * Display the list of results (hits) from the current search.\n *\n * This is a traditional display of the hits. It has to be implemented\n * together with a pagination widget, to let the user browse the results\n * beyond the first page.\n * @type {WidgetFactory}\n * @devNovel Hits\n * @category basic\n * @param {HitsWidgetOptions} $0 Options of the Hits widget.\n * @return {Widget} A new instance of Hits widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.hits({\n *     container: '#hits-container',\n *     templates: {\n *       empty: 'No results',\n *       item: '<strong>Hit {{objectID}}</strong>: {{{_highlightResult.name.value}}}'\n *     },\n *     transformItems: items => items.map(item => item),\n *   })\n * ]);\n */\n\n\nexport default function hits(_ref3) {\n  var container = _ref3.container,\n      escapeHTML = _ref3.escapeHTML,\n      transformItems = _ref3.transformItems,\n      _ref3$templates = _ref3.templates,\n      templates = _ref3$templates === void 0 ? defaultTemplates : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    emptyRoot: cx(suit({\n      modifierName: 'empty'\n    }), userCssClasses.emptyRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    renderState: {},\n    templates: templates\n  });\n  var makeHits = withInsights(connectHits)(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeHits({\n    escapeHTML: escapeHTML,\n    transformItems: transformItems\n  });\n}","/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\n\nfunction PaginationLink(_ref) {\n  var cssClasses = _ref.cssClasses,\n      label = _ref.label,\n      ariaLabel = _ref.ariaLabel,\n      url = _ref.url,\n      isDisabled = _ref.isDisabled,\n      handleClick = _ref.handleClick,\n      pageNumber = _ref.pageNumber;\n\n  if (isDisabled) {\n    return h(\"li\", {\n      className: cssClasses.item\n    }, h(\"span\", {\n      className: cssClasses.link,\n      dangerouslySetInnerHTML: {\n        __html: label\n      }\n    }));\n  }\n\n  return h(\"li\", {\n    className: cssClasses.item\n  }, h(\"a\", {\n    className: cssClasses.link,\n    \"aria-label\": ariaLabel,\n    href: url,\n    onClick: function onClick(event) {\n      return handleClick(pageNumber, event);\n    },\n    dangerouslySetInnerHTML: {\n      __html: label\n    }\n  }));\n}\n\nexport default PaginationLink;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport PaginationLink from './PaginationLink';\nimport { isSpecialClick } from '../../lib/utils';\n\nvar Pagination =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Pagination, _Component);\n\n  function Pagination() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Pagination);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Pagination)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (pageNumber, event) {\n      if (isSpecialClick(event)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      event.preventDefault();\n\n      _this.props.setCurrentPage(pageNumber);\n    });\n\n    return _this;\n  }\n\n  _createClass(Pagination, [{\n    key: \"pageLink\",\n    value: function pageLink(_ref) {\n      var label = _ref.label,\n          ariaLabel = _ref.ariaLabel,\n          pageNumber = _ref.pageNumber,\n          _ref$additionalClassN = _ref.additionalClassName,\n          additionalClassName = _ref$additionalClassN === void 0 ? null : _ref$additionalClassN,\n          _ref$isDisabled = _ref.isDisabled,\n          isDisabled = _ref$isDisabled === void 0 ? false : _ref$isDisabled,\n          _ref$isSelected = _ref.isSelected,\n          isSelected = _ref$isSelected === void 0 ? false : _ref$isSelected,\n          createURL = _ref.createURL;\n      var cssClasses = {\n        item: cx(this.props.cssClasses.item, additionalClassName),\n        link: this.props.cssClasses.link\n      };\n\n      if (isDisabled) {\n        cssClasses.item = cx(cssClasses.item, this.props.cssClasses.disabledItem);\n      } else if (isSelected) {\n        cssClasses.item = cx(cssClasses.item, this.props.cssClasses.selectedItem);\n      }\n\n      var url = createURL && !isDisabled ? createURL(pageNumber) : '#';\n      return h(PaginationLink, {\n        ariaLabel: ariaLabel,\n        cssClasses: cssClasses,\n        handleClick: this.handleClick,\n        isDisabled: isDisabled,\n        key: label + pageNumber + ariaLabel,\n        label: label,\n        pageNumber: pageNumber,\n        url: url\n      });\n    }\n  }, {\n    key: \"previousPageLink\",\n    value: function previousPageLink(_ref2) {\n      var isFirstPage = _ref2.isFirstPage,\n          currentPage = _ref2.currentPage,\n          createURL = _ref2.createURL;\n      return this.pageLink({\n        ariaLabel: 'Previous',\n        additionalClassName: this.props.cssClasses.previousPageItem,\n        isDisabled: this.props.nbHits === 0 || isFirstPage,\n        label: this.props.templates.previous,\n        pageNumber: currentPage - 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"nextPageLink\",\n    value: function nextPageLink(_ref3) {\n      var isLastPage = _ref3.isLastPage,\n          currentPage = _ref3.currentPage,\n          createURL = _ref3.createURL;\n      return this.pageLink({\n        ariaLabel: 'Next',\n        additionalClassName: this.props.cssClasses.nextPageItem,\n        isDisabled: this.props.nbHits === 0 || isLastPage,\n        label: this.props.templates.next,\n        pageNumber: currentPage + 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"firstPageLink\",\n    value: function firstPageLink(_ref4) {\n      var isFirstPage = _ref4.isFirstPage,\n          createURL = _ref4.createURL;\n      return this.pageLink({\n        ariaLabel: 'First',\n        additionalClassName: this.props.cssClasses.firstPageItem,\n        isDisabled: this.props.nbHits === 0 || isFirstPage,\n        label: this.props.templates.first,\n        pageNumber: 0,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"lastPageLink\",\n    value: function lastPageLink(_ref5) {\n      var isLastPage = _ref5.isLastPage,\n          nbPages = _ref5.nbPages,\n          createURL = _ref5.createURL;\n      return this.pageLink({\n        ariaLabel: 'Last',\n        additionalClassName: this.props.cssClasses.lastPageItem,\n        isDisabled: this.props.nbHits === 0 || isLastPage,\n        label: this.props.templates.last,\n        pageNumber: nbPages - 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"pages\",\n    value: function pages(_ref6) {\n      var _this2 = this;\n\n      var currentPage = _ref6.currentPage,\n          _pages = _ref6.pages,\n          createURL = _ref6.createURL;\n      return _pages.map(function (pageNumber) {\n        return _this2.pageLink({\n          ariaLabel: pageNumber + 1,\n          additionalClassName: _this2.props.cssClasses.pageItem,\n          isSelected: pageNumber === currentPage,\n          label: pageNumber + 1,\n          pageNumber: pageNumber,\n          createURL: createURL\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        className: cx(this.props.cssClasses.root, _defineProperty({}, this.props.cssClasses.noRefinementRoot, this.props.nbPages <= 1))\n      }, h(\"ul\", {\n        className: this.props.cssClasses.list\n      }, this.props.showFirst && this.firstPageLink(this.props), this.props.showPrevious && this.previousPageLink(this.props), this.pages(this.props), this.props.showNext && this.nextPageLink(this.props), this.props.showLast && this.lastPageLink(this.props)));\n    }\n  }]);\n\n  return Pagination;\n}(Component);\n\nPagination.defaultProps = {\n  nbHits: 0,\n  currentPage: 0,\n  nbPages: 0\n};\nexport default Pagination;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction range(_ref) {\n  var _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return (start + current) * limitStep;\n  });\n}\n\nexport default range;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { range } from '../../lib/utils';\n\nvar Paginator =\n/*#__PURE__*/\nfunction () {\n  function Paginator(params) {\n    _classCallCheck(this, Paginator);\n\n    this.currentPage = params.currentPage;\n    this.total = params.total;\n    this.padding = params.padding;\n  }\n\n  _createClass(Paginator, [{\n    key: \"pages\",\n    value: function pages() {\n      var total = this.total,\n          currentPage = this.currentPage,\n          padding = this.padding;\n      if (total === 0) return [0];\n      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);\n\n      if (totalDisplayedPages === total) {\n        return range({\n          end: total\n        });\n      }\n\n      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);\n      var paddingRight = totalDisplayedPages - paddingLeft;\n      var first = currentPage - paddingLeft;\n      var last = currentPage + paddingRight;\n      return range({\n        start: first,\n        end: last\n      });\n    }\n  }, {\n    key: \"nbPagesDisplayed\",\n    value: function nbPagesDisplayed(padding, total) {\n      return Math.min(2 * padding + 1, total);\n    }\n  }, {\n    key: \"calculatePaddingLeft\",\n    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {\n      if (current <= padding) {\n        return current;\n      }\n\n      if (current >= total - padding) {\n        return totalDisplayedPages - (total - current);\n      }\n\n      return padding;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.currentPage === this.total - 1;\n    }\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.currentPage === 0;\n    }\n  }]);\n\n  return Paginator;\n}();\n\nexport default Paginator;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport Paginator from './Paginator';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination',\n  connector: true\n});\n/**\n * @typedef {Object} CustomPaginationWidgetOptions\n * @property {number} [totalPages] The total number of pages to browse.\n * @property {number} [padding = 3] The padding of pages to show around the current page\n */\n\n/**\n * @typedef {Object} PaginationRenderingOptions\n * @property {function(page): string} createURL Creates URLs for the next state, the number is the page to generate the URL for.\n * @property {number} currentRefinement The number of the page currently displayed.\n * @property {number} nbHits The number of hits computed for the last query (can be approximated).\n * @property {number} nbPages The number of pages for the result set.\n * @property {number[]} pages The actual pages relevant to the current situation and padding\n * @property {boolean} isFirstPage true if the current page is also the first page\n * @property {boolean} isLastPage true if the current page is also the last page\n * @property {function(page)} refine Sets the current page and trigger a search.\n * @property {Object} widgetParams All original `CustomPaginationWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Pagination** connector provides the logic to build a widget that will let the user\n * choose the current page of the results.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n *\n * @type {Connector}\n * @param {function(PaginationRenderingOptions, boolean)} renderFn Rendering function for the custom **Pagination** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomPaginationWidgetOptions)} Re-usable widget factory for a custom **Pagination** widget.\n * @example\n * // custom `renderFn` to render the custom Pagination widget\n * function renderFn(PaginationRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     PaginationRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   // remove event listeners before replacing markup\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var pages = PaginationRenderingOptions.pages\n *     .map(function(page) {\n *       return '<li style=\"display: inline-block; margin-right: 10px;\">' +\n *         '<a href=\"' + PaginationRenderingOptions.createURL(page) + '\" data-page=\"' + page + '\">' +\n *         (parseInt(page) + 1) + '</a></li>';\n *     });\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('ul')\n *     .html(pages);\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         PaginationRenderingOptions.refine($(this).data('page'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to Pagination logic\n * var customPagination = instantsearch.connectors.connectPagination(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customPagination({\n *     containerNode: $('#custom-pagination-container'),\n *     totalPages: 20,\n *     padding: 4,\n *   })\n * ]);\n */\n\nexport default function connectPagination(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var totalPages = widgetParams.totalPages,\n        _widgetParams$padding = widgetParams.padding,\n        padding = _widgetParams$padding === void 0 ? 3 : _widgetParams$padding;\n    var pager = new Paginator({\n      currentPage: 0,\n      total: 0,\n      padding: padding\n    });\n    return {\n      $$type: 'ais.pagination',\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this.refine = function (page) {\n          helper.setPage(page);\n          helper.search();\n        };\n\n        this.createURL = function (state) {\n          return function (page) {\n            return createURL(state.setPage(page));\n          };\n        };\n\n        renderFn({\n          createURL: this.createURL(helper.state),\n          currentRefinement: helper.state.page || 0,\n          nbHits: 0,\n          nbPages: 0,\n          pages: [],\n          isFirstPage: true,\n          isLastPage: true,\n          refine: this.refine,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      getMaxPage: function getMaxPage(_ref2) {\n        var nbPages = _ref2.nbPages;\n        return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        var page = state.page || 0;\n        var nbPages = this.getMaxPage(results);\n        pager.currentPage = page;\n        pager.total = nbPages;\n        renderFn({\n          createURL: this.createURL(state),\n          currentRefinement: page,\n          refine: this.refine,\n          nbHits: results.nbHits,\n          nbPages: nbPages,\n          pages: pager.pages(),\n          isFirstPage: pager.isFirstPage(),\n          isLastPage: pager.isLastPage(),\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        return state.setQueryParameter('page', undefined);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var page = searchParameters.page || 0;\n\n        if (!page) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var page = uiState.page ? uiState.page - 1 : 0;\n        return searchParameters.setQueryParameter('page', page);\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport Pagination from '../../components/Pagination/Pagination';\nimport connectPagination from '../../connectors/pagination/connectPagination';\nimport { getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination'\n});\nvar suit = component('Pagination');\nvar defaultTemplates = {\n  previous: '',\n  next: '',\n  first: '',\n  last: ''\n};\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      templates = _ref.templates,\n      totalPages = _ref.totalPages,\n      showFirst = _ref.showFirst,\n      showLast = _ref.showLast,\n      showPrevious = _ref.showPrevious,\n      showNext = _ref.showNext,\n      scrollToNode = _ref.scrollToNode;\n  return function (_ref2, isFirstRendering) {\n    var createURL = _ref2.createURL,\n        currentRefinement = _ref2.currentRefinement,\n        nbHits = _ref2.nbHits,\n        nbPages = _ref2.nbPages,\n        pages = _ref2.pages,\n        isFirstPage = _ref2.isFirstPage,\n        isLastPage = _ref2.isLastPage,\n        refine = _ref2.refine;\n    if (isFirstRendering) return;\n\n    var setCurrentPage = function setCurrentPage(pageNumber) {\n      refine(pageNumber);\n\n      if (scrollToNode !== false) {\n        scrollToNode.scrollIntoView();\n      }\n    };\n\n    render(h(Pagination, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      currentPage: currentRefinement,\n      templates: templates,\n      nbHits: nbHits,\n      nbPages: nbPages,\n      pages: pages,\n      totalPages: totalPages,\n      isFirstPage: isFirstPage,\n      isLastPage: isLastPage,\n      setCurrentPage: setCurrentPage,\n      showFirst: showFirst,\n      showLast: showLast,\n      showPrevious: showPrevious,\n      showNext: showNext\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} PaginationCSSClasses\n * @property  {string|string[]} [root] CSS classes added to the root element of the widget.\n * @property {string|string[]} [noRefinementRoot] CSS class to add to the root element of the widget if there are no refinements.\n * @property  {string|string[]} [list] CSS classes added to the wrapping `<ul>`.\n * @property  {string|string[]} [item] CSS classes added to each `<li>`.\n * @property  {string|string[]} [firstPageItem] CSS classes added to the first `<li>`.\n * @property  {string|string[]} [lastPageItem] CSS classes added to the last `<li>`.\n * @property  {string|string[]} [previousPageItem] CSS classes added to the previous `<li>`.\n * @property  {string|string[]} [nextPageItem] CSS classes added to the next `<li>`.\n * @property  {string|string[]} [pageItem] CSS classes added to page `<li>`.\n * @property  {string|string[]} [selectedItem] CSS classes added to the selected `<li>`.\n * @property  {string|string[]} [disabledItem] CSS classes added to the disabled `<li>`.\n * @property  {string|string[]} [link] CSS classes added to each link.\n */\n\n/**\n * @typedef {Object} PaginationTemplates\n * @property  {string} [previous] Label for the Previous link.\n * @property  {string} [next] Label for the Next link.\n * @property  {string} [first] Label for the First link.\n * @property  {string} [last] Label for the Last link.\n */\n\n/**\n * @typedef {Object} PaginationWidgetOptions\n * @property  {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget.\n * @property  {number} [totalPages] The max number of pages to browse.\n * @property  {number} [padding=3] The number of pages to display on each side of the current page.\n * @property  {string|HTMLElement|boolean} [scrollTo='body'] Where to scroll after a click, set to `false` to disable.\n * @property  {boolean} [showFirst=true] Whether to show the first page control\n * @property  {boolean} [showLast=true] Whether to show the last page control\n * @property  {boolean} [showNext=true] Whether to show the next page control\n * @property  {boolean} [showPrevious=true] \tWhether to show the previous page control\n * @property  {PaginationTemplates} [templates] Text to display in the links.\n * @property  {PaginationCSSClasses} [cssClasses] CSS classes to be added.\n */\n\n/**\n * The pagination widget allow the user to switch between pages of the results.\n *\n * This is an alternative to using the *show more* pattern, that allows the user\n * only to display more items. The *show more* pattern is usually preferred\n * because it is simpler to use, and it is more convenient in a mobile context.\n * See the infinite hits widget, for more information.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n *\n * @type {WidgetFactory}\n * @devNovel Pagination\n * @category navigation\n * @param {PaginationWidgetOptions} $0 Options for the Pagination widget.\n * @return {Widget} A new instance of Pagination widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.pagination({\n *     container: '#pagination-container',\n *     totalPages: 20,\n *     // default is to scroll to 'body', here we disable this behavior\n *     scrollTo: false,\n *     showFirst: false,\n *     showLast: false,\n *   })\n * ]);\n */\n\n\nexport default function pagination() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      _ref3$templates = _ref3.templates,\n      userTemplates = _ref3$templates === void 0 ? {} : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      totalPages = _ref3.totalPages,\n      padding = _ref3.padding,\n      _ref3$showFirst = _ref3.showFirst,\n      showFirst = _ref3$showFirst === void 0 ? true : _ref3$showFirst,\n      _ref3$showLast = _ref3.showLast,\n      showLast = _ref3$showLast === void 0 ? true : _ref3$showLast,\n      _ref3$showPrevious = _ref3.showPrevious,\n      showPrevious = _ref3$showPrevious === void 0 ? true : _ref3$showPrevious,\n      _ref3$showNext = _ref3.showNext,\n      showNext = _ref3$showNext === void 0 ? true : _ref3$showNext,\n      _ref3$scrollTo = _ref3.scrollTo,\n      userScrollTo = _ref3$scrollTo === void 0 ? 'body' : _ref3$scrollTo;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var scrollTo = userScrollTo === true ? 'body' : userScrollTo;\n  var scrollToNode = scrollTo !== false ? getContainerNode(scrollTo) : false;\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    firstPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'firstPage'\n    }), userCssClasses.firstPageItem),\n    lastPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'lastPage'\n    }), userCssClasses.lastPageItem),\n    previousPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'previousPage'\n    }), userCssClasses.previousPageItem),\n    nextPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'nextPage'\n    }), userCssClasses.nextPageItem),\n    pageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'page'\n    }), userCssClasses.pageItem),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    disabledItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledItem),\n    link: cx(suit({\n      descendantName: 'link'\n    }), userCssClasses.link)\n  };\n\n  var templates = _objectSpread({}, defaultTemplates, {}, userTemplates);\n\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    templates: templates,\n    showFirst: showFirst,\n    showLast: showLast,\n    showPrevious: showPrevious,\n    showNext: showNext,\n    padding: padding,\n    scrollToNode: scrollToNode\n  });\n  var makeWidget = connectPagination(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    totalPages: totalPages,\n    padding: padding\n  });\n}","import instantsearch from 'instantsearch.js'\nimport { searchBox, refinementList, hits, pagination } from 'instantsearch.js/es/widgets'\n\nvar search = instantsearch({\n  indexName: document.getElementById('algolia-index-name').innerHTML,\n  searchClient: algoliasearch(\n    document.getElementById('algolia-app-id').innerHTML,\n    document.getElementById('algolia-api-key').innerHTML\n  )\n});\n\nsearch.addWidgets([\n  searchBox({\n    container: '#search-box',\n    placeholder: 'Recherche',\n    autofocus: false,\n    poweredBy: true,\n    reset: true,\n    loadingIndicator: false\n  }),\n\n  refinementList({\n    container: '#refinement-list',\n    attribute: 'categories'\n  }),\n\n  hits({\n    container: '#hits',\n    templates: {\n      empty: 'Aucun rsultat&nbsp;!',\n      item: document.getElementById('hit-template').innerHTML\n    }\n  }),\n\n  pagination({\n    container: '#pagination-container',\n    maxPages: 20,\n    scrollTo: false,\n    showFirstLast: false\n  })\n]);\nsearch.start();\n"],"sourceRoot":""}