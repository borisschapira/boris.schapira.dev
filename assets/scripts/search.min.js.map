{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/classnames/index.js","webpack:///./node_modules/preact/dist/preact.module.js","webpack:///./node_modules/prop-types/index.js","webpack:///./node_modules/algoliasearch-helper/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/find.js","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./node_modules/algoliasearch-helper/src/functions/merge.js","webpack:///./node_modules/algoliasearch-helper/src/functions/defaultsPure.js","webpack:///./node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","webpack:///./node_modules/qs/lib/utils.js","webpack:///./node_modules/qs/lib/index.js","webpack:///./node_modules/hogan.js/lib/hogan.js","webpack:///./node_modules/algoliasearch-helper/src/SearchParameters/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/omit.js","webpack:///./node_modules/algoliasearch-helper/src/SearchResults/index.js","webpack:///./node_modules/algoliasearch-helper/src/functions/orderBy.js","webpack:///./node_modules/algoliasearch-helper/src/functions/formatSort.js","webpack:///./node_modules/algoliasearch-helper/src/functions/inherits.js","webpack:///./node_modules/algoliasearch-helper/src/version.js","webpack:///./node_modules/qs/lib/formats.js","webpack:///./node_modules/algoliasearch-helper/src/algoliasearch.helper.js","webpack:///./node_modules/algoliasearch-helper/src/functions/intersection.js","webpack:///./node_modules/algoliasearch-helper/src/functions/valToNumber.js","webpack:///./node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","webpack:///./node_modules/algoliasearch-helper/src/functions/compact.js","webpack:///./node_modules/algoliasearch-helper/src/functions/findIndex.js","webpack:///./node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","webpack:///./node_modules/algoliasearch-helper/src/DerivedHelper/index.js","webpack:///./node_modules/algoliasearch-helper/src/requestBuilder.js","webpack:///./node_modules/qs/lib/stringify.js","webpack:///./node_modules/qs/lib/parse.js","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./node_modules/hogan.js/lib/compiler.js","webpack:///./node_modules/hogan.js/lib/template.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/documentation.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/findIndex.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/uniq.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/mergeSearchParameters.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/resolveSearchParameters.js","webpack:///./node_modules/instantsearch.js/es/widgets/index/index.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getPropertyByPath.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/escape.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isPlainObject.js","webpack:///./node_modules/instantsearch.js/es/lib/escape-highlight.js","webpack:///./node_modules/instantsearch.js/es/lib/suit.js","webpack:///./node_modules/instantsearch.js/es/helpers/highlight.js","webpack:///./node_modules/instantsearch.js/es/helpers/snippet.js","webpack:///./node_modules/instantsearch.js/es/helpers/insights.js","webpack:///./node_modules/instantsearch.js/es/lib/createHelpers.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/defer.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/noop.js","webpack:///./node_modules/instantsearch.js/es/lib/stateMappings/simple.js","webpack:///./node_modules/instantsearch.js/es/lib/routers/history.js","webpack:///./node_modules/instantsearch.js/es/middleware/createRouter.js","webpack:///./node_modules/instantsearch.js/es/lib/InstantSearch.js","webpack:///./node_modules/instantsearch.js/es/lib/version.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isEqual.js","webpack:///./node_modules/instantsearch.js/es/lib/infiniteHitsCache/sessionStorage.js","webpack:///./node_modules/instantsearch.js/es/index.js","webpack:///./node_modules/instantsearch.js/es/helpers/get-insights-anonymous-user-token.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isDomElement.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getContainerNode.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/getObjectType.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/checkRendering.js","webpack:///./node_modules/instantsearch.js/es/connectors/search-box/connectSearchBox.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/renderTemplate.js","webpack:///./node_modules/instantsearch.js/es/components/Template/Template.js","webpack:///./node_modules/instantsearch.js/es/components/SearchBox/SearchBox.js","webpack:///./node_modules/instantsearch.js/es/widgets/search-box/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/widgets/search-box/search-box.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/isSpecialClick.js","webpack:///./node_modules/instantsearch.js/es/components/RefinementList/RefinementListItem.js","webpack:///./node_modules/instantsearch.js/es/components/RefinementList/RefinementList.js","webpack:///./node_modules/instantsearch.js/es/connectors/refinement-list/connectRefinementList.js","webpack:///./node_modules/instantsearch.js/es/widgets/refinement-list/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/prepareTemplateProps.js","webpack:///./node_modules/instantsearch.js/es/widgets/refinement-list/refinement-list.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/hits-absolute-position.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/hits-query-id.js","webpack:///./node_modules/instantsearch.js/es/connectors/hits/connectHits.js","webpack:///./node_modules/instantsearch.js/es/components/Hits/Hits.js","webpack:///./node_modules/instantsearch.js/es/widgets/hits/defaultTemplates.js","webpack:///./node_modules/instantsearch.js/es/lib/insights/listener.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/find.js","webpack:///./node_modules/instantsearch.js/es/lib/insights/client.js","webpack:///./node_modules/instantsearch.js/es/widgets/hits/hits.js","webpack:///./node_modules/instantsearch.js/es/components/Pagination/PaginationLink.js","webpack:///./node_modules/instantsearch.js/es/components/Pagination/Pagination.js","webpack:///./node_modules/instantsearch.js/es/lib/utils/range.js","webpack:///./node_modules/instantsearch.js/es/connectors/pagination/Paginator.js","webpack:///./node_modules/instantsearch.js/es/connectors/pagination/connectPagination.js","webpack:///./node_modules/instantsearch.js/es/widgets/pagination/pagination.js","webpack:///./_src/scripts/search.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","hasOwn","classNames","classes","arguments","length","arg","argType","push","Array","isArray","inner","apply","join","default","u","e","a","v","parentNode","removeChild","h","children","defaultProps","y","ref","type","props","__k","__","__b","__e","__d","__c","constructor","__v","vnode","this","context","w","indexOf","k","base","g","debounceRendering","_","sort","some","f","__P","z","__n","ownerSVGElement","T","b","x","A","P","C","appendChild","nextSibling","insertBefore","D","j","setProperty","test","style","cssText","replace","toLowerCase","slice","addEventListener","N","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","contextType","__E","render","E","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","__r","getChildContext","getSnapshotBeforeUpdate","$","diffed","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","unmount","componentWillUnmount","H","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","resolve","setTimeout","AlgoliaSearchHelper","SearchParameters","SearchResults","algoliasearchHelper","client","index","opts","version","array","comparator","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","Error","String","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","isObjectOrArrayOrFunction","toString","_merge","source","sourceVal","targetVal","sources","reduce","acc","forEach","obj","has","hexTable","toUpperCase","arrayToObject","options","plainObjects","assign","combine","compact","queue","prop","refs","item","val","compacted","compactQueue","decode","str","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","encode","defaultEncoder","string","escape","$0","parseInt","out","charCodeAt","charAt","isBuffer","isRegExp","maybeMap","fn","mapped","merge","allowPrototypes","mergeTarget","targetItem","stringify","parse","formats","Hogan","Template","template","defaultsPure","intersection","find","valToNumber","omit","objectHasKeys","RefinementList","isEqualNumericRefinement","every","el","newParameters","params","_parseNumbers","facets","disjunctiveFacets","hierarchicalFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements","self","paramName","isKeyKnown","PARAMETERS","isValueDefined","partialState","numbers","parsedValue","parseFloat","insideBoundingBox","map","geoRect","attribute","operators","operator","parsedValues","vPrime","make","instance","facet","rootPath","currentRefinement","getHierarchicalRefinement","clearRefinements","toggleHierarchicalFacetRefinement","validate","currentState","parameters","tagFilters","numericFilters","patch","_clearNumericRefinements","clearRefinement","setQueryParameters","clearTags","setIndex","setQuery","newQuery","query","setPage","newPage","page","setFacets","setDisjunctiveFacets","setHitsPerPage","hitsPerPage","setTypoTolerance","typoTolerance","addNumericRefinement","isNumericRefined","mod","getConjunctiveRefinements","facetName","isConjunctiveFacet","getDisjunctiveRefinements","isDisjunctiveFacet","getExcludeRefinements","removeNumericRefinement","paramValue","op","getNumericRefinements","getNumericRefinement","hasChanged","newNumericRefinements","memo","operatorList","values","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","isHierarchicalFacet","addFacetRefinement","isRefined","addRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","tag","isTagRefined","modification","removeFacet","filter","removeDisjunctiveFacet","removeHierarchicalFacet","removeFacetRefinement","removeRefinement","removeExcludeRefinement","removeDisjunctiveFacetRefinement","removeTagRefinement","toggleRefinement","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","separator","_getHierarchicalFacetSeparator","getHierarchicalFacetByName","lastIndexOf","addHierarchicalFacetRefinement","path","isHierarchicalFacetRefined","removeHierarchicalFacetRefinement","toggleTagRefinement","isFacetRefined","isExcludeRefined","isDisjunctiveFacetRefined","refinements","isOperatorDefined","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","setQueryParameter","parameter","nextWithNumbers","previousPlainObject","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","resetPage","_getHierarchicalFacetSortBy","sortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","getHierarchicalFacetBreadcrumb","refinement","split","part","trim","JSON","excluded","sourceKeys","orderBy","findIndex","formatSort","generateHierarchicalTree","getIndices","indices","idx","assignFacetStats","dest","facetStats","stats","results","mainSubResponse","_rawResults","parsedQuery","hits","nbHits","nbPages","processingTimeMS","sum","result","aroundLatLng","automaticRadius","serverUsed","timeoutCounts","timeoutHits","exhaustiveFacetsCount","exhaustiveNbHits","userData","queryID","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustive","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","attributeIndex","dataFromMainRequest","refinementValue","refinedFacet","defaultData","root","excludes","facetValue","_state","recSort","sortFn","node","childNode","sortedChildren","getFacetStatsIfAvailable","facetList","getRefinement","attributeName","resultsFacets","getFacetByName","predicate","DEFAULT_SORT","getFacetValues","facetValues","isExcluded","extractNormalizedFacetValues","order","hierarchicalFacetValues","vanillaSortFn","getFacetStats","getRefinements","res","facetDeclaration","rootFacet","intermediateFacet","newFacet","numericValue","compareAscending","other","valIsDefined","valIsNull","othIsDefined","othIsNull","collection","iteratees","orders","criteria","iteratee","defaults","defaultInstructions","sortInstruction","matchingDefault","defaultInstruction","ctor","superCtor","writable","configurable","percentTwenties","util","Format","RFC1738","RFC3986","formatters","DerivedHelper","requestBuilder","inherits","addAlgoliaAgent","setClient","lastResults","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","isPageReset","getCurrentPage","search","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","_getHitsSearchParams","searchOnce","cb","tempState","queries","_getQueries","content","_originalResponse","catch","searchForFacetValues","maxFacetHits","userState","clientHasSFFV","initIndex","isDisjunctive","algoliaQuery","getSearchForFacetQuery","indexName","facetHits","q","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getPage","getTags","states","mainQueries","queriesCount","helper","derivedQueries","derivedHelper","derivedState","getModifiedState","derivedStateQueries","queryId","_dispatchAlgoliaResponse","_dispatchAlgoliaError","specificResults","splice","formattedResponse","containsRefinement","facetFilters","_hasDisjunctiveRefinements","disjunctiveRefinements","clearCache","newClient","getClient","derive","detachDerivedHelper","pos","hasPendingRequests","arr1","arr2","lib","refinementList","valueAsString","facetRefinement","refinementType","newRefinementList","containsRefinements","refinementValueAsString","Boolean","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","rootExhaustive","facetResult","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","parent","level","subtree","picked","tuple","parentPath","onlyMatchingTree","facetCount","parts","format","mainHelper","main","detach","_getDisjunctiveFacetSearchParams","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","_getNumericFilters","additionalParams","_getTagFilters","hierarchicalRootLevel","attributesToRetrieve","attributesToHighlight","attributesToSnippet","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","stateForSearchForFacetValues","searchForFacetSearchParameters","facetQuery","utils","arrayPrefixGenerators","brackets","prefix","comma","repeat","pushToArray","valueOrArray","toISO","Date","toISOString","defaultFormat","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","encodeValuesOnly","formatter","serializeDate","date","skipNulls","strictNullHandling","generateArrayPrefix","objKeys","keyPrefix","normalizeStringifyOptions","arrayFormat","joined","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseArrayValue","parseKeys","givenKey","valuesParsed","child","segment","exec","chain","leaf","cleanRoot","0","parseObject","normalizeParseOptions","tempObj","cleanStr","limit","Infinity","skipIndex","bracketEqualsPos","encodedVal","parseValues","newObj","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bool","func","number","symbol","any","arrayOf","element","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","rIsWhitespace","rQuot","rNewline","rCr","rSlash","rLineSep","rParagraphSep","cleanTripleStache","token","substr","substring","tagChange","text","tags","scan","delimiters","tagType","buf","tokens","seenTag","lineStart","otag","ctag","addBuf","filterLine","haveSeenTag","noNewLine","isAllWhitespace","match","lineIsWhitespace","next","indent","changeDelimiters","close","closeIndex","allowedInSuper","isOpener","isCloser","open","stringifyPartials","codeObj","partials","esc","items","stringifySubstitutions","subs","wrapMain","code","serialNo","chooseMethod","createPartial","sym","tripleStache","write","generate","tree","walk","asString","makeTemplate","makePartials","codegen","end","nodes","ctx","inPartial","last","nodelist","buildTree","kind","stack","customTags","tail","instructions","opener","sectionTags","cache","cacheKey","disableLambda","modelGet","compile","findInScope","scope","doModelGet","compiler","coerceToString","hChars","rAmp","rLt","rGt","rApos","ri","ep","partial","stackText","activeSub","stackSubs","stackPartials","PartialTemplate","Substitutions","subsText","createSpecializedPartial","rp","rs","section","inverted","start","pass","ms","returnFound","found","names","cx","mv","ls","oldTags","ct","fl","textSource","createDocumentationLink","_ref","_ref$connector","connector","createDocumentationMessageGenerator","_len","widgets","_key","links","widget","enumerableOnly","symbols","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","mergeWithRest","left","right","ruleContexts","rest","mergeFacets","mergeDisjunctiveFacets","nextFacets","mergeTagRefinements","mergeFacetRefinements","mergeFacetsExcludes","mergeDisjunctiveFacetsRefinements","mergeNumericRefinements","mergeHierarchicalFacetsRefinements","hierarchicalFacetsRefinementsMerged","hierarchicalFacetsMerged","tagRefinementsMerged","numericRefinementsMerged","disjunctiveFacetsRefinementsMerged","facetsExcludesMerged","facetRefinementsMerged","disjunctiveFacetsMerged","ruleContextsMerged","facetsMerged","getParent","getHelper","_toConsumableArray","_arrayWithoutHoles","iter","iterator","from","_iterableToArray","_nonIterableSpread","withUsage","isIndexWidget","$$type","privateHelperSetState","_uiState","getLocalWidgetsState","widgetStateOptions","initialUiState","uiState","getWidgetState","getLocalWidgetsSearchParameters","widgetSearchParametersOptions","initialSearchParameters","getWidgetSearchParameters","resolveScopedResultsFromIndex","widgetParent","resolveScopedResultsFromWidgets","scopedResults","indexId","getIndexId","getResults","getWidgets","_props$indexId","localWidgets","localUiState","localInstantSearchInstance","localParent","createURL","nextState","_createURL","searchParameters","getIndexName","addWidgets","_this","_initialUiState","instantSearchInstance","templatesConfig","scheduleSearch","removeWidgets","dispose","_ref2","_this2","onStateChange","mainIndex","setUiState","mergeSearchParameters","_ref3","resetPageFromWidgets","indexWidgets","widgetHelper","scheduleStalledRender","_ref4","scheduleRender","onInternalStateChange","_ref5","_this3","searchMetadata","isSearchStalled","_isSearchStalled","previousUiState","innerIndex","_ref6","refreshUiState","htmlEscapes","regexUnescapedHtml","regexHasUnescapedHtml","RegExp","character","_typeof","isObjectLike","getTag","proto","_extends","TAG_PLACEHOLDER","highlightPreTag","highlightPostTag","TAG_REPLACEMENT","replaceTagsAndEscape","recursiveEscape","input","escapeHits","__escaped","hit","_highlightResult","_snippetResult","escapeFacets","highlighted","component","descendantName","modifierName","descendent","modifier","suit","_ref$highlightedTagNa","highlightedTagName","_ref$cssClasses","cssClasses","attributeValue","className","method","payload","serializedPayload","btoa","writeDataAttributes","hoganHelpers","numberLocale","formatNumber","toLocaleString","highlight","snippet","insights","_JSON$parse","objectIDs","objectID","nextMicroTask","callback","progress","cancelled","wait","cancel","getIndexStateWithoutConfigure","configure","simpleStateMapping","stateToRoute","routeToState","routeState","_classCallCheck","Constructor","_defineProperties","descriptor","defaultCreateURL","qsModule","protocol","hostname","_location$port","port","pathname","hash","queryString","portWithPrefix","defaultParseURL","setWindowTitle","title","window","BrowserHistory","windowTitle","_ref3$writeDelay","writeDelay","_ref3$createURL","_ref3$parseURL","parseURL","writeTimer","read","protoProps","staticProps","url","clearTimeout","href","history","pushState","_onPopState","_getPrototypeOf","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","_setPrototypeOf","_EventEmitter","InstantSearch","started","_searchStalledTimer","nextUiState","setIndexHelperState","indexWidget","middleware","_options$indexName","_options$initialUiSta","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","helpers","compileOptions","_stalledSearchDelay","_searchFunction","routerOptions","EXPERIMENTAL_use","_props$router","router","_props$stateMapping","stateMapping","route","subscribe","onUpdate","indexUiState","unsubscribe","subClass","superClass","_inherits","newMiddlewareList","newMiddleware","fakeClient","_mainHelperSearch","mainIndexHelper","searchFunctionHelper","_this4","isPrimitive","isEqual","first","second","_i","_Object$keys","getStateWithoutPage","KEY","hasSessionStorage","sessionStorage","getInsightsAnonymousUserToken","cookies","cookie","getCookie","createInfiniteHitsSessionStorageCache","getItem","SyntaxError","removeItem","setItem","HTMLElement","selectorOrHTMLElement","isSelectorString","domElement","querySelector","errorMessage","rendering","usage","connectSearchBox","renderFn","unmountFn","widgetParams","queryHook","clear","_clear","_cachedClear","setQueryAndSearch","_refine","refine","templates","templateKey","templateType","isTemplateFunction","transformedHelpers","helperKey","transformHelpersToHogan","spaces","_Component","nextProps","rootProps","RootTagName","rootTagName","useCustomCompileOptions","SearchBox","_getPrototypeOf2","focused","_this$props","searchAsYouType","onChange","_this$props2","onSubmit","preventDefault","stopPropagation","blur","_this$props3","onReset","focus","_this$props4","placeholder","autofocus","showSubmit","showReset","showLoadingIndicator","action","role","form","noValidate","inputRef","disabled","autoFocus","autoComplete","autoCorrect","autoCapitalize","spellCheck","maxLength","onInput","onBlur","onFocus","submit","hidden","reset","loadingIndicator","containerNode","button","altKey","ctrlKey","metaKey","shiftKey","handleClick","facetValueToRefine","templateProps","templateData","subItems","onClick","originalEvent","handleItemClick","isStateDifferent","areFacetValuesDifferent","_cx","hasChildren","_this$props$cssClasse","showMore","childList","isFromSearch","selectedItem","disabledItem","parentItem","tagName","currentTarget","searchBox","resetInput","firstValue","actualValue","cssClassList","showMoreButtonClassName","disabledShowMore","canToggleShowMore","showMoreButton","toggleShowMore","isShowingMore","shouldDisableSearchBox","searchIsAlwaysActive","hasExhaustiveItems","searchFacetValues","searchBoxRef","searchPlaceholder","searchable","refineFirstValue","_generateFacetItem","noResults","noRefinementRoot","connectRefinementList","_widgetParams$operato","_widgetParams$limit","_widgetParams$showMor","_widgetParams$showMor2","showMoreLimit","_widgetParams$sortBy","_widgetParams$escapeF","escapeFacetValues","_widgetParams$transfo","transformItems","triggerRefine","formatItems","label","_getLimit","lastResultsFromMainSearch","_render","helperSpecializedSearchFacetValues","isFirstSearch","searchForItems","canRefine","createSearchForFacetValues","normalizedFacetValues","cachedToggleShowMore","createToggleShowMore","renderOptions","getLimit","maxValuesPerFacetConfig","maxValuesPerFacet","currentLimit","withoutMaxValuesPerFacet","_ref7","withoutRefinements","withFacetConfiguration","currentMaxValuesPerFacet","nextMaxValuesPerFacet","Math","max","withMaxValuesPerFacet","showMoreText","searchableNoResults","searchableReset","searchableSubmit","searchableLoadingIndicator","defaultTemplates","allKeys","config","defaultTemplate","customTemplate","isCustomTemplate","prepareTemplates","searchBoxSuit","transformTemplates","allTemplates","renderState","searchablePlaceholder","searchableIsAlwaysActive","isFirstRendering","addAbsolutePosition","__position","addQueryID","__queryID","_ref$escapeHTML","escapeHTML","_ref$transformItems","initialEscaped","emptyRoot","__hitIndex","empty","BaseComponent","insightsTarget","startElement","endElement","hasAttribute","parentElement","_readDataAttributes","getAttribute","atob","readDataAttributes","thisArg","inferPayload","selectedHits","selectedObjectIDs","queryIDs","positions","getPositions","withInsights","wrapRenderFn","isFirstRender","aa","withInstantSearchUsage","inferredPayload","HitsWithInsightsListener","widgetOptions","container","_ref3$templates","_ref3$cssClasses","userCssClasses","specializedRenderer","receivedHits","makeHits","ariaLabel","isDisabled","pageNumber","link","Pagination","_ref$additionalClassN","additionalClassName","_ref$isDisabled","_ref$isSelected","isSelected","isFirstPage","currentPage","pageLink","previousPageItem","isLastPage","nextPageItem","firstPageItem","lastPageItem","_pages","pages","pageItem","showFirst","firstPageLink","showPrevious","previousPageLink","showNext","nextPageLink","showLast","lastPageLink","_ref$start","_ref$step","step","limitStep","arrayLength","round","Paginator","total","padding","totalDisplayedPages","nbPagesDisplayed","paddingLeft","calculatePaddingLeft","min","connectPagination","totalPages","_widgetParams$padding","pager","getMaxPage","scrollToNode","scrollIntoView","instantsearch","getElementById","algoliasearch","_ref3$placeholder","_ref3$autofocus","_ref3$searchAsYouType","_ref3$showReset","_ref3$showSubmit","_ref3$showLoadingIndi","submitIcon","resetIcon","loadingIcon","makeWidget","poweredBy","_ref3$searchable","_ref3$searchablePlace","_ref3$searchableEscap","searchableEscapeFacetValues","_ref3$searchableIsAlw","userTemplates","checkbox","labelText","searchableRoot","searchableForm","searchableInput","searchableSubmitIcon","searchableResetIcon","searchableLoadingIcon","_ref3$showFirst","_ref3$showLast","_ref3$showPrevious","_ref3$showNext","_ref3$scrollTo","scrollTo","userScrollTo","pagination","maxPages","showFirstLast"],"mappings":"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","file":"scripts/search.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 46);\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var n,l,u,i,t,o,r,f,e={},c=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function v(n){var l=n.parentNode;l&&l.removeChild(n)}function h(n,l,u){var i,t=arguments,o={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(o[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(o.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===o[i]&&(o[i]=n.defaultProps[i]);return y(n,o,l&&l.key,l&&l.ref,null)}function y(l,u,i,t,o){var r={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(r.__v=r),n.vnode&&n.vnode(r),r}function p(){return{}}function d(n){return n.children}function m(n,l){this.props=n,this.context=l}function w(n,l){if(null==l)return n.__?w(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?w(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function g(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!i++||o!==n.debounceRendering)&&((o=n.debounceRendering)||t)(_)}function _(){for(var n;i=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,o,r,f;n.__d&&(r=(o=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},o)).__v=i,t=z(f,o,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==r?w(o):r),T(u,o),t!=r&&k(o)))})}function b(n,l,u,i,t,o,r,f,a,s){var h,p,m,k,g,_,b,x,A,P=i&&i.__k||c,C=P.length;for(a==e&&(a=null!=r?r[0]:C?w(i,0):null),u.__k=[],h=0;h<l.length;h++)if(null!=(k=u.__k[h]=null==(k=l[h])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k?y(null,k,null,null,k):Array.isArray(k)?y(d,{children:k},null,null,null):null!=k.__e||null!=k.__c?y(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(m=P[h])||m&&k.key==m.key&&k.type===m.type)P[h]=void 0;else for(p=0;p<C;p++){if((m=P[p])&&k.key==m.key&&k.type===m.type){P[p]=void 0;break}m=null}if(g=z(n,k,m=m||e,t,o,r,f,a,s),(p=k.ref)&&m.ref!=p&&(x||(x=[]),m.ref&&x.push(m.ref,null,k),x.push(p,k.__c||g,k)),null!=g){if(null==b&&(b=g),A=void 0,void 0!==k.__d)A=k.__d,k.__d=void 0;else if(r==m||g!=a||null==g.parentNode){n:if(null==a||a.parentNode!==n)n.appendChild(g),A=null;else{for(_=a,p=0;(_=_.nextSibling)&&p<C;p+=2)if(_==g)break n;n.insertBefore(g,a),A=a}\"option\"==u.type&&(n.value=\"\")}a=void 0!==A?A:g.nextSibling,\"function\"==typeof u.type&&(u.__d=a)}else a&&m.__e==a&&a.parentNode!=n&&(a=w(m))}if(u.__e=b,null!=r&&\"function\"!=typeof u.type)for(h=r.length;h--;)null!=r[h]&&v(r[h]);for(h=C;h--;)null!=P[h]&&D(P[h],P[h]);if(x)for(h=0;h<x.length;h++)j(x[h],x[++h],x[++h])}function x(n){return null==n||\"boolean\"==typeof n?[]:Array.isArray(n)?c.concat.apply([],n.map(x)):[n]}function A(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||C(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||C(n,o,l[o],u[o],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===a.test(l)?u+\"px\":null==u?\"\":u}function C(n,l,u,i,t){var o,r,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"style\"===l)if(o=n.style,\"string\"==typeof u)o.cssText=u;else{if(\"string\"==typeof i&&(o.cssText=\"\",i=null),i)for(e in i)u&&e in u||P(o,e,\"\");if(u)for(c in u)i&&u[c]===i[c]||P(o,c,u[c])}else\"o\"===l[0]&&\"n\"===l[1]?(r=l!==(l=l.replace(/Capture$/,\"\")),f=l.toLowerCase(),l=(f in n?f:l).slice(2),u?(i||n.addEventListener(l,N,r),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,N,r)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function N(l){this.l[l.type](n.event?n.event(l):l)}function z(l,u,i,t,o,r,f,e,c){var a,v,h,y,p,w,k,g,_,x,A,P=u.type;if(void 0!==u.constructor)return null;(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(g=u.props,_=(a=P.contextType)&&t[a.__c],x=a?_?_.props.value:a.__:t,i.__c?k=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(g,x):(u.__c=v=new m(g,x),v.constructor=P,v.render=E),_&&_.sub(v),v.props=g,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(g,v.__s))),y=v.props,p=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==y&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(g,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(g,v.__s,x)||u.__v===i.__v){for(v.props=g,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),a=0;a<u.__k.length;a++)u.__k[a]&&(u.__k[a].__=u);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(g,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(y,p,w)})}v.context=x,v.props=g,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(w=v.getSnapshotBeforeUpdate(y,p)),A=null!=a&&a.type==d&&null==a.key?a.props.children:a,b(l,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),k&&(v.__E=v.__=null),v.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=$(i.__e,u,i,t,o,r,f,c);(a=n.diffed)&&a(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function T(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function $(n,l,u,i,t,o,r,f){var a,s,v,h,y,p=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=o)for(a=0;a<o.length;a++)if(null!=(s=o[a])&&((null===l.type?3===s.nodeType:s.localName===l.type)||n==s)){n=s,o[a]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),o=null,f=!1}if(null===l.type)p!==d&&n.data!=d&&(n.data=d);else{if(null!=o&&(o=c.slice.call(n.childNodes)),v=(p=u.props||e).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!f){if(null!=o)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}A(n,d,p,t,f),h?l.__k=[]:(a=l.props.children,b(n,Array.isArray(a)?a:[a],l,u,i,\"foreignObject\"!==l.type&&t,o,r,e,f)),f||(\"value\"in d&&void 0!==(a=d.value)&&a!==n.value&&C(n,\"value\",a,p.value,!1),\"checked\"in d&&void 0!==(a=d.checked)&&a!==n.checked&&C(n,\"checked\",a,p.checked,!1))}return n}function j(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function D(l,u,i){var t,o,r;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||j(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(o=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(r=0;r<t.length;r++)t[r]&&D(t[r],u,i);null!=o&&v(o)}function E(n,l,u){return this.constructor(n,u)}function H(l,u,i){var t,o,f;n.__&&n.__(l,u),o=(t=i===r)?null:i&&i.__k||u.__k,l=h(d,null,[l]),f=[],z(u,(t?u:i||u).__k=l,o||e,e,void 0!==u.ownerSVGElement,i&&!t?[i]:o?null:u.childNodes.length?c.slice.call(u.childNodes):null,f,i||e,t),T(f,l)}function I(n,l){H(n,l,r)}function L(n,l){var u,i;for(i in l=s(s({},n.props),l),arguments.length>2&&(l.children=c.slice.call(arguments,2)),u={},l)\"key\"!==i&&\"ref\"!==i&&(u[i]=l[i]);return y(n.type,u,l.key||n.key,l.ref||n.ref,null)}function M(n){var l={},u={__c:\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(n){t.props.value!==n.value&&i.some(function(l){l.context=n.value,g(l)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u.Provider.__=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return g(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},m.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),g(this))},m.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),g(this))},m.prototype.render=d,u=[],i=0,t=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,r=e,f=0;export{H as render,I as hydrate,h as createElement,h,d as Fragment,p as createRef,l as isValidElement,m as Component,L as cloneElement,M as createContext,x as toChildArray,D as _unmount,n as options};\n//# sourceMappingURL=preact.module.js.map\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  for (var key in source) {\n    if (!Object.prototype.hasOwnProperty.call(source, key)) {\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      continue;\n    }\n\n    if (isObjectOrArrayOrFunction(targetVal) && isObjectOrArrayOrFunction(sourceVal)) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\n\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\n// it also preserve keys order\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n  return sources.reduce(function(acc, source) {\n    Object.keys(Object(source)).forEach(function(key) {\n      if (source[key] !== undefined && !Object.hasOwnProperty.call(acc, key)) {\n        acc[key] = source[key];\n      }\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar intersection = require('../functions/intersection');\nvar find = require('../functions/find');\nvar valToNumber = require('../functions/valToNumber');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function(el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  var self = this;\n  Object.keys(params).forEach(function(paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  numberKeys.forEach(function(k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      return geoRect.map(function(value) {\n        return parseFloat(value);\n      });\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function(attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function(v) {\n          if (Array.isArray(v)) {\n            return v.map(function(vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      )\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList[]} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      if (!objectHasKeys(this.numericRefinements[attribute])) {\n        return this.numericRefinements;\n      }\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {\n        var operators = numericRefinements[key];\n        var operatorList = {};\n\n        operators = operators || {};\n        Object.keys(operators).forEach(function(operator) {\n          var values = operators[operator] || [];\n          var outValues = [];\n          values.forEach(function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (outValues.length !== values.length) {\n            hasChanged = true;\n          }\n          operatorList[operator] = outValues;\n        });\n\n        memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function(t) {\n        return t !== tag;\n      })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function(facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {\n      return self.disjunctiveFacetsRefinements[facet].length > 0;\n    })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function(facet) { return facet.name; }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function(f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n    'facets', 'disjunctiveFacets', 'facetsRefinements',\n    'facetsExcludes', 'disjunctiveFacetsRefinements',\n    'numericRefinements', 'tagRefinements', 'hierarchicalFacets', 'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    var self = this;\n    Object.keys(this).forEach(function(paramName) {\n      var paramValue = self[paramName];\n      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(\n      function(previous, key) {\n        var isPreviousValueDefined = previous[key] !== undefined;\n        var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n        if (isPreviousValueDefined && !isNextValueDefined) {\n          return omit(previous, [key]);\n        }\n\n        if (isNextValueDefined) {\n          previous[key] = nextWithNumbers[key];\n        }\n\n        return previous;\n      },\n      previousPlainObject\n    );\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function() {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      function(f) {\n        return f.name === hierarchicalFacetName;\n      }\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function(part) {\n      return part.trim();\n    });\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar orderBy = require('../functions/orderBy');\nvar compact = require('../functions/compact');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * @param {string[]} attributes\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function(val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets\n * @param {string} hierarchicalAttributeName\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(hierarchicalFacets, function facetKeyMatchesAttribute(\n    hierarchicalFacet\n  ) {\n    var facetNames = hierarchicalFacet.attributes || [];\n    return facetNames.indexOf(hierarchicalAttributeName) > -1;\n  });\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devid=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex\": 202,\n            \"Insignia\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  /**\n   * query used to generate the results\n   * @member {string}\n   */\n  this.query = mainSubResponse.query;\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @member {string}\n   */\n  this.parsedQuery = mainSubResponse.parsedQuery;\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @member {object[]}\n   */\n  this.hits = mainSubResponse.hits;\n  /**\n   * index where the results come from\n   * @member {string}\n   */\n  this.index = mainSubResponse.index;\n  /**\n   * number of hits per page requested\n   * @member {number}\n   */\n  this.hitsPerPage = mainSubResponse.hitsPerPage;\n  /**\n   * total number of hits of this query on the index\n   * @member {number}\n   */\n  this.nbHits = mainSubResponse.nbHits;\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @member {number}\n   */\n  this.nbPages = mainSubResponse.nbPages;\n  /**\n   * current page\n   * @member {number}\n   */\n  this.page = mainSubResponse.page;\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = results.reduce(function(sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n  /**\n   * The position if the position was guessed by IP.\n   * @member {string}\n   * @example \"48.8637,2.3615\",\n   */\n  this.aroundLatLng = mainSubResponse.aroundLatLng;\n  /**\n   * The radius computed by Algolia.\n   * @member {string}\n   * @example \"126792922\",\n   */\n  this.automaticRadius = mainSubResponse.automaticRadius;\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @member {string}\n   * @example \"c7-use-2.algolia.net\",\n   */\n  this.serverUsed = mainSubResponse.serverUsed;\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutCounts = mainSubResponse.timeoutCounts;\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @member {boolean}\n   */\n  this.timeoutHits = mainSubResponse.timeoutHits;\n\n  /**\n   * True if the counts of the facets is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveFacetsCount = mainSubResponse.exhaustiveFacetsCount;\n\n  /**\n   * True if the number of hits is exhaustive\n   * @member {boolean}\n   */\n  this.exhaustiveNbHits = mainSubResponse.exhaustiveNbHits;\n\n\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @member {object[]}\n   */\n  this.userData = mainSubResponse.userData;\n\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @member {string}\n   */\n  this.queryID = mainSubResponse.queryID;\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  var self = this;\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function(facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(refinementValue) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some root level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets\n      ? result.facets\n      : {};\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n      var position = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n        return f.attribute === dfacet;\n      });\n\n      // previous refinements and no results so not able to find it\n      if (attributeIndex === -1) {\n        return;\n      }\n\n      // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n      // then the disjunctive values will be `beers` (count: 100),\n      // but we do not want to display\n      //   | beers (100)\n      //     > IPA (5)\n      // We want\n      //   | beers (5)\n      //     > IPA (5)\n      var defaultData = {};\n\n      if (currentRefinement.length > 0) {\n        var root = currentRefinement[0].split(separator)[0];\n        defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n      }\n\n      self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n        defaultData,\n        facetResults,\n        self.hierarchicalFacets[position][attributeIndex].data\n      );\n    });\n\n    nextDisjunctiveResult++;\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function(facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    excludes.forEach(function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function(name) {\n      return {\n        name: name,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, name),\n        isExcluded: results._state.isExcludeRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function(name) {\n      return {\n        name: name,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    return find(results.hierarchicalFacets, predicate);\n  }\n}\n\n/**\n * Sort nodes of a hierarchical facet results\n * @private\n * @param {HierarchicalFacet} node node to upon which we want to apply the sort\n */\nfunction recSort(sortFn, node) {\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function(childNode) {\n    return recSort(sortFn, childNode);\n  });\n  var sortedChildren = sortFn(children);\n  var newNode = merge({}, node, {data: sortedChildren});\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {sortBy: SearchResults.DEFAULT_SORT});\n\n  if (Array.isArray(options.sortBy)) {\n    var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n    if (Array.isArray(facetValues)) {\n      return orderBy(facetValues, order[0], order[1]);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(function(hierarchicalFacetValues) {\n      return orderBy(hierarchicalFacetValues, order[0], order[1]);\n    }, facetValues);\n  } else if (typeof options.sortBy === 'function') {\n    if (Array.isArray(facetValues)) {\n      return facetValues.sort(options.sortBy);\n    }\n    // If facetValues is not an array, it's an object thus a hierarchical facet object\n    return recSort(function(data) {\n      return vanillaSortFn(options.sortBy, data);\n    }, facetValues);\n  }\n  throw new Error(\n    'options.sortBy is optional but if defined it must be ' +\n    'either an array of string (predicates) or a sorting function'\n  );\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function(facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function(attributeName) {\n    state.facetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function(attributeName) {\n    state.facetsExcludes[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n\n  Object.keys(state.numericRefinements).forEach(function(attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function(operator) {\n      operators[operator].forEach(function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {*} state\n * @param {*} type\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function(f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\n/**\n * @param {*} state\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function(facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function(intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet && find(intermediateFacet.data, function(f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function(value, index) {\n    return {\n      criteria: iteratees.map(function(iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function(res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function(sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(defaultInstructions, function(\n        defaultInstruction\n      ) {\n        return defaultInstruction[0] === sortInstruction[0];\n      });\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nmodule.exports = '3.1.2';\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar events = require('events');\nvar inherits = require('./functions/inherits');\nvar objectHasKeys = require('./functions/objectHasKeys');\n\nvar version = require('./version');\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, events.EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search({onlyWithDerivedHelpers: false});\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {\n  this._search({onlyWithDerivedHelpers: true});\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  if (\n    !clientHasSFFV &&\n    typeof this.client.initIndex !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query\n  });\n\n  var searchForFacetValuesPromise = clientHasSFFV\n    ? this.client.searchForFacetValues([{indexName: state.index, params: algoliaQuery}])\n    : this.client.initIndex(state.index).searchForFacetValues(algoliaQuery);\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits.forEach(function(f) {\n      f.isRefined = isDisjunctive\n        ? state.isDisjunctiveFacetRefined(facet, f.value)\n        : state.isFacetRefined(facet, f.value);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    disjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function(operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function(options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error\n    });\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: formattedResponse,\n      state: state\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function(value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parsable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function(v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (value === undefined) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n        memo[key] = facetList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar orderBy = require('../functions/orderBy');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(\n      hierarchicalFacet\n    );\n    var hierarchicalRootPath = state._getHierarchicalRootPath(\n      hierarchicalFacet\n    );\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(\n      hierarchicalFacet\n    );\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      exhaustive: rootExhaustive,\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function(subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bires'],\n      //       level1: ['beers > IPA', 'bires > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bires > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function(facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function(tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function(tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            currentRefinement,\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null\n  };\n}\n","'use strict';\n\nvar events = require('events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, events.EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // maybe more to get the root level of hierarchical facets when activated\n    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      // if we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get the root values\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        queries.push({\n          indexName: index,\n          params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet, true)\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 1,\n      page: 0,\n      attributesToRetrieve: [],\n      attributesToHighlight: [],\n      attributesToSnippet: [],\n      tagFilters: tagFilters,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function(attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function(value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements).forEach(function(facetName) {\n      var facetValues = facetsRefinements[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes).forEach(function(facetName) {\n      var facetValues = facetsExcludes[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {\n      var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n      if (facetName === facet || !facetValues || facetValues.length === 0) {\n        return;\n      }\n      var orFilters = [];\n\n      facetValues.forEach(function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {\n      var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return merge(\n      {},\n      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n      searchForFacetSearchParameters\n    );\n  }\n};\n\nmodule.exports = requestBuilder;\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        }).join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n","export var createDocumentationLink = function createDocumentationLink(_ref) {\n  var name = _ref.name,\n      _ref$connector = _ref.connector,\n      connector = _ref$connector === void 0 ? false : _ref$connector;\n  return ['https://www.algolia.com/doc/api-reference/widgets/', name, '/js/', connector ? '#connector' : ''].join('');\n};\nexport var createDocumentationMessageGenerator = function createDocumentationMessageGenerator() {\n  for (var _len = arguments.length, widgets = new Array(_len), _key = 0; _key < _len; _key++) {\n    widgets[_key] = arguments[_key];\n  }\n\n  var links = widgets.map(function (widget) {\n    return createDocumentationLink(widget);\n  }).join(', ');\n  return function (message) {\n    return [message, \"See documentation: \".concat(links)].filter(Boolean).join('\\n\\n');\n  };\n};","// We aren't using the native `Array.prototype.findIndex` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `findIndex` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.findIndex` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex\nfunction findIndex(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nexport default findIndex;","function uniq(array) {\n  return array.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n\nexport default uniq;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport findIndex from './findIndex';\nimport uniq from './uniq';\n\nvar mergeWithRest = function mergeWithRest(left, right) {\n  var facets = right.facets,\n      disjunctiveFacets = right.disjunctiveFacets,\n      facetsRefinements = right.facetsRefinements,\n      facetsExcludes = right.facetsExcludes,\n      disjunctiveFacetsRefinements = right.disjunctiveFacetsRefinements,\n      numericRefinements = right.numericRefinements,\n      tagRefinements = right.tagRefinements,\n      hierarchicalFacets = right.hierarchicalFacets,\n      hierarchicalFacetsRefinements = right.hierarchicalFacetsRefinements,\n      ruleContexts = right.ruleContexts,\n      rest = _objectWithoutProperties(right, [\"facets\", \"disjunctiveFacets\", \"facetsRefinements\", \"facetsExcludes\", \"disjunctiveFacetsRefinements\", \"numericRefinements\", \"tagRefinements\", \"hierarchicalFacets\", \"hierarchicalFacetsRefinements\", \"ruleContexts\"]);\n\n  return left.setQueryParameters(rest);\n}; // Merge facets\n\n\nvar mergeFacets = function mergeFacets(left, right) {\n  return right.facets.reduce(function (_, name) {\n    return _.addFacet(name);\n  }, left);\n};\n\nvar mergeDisjunctiveFacets = function mergeDisjunctiveFacets(left, right) {\n  return right.disjunctiveFacets.reduce(function (_, name) {\n    return _.addDisjunctiveFacet(name);\n  }, left);\n};\n\nvar mergeHierarchicalFacets = function mergeHierarchicalFacets(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacets: right.hierarchicalFacets.reduce(function (facets, facet) {\n      var index = findIndex(facets, function (_) {\n        return _.name === facet.name;\n      });\n\n      if (index === -1) {\n        return facets.concat(facet);\n      }\n\n      var nextFacets = facets.slice();\n      nextFacets.splice(index, 1, facet);\n      return nextFacets;\n    }, left.hierarchicalFacets)\n  });\n}; // Merge facet refinements\n\n\nvar mergeTagRefinements = function mergeTagRefinements(left, right) {\n  return right.tagRefinements.reduce(function (_, value) {\n    return _.addTagRefinement(value);\n  }, left);\n};\n\nvar mergeFacetRefinements = function mergeFacetRefinements(left, right) {\n  return left.setQueryParameters({\n    facetsRefinements: _objectSpread({}, left.facetsRefinements, {}, right.facetsRefinements)\n  });\n};\n\nvar mergeFacetsExcludes = function mergeFacetsExcludes(left, right) {\n  return left.setQueryParameters({\n    facetsExcludes: _objectSpread({}, left.facetsExcludes, {}, right.facetsExcludes)\n  });\n};\n\nvar mergeDisjunctiveFacetsRefinements = function mergeDisjunctiveFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    disjunctiveFacetsRefinements: _objectSpread({}, left.disjunctiveFacetsRefinements, {}, right.disjunctiveFacetsRefinements)\n  });\n};\n\nvar mergeNumericRefinements = function mergeNumericRefinements(left, right) {\n  return left.setQueryParameters({\n    numericRefinements: _objectSpread({}, left.numericRefinements, {}, right.numericRefinements)\n  });\n};\n\nvar mergeHierarchicalFacetsRefinements = function mergeHierarchicalFacetsRefinements(left, right) {\n  return left.setQueryParameters({\n    hierarchicalFacetsRefinements: _objectSpread({}, left.hierarchicalFacetsRefinements, {}, right.hierarchicalFacetsRefinements)\n  });\n};\n\nvar mergeRuleContexts = function mergeRuleContexts(left, right) {\n  var ruleContexts = uniq([].concat(left.ruleContexts).concat(right.ruleContexts).filter(Boolean));\n\n  if (ruleContexts.length > 0) {\n    return left.setQueryParameters({\n      ruleContexts: ruleContexts\n    });\n  }\n\n  return left;\n};\n\nvar merge = function merge() {\n  for (var _len = arguments.length, parameters = new Array(_len), _key = 0; _key < _len; _key++) {\n    parameters[_key] = arguments[_key];\n  }\n\n  return parameters.reduce(function (left, right) {\n    var hierarchicalFacetsRefinementsMerged = mergeHierarchicalFacetsRefinements(left, right);\n    var hierarchicalFacetsMerged = mergeHierarchicalFacets(hierarchicalFacetsRefinementsMerged, right);\n    var tagRefinementsMerged = mergeTagRefinements(hierarchicalFacetsMerged, right);\n    var numericRefinementsMerged = mergeNumericRefinements(tagRefinementsMerged, right);\n    var disjunctiveFacetsRefinementsMerged = mergeDisjunctiveFacetsRefinements(numericRefinementsMerged, right);\n    var facetsExcludesMerged = mergeFacetsExcludes(disjunctiveFacetsRefinementsMerged, right);\n    var facetRefinementsMerged = mergeFacetRefinements(facetsExcludesMerged, right);\n    var disjunctiveFacetsMerged = mergeDisjunctiveFacets(facetRefinementsMerged, right);\n    var ruleContextsMerged = mergeRuleContexts(disjunctiveFacetsMerged, right);\n    var facetsMerged = mergeFacets(ruleContextsMerged, right);\n    return mergeWithRest(facetsMerged, right);\n  });\n};\n\nexport default merge;","var resolveSearchParameters = function resolveSearchParameters(current) {\n  var parent = current.getParent();\n  var states = [current.getHelper().state];\n\n  while (parent !== null) {\n    states = [parent.getHelper().state].concat(states);\n    parent = parent.getParent();\n  }\n\n  return states;\n};\n\nexport default resolveSearchParameters;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { checkIndexUiState, createDocumentationMessageGenerator, resolveSearchParameters, mergeSearchParameters } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'index-widget'\n});\nexport function isIndexWidget(widget) {\n  return widget.$$type === 'ais.index';\n}\n/**\n * This is the same content as helper._change / setState, but allowing for extra\n * UiState to be synchronized.\n * see: https://github.com/algolia/algoliasearch-helper-js/blob/6b835ffd07742f2d6b314022cce6848f5cfecd4a/src/algoliasearch.helper.js#L1311-L1324\n */\n\nfunction privateHelperSetState(helper, _ref) {\n  var state = _ref.state,\n      isPageReset = _ref.isPageReset,\n      _uiState = _ref._uiState;\n\n  if (state !== helper.state) {\n    helper.state = state;\n    helper.emit('change', {\n      state: helper.state,\n      results: helper.lastResults,\n      isPageReset: isPageReset,\n      _uiState: _uiState\n    });\n  }\n}\n\nfunction getLocalWidgetsState(widgets, widgetStateOptions) {\n  var initialUiState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (uiState, widget) {\n    if (!widget.getWidgetState) {\n      return uiState;\n    }\n\n    return widget.getWidgetState(uiState, widgetStateOptions);\n  }, initialUiState);\n}\n\nfunction getLocalWidgetsSearchParameters(widgets, widgetSearchParametersOptions) {\n  var initialSearchParameters = widgetSearchParametersOptions.initialSearchParameters,\n      rest = _objectWithoutProperties(widgetSearchParametersOptions, [\"initialSearchParameters\"]);\n\n  return widgets.filter(function (widget) {\n    return !isIndexWidget(widget);\n  }).reduce(function (state, widget) {\n    if (!widget.getWidgetSearchParameters) {\n      return state;\n    }\n\n    return widget.getWidgetSearchParameters(state, rest);\n  }, initialSearchParameters);\n}\n\nfunction resetPageFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n\n  if (indexWidgets.length === 0) {\n    return;\n  }\n\n  indexWidgets.forEach(function (widget) {\n    var widgetHelper = widget.getHelper();\n    privateHelperSetState(widgetHelper, {\n      // @ts-ignore @TODO: remove \"ts-ignore\" once `resetPage()` is typed in the helper\n      state: widgetHelper.state.resetPage(),\n      isPageReset: true\n    });\n    resetPageFromWidgets(widget.getWidgets());\n  });\n}\n\nfunction resolveScopedResultsFromWidgets(widgets) {\n  var indexWidgets = widgets.filter(isIndexWidget);\n  return indexWidgets.reduce(function (scopedResults, current) {\n    return scopedResults.concat.apply(scopedResults, [{\n      indexId: current.getIndexId(),\n      results: current.getResults(),\n      helper: current.getHelper()\n    }].concat(_toConsumableArray(resolveScopedResultsFromWidgets(current.getWidgets()))));\n  }, []);\n}\n\nfunction resolveScopedResultsFromIndex(widget) {\n  var widgetParent = widget.getParent(); // If the widget is the root, we consider itself as the only sibling.\n\n  var widgetSiblings = widgetParent ? widgetParent.getWidgets() : [widget];\n  return resolveScopedResultsFromWidgets(widgetSiblings);\n}\n\nvar index = function index(props) {\n  if (props === undefined || props.indexName === undefined) {\n    throw new Error(withUsage('The `indexName` option is required.'));\n  }\n\n  var indexName = props.indexName,\n      _props$indexId = props.indexId,\n      indexId = _props$indexId === void 0 ? indexName : _props$indexId;\n  var localWidgets = [];\n  var localUiState = {};\n  var localInstantSearchInstance = null;\n  var localParent = null;\n  var helper = null;\n  var derivedHelper = null;\n\n  var createURL = function createURL(nextState) {\n    return localInstantSearchInstance._createURL(_defineProperty({}, indexId, getLocalWidgetsState(localWidgets, {\n      searchParameters: nextState,\n      helper: helper\n    })));\n  };\n\n  return {\n    $$type: 'ais.index',\n    getIndexName: function getIndexName() {\n      return indexName;\n    },\n    getIndexId: function getIndexId() {\n      return indexId;\n    },\n    getHelper: function getHelper() {\n      return helper;\n    },\n    getResults: function getResults() {\n      return derivedHelper && derivedHelper.lastResults;\n    },\n    getParent: function getParent() {\n      return localParent;\n    },\n    getWidgets: function getWidgets() {\n      return localWidgets;\n    },\n    addWidgets: function addWidgets(widgets) {\n      var _this = this;\n\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      localWidgets = localWidgets.concat(widgets);\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        privateHelperSetState(helper, {\n          state: getLocalWidgetsSearchParameters(localWidgets, {\n            uiState: localUiState,\n            initialSearchParameters: helper.state\n          }),\n          _uiState: localUiState\n        });\n        widgets.forEach(function (widget) {\n          if (localInstantSearchInstance && widget.init) {\n            widget.init({\n              helper: helper,\n              parent: _this,\n              uiState: localInstantSearchInstance._initialUiState,\n              instantSearchInstance: localInstantSearchInstance,\n              state: helper.state,\n              templatesConfig: localInstantSearchInstance.templatesConfig,\n              createURL: createURL\n            });\n          }\n        });\n        localInstantSearchInstance.scheduleSearch();\n      }\n\n      return this;\n    },\n    removeWidgets: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      localWidgets = localWidgets.filter(function (widget) {\n        return widgets.indexOf(widget) === -1;\n      });\n\n      if (localInstantSearchInstance && Boolean(widgets.length)) {\n        var nextState = widgets.reduce(function (state, widget) {\n          // the `dispose` method exists at this point we already assert it\n          var next = widget.dispose({\n            helper: helper,\n            state: state\n          });\n          return next || state;\n        }, helper.state);\n        localUiState = getLocalWidgetsState(localWidgets, {\n          searchParameters: nextState,\n          helper: helper\n        });\n        helper.setState(getLocalWidgetsSearchParameters(localWidgets, {\n          uiState: localUiState,\n          initialSearchParameters: nextState\n        }));\n\n        if (localWidgets.length) {\n          localInstantSearchInstance.scheduleSearch();\n        }\n      }\n\n      return this;\n    },\n    init: function init(_ref2) {\n      var _this2 = this;\n\n      var instantSearchInstance = _ref2.instantSearchInstance,\n          parent = _ref2.parent,\n          uiState = _ref2.uiState;\n      localInstantSearchInstance = instantSearchInstance;\n      localParent = parent;\n      localUiState = uiState[indexId] || {}; // The `mainHelper` is already defined at this point. The instance is created\n      // inside InstantSearch at the `start` method, which occurs before the `init`\n      // step.\n\n      var mainHelper = instantSearchInstance.mainHelper;\n      var parameters = getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: localUiState,\n        initialSearchParameters: new algoliasearchHelper.SearchParameters({\n          index: indexName\n        })\n      }); // This Helper is only used for state management we do not care about the\n      // `searchClient`. Only the \"main\" Helper created at the `InstantSearch`\n      // level is aware of the client.\n\n      helper = algoliasearchHelper({}, parameters.index, parameters); // We forward the call to `search` to the \"main\" instance of the Helper\n      // which is responsible for managing the queries (it's the only one that is\n      // aware of the `searchClient`).\n\n      helper.search = function () {\n        if (instantSearchInstance.onStateChange) {\n          instantSearchInstance.onStateChange({\n            uiState: instantSearchInstance.mainIndex.getWidgetState({}),\n            setUiState: instantSearchInstance.setUiState.bind(instantSearchInstance)\n          }); // We don't trigger a search when controlled because it becomes the\n          // responsibility of `setUiState`.\n\n          return mainHelper;\n        }\n\n        return mainHelper.search();\n      }; // We use the same pattern for the `searchForFacetValues`.\n\n\n      helper.searchForFacetValues = function (facetName, facetValue, maxFacetHits, userState) {\n        var state = helper.state.setQueryParameters(userState);\n        return mainHelper.searchForFacetValues(facetName, facetValue, maxFacetHits, state);\n      };\n\n      derivedHelper = mainHelper.derive(function () {\n        return mergeSearchParameters.apply(void 0, _toConsumableArray(resolveSearchParameters(_this2)));\n      }); // Subscribe to the Helper state changes for the page before widgets\n      // are initialized. This behavior mimics the original one of the Helper.\n      // It makes sense to replicate it at the `init` step. We have another\n      // listener on `change` below, once `init` is done.\n\n      helper.on('change', function (_ref3) {\n        var isPageReset = _ref3.isPageReset;\n\n        if (isPageReset) {\n          resetPageFromWidgets(localWidgets);\n        }\n      });\n      derivedHelper.on('search', function () {\n        // The index does not manage the \"staleness\" of the search. This is the\n        // responsibility of the main instance. It does not make sense to manage\n        // it at the index level because it's either: all of them or none of them\n        // that are stalled. The queries are performed into a single network request.\n        instantSearchInstance.scheduleStalledRender();\n\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: _this2,\n            indexUiState: localUiState\n          });\n        }\n      });\n      derivedHelper.on('result', function (_ref4) {\n        var results = _ref4.results;\n        // The index does not render the results it schedules a new render\n        // to let all the other indices emit their own results. It allows us to\n        // run the render process in one pass.\n        instantSearchInstance.scheduleRender(); // the derived helper is the one which actually searches, but the helper\n        // which is exposed e.g. via instance.helper, doesn't search, and thus\n        // does not have access to lastResults, which it used to in pre-federated\n        // search behavior.\n\n        helper.lastResults = results;\n      });\n      localWidgets.forEach(function (widget) {\n        if (widget.init) {\n          widget.init({\n            uiState: uiState,\n            helper: helper,\n            parent: _this2,\n            instantSearchInstance: instantSearchInstance,\n            state: helper.state,\n            templatesConfig: instantSearchInstance.templatesConfig,\n            createURL: createURL\n          });\n        }\n      }); // Subscribe to the Helper state changes for the `uiState` once widgets\n      // are initialized. Until the first render, state changes are part of the\n      // configuration step. This is mainly for backward compatibility with custom\n      // widgets. When the subscription happens before the `init` step, the (static)\n      // configuration of the widget is pushed in the URL. That's what we want to avoid.\n      // https://github.com/algolia/instantsearch.js/pull/994/commits/4a672ae3fd78809e213de0368549ef12e9dc9454\n\n      helper.on('change', function (event) {\n        var state = event.state; // @ts-ignore _uiState comes from privateHelperSetState and thus isn't typed on the helper event\n\n        var _uiState = event._uiState;\n        localUiState = getLocalWidgetsState(localWidgets, {\n          searchParameters: state,\n          helper: helper\n        }, _uiState || {}); // We don't trigger an internal change when controlled because it\n        // becomes the responsibility of `setUiState`.\n\n        if (!instantSearchInstance.onStateChange) {\n          instantSearchInstance.onInternalStateChange();\n        }\n      });\n    },\n    render: function render(_ref5) {\n      var _this3 = this;\n\n      var instantSearchInstance = _ref5.instantSearchInstance;\n      localWidgets.forEach(function (widget) {\n        // At this point, all the variables used below are set. Both `helper`\n        // and `derivedHelper` have been created at the `init` step. The attribute\n        // `lastResults` might be `null` though. It's possible that a stalled render\n        // happens before the result e.g with a dynamically added index the request might\n        // be delayed. The render is triggered for the complete tree but some parts do\n        // not have results yet.\n        if (widget.render && derivedHelper.lastResults) {\n          widget.render({\n            helper: helper,\n            instantSearchInstance: instantSearchInstance,\n            results: derivedHelper.lastResults,\n            scopedResults: resolveScopedResultsFromIndex(_this3),\n            state: derivedHelper.lastResults._state,\n            templatesConfig: instantSearchInstance.templatesConfig,\n            createURL: createURL,\n            searchMetadata: {\n              isSearchStalled: instantSearchInstance._isSearchStalled\n            }\n          });\n        }\n      });\n    },\n    dispose: function dispose() {\n      localWidgets.forEach(function (widget) {\n        if (widget.dispose) {\n          // The dispose function is always called once the instance is started\n          // (it's an effect of `removeWidgets`). The index is initialized and\n          // the Helper is available. We don't care about the return value of\n          // `dispose` because the index is removed. We can't call `removeWidgets`\n          // because we want to keep the widgets on the instance, to allow idempotent\n          // operations on `add` & `remove`.\n          widget.dispose({\n            helper: helper,\n            state: helper.state\n          });\n        }\n      });\n      localInstantSearchInstance = null;\n      localParent = null;\n      helper.removeAllListeners();\n      helper = null;\n      derivedHelper.detach();\n      derivedHelper = null;\n    },\n    getWidgetState: function getWidgetState(uiState) {\n      return localWidgets.filter(isIndexWidget).reduce(function (previousUiState, innerIndex) {\n        return innerIndex.getWidgetState(previousUiState);\n      }, _objectSpread({}, uiState, _defineProperty({}, this.getIndexId(), localUiState)));\n    },\n    getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n      var uiState = _ref6.uiState;\n      return getLocalWidgetsSearchParameters(localWidgets, {\n        uiState: uiState,\n        initialSearchParameters: searchParameters\n      });\n    },\n    refreshUiState: function refreshUiState() {\n      localUiState = getLocalWidgetsState(localWidgets, {\n        searchParameters: this.getHelper().state,\n        helper: this.getHelper()\n      });\n    }\n  };\n};\n\nexport default index;","function getPropertyByPath(object, path) {\n  var parts = path.split('.');\n  return parts.reduce(function (current, key) {\n    return current && current[key];\n  }, object);\n}\n\nexport default getPropertyByPath;","/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/4.17.11-npm/escape.js\n */\n// Used to map characters to HTML entities.\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}; // Used to match HTML entities and HTML characters.\n\nvar regexUnescapedHtml = /[&<>\"']/g;\nvar regexHasUnescapedHtml = RegExp(regexUnescapedHtml.source);\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n */\n\nfunction escape(value) {\n  return value && regexHasUnescapedHtml.test(value) ? value.replace(regexUnescapedHtml, function (character) {\n    return htmlEscapes[character];\n  }) : value;\n}\n\nexport default escape;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * This implementation is taken from Lodash implementation.\n * See: https://github.com/lodash/lodash/blob/master/isPlainObject.js\n */\nfunction getTag(value) {\n  if (value === null) {\n    return value === undefined ? '[object Undefined]' : '[object Null]';\n  }\n\n  return Object.prototype.toString.call(value);\n}\n\nfunction isObjectLike(value) {\n  return _typeof(value) === 'object' && value !== null;\n}\n/**\n * Checks if `value` is a plain object.\n *\n * A plain object is an object created by the `Object`\n * constructor or with a `[[Prototype]]` of `null`.\n */\n\n\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || getTag(value) !== '[object Object]') {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n}\n\nexport default isPlainObject;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isPlainObject, escape } from '../lib/utils';\nexport var TAG_PLACEHOLDER = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\nexport var TAG_REPLACEMENT = {\n  highlightPreTag: '<mark>',\n  highlightPostTag: '</mark>'\n};\n\nfunction replaceTagsAndEscape(value) {\n  return escape(value).replace(new RegExp(TAG_PLACEHOLDER.highlightPreTag, 'g'), TAG_REPLACEMENT.highlightPreTag).replace(new RegExp(TAG_PLACEHOLDER.highlightPostTag, 'g'), TAG_REPLACEMENT.highlightPostTag);\n}\n\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return Object.keys(input).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, recursiveEscape(input[key])));\n    }, {});\n  }\n\n  if (Array.isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n\n  return _objectSpread({}, input, {\n    value: replaceTagsAndEscape(input.value)\n  });\n}\n\nexport default function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    // We don't override the value on hit because it will mutate the raw results\n    // instead we make a shallow copy and we assign the escaped values on it.\n    hits = hits.map(function (_ref) {\n      var hit = _extends({}, _ref);\n\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n\n  return hits;\n}\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _objectSpread({}, h, {\n      highlighted: replaceTagsAndEscape(h.highlighted)\n    });\n  });\n}","var NAMESPACE = 'ais';\nexport var component = function component(componentName) {\n  return function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        descendantName = _ref.descendantName,\n        modifierName = _ref.modifierName;\n\n    var descendent = descendantName ? \"-\".concat(descendantName) : '';\n    var modifier = modifierName ? \"--\".concat(modifierName) : '';\n    return \"\".concat(NAMESPACE, \"-\").concat(componentName).concat(descendent).concat(modifier);\n  };\n};","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Highlight');\nexport default function highlight(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var attributeValue = getPropertyByPath(hit, \"_highlightResult.\".concat(attribute, \".value\")) || ''; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","import { getPropertyByPath } from '../lib/utils';\nimport { TAG_REPLACEMENT } from '../lib/escape-highlight';\nimport { component } from '../lib/suit';\nvar suit = component('Snippet');\nexport default function snippet(_ref) {\n  var attribute = _ref.attribute,\n      _ref$highlightedTagNa = _ref.highlightedTagName,\n      highlightedTagName = _ref$highlightedTagNa === void 0 ? 'mark' : _ref$highlightedTagNa,\n      hit = _ref.hit,\n      _ref$cssClasses = _ref.cssClasses,\n      cssClasses = _ref$cssClasses === void 0 ? {} : _ref$cssClasses;\n  var attributeValue = getPropertyByPath(hit, \"_snippetResult.\".concat(attribute, \".value\")) || ''; // cx is not used, since it would be bundled as a dependency for Vue & Angular\n\n  var className = suit({\n    descendantName: 'highlighted'\n  }) + (cssClasses.highlighted ? \" \".concat(cssClasses.highlighted) : '');\n  return attributeValue.replace(new RegExp(TAG_REPLACEMENT.highlightPreTag, 'g'), \"<\".concat(highlightedTagName, \" class=\\\"\").concat(className, \"\\\">\")).replace(new RegExp(TAG_REPLACEMENT.highlightPostTag, 'g'), \"</\".concat(highlightedTagName, \">\"));\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function readDataAttributes(domElement) {\n  var method = domElement.getAttribute('data-insights-method');\n  var serializedPayload = domElement.getAttribute('data-insights-payload');\n\n  if (typeof serializedPayload !== 'string') {\n    throw new Error('The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.');\n  }\n\n  try {\n    var payload = JSON.parse(atob(serializedPayload));\n    return {\n      method: method,\n      payload: payload\n    };\n  } catch (error) {\n    throw new Error('The insights helper was unable to parse `data-insights-payload`.');\n  }\n}\nexport function hasDataAttributes(domElement) {\n  return domElement.hasAttribute('data-insights-method');\n}\nexport function writeDataAttributes(_ref) {\n  var method = _ref.method,\n      payload = _ref.payload;\n\n  if (_typeof(payload) !== 'object') {\n    throw new Error(\"The insights helper expects the payload to be an object.\");\n  }\n\n  var serializedPayload;\n\n  try {\n    serializedPayload = btoa(JSON.stringify(payload));\n  } catch (error) {\n    throw new Error(\"Could not JSON serialize the payload object.\");\n  }\n\n  return \"data-insights-method=\\\"\".concat(method, \"\\\" data-insights-payload=\\\"\").concat(serializedPayload, \"\\\"\");\n}\nexport default function insights(method, payload) {\n  return writeDataAttributes({\n    method: method,\n    payload: payload\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { highlight as _highlight, snippet as _snippet, insights as _insights } from '../helpers';\nexport default function hoganHelpers(_ref) {\n  var numberLocale = _ref.numberLocale;\n  return {\n    formatNumber: function formatNumber(value, render) {\n      return Number(render(value)).toLocaleString(numberLocale);\n    },\n    highlight: function highlight(options, render) {\n      try {\n        var highlightOptions = JSON.parse(options);\n        return render(_highlight(_objectSpread({}, highlightOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe highlight helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    snippet: function snippet(options, render) {\n      try {\n        var snippetOptions = JSON.parse(options);\n        return render(_snippet(_objectSpread({}, snippetOptions, {\n          hit: this\n        })));\n      } catch (error) {\n        throw new Error(\"\\nThe snippet helper expects a JSON object of the format:\\n{ \\\"attribute\\\": \\\"name\\\", \\\"highlightedTagName\\\": \\\"mark\\\" }\");\n      }\n    },\n    insights: function insights(options, render) {\n      try {\n        var _JSON$parse = JSON.parse(options),\n            method = _JSON$parse.method,\n            payload = _JSON$parse.payload;\n\n        return render(_insights(method, _objectSpread({\n          objectIDs: [this.objectID]\n        }, payload)));\n      } catch (error) {\n        throw new Error(\"\\nThe insights helper expects a JSON object of the format:\\n{ \\\"method\\\": \\\"method-name\\\", \\\"payload\\\": { \\\"eventName\\\": \\\"name of the event\\\" } }\");\n      }\n    }\n  };\n}","var nextMicroTask = Promise.resolve();\n\nvar defer = function defer(callback) {\n  var progress = null;\n  var cancelled = false;\n\n  var fn = function fn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (progress !== null) {\n      return;\n    }\n\n    progress = nextMicroTask.then(function () {\n      progress = null;\n\n      if (cancelled) {\n        cancelled = false;\n        return;\n      }\n\n      callback.apply(void 0, args);\n    });\n  };\n\n  fn.wait = function () {\n    if (progress === null) {\n      throw new Error('The deferred function should be called before calling `wait()`');\n    }\n\n    return progress;\n  };\n\n  fn.cancel = function () {\n    if (progress === null) {\n      return;\n    }\n\n    cancelled = true;\n  };\n\n  return fn;\n};\n\nexport default defer;","function noop() {}\n\nexport default noop;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction getIndexStateWithoutConfigure(uiState) {\n  var configure = uiState.configure,\n      trackedUiState = _objectWithoutProperties(uiState, [\"configure\"]);\n\n  return trackedUiState;\n} // technically a URL could contain any key, since users provide it,\n// which is why the input to this function is UiState, not something\n// which excludes \"configure\" as this function does.\n\n\nexport default function simpleStateMapping() {\n  return {\n    stateToRoute: function stateToRoute(uiState) {\n      return Object.keys(uiState).reduce(function (state, indexId) {\n        return _objectSpread({}, state, _defineProperty({}, indexId, getIndexStateWithoutConfigure(uiState[indexId])));\n      }, {});\n    },\n    routeToState: function routeToState() {\n      var routeState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return Object.keys(routeState).reduce(function (state, indexId) {\n        return _objectSpread({}, state, _defineProperty({}, indexId, getIndexStateWithoutConfigure(routeState[indexId])));\n      }, {});\n    }\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport qs from 'qs';\n\nvar defaultCreateURL = function defaultCreateURL(_ref) {\n  var qsModule = _ref.qsModule,\n      routeState = _ref.routeState,\n      location = _ref.location;\n  var protocol = location.protocol,\n      hostname = location.hostname,\n      _location$port = location.port,\n      port = _location$port === void 0 ? '' : _location$port,\n      pathname = location.pathname,\n      hash = location.hash;\n  var queryString = qsModule.stringify(routeState);\n  var portWithPrefix = port === '' ? '' : \":\".concat(port); // IE <= 11 has no proper `location.origin` so we cannot rely on it.\n\n  if (!queryString) {\n    return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname).concat(hash);\n  }\n\n  return \"\".concat(protocol, \"//\").concat(hostname).concat(portWithPrefix).concat(pathname, \"?\").concat(queryString).concat(hash);\n};\n\nvar defaultParseURL = function defaultParseURL(_ref2) {\n  var qsModule = _ref2.qsModule,\n      location = _ref2.location;\n  // `qs` by default converts arrays with more than 20 items to an object.\n  // We want to avoid this because the data structure manipulated can therefore vary.\n  // Setting the limit to `100` seems a good number because the engine's default is 100\n  // (it can go up to 1000 but it is very unlikely to select more than 100 items in the UI).\n  //\n  // Using an `arrayLimit` of `n` allows `n + 1` items.\n  //\n  // See:\n  //   - https://github.com/ljharb/qs#parsing-arrays\n  //   - https://www.algolia.com/doc/api-reference/api-parameters/maxValuesPerFacet/\n  return qsModule.parse(location.search.slice(1), {\n    arrayLimit: 99\n  });\n};\n\nvar setWindowTitle = function setWindowTitle(title) {\n  if (title) {\n    window.document.title = title;\n  }\n};\n\nvar BrowserHistory =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Initializes a new storage provider that syncs the search state to the URL\n   * using web APIs (`window.location.pushState` and `onpopstate` event).\n   */\n  function BrowserHistory() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        windowTitle = _ref3.windowTitle,\n        _ref3$writeDelay = _ref3.writeDelay,\n        writeDelay = _ref3$writeDelay === void 0 ? 400 : _ref3$writeDelay,\n        _ref3$createURL = _ref3.createURL,\n        createURL = _ref3$createURL === void 0 ? defaultCreateURL : _ref3$createURL,\n        _ref3$parseURL = _ref3.parseURL,\n        parseURL = _ref3$parseURL === void 0 ? defaultParseURL : _ref3$parseURL;\n\n    _classCallCheck(this, BrowserHistory);\n\n    _defineProperty(this, \"windowTitle\", void 0);\n\n    _defineProperty(this, \"writeDelay\", void 0);\n\n    _defineProperty(this, \"_createURL\", void 0);\n\n    _defineProperty(this, \"parseURL\", void 0);\n\n    _defineProperty(this, \"writeTimer\", void 0);\n\n    this.windowTitle = windowTitle;\n    this.writeTimer = undefined;\n    this.writeDelay = writeDelay;\n    this._createURL = createURL;\n    this.parseURL = parseURL;\n    var title = this.windowTitle && this.windowTitle(this.read());\n    setWindowTitle(title);\n  }\n  /**\n   * Reads the URL and returns a syncable UI search state.\n   */\n\n\n  _createClass(BrowserHistory, [{\n    key: \"read\",\n    value: function read() {\n      return this.parseURL({\n        qsModule: qs,\n        location: window.location\n      });\n    }\n    /**\n     * Pushes a search state into the URL.\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(routeState) {\n      var _this = this;\n\n      var url = this.createURL(routeState);\n      var title = this.windowTitle && this.windowTitle(routeState);\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.writeTimer = window.setTimeout(function () {\n        if (window.location.href !== url) {\n          setWindowTitle(title);\n          window.history.pushState(routeState, title || '', url);\n        }\n\n        _this.writeTimer = undefined;\n      }, this.writeDelay);\n    }\n    /**\n     * Sets a callback on the `onpopstate` event of the history API of the current page.\n     * It enables the URL sync to keep track of the changes.\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(callback) {\n      var _this2 = this;\n\n      this._onPopState = function (event) {\n        if (_this2.writeTimer) {\n          window.clearTimeout(_this2.writeTimer);\n          _this2.writeTimer = undefined;\n        }\n\n        var routeState = event.state; // At initial load, the state is read from the URL without update.\n        // Therefore the state object is not available.\n        // In this case, we fallback and read the URL.\n\n        if (!routeState) {\n          callback(_this2.read());\n        } else {\n          callback(routeState);\n        }\n      };\n\n      window.addEventListener('popstate', this._onPopState);\n    }\n    /**\n     * Creates a complete URL from a given syncable UI state.\n     *\n     * It always generates the full URL, not a relative one.\n     * This allows to handle cases like using a <base href>.\n     * See: https://github.com/algolia/instantsearch.js/issues/790\n     */\n\n  }, {\n    key: \"createURL\",\n    value: function createURL(routeState) {\n      return this._createURL({\n        qsModule: qs,\n        routeState: routeState,\n        location: window.location\n      });\n    }\n    /**\n     * Removes the event listener and cleans up the URL.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this._onPopState) {\n        window.removeEventListener('popstate', this._onPopState);\n      }\n\n      if (this.writeTimer) {\n        window.clearTimeout(this.writeTimer);\n      }\n\n      this.write({});\n    }\n  }]);\n\n  return BrowserHistory;\n}();\n\nexport default function (props) {\n  return new BrowserHistory(props);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport simpleStateMapping from '../lib/stateMappings/simple';\nimport historyRouter from '../lib/routers/history';\n\nvar walk = function walk(current, callback) {\n  callback(current);\n  current.getWidgets().filter(function (widget) {\n    return widget.$$type === 'ais.index';\n  }).forEach(function (innerIndex) {\n    walk(innerIndex, callback);\n  });\n};\n\nexport var createRouter = function createRouter() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _props$router = props.router,\n      router = _props$router === void 0 ? historyRouter() : _props$router,\n      _props$stateMapping = props.stateMapping,\n      stateMapping = _props$stateMapping === void 0 ? simpleStateMapping() : _props$stateMapping;\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n\n    function topLevelCreateURL(nextState) {\n      var uiState = Object.keys(nextState).reduce(function (acc, indexId) {\n        return _objectSpread({}, acc, _defineProperty({}, indexId, nextState[indexId]));\n      }, instantSearchInstance.mainIndex.getWidgetState({}));\n      var route = stateMapping.stateToRoute(uiState);\n      return router.createURL(route);\n    }\n\n    instantSearchInstance._createURL = topLevelCreateURL;\n    instantSearchInstance._initialUiState = _objectSpread({}, instantSearchInstance._initialUiState, {}, stateMapping.routeToState(router.read()));\n    return {\n      onStateChange: function onStateChange(_ref2) {\n        var uiState = _ref2.uiState;\n        var route = stateMapping.stateToRoute(uiState);\n        router.write(route);\n      },\n      subscribe: function subscribe() {\n        router.onUpdate(function (route) {\n          var uiState = stateMapping.routeToState(route);\n          walk(instantSearchInstance.mainIndex, function (current) {\n            var widgets = current.getWidgets();\n            var indexUiState = uiState[current.getIndexId()] || {};\n            var searchParameters = widgets.reduce(function (parameters, widget) {\n              if (!widget.getWidgetSearchParameters) {\n                return parameters;\n              }\n\n              return widget.getWidgetSearchParameters(parameters, {\n                uiState: indexUiState\n              });\n            }, current.getHelper().state);\n            current.getHelper().overrideStateWithoutTriggeringChangeEvent(searchParameters);\n            instantSearchInstance.scheduleSearch();\n          });\n        });\n      },\n      unsubscribe: function unsubscribe() {\n        router.dispose();\n      }\n    };\n  };\n};","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from 'events';\nimport index, { isIndexWidget } from '../widgets/index/index';\nimport version from './version';\nimport createHelpers from './createHelpers';\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, checkIndexUiState } from './utils';\nimport hasDetectedInsightsClient from './utils/detect-insights-client';\nimport { createRouter } from '../middleware/createRouter';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\n\nfunction defaultCreateURL() {\n  return '#';\n}\n/**\n * Global options for an InstantSearch instance.\n */\n\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstantSearch).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isSearchStalled\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      if (!_this.mainHelper.hasPendingRequests()) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        _this._isSearchStalled = false;\n      }\n\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n\n      _this.emit('render');\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"setUiState\", function (uiState) {\n      if (!_this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      }\n\n      process.env.NODE_ENV === 'development' ? warning(false, \"\\n`setUiState` provides a powerful way to manage the UI state. This is considered experimental as the API might change in a next minor version.\\n\\nFeel free to give us feedback on GitHub: https://github.com/algolia/instantsearch.js/issues/new\\n    \") : void 0; // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n\n      _this.mainIndex.refreshUiState();\n\n      var nextUiState = typeof uiState === 'function' ? uiState(_this.mainIndex.getWidgetState({})) : uiState;\n\n      var setIndexHelperState = function setIndexHelperState(indexWidget) {\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: indexWidget,\n            indexUiState: nextUiState[indexWidget.getIndexId()]\n          });\n        }\n\n        indexWidget.getHelper().overrideStateWithoutTriggeringChangeEvent(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n          uiState: nextUiState[indexWidget.getIndexId()]\n        }));\n        indexWidget.getWidgets().filter(isIndexWidget).forEach(setIndexHelperState);\n      };\n\n      setIndexHelperState(_this.mainIndex);\n\n      _this.scheduleSearch();\n\n      _this.onInternalStateChange();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", function () {\n      var nextUiState = _this.mainIndex.getWidgetState({});\n\n      _this.middleware.forEach(function (m) {\n        m.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    });\n\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$initialUiSta = options.initialUiState,\n        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n        _options$onStateChang = options.onStateChange,\n        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(Boolean(insightsClient) || !hasDetectedInsightsClient(), withUsage(\"InstantSearch detected the Insights client in the global scope.\\nTo connect InstantSearch to the Insights client, make sure to specify the `insightsClient` option:\\n\\nconst search = instantsearch({\\n  /* ... */\\n  insightsClient: window.aa,\\n});\")) : void 0;\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._isSearchStalled = false;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n\n      _this.EXPERIMENTAL_use(createRouter(routerOptions));\n    }\n\n    return _this;\n  }\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   *\n   * This method is considered as experimental and is subject to change in\n   * minor versions.\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = fn({\n          instantSearchInstance: _this2\n        });\n\n        _this2.middleware.push(newMiddleware);\n\n        return newMiddleware;\n      }); // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      } // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n\n\n      var mainHelper = algoliasearchHelper(this.client, this.indexName);\n\n      mainHelper.search = function () {\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref) {\n            var state = _ref.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this3._mainHelperSearch();\n          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n\n          searchFunctionHelper.on('change', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.setState(state);\n          });\n\n          _this3._searchFunction(searchFunctionHelper);\n\n          return mainHelper;\n        };\n      } // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n\n\n      mainHelper.on('error', function (_ref3) {\n        var error = _ref3.error;\n\n        _this3.emit('error', {\n          error: error\n        });\n      });\n      this.mainHelper = mainHelper;\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n      this.middleware.forEach(function (m) {\n        m.subscribe();\n      });\n      mainHelper.search(); // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n\n      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.removeAllListeners();\n      this.mainHelper.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (m) {\n        m.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4._isSearchStalled = true;\n\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport default InstantSearch;","export default '4.7.0';","function isPrimitive(obj) {\n  return obj !== Object(obj);\n}\n\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (isPrimitive(first) || isPrimitive(second) || typeof first === 'function' || typeof second === 'function') {\n    return first === second;\n  }\n\n  if (Object.keys(first).length !== Object.keys(second).length) {\n    return false;\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(first); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in second)) {\n      return false;\n    }\n\n    if (!isEqual(first[key], second[key])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default isEqual;","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { isEqual } from '../utils';\n\nfunction getStateWithoutPage(state) {\n  var _ref = state || {},\n      page = _ref.page,\n      rest = _objectWithoutProperties(_ref, [\"page\"]);\n\n  return rest;\n}\n\nvar KEY = 'ais.infiniteHits';\n\nfunction hasSessionStorage() {\n  return typeof window !== 'undefined' && typeof window.sessionStorage !== 'undefined';\n}\n\nexport default function createInfiniteHitsSessionStorageCache() {\n  return {\n    read: function read(_ref2) {\n      var state = _ref2.state;\n\n      if (!hasSessionStorage()) {\n        return null;\n      }\n\n      try {\n        var cache = JSON.parse( // @ts-ignore JSON.parse() requires a string, but it actually accepts null, too.\n        window.sessionStorage.getItem(KEY));\n        return cache && isEqual(cache.state, getStateWithoutPage(state)) ? cache.hits : null;\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          try {\n            window.sessionStorage.removeItem(KEY);\n          } catch (err) {// do nothing\n          }\n        }\n\n        return null;\n      }\n    },\n    write: function write(_ref3) {\n      var state = _ref3.state,\n          hits = _ref3.hits;\n\n      if (!hasSessionStorage()) {\n        return;\n      }\n\n      try {\n        window.sessionStorage.setItem(KEY, JSON.stringify({\n          state: getStateWithoutPage(state),\n          hits: hits\n        }));\n      } catch (error) {// do nothing\n      }\n    }\n  };\n}","import InstantSearch from './lib/InstantSearch';\nimport version from './lib/version';\nimport { snippet, highlight, insights, getInsightsAnonymousUserToken } from './helpers';\nimport { createInfiniteHitsSessionStorageCache } from './lib/infiniteHitsCache';\n\nvar instantsearch = function instantsearch(options) {\n  return new InstantSearch(options);\n};\n\ninstantsearch.version = version;\ninstantsearch.snippet = snippet;\ninstantsearch.highlight = highlight;\ninstantsearch.insights = insights;\ninstantsearch.getInsightsAnonymousUserToken = getInsightsAnonymousUserToken;\ninstantsearch.createInfiniteHitsSessionStorageCache = createInfiniteHitsSessionStorageCache;\nObject.defineProperty(instantsearch, 'widgets', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.widgets\\\" are not available from the ES build.\\n\\nTo import the widgets:\\n\\nimport { searchBox } from 'instantsearch.js/es/widgets'\");\n  }\n});\nObject.defineProperty(instantsearch, 'connectors', {\n  get: function get() {\n    throw new ReferenceError(\"\\\"instantsearch.connectors\\\" are not available from the ES build.\\n\\nTo import the connectors:\\n\\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'\");\n  }\n});\nexport default instantsearch;\n","export var ANONYMOUS_TOKEN_COOKIE_KEY = '_ALGOLIA';\n\nfunction getCookie(name) {\n  var prefix = \"\".concat(name, \"=\");\n  var cookies = document.cookie.split(';');\n\n  for (var i = 0; i < cookies.length; i++) {\n    var cookie = cookies[i];\n\n    while (cookie.charAt(0) === ' ') {\n      cookie = cookie.substring(1);\n    }\n\n    if (cookie.indexOf(prefix) === 0) {\n      return cookie.substring(prefix.length, cookie.length);\n    }\n  }\n\n  return undefined;\n}\n\nexport default function getInsightsAnonymousUserToken() {\n  return getCookie(ANONYMOUS_TOKEN_COOKIE_KEY);\n}","function isDomElement(object) {\n  return object instanceof HTMLElement || Boolean(object) && object.nodeType > 0;\n}\n\nexport default isDomElement;","import isDomElement from './isDomElement';\n/**\n * Return the container. If it's a string, it is considered a\n * css selector and retrieves the first matching element. Otherwise\n * test if it validates that it's a correct DOMElement.\n *\n * @param {string|HTMLElement} selectorOrHTMLElement CSS Selector or container node.\n * @return {HTMLElement} Container node\n * @throws Error when the type is not correct\n */\n\nfunction getContainerNode(selectorOrHTMLElement) {\n  var isSelectorString = typeof selectorOrHTMLElement === 'string';\n  var domElement = isSelectorString ? document.querySelector(selectorOrHTMLElement) : selectorOrHTMLElement;\n\n  if (!isDomElement(domElement)) {\n    var errorMessage = 'Container must be `string` or `HTMLElement`.';\n\n    if (isSelectorString) {\n      errorMessage += \" Unable to find \".concat(selectorOrHTMLElement);\n    }\n\n    throw new Error(errorMessage);\n  }\n\n  return domElement;\n}\n\nexport default getContainerNode;","function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}\n\nexport default getObjectType;","import getObjectType from './getObjectType';\n\nfunction checkRendering(rendering, usage) {\n  if (rendering === undefined || typeof rendering !== 'function') {\n    throw new Error(\"The render function is not valid (received type \".concat(getObjectType(rendering), \").\\n\\n\").concat(usage));\n  }\n}\n\nexport default checkRendering;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box',\n  connector: true\n});\n/**\n * @typedef {Object} CustomSearchBoxWidgetOptions\n * @property {function(string, function(string))} [queryHook = undefined] A function that will be called every time\n * a new value for the query is set. The first parameter is the query and the second is a\n * function to actually trigger the search. The function takes the query as the parameter.\n *\n * This queryHook can be used to debounce the number of searches done from the searchBox.\n */\n\n/**\n * @typedef {Object} SearchBoxRenderingOptions\n * @property {string} query The query from the last search.\n * @property {function(string)} refine Sets a new query and searches.\n * @property {function()} clear Remove the query and perform search.\n * @property {Object} widgetParams All original `CustomSearchBoxWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isSearchStalled `true` if the search results takes more than a certain time to come back\n * from Algolia servers. This can be configured on the InstantSearch constructor with the attribute\n * `stalledSearchDelay` which is 200ms, by default.\n */\n\n/**\n * **SearchBox** connector provides the logic to build a widget that will let the user search for a query.\n *\n * The connector provides to the rendering: `refine()` to set the query. The behaviour of this function\n * may be impacted by the `queryHook` widget parameter.\n * @type {Connector}\n * @param {function(SearchBoxRenderingOptions, boolean)} renderFn Rendering function for the custom **SearchBox** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomSearchBoxWidgetOptions)} Re-usable widget factory for a custom **SearchBox** widget.\n * @example\n * // custom `renderFn` to render the custom SearchBox widget\n * function renderFn(SearchBoxRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     SearchBoxRenderingOptions.widgetParams.containerNode.html('<input type=\"text\" />');\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .on('keyup', function() {\n *         SearchBoxRenderingOptions.refine($(this).val());\n *       });\n *     SearchBoxRenderingOptions.widgetParams.containerNode\n *       .find('input')\n *       .val(SearchBoxRenderingOptions.query);\n *   }\n * }\n *\n * // connect `renderFn` to SearchBox logic\n * var customSearchBox = instantsearch.connectors.connectSearchBox(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customSearchBox({\n *     containerNode: $('#custom-searchbox'),\n *   })\n * ]);\n */\n\nexport default function connectSearchBox(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var queryHook = widgetParams.queryHook;\n\n    function clear(helper) {\n      return function () {\n        helper.setQuery('');\n        helper.search();\n      };\n    }\n\n    return {\n      $$type: 'ais.searchBox',\n      _clear: function _clear() {},\n      _cachedClear: function _cachedClear() {\n        this._clear();\n      },\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            instantSearchInstance = _ref.instantSearchInstance;\n        this._cachedClear = this._cachedClear.bind(this);\n        this._clear = clear(helper);\n\n        var setQueryAndSearch = function setQueryAndSearch(query) {\n          if (query !== helper.state.query) {\n            helper.setQuery(query).search();\n          }\n        };\n\n        this._refine = function (query) {\n          if (queryHook) {\n            queryHook(query, setQueryAndSearch);\n            return;\n          }\n\n          setQueryAndSearch(query);\n        };\n\n        renderFn({\n          query: helper.state.query || '',\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      render: function render(_ref2) {\n        var helper = _ref2.helper,\n            instantSearchInstance = _ref2.instantSearchInstance,\n            searchMetadata = _ref2.searchMetadata;\n        this._clear = clear(helper);\n        renderFn({\n          query: helper.state.query || '',\n          refine: this._refine,\n          clear: this._cachedClear,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance,\n          isSearchStalled: searchMetadata.isSearchStalled\n        }, false);\n      },\n      dispose: function dispose(_ref3) {\n        var state = _ref3.state;\n        unmountFn();\n        return state.setQueryParameter('query', undefined);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref4) {\n        var searchParameters = _ref4.searchParameters;\n        var query = searchParameters.query || '';\n\n        if (query === '' || uiState && uiState.query === query) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          query: query\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref5) {\n        var uiState = _ref5.uiState;\n        return searchParameters.setQueryParameter('query', uiState.query || '');\n      }\n    };\n  };\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport hogan from 'hogan.js'; // We add all our template helper methods to the template as lambdas. Note\n// that lambdas in Mustache are supposed to accept a second argument of\n// `render` to get the rendered value, not the literal `{{value}}`. But\n// this is currently broken (see https://github.com/twitter/hogan.js/issues/222).\n\nfunction transformHelpersToHogan() {\n  var helpers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var compileOptions = arguments.length > 1 ? arguments[1] : undefined;\n  var data = arguments.length > 2 ? arguments[2] : undefined;\n  return Object.keys(helpers).reduce(function (acc, helperKey) {\n    return _objectSpread({}, acc, _defineProperty({}, helperKey, function () {\n      var _this = this;\n\n      return function (text) {\n        var render = function render(value) {\n          return hogan.compile(value, compileOptions).render(_this);\n        };\n\n        return helpers[helperKey].call(data, text, render);\n      };\n    }));\n  }, {});\n}\n\nfunction renderTemplate(_ref) {\n  var templates = _ref.templates,\n      templateKey = _ref.templateKey,\n      compileOptions = _ref.compileOptions,\n      helpers = _ref.helpers,\n      data = _ref.data;\n  var template = templates[templateKey];\n\n  var templateType = _typeof(template);\n\n  var isTemplateString = templateType === 'string';\n  var isTemplateFunction = templateType === 'function';\n\n  if (!isTemplateString && !isTemplateFunction) {\n    throw new Error(\"Template must be 'string' or 'function', was '\".concat(templateType, \"' (key: \").concat(templateKey, \")\"));\n  }\n\n  if (isTemplateFunction) {\n    return template(data);\n  }\n\n  var transformedHelpers = transformHelpersToHogan(helpers, compileOptions, data);\n  return hogan.compile(template, compileOptions).render(_objectSpread({}, data, {\n    helpers: transformedHelpers\n  })).replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  }).trim();\n}\n\nexport default renderTemplate;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport { renderTemplate, isEqual } from '../../lib/utils';\n\nvar Template =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Template, _Component);\n\n  function Template() {\n    _classCallCheck(this, Template);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Template).apply(this, arguments));\n  }\n\n  _createClass(Template, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !isEqual(this.props.data, nextProps.data) || this.props.templateKey !== nextProps.templateKey || !isEqual(this.props.rootProps, nextProps.rootProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var RootTagName = this.props.rootTagName;\n      var useCustomCompileOptions = this.props.useCustomCompileOptions[this.props.templateKey];\n      var compileOptions = useCustomCompileOptions ? this.props.templatesConfig.compileOptions : {};\n      var content = renderTemplate({\n        templates: this.props.templates,\n        templateKey: this.props.templateKey,\n        compileOptions: compileOptions,\n        helpers: this.props.templatesConfig.helpers,\n        data: this.props.data\n      });\n\n      if (content === null) {\n        // Adds a noscript to the DOM but virtual DOM is null\n        // See http://facebook.github.io/react/docs/component-specs.html#render\n        return null;\n      }\n\n      return h(RootTagName, _extends({}, this.props.rootProps, {\n        dangerouslySetInnerHTML: {\n          __html: content\n        }\n      }));\n    }\n  }]);\n\n  return Template;\n}(Component);\n\nTemplate.defaultProps = {\n  data: {},\n  rootTagName: 'div',\n  useCustomCompileOptions: {},\n  templates: {},\n  templatesConfig: {}\n};\nexport default Template;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport { noop } from '../../lib/utils';\nimport Template from '../Template/Template';\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBox, _Component);\n\n  function SearchBox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SearchBox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      query: _this.props.query,\n      focused: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInput\", function (event) {\n      var _this$props = _this.props,\n          searchAsYouType = _this$props.searchAsYouType,\n          refine = _this$props.refine,\n          onChange = _this$props.onChange;\n      var query = event.target.value;\n\n      if (searchAsYouType) {\n        refine(query);\n      }\n\n      _this.setState({\n        query: query\n      });\n\n      onChange(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      var _this$props2 = _this.props,\n          searchAsYouType = _this$props2.searchAsYouType,\n          refine = _this$props2.refine,\n          onSubmit = _this$props2.onSubmit;\n      event.preventDefault();\n      event.stopPropagation();\n\n      _this.input.blur();\n\n      if (!searchAsYouType) {\n        refine(_this.state.query);\n      }\n\n      onSubmit(event);\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props3 = _this.props,\n          refine = _this$props3.refine,\n          onReset = _this$props3.onReset;\n      var query = '';\n\n      _this.input.focus();\n\n      refine(query);\n\n      _this.setState({\n        query: query\n      });\n\n      onReset(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBlur\", function () {\n      _this.setState({\n        focused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function () {\n      _this.setState({\n        focused: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(SearchBox, [{\n    key: \"resetInput\",\n\n    /**\n     * This public method is used in the RefinementList SFFV search box\n     * to reset the input state when an item is selected.\n     *\n     * @see RefinementList#componentWillReceiveProps\n     * @return {undefined}\n     */\n    value: function resetInput() {\n      this.setState({\n        query: ''\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      /**\n       * when the user is typing, we don't want to replace the query typed\n       * by the user (state.query) with the query exposed by the connector (props.query)\n       * see: https://github.com/algolia/instantsearch.js/issues/4141\n       */\n      if (!this.state.focused && nextProps.query !== this.state.query) {\n        this.setState({\n          query: nextProps.query\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          cssClasses = _this$props4.cssClasses,\n          placeholder = _this$props4.placeholder,\n          autofocus = _this$props4.autofocus,\n          showSubmit = _this$props4.showSubmit,\n          showReset = _this$props4.showReset,\n          showLoadingIndicator = _this$props4.showLoadingIndicator,\n          templates = _this$props4.templates,\n          isSearchStalled = _this$props4.isSearchStalled;\n      return h(\"div\", {\n        className: cssClasses.root\n      }, h(\"form\", {\n        action: \"\",\n        role: \"search\",\n        className: cssClasses.form,\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        onReset: this.onReset\n      }, h(\"input\", {\n        ref: function ref(inputRef) {\n          return _this2.input = inputRef;\n        },\n        value: this.state.query,\n        disabled: this.props.disabled,\n        className: cssClasses.input,\n        type: \"search\",\n        placeholder: placeholder,\n        autoFocus: autofocus,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        autoCapitalize: \"off\",\n        spellCheck: false,\n        maxLength: 512,\n        onInput: this.onInput,\n        onBlur: this.onBlur,\n        onFocus: this.onFocus\n      }), h(Template, {\n        templateKey: \"submit\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.submit,\n          type: 'submit',\n          title: 'Submit the search query.',\n          hidden: !showSubmit\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), h(Template, {\n        templateKey: \"reset\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: cssClasses.reset,\n          type: 'reset',\n          title: 'Clear the search query.',\n          hidden: !(showReset && this.state.query.trim() && !isSearchStalled)\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      }), showLoadingIndicator && h(Template, {\n        templateKey: \"loadingIndicator\",\n        rootTagName: \"span\",\n        rootProps: {\n          className: cssClasses.loadingIndicator,\n          hidden: !isSearchStalled\n        },\n        templates: templates,\n        data: {\n          cssClasses: cssClasses\n        }\n      })));\n    }\n  }]);\n\n  return SearchBox;\n}(Component);\n\n_defineProperty(SearchBox, \"defaultProps\", {\n  query: '',\n  showSubmit: true,\n  showReset: true,\n  showLoadingIndicator: true,\n  autofocus: false,\n  searchAsYouType: true,\n  isSearchStalled: false,\n  disabled: false,\n  onChange: noop,\n  onSubmit: noop,\n  onReset: noop,\n  refine: noop\n});\n\nexport default SearchBox;","/* eslint max-len: 0 */\nexport default {\n  reset: \"\\n<svg class=\\\"{{cssClasses.resetIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"10\\\" height=\\\"10\\\">\\n  <path d=\\\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\\\"></path>\\n</svg>\\n  \",\n  submit: \"\\n<svg class=\\\"{{cssClasses.submitIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"10\\\" height=\\\"10\\\" viewBox=\\\"0 0 40 40\\\">\\n  <path d=\\\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\\\"></path>\\n</svg>\\n  \",\n  loadingIndicator: \"\\n<svg class=\\\"{{cssClasses.loadingIcon}}\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 38 38\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" stroke=\\\"#444\\\">\\n  <g fill=\\\"none\\\" fillRule=\\\"evenodd\\\">\\n    <g transform=\\\"translate(1 1)\\\" strokeWidth=\\\"2\\\">\\n      <circle strokeOpacity=\\\".5\\\" cx=\\\"18\\\" cy=\\\"18\\\" r=\\\"18\\\" />\\n      <path d=\\\"M36 18c0-9.94-8.06-18-18-18\\\">\\n        <animateTransform\\n          attributeName=\\\"transform\\\"\\n          type=\\\"rotate\\\"\\n          from=\\\"0 18 18\\\"\\n          to=\\\"360 18 18\\\"\\n          dur=\\\"1s\\\"\\n          repeatCount=\\\"indefinite\\\"\\n        />\\n      </path>\\n    </g>\\n  </g>\\n</svg>\\n  \"\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport { getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nimport connectSearchBox from '../../connectors/search-box/connectSearchBox';\nimport SearchBox from '../../components/SearchBox/SearchBox';\nimport defaultTemplates from './defaultTemplates';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'search-box'\n});\nvar suit = component('SearchBox');\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      placeholder = _ref.placeholder,\n      templates = _ref.templates,\n      autofocus = _ref.autofocus,\n      searchAsYouType = _ref.searchAsYouType,\n      showReset = _ref.showReset,\n      showSubmit = _ref.showSubmit,\n      showLoadingIndicator = _ref.showLoadingIndicator;\n  return function (_ref2) {\n    var refine = _ref2.refine,\n        query = _ref2.query,\n        isSearchStalled = _ref2.isSearchStalled;\n    render(h(SearchBox, {\n      query: query,\n      placeholder: placeholder,\n      autofocus: autofocus,\n      refine: refine,\n      searchAsYouType: searchAsYouType,\n      templates: templates,\n      showSubmit: showSubmit,\n      showReset: showReset,\n      showLoadingIndicator: showLoadingIndicator,\n      isSearchStalled: isSearchStalled,\n      cssClasses: cssClasses\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} SearchBoxTemplates\n * @property {function|string} submit Template used for displaying the submit. Can accept a function or a Hogan string.\n * @property {function|string} reset Template used for displaying the button. Can accept a function or a Hogan string.\n * @property {function|string} loadingIndicator Template used for displaying the button. Can accept a function or a Hogan string.\n */\n\n/**\n * @typedef {Object} SearchBoxCSSClasses\n * @property {string|string[]} [root] CSS class to add to the wrapping `<div>`\n * @property {string|string[]} [form] CSS class to add to the form\n * @property {string|string[]} [input] CSS class to add to the input.\n * @property {string|string[]} [submit] CSS classes added to the submit button.\n * @property {string|string[]} [submitIcon] CSS classes added to the submit icon.\n * @property {string|string[]} [reset] CSS classes added to the reset button.\n * @property {string|string[]} [resetIcon] CSS classes added to the reset icon.\n * @property {string|string[]} [loadingIndicator] CSS classes added to the loading indicator element.\n * @property {string|string[]} [loadingIcon] CSS classes added to the loading indicator icon.\n */\n\n/**\n * @typedef {Object} SearchBoxWidgetOptions\n * @property {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget\n * @property {string} [placeholder] The placeholder of the input\n * @property {boolean} [autofocus=false] Whether the input should be autofocused\n * @property {boolean} [searchAsYouType=true] If set, trigger the search\n * once `<Enter>` is pressed only.\n * @property {boolean} [showReset=true] Whether to show the reset button\n * @property {boolean} [showSubmit=true] Whether to show the submit button\n * @property {boolean} [showLoadingIndicator=true] Whether to show the loading indicator (replaces the submit if\n * the search is stalled)\n * @property {SearchBoxCSSClasses} [cssClasses] CSS classes to add\n * @property {SearchBoxTemplates} [templates] Templates used for customizing the rendering of the searchbox\n * @property {function} [queryHook] A function that is called every time a new search is done. You\n * will get the query as the first parameter and a search (query) function to call as the second parameter.\n * This `queryHook` can be used to debounce the number of searches done from the search box.\n */\n\n/**\n * The searchbox widget is used to let the user set a text based query.\n *\n * This is usually the  main entry point to start the search in an instantsearch context. For that\n * reason is usually placed on top, and not hidden so that the user can start searching right\n * away.\n *\n * @type {WidgetFactory}\n * @devNovel SearchBox\n * @category basic\n * @param {SearchBoxWidgetOptions} $0 Options used to configure a SearchBox widget.\n * @return {Widget} Creates a new instance of the SearchBox widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.searchBox({\n *     container: '#q',\n *     placeholder: 'Search for products',\n *   })\n * ]);\n */\n\n\nexport default function searchBox() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      _ref3$placeholder = _ref3.placeholder,\n      placeholder = _ref3$placeholder === void 0 ? '' : _ref3$placeholder,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      _ref3$autofocus = _ref3.autofocus,\n      autofocus = _ref3$autofocus === void 0 ? false : _ref3$autofocus,\n      _ref3$searchAsYouType = _ref3.searchAsYouType,\n      searchAsYouType = _ref3$searchAsYouType === void 0 ? true : _ref3$searchAsYouType,\n      _ref3$showReset = _ref3.showReset,\n      showReset = _ref3$showReset === void 0 ? true : _ref3$showReset,\n      _ref3$showSubmit = _ref3.showSubmit,\n      showSubmit = _ref3$showSubmit === void 0 ? true : _ref3$showSubmit,\n      _ref3$showLoadingIndi = _ref3.showLoadingIndicator,\n      showLoadingIndicator = _ref3$showLoadingIndi === void 0 ? true : _ref3$showLoadingIndi,\n      queryHook = _ref3.queryHook,\n      templates = _ref3.templates;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    form: cx(suit({\n      descendantName: 'form'\n    }), userCssClasses.form),\n    input: cx(suit({\n      descendantName: 'input'\n    }), userCssClasses.input),\n    submit: cx(suit({\n      descendantName: 'submit'\n    }), userCssClasses.submit),\n    submitIcon: cx(suit({\n      descendantName: 'submitIcon'\n    }), userCssClasses.submitIcon),\n    reset: cx(suit({\n      descendantName: 'reset'\n    }), userCssClasses.reset),\n    resetIcon: cx(suit({\n      descendantName: 'resetIcon'\n    }), userCssClasses.resetIcon),\n    loadingIndicator: cx(suit({\n      descendantName: 'loadingIndicator'\n    }), userCssClasses.loadingIndicator),\n    loadingIcon: cx(suit({\n      descendantName: 'loadingIcon'\n    }), userCssClasses.loadingIcon)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    placeholder: placeholder,\n    templates: _objectSpread({}, defaultTemplates, {}, templates),\n    autofocus: autofocus,\n    searchAsYouType: searchAsYouType,\n    showReset: showReset,\n    showSubmit: showSubmit,\n    showLoadingIndicator: showLoadingIndicator\n  });\n  var makeWidget = connectSearchBox(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    queryHook: queryHook\n  });\n}","function isSpecialClick(event) {\n  var isMiddleClick = event.button === 1;\n  return isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n}\n\nexport default isSpecialClick;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\nimport Template from '../Template/Template';\n\nfunction RefinementListItem(_ref) {\n  var className = _ref.className,\n      handleClick = _ref.handleClick,\n      facetValueToRefine = _ref.facetValueToRefine,\n      isRefined = _ref.isRefined,\n      templateProps = _ref.templateProps,\n      templateKey = _ref.templateKey,\n      templateData = _ref.templateData,\n      subItems = _ref.subItems;\n  return h(\"li\", {\n    className: className,\n    onClick: function onClick(originalEvent) {\n      handleClick({\n        facetValueToRefine: facetValueToRefine,\n        isRefined: isRefined,\n        originalEvent: originalEvent\n      });\n    }\n  }, h(Template, _extends({}, templateProps, {\n    templateKey: templateKey,\n    data: templateData\n  })), subItems);\n}\n\nexport default RefinementListItem;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { isSpecialClick, isEqual } from '../../lib/utils';\nimport Template from '../Template/Template';\nimport RefinementListItem from './RefinementListItem';\nimport SearchBox from '../SearchBox/SearchBox';\n\nvar RefinementList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RefinementList, _Component);\n\n  function RefinementList(props) {\n    var _this;\n\n    _classCallCheck(this, RefinementList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RefinementList).call(this, props));\n    _this.handleItemClick = _this.handleItemClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RefinementList, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var isStateDifferent = this.state !== nextState;\n      var areFacetValuesDifferent = !isEqual(this.props.facetValues, nextProps.facetValues);\n      return isStateDifferent || areFacetValuesDifferent;\n    }\n  }, {\n    key: \"refine\",\n    value: function refine(facetValueToRefine, isRefined) {\n      this.props.toggleRefinement(facetValueToRefine, isRefined);\n    }\n  }, {\n    key: \"_generateFacetItem\",\n    value: function _generateFacetItem(facetValue) {\n      var _cx;\n\n      var subItems;\n      var hasChildren = facetValue.data && facetValue.data.length > 0;\n\n      if (hasChildren) {\n        var _this$props$cssClasse = this.props.cssClasses,\n            root = _this$props$cssClasse.root,\n            cssClasses = _objectWithoutProperties(_this$props$cssClasse, [\"root\"]);\n\n        subItems = h(RefinementList, _extends({}, this.props, {\n          cssClasses: cssClasses,\n          depth: this.props.depth + 1,\n          facetValues: facetValue.data,\n          showMore: false,\n          className: this.props.cssClasses.childList\n        }));\n      }\n\n      var url = this.props.createURL(facetValue.value);\n\n      var templateData = _objectSpread({}, facetValue, {\n        url: url,\n        attribute: this.props.attribute,\n        cssClasses: this.props.cssClasses,\n        isFromSearch: this.props.isFromSearch\n      });\n\n      var key = facetValue.value;\n\n      if (facetValue.isRefined !== undefined) {\n        key += \"/\".concat(facetValue.isRefined);\n      }\n\n      if (facetValue.count !== undefined) {\n        key += \"/\".concat(facetValue.count);\n      }\n\n      return h(RefinementListItem, {\n        templateKey: \"item\",\n        key: key,\n        facetValueToRefine: facetValue.value,\n        handleClick: this.handleItemClick,\n        isRefined: facetValue.isRefined,\n        className: cx(this.props.cssClasses.item, (_cx = {}, _defineProperty(_cx, this.props.cssClasses.selectedItem, facetValue.isRefined), _defineProperty(_cx, this.props.cssClasses.disabledItem, !facetValue.count), _defineProperty(_cx, this.props.cssClasses.parentItem, hasChildren), _cx)),\n        subItems: subItems,\n        templateData: templateData,\n        templateProps: this.props.templateProps\n      });\n    } // Click events on DOM tree like LABEL > INPUT will result in two click events\n    // instead of one.\n    // No matter the framework, see https://www.google.com/search?q=click+label+twice\n    //\n    // Thus making it hard to distinguish activation from deactivation because both click events\n    // are very close. Debounce is a solution but hacky.\n    //\n    // So the code here checks if the click was done on or in a LABEL. If this LABEL\n    // has a checkbox inside, we ignore the first click event because we will get another one.\n    //\n    // We also check if the click was done inside a link and then e.preventDefault() because we already\n    // handle the url\n    //\n    // Finally, we always stop propagation of the event to avoid multiple levels RefinementLists to fail: click\n    // on child would click on parent also\n\n  }, {\n    key: \"handleItemClick\",\n    value: function handleItemClick(_ref) {\n      var facetValueToRefine = _ref.facetValueToRefine,\n          originalEvent = _ref.originalEvent,\n          isRefined = _ref.isRefined;\n\n      if (isSpecialClick(originalEvent)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      if (isRefined && originalEvent.target.parentNode.querySelector('input[type=\"radio\"]:checked')) {\n        // Prevent refinement for being reset if the user clicks on an already checked radio button\n        return;\n      }\n\n      if (originalEvent.target.tagName === 'INPUT') {\n        this.refine(facetValueToRefine, isRefined);\n        return;\n      }\n\n      var parent = originalEvent.target;\n\n      while (parent !== originalEvent.currentTarget) {\n        if (parent.tagName === 'LABEL' && (parent.querySelector('input[type=\"checkbox\"]') || parent.querySelector('input[type=\"radio\"]'))) {\n          return;\n        }\n\n        if (parent.tagName === 'A' && parent.href) {\n          originalEvent.preventDefault();\n        }\n\n        parent = parent.parentNode;\n      }\n\n      originalEvent.stopPropagation();\n      this.refine(facetValueToRefine, isRefined);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.searchBox && !nextProps.isFromSearch) {\n        this.searchBox.resetInput();\n      }\n    }\n  }, {\n    key: \"refineFirstValue\",\n    value: function refineFirstValue() {\n      var firstValue = this.props.facetValues[0];\n\n      if (firstValue) {\n        var actualValue = firstValue.value;\n        this.props.toggleRefinement(actualValue);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // Adding `-lvl0` classes\n      var cssClassList = cx(this.props.cssClasses.list, _defineProperty({}, \"\".concat(this.props.cssClasses.depth).concat(this.props.depth), this.props.cssClasses.depth));\n      var showMoreButtonClassName = cx(this.props.cssClasses.showMore, _defineProperty({}, this.props.cssClasses.disabledShowMore, !(this.props.showMore === true && this.props.canToggleShowMore)));\n      var showMoreButton = this.props.showMore === true && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"showMoreText\",\n        rootTagName: \"button\",\n        rootProps: {\n          className: showMoreButtonClassName,\n          disabled: !this.props.canToggleShowMore,\n          onClick: this.props.toggleShowMore\n        },\n        data: {\n          isShowingMore: this.props.isShowingMore\n        }\n      }));\n      var shouldDisableSearchBox = this.props.searchIsAlwaysActive !== true && !(this.props.isFromSearch || !this.props.hasExhaustiveItems);\n      var searchBox = this.props.searchFacetValues && h(\"div\", {\n        className: this.props.cssClasses.searchBox\n      }, h(SearchBox, {\n        ref: function ref(searchBoxRef) {\n          return _this2.searchBox = searchBoxRef;\n        },\n        placeholder: this.props.searchPlaceholder,\n        disabled: shouldDisableSearchBox,\n        cssClasses: this.props.cssClasses.searchable,\n        templates: this.props.templateProps.templates,\n        onChange: function onChange(event) {\n          return _this2.props.searchFacetValues(event.target.value);\n        },\n        onReset: function onReset() {\n          return _this2.props.searchFacetValues('');\n        },\n        onSubmit: function onSubmit() {\n          return _this2.refineFirstValue();\n        } // This sets the search box to a controlled state because\n        // we don't rely on the `refine` prop but on `onChange`.\n        ,\n        searchAsYouType: false\n      }));\n      var facetValues = this.props.facetValues && this.props.facetValues.length > 0 && h(\"ul\", {\n        className: cssClassList\n      }, this.props.facetValues.map(this._generateFacetItem, this));\n      var noResults = this.props.searchFacetValues && this.props.isFromSearch && this.props.facetValues.length === 0 && h(Template, _extends({}, this.props.templateProps, {\n        templateKey: \"searchableNoResults\",\n        rootProps: {\n          className: this.props.cssClasses.noResults\n        }\n      }));\n      return h(\"div\", {\n        className: cx(this.props.cssClasses.root, _defineProperty({}, this.props.cssClasses.noRefinementRoot, !this.props.facetValues || this.props.facetValues.length === 0), this.props.className)\n      }, this.props.children, searchBox, facetValues, noResults, showMoreButton);\n    }\n  }]);\n\n  return RefinementList;\n}(Component);\n\nRefinementList.defaultProps = {\n  cssClasses: {},\n  depth: 0\n};\nexport default RefinementList;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT } from '../../lib/escape-highlight';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\n/**\n * @typedef {Object} RefinementListItem\n * @property {string} value The value of the refinement list item.\n * @property {string} label Human-readable value of the refinement list item.\n * @property {number} count Number of matched results after refinement is applied.\n * @property {boolean} isRefined Indicates if the list item is refined.\n */\n\n/**\n * @typedef {Object} CustomRefinementListWidgetOptions\n * @property {string} attribute The name of the attribute in the records.\n * @property {\"and\"|\"or\"} [operator = 'or'] How the filters are combined together.\n * @property {number} [limit = 10] The max number of items to display when\n * `showMoreLimit` is not set or if the widget is showing less value.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] The max number of items to display if the widget\n * is showing more items.\n * @property {string[]|function} [sortBy = ['isRefined', 'count:desc', 'name:asc']] How to sort refinements. Possible values: `count|isRefined|name:asc|name:desc`.\n * @property {boolean} [escapeFacetValues = true] Escapes the content of the facet values.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} RefinementListRenderingOptions\n * @property {RefinementListItem[]} items The list of filtering values returned from Algolia API.\n * @property {function(item.value): string} createURL Creates the next state url for a selected refinement.\n * @property {function(item.value)} refine Action to apply selected refinements.\n * @property {function} searchForItems Searches for values inside the list.\n * @property {boolean} isFromSearch `true` if the values are from an index search.\n * @property {boolean} canRefine `true` if a refinement can be applied.\n * @property {boolean} canToggleShowMore `true` if the toggleShowMore button can be activated (enough items to display more or\n * already displaying more than `limit` items)\n * @property {Object} widgetParams All original `CustomRefinementListWidgetOptions` forwarded to the `renderFn`.\n * @property {boolean} isShowingMore True if the menu is displaying all the menu items.\n * @property {function} toggleShowMore Toggles the number of values displayed between `limit` and `showMoreLimit`.\n */\n\n/**\n * **RefinementList** connector provides the logic to build a custom widget that will let the\n * user filter the results based on the values of a specific facet.\n *\n * This connector provides a `toggleShowMore()` function to display more or less items and a `refine()`\n * function to select an item.\n * @type {Connector}\n * @param {function(RefinementListRenderingOptions, boolean)} renderFn Rendering function for the custom **RefinementList** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomRefinementListWidgetOptions)} Re-usable widget factory for a custom **RefinementList** widget.\n * @example\n * // custom `renderFn` to render the custom RefinementList widget\n * function renderFn(RefinementListRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .html('<ul></ul>')\n *   }\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() { $(this).off('click'); });\n *\n *   if (RefinementListRenderingOptions.canRefine) {\n *     var list = RefinementListRenderingOptions.items.map(function(item) {\n *       return `\n *         <li data-refine-value=\"${item.value}\">\n *           <input type=\"checkbox\" value=\"${item.value}\" ${item.isRefined ? 'checked' : ''} />\n *           <a href=\"${RefinementListRenderingOptions.createURL(item.value)}\">\n *             ${item.label} (${item.count})\n *           </a>\n *         </li>\n *       `;\n *     });\n *\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *     RefinementListRenderingOptions.widgetParams.containerNode\n *       .find('li[data-refine-value]')\n *       .each(function() {\n *         $(this).on('click', function(event) {\n *           event.stopPropagation();\n *           event.preventDefault();\n *\n *           RefinementListRenderingOptions.refine($(this).data('refine-value'));\n *         });\n *       });\n *   } else {\n *     RefinementListRenderingOptions.widgetParams.containerNode.find('ul').html('');\n *   }\n * }\n *\n * // connect `renderFn` to RefinementList logic\n * var customRefinementList = instantsearch.connectors.connectRefinementList(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customRefinementList({\n *     containerNode: $('#custom-refinement-list-container'),\n *     attribute: 'categories',\n *     limit: 10,\n *   })\n * ]);\n */\n\nexport default function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attribute = widgetParams.attribute,\n        _widgetParams$operato = widgetParams.operator,\n        operator = _widgetParams$operato === void 0 ? 'or' : _widgetParams$operato,\n        _widgetParams$limit = widgetParams.limit,\n        limit = _widgetParams$limit === void 0 ? 10 : _widgetParams$limit,\n        _widgetParams$showMor = widgetParams.showMore,\n        showMore = _widgetParams$showMor === void 0 ? false : _widgetParams$showMor,\n        _widgetParams$showMor2 = widgetParams.showMoreLimit,\n        showMoreLimit = _widgetParams$showMor2 === void 0 ? 20 : _widgetParams$showMor2,\n        _widgetParams$sortBy = widgetParams.sortBy,\n        sortBy = _widgetParams$sortBy === void 0 ? ['isRefined', 'count:desc', 'name:asc'] : _widgetParams$sortBy,\n        _widgetParams$escapeF = widgetParams.escapeFacetValues,\n        escapeFacetValues = _widgetParams$escapeF === void 0 ? true : _widgetParams$escapeF,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === void 0 ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n\n    var formatItems = function formatItems(_ref) {\n      var label = _ref.name,\n          item = _objectWithoutProperties(_ref, [\"name\"]);\n\n      return _objectSpread({}, item, {\n        label: label,\n        value: label,\n        highlighted: label\n      });\n    };\n\n    var _getLimit = function getLimit(isShowingMore) {\n      return isShowingMore ? showMoreLimit : limit;\n    };\n\n    var lastResultsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var searchForFacetValues;\n    var triggerRefine;\n\n    var _render = function render(_ref2) {\n      var items = _ref2.items,\n          state = _ref2.state,\n          createURL = _ref2.createURL,\n          helperSpecializedSearchFacetValues = _ref2.helperSpecializedSearchFacetValues,\n          refine = _ref2.refine,\n          isFromSearch = _ref2.isFromSearch,\n          isFirstSearch = _ref2.isFirstSearch,\n          isShowingMore = _ref2.isShowingMore,\n          toggleShowMore = _ref2.toggleShowMore,\n          instantSearchInstance = _ref2.instantSearchInstance;\n\n      // Compute a specific createURL method able to link to any facet value state change\n      var _createURL = function _createURL(facetValue) {\n        return createURL(state.toggleRefinement(attribute, facetValue));\n      }; // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n      // function\n\n\n      var searchFacetValues = helperSpecializedSearchFacetValues && helperSpecializedSearchFacetValues(state, createURL, helperSpecializedSearchFacetValues, refine, instantSearchInstance, isShowingMore);\n      var canShowLess = isShowingMore && lastResultsFromMainSearch.length > limit;\n      var canShowMore = showMore && !isFromSearch && !hasExhaustiveItems;\n      var canToggleShowMore = canShowLess || canShowMore;\n      renderFn({\n        createURL: _createURL,\n        items: items,\n        refine: refine,\n        searchForItems: searchFacetValues,\n        instantSearchInstance: instantSearchInstance,\n        isFromSearch: isFromSearch,\n        canRefine: isFromSearch || items.length > 0,\n        widgetParams: widgetParams,\n        isShowingMore: isShowingMore,\n        canToggleShowMore: canToggleShowMore,\n        toggleShowMore: toggleShowMore,\n        hasExhaustiveItems: hasExhaustiveItems\n      }, isFirstSearch);\n    };\n    /* eslint-disable max-params */\n\n\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, toggleShowMore) {\n      return function (state, createURL, helperSpecializedSearchFacetValues, toggleRefinement, instantSearchInstance, isShowingMore) {\n        return function (query) {\n          if (query === '' && lastResultsFromMainSearch) {\n            // render with previous data from the helper.\n            _render({\n              items: lastResultsFromMainSearch,\n              state: state,\n              createURL: createURL,\n              helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n              refine: toggleRefinement,\n              isFromSearch: false,\n              isFirstSearch: false,\n              instantSearchInstance: instantSearchInstance,\n              toggleShowMore: toggleShowMore,\n              // and yet it will be\n              isShowingMore: isShowingMore // so we need to restore in the state of show more as well\n\n            });\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query, _getLimit(isShowingMore), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var value = _ref3.value,\n                    item = _objectWithoutProperties(_ref3, [\"value\"]);\n\n                return _objectSpread({}, item, {\n                  value: value,\n                  label: value\n                });\n              }));\n\n              _render({\n                items: normalizedFacetValues,\n                state: state,\n                createURL: createURL,\n                helperSpecializedSearchFacetValues: helperSpecializedSearchFacetValues,\n                refine: toggleRefinement,\n                isFromSearch: true,\n                isFirstSearch: false,\n                instantSearchInstance: instantSearchInstance,\n                isShowingMore: isShowingMore\n              });\n            });\n          }\n        };\n      };\n    };\n    /* eslint-enable max-params */\n\n\n    return {\n      $$type: 'ais.refinementList',\n      isShowingMore: false,\n      // Provide the same function to the `renderFn` so that way the user\n      // has to only bind it once when `isFirstRendering` for instance\n      toggleShowMore: function toggleShowMore() {},\n      cachedToggleShowMore: function cachedToggleShowMore() {\n        this.toggleShowMore();\n      },\n      createToggleShowMore: function createToggleShowMore(renderOptions) {\n        var _this = this;\n\n        return function () {\n          _this.isShowingMore = !_this.isShowingMore;\n\n          _this.render(renderOptions);\n        };\n      },\n      getLimit: function getLimit() {\n        return _getLimit(this.isShowingMore);\n      },\n      init: function init(_ref4) {\n        var helper = _ref4.helper,\n            createURL = _ref4.createURL,\n            instantSearchInstance = _ref4.instantSearchInstance;\n        this.cachedToggleShowMore = this.cachedToggleShowMore.bind(this);\n\n        triggerRefine = function triggerRefine(facetValue) {\n          return helper.toggleRefinement(attribute, facetValue).search();\n        };\n\n        searchForFacetValues = createSearchForFacetValues(helper, this.cachedToggleShowMore);\n\n        _render({\n          items: [],\n          state: helper.state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: true,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      render: function render(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance;\n        var facetValues = results.getFacetValues(attribute, {\n          sortBy: sortBy\n        }) || [];\n        var items = transformItems(facetValues.slice(0, this.getLimit()).map(formatItems));\n        var maxValuesPerFacetConfig = state.maxValuesPerFacet;\n        var currentLimit = this.getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n        // if the facets are exhaustive. The only moment we are sure it is exhaustive\n        // is when it is strictly under the number requested unless we know that another\n        // widget has requested more values (maxValuesPerFacet > getLimit()).\n        // Because this is used for making the search of facets unable or not, it is important\n        // to be conservative here.\n\n        hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n        lastResultsFromMainSearch = items;\n        this.toggleShowMore = this.createToggleShowMore(renderOptions);\n\n        _render({\n          items: items,\n          state: state,\n          createURL: createURL,\n          helperSpecializedSearchFacetValues: searchForFacetValues,\n          refine: triggerRefine,\n          isFromSearch: false,\n          isFirstSearch: false,\n          instantSearchInstance: instantSearchInstance,\n          isShowingMore: this.isShowingMore,\n          toggleShowMore: this.cachedToggleShowMore\n        });\n      },\n      dispose: function dispose(_ref5) {\n        var state = _ref5.state;\n        unmountFn();\n        var withoutMaxValuesPerFacet = state.setQueryParameter('maxValuesPerFacet', undefined);\n\n        if (operator === 'and') {\n          return withoutMaxValuesPerFacet.removeFacet(attribute);\n        }\n\n        return withoutMaxValuesPerFacet.removeDisjunctiveFacet(attribute);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref6) {\n        var searchParameters = _ref6.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n\n        if (!values.length) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          refinementList: _objectSpread({}, uiState.refinementList, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref7) {\n        var uiState = _ref7.uiState;\n        var isDisjunctive = operator === 'or';\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        var withoutRefinements = searchParameters.clearRefinements(attribute);\n        var withFacetConfiguration = isDisjunctive ? withoutRefinements.addDisjunctiveFacet(attribute) : withoutRefinements.addFacet(attribute);\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n\n        if (!values) {\n          var key = isDisjunctive ? 'disjunctiveFacetsRefinements' : 'facetsRefinements';\n          return withMaxValuesPerFacet.setQueryParameters(_defineProperty({}, key, _objectSpread({}, withMaxValuesPerFacet[key], _defineProperty({}, attribute, []))));\n        }\n\n        return values.reduce(function (parameters, value) {\n          return isDisjunctive ? parameters.addDisjunctiveFacetRefinement(attribute, value) : parameters.addFacetRefinement(attribute, value);\n        }, withMaxValuesPerFacet);\n      }\n    };\n  };\n}","export default {\n  item: \"<label class=\\\"{{cssClasses.label}}\\\">\\n  <input type=\\\"checkbox\\\"\\n         class=\\\"{{cssClasses.checkbox}}\\\"\\n         value=\\\"{{value}}\\\"\\n         {{#isRefined}}checked{{/isRefined}} />\\n  <span class=\\\"{{cssClasses.labelText}}\\\">{{#isFromSearch}}{{{highlighted}}}{{/isFromSearch}}{{^isFromSearch}}{{highlighted}}{{/isFromSearch}}</span>\\n  <span class=\\\"{{cssClasses.count}}\\\">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\\n</label>\",\n  showMoreText: \"\\n    {{#isShowingMore}}\\n      Show less\\n    {{/isShowingMore}}\\n    {{^isShowingMore}}\\n      Show more\\n    {{/isShowingMore}}\\n    \",\n  searchableNoResults: 'No results',\n  searchableReset: \"\\n  <svg class=\\\"{{cssClasses.resetIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\" width=\\\"10\\\" height=\\\"10\\\">\\n    <path d=\\\"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\\\"></path>\\n  </svg>\\n    \",\n  searchableSubmit: \"\\n  <svg class=\\\"{{cssClasses.submitIcon}}\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"10\\\" height=\\\"10\\\" viewBox=\\\"0 0 40 40\\\">\\n    <path d=\\\"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\\\"></path>\\n  </svg>\\n    \",\n  searchableLoadingIndicator: \"\\n  <svg class=\\\"{{cssClasses.loadingIcon}}\\\" width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 38 38\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" stroke=\\\"#444\\\">\\n    <g fill=\\\"none\\\" fillRule=\\\"evenodd\\\">\\n      <g transform=\\\"translate(1 1)\\\" strokeWidth=\\\"2\\\">\\n        <circle strokeOpacity=\\\".5\\\" cx=\\\"18\\\" cy=\\\"18\\\" r=\\\"18\\\" />\\n        <path d=\\\"M36 18c0-9.94-8.06-18-18-18\\\">\\n          <animateTransform\\n            attributeName=\\\"transform\\\"\\n            type=\\\"rotate\\\"\\n            from=\\\"0 18 18\\\"\\n            to=\\\"360 18 18\\\"\\n            dur=\\\"1s\\\"\\n            repeatCount=\\\"indefinite\\\"\\n          />\\n        </path>\\n      </g>\\n    </g>\\n  </svg>\\n    \"\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport uniq from './uniq';\n\nfunction prepareTemplates() {\n  var defaultTemplates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var templates = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var allKeys = uniq([].concat(_toConsumableArray(Object.keys(defaultTemplates)), _toConsumableArray(Object.keys(templates))));\n  return allKeys.reduce(function (config, key) {\n    var defaultTemplate = defaultTemplates[key];\n    var customTemplate = templates[key];\n    var isCustomTemplate = customTemplate !== undefined && customTemplate !== defaultTemplate;\n    config.templates[key] = isCustomTemplate ? customTemplate : defaultTemplate;\n    config.useCustomCompileOptions[key] = isCustomTemplate;\n    return config;\n  }, {\n    templates: {},\n    useCustomCompileOptions: {}\n  });\n}\n/**\n * Prepares an object to be passed to the Template widget\n */\n\n\nfunction prepareTemplateProps(_ref) {\n  var defaultTemplates = _ref.defaultTemplates,\n      templates = _ref.templates,\n      templatesConfig = _ref.templatesConfig;\n  var preparedTemplates = prepareTemplates(defaultTemplates, templates);\n  return _objectSpread({\n    templatesConfig: templatesConfig\n  }, preparedTemplates);\n}\n\nexport default prepareTemplateProps;","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport RefinementList from '../../components/RefinementList/RefinementList';\nimport connectRefinementList from '../../connectors/refinement-list/connectRefinementList';\nimport defaultTemplates from './defaultTemplates';\nimport { prepareTemplateProps, getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list'\n});\nvar suit = component('RefinementList');\nvar searchBoxSuit = component('SearchBox');\n/**\n * Transforms the searchable templates by removing the `searchable` prefix.\n *\n * This makes them usable in the `SearchBox` component.\n *\n * @param {object} templates The widget templates\n * @returns {object} the formatted templates\n */\n\nfunction transformTemplates(templates) {\n  var allTemplates = _objectSpread({}, templates, {\n    submit: templates.searchableSubmit,\n    reset: templates.searchableReset,\n    loadingIndicator: templates.searchableLoadingIndicator\n  });\n\n  var searchableReset = allTemplates.searchableReset,\n      searchableSubmit = allTemplates.searchableSubmit,\n      searchableLoadingIndicator = allTemplates.searchableLoadingIndicator,\n      transformedTemplates = _objectWithoutProperties(allTemplates, [\"searchableReset\", \"searchableSubmit\", \"searchableLoadingIndicator\"]);\n\n  return transformedTemplates;\n}\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      templates = _ref.templates,\n      renderState = _ref.renderState,\n      showMore = _ref.showMore,\n      searchable = _ref.searchable,\n      searchablePlaceholder = _ref.searchablePlaceholder,\n      searchableIsAlwaysActive = _ref.searchableIsAlwaysActive;\n  return function (_ref2, isFirstRendering) {\n    var refine = _ref2.refine,\n        items = _ref2.items,\n        createURL = _ref2.createURL,\n        searchForItems = _ref2.searchForItems,\n        isFromSearch = _ref2.isFromSearch,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        toggleShowMore = _ref2.toggleShowMore,\n        isShowingMore = _ref2.isShowingMore,\n        hasExhaustiveItems = _ref2.hasExhaustiveItems,\n        canToggleShowMore = _ref2.canToggleShowMore;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    render(h(RefinementList, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      facetValues: items,\n      templateProps: renderState.templateProps,\n      toggleRefinement: refine,\n      searchFacetValues: searchable ? searchForItems : undefined,\n      searchPlaceholder: searchablePlaceholder,\n      searchIsAlwaysActive: searchableIsAlwaysActive,\n      isFromSearch: isFromSearch,\n      showMore: showMore && !isFromSearch && items.length > 0,\n      toggleShowMore: toggleShowMore,\n      isShowingMore: isShowingMore,\n      hasExhaustiveItems: hasExhaustiveItems,\n      canToggleShowMore: canToggleShowMore\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} RefinementListTemplates\n * @property  {string|function(RefinementListItemData):string} [item] Item template, provided with `label`, `highlighted`, `value`, `count`, `isRefined`, `url` data properties.\n * @property {string|function} [searchableNoResults] Templates to use for search for facet values.\n * @property {string|function} [showMoreText] Template used for the show more text, provided with `isShowingMore` data property.\n */\n\n/**\n * @typedef {Object} RefinementListItemData\n * @property {number} count The number of occurrences of the facet in the result set.\n * @property {boolean} isRefined True if the value is selected.\n * @property {string} label The label to display.\n * @property {string} value The value used for refining.\n * @property {string} highlighted The label highlighted (when using search for facet values). This value is displayed in the default template.\n * @property {string} url The url with this refinement selected.\n * @property {object} cssClasses Object containing all the classes computed for the item.\n */\n\n/**\n * @typedef {Object} RefinementListCSSClasses\n * @property {string|string[]} [root] CSS class to add to the root element.\n * @property {string|string[]} [noRefinementRoot] CSS class to add to the root element when no refinements.\n * @property {string|string[]} [noResults] CSS class to add to the root element with no results.\n * @property {string|string[]} [list] CSS class to add to the list element.\n * @property {string|string[]} [item] CSS class to add to each item element.\n * @property {string|string[]} [selectedItem] CSS class to add to each selected element.\n * @property {string|string[]} [label] CSS class to add to each label element (when using the default template).\n * @property {string|string[]} [checkbox] CSS class to add to each checkbox element (when using the default template).\n * @property {string|string[]} [labelText] CSS class to add to each label text element.\n * @property {string|string[]} [showMore] CSS class to add to the show more element\n * @property {string|string[]} [disabledShowMore] CSS class to add to the disabledshow more element\n * @property {string|string[]} [count] CSS class to add to each count element (when using the default template).\n */\n\n/**\n * @typedef {Object} RefinementListWidgetOptions\n * @property {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget.\n * @property {string} attribute Name of the attribute for faceting.\n * @property {\"and\"|\"or\"} [operator=\"or\"] How to apply refinements. Possible values: `or`, `and`\n * @property {string[]|function} [sortBy=[\"isRefined\", \"count:desc\", \"name:asc\"]] How to sort refinements. Possible values: `count:asc` `count:desc` `name:asc` `name:desc` `isRefined`.\n *\n * You can also use a sort function that behaves like the standard Javascript [compareFunction](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Syntax).\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n * @property {boolean} [searchable=false] Add a search input to let the user search for more facet values. In order to make this feature work, you need to make the attribute searchable [using the API](https://www.algolia.com/doc/guides/searching/faceting/?language=js#declaring-a-searchable-attribute-for-faceting) or [the dashboard](https://www.algolia.com/explorer/display/).\n * @property {number} [limit = 10] The minimum number of facet values to retrieve.\n * @property {boolean} [showMore = false] Whether to display a button that expands the number of items.\n * @property {number} [showMoreLimit = 20] The max number of items to display if the widget\n * @property {string} [searchablePlaceholder] Value of the search field placeholder.\n * @property {boolean} [searchableIsAlwaysActive=true] When `false` the search field will become disabled if\n * there are less items to display than the `options.limit`, otherwise the search field is always usable.\n * @property {boolean} [searchableEscapeFacetValues=true] When activated, it will escape the facet values that are returned\n * from Algolia. In this case, the surrounding tags will always be `<mark></mark>`.\n * @property {RefinementListTemplates} [templates] Templates to use for the widget.\n * @property {RefinementListCSSClasses} [cssClasses] CSS classes to add to the wrapping elements.\n */\n\n/**\n * The refinement list widget is one of the most common widget that you can find\n * in a search UI. With this widget, the user can filter the dataset based on facets.\n *\n * The refinement list displays only the most relevant facets for the current search\n * context. The sort option only affects the facet that are returned by the engine,\n * not which facets are returned.\n *\n * This widget also implements search for facet values, which is a mini search inside the\n * values of the facets. This makes easy to deal with uncommon facet values.\n *\n * @requirements\n *\n * The attribute passed to `attribute` must be declared as an\n * [attribute for faceting](https://www.algolia.com/doc/guides/searching/faceting/#declaring-attributes-for-faceting)\n * in your Algolia settings.\n *\n * If you also want to use search for facet values on this attribute, you need to make it searchable using the [dashboard](https://www.algolia.com/explorer/display/) or using the [API](https://www.algolia.com/doc/guides/searching/faceting/#search-for-facet-values).\n *\n * @type {WidgetFactory}\n * @devNovel RefinementList\n * @category filter\n * @param {RefinementListWidgetOptions} $0 The RefinementList widget options that you use to customize the widget.\n * @return {Widget} Creates a new instance of the RefinementList widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.refinementList({\n *     container: '#brands',\n *     attribute: 'brand',\n *     operator: 'or',\n *     limit: 10,\n *   })\n * ]);\n */\n\n\nexport default function refinementList() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      attribute = _ref3.attribute,\n      operator = _ref3.operator,\n      sortBy = _ref3.sortBy,\n      limit = _ref3.limit,\n      showMore = _ref3.showMore,\n      showMoreLimit = _ref3.showMoreLimit,\n      _ref3$searchable = _ref3.searchable,\n      searchable = _ref3$searchable === void 0 ? false : _ref3$searchable,\n      _ref3$searchablePlace = _ref3.searchablePlaceholder,\n      searchablePlaceholder = _ref3$searchablePlace === void 0 ? 'Search...' : _ref3$searchablePlace,\n      _ref3$searchableEscap = _ref3.searchableEscapeFacetValues,\n      searchableEscapeFacetValues = _ref3$searchableEscap === void 0 ? true : _ref3$searchableEscap,\n      _ref3$searchableIsAlw = _ref3.searchableIsAlwaysActive,\n      searchableIsAlwaysActive = _ref3$searchableIsAlw === void 0 ? true : _ref3$searchableIsAlw,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      _ref3$templates = _ref3.templates,\n      userTemplates = _ref3$templates === void 0 ? defaultTemplates : _ref3$templates,\n      transformItems = _ref3.transformItems;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var escapeFacetValues = searchable ? Boolean(searchableEscapeFacetValues) : false;\n  var containerNode = getContainerNode(container);\n  var templates = transformTemplates(_objectSpread({}, defaultTemplates, {}, userTemplates));\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    searchBox: cx(suit({\n      descendantName: 'searchBox'\n    }), userCssClasses.searchBox),\n    label: cx(suit({\n      descendantName: 'label'\n    }), userCssClasses.label),\n    checkbox: cx(suit({\n      descendantName: 'checkbox'\n    }), userCssClasses.checkbox),\n    labelText: cx(suit({\n      descendantName: 'labelText'\n    }), userCssClasses.labelText),\n    count: cx(suit({\n      descendantName: 'count'\n    }), userCssClasses.count),\n    noResults: cx(suit({\n      descendantName: 'noResults'\n    }), userCssClasses.noResults),\n    showMore: cx(suit({\n      descendantName: 'showMore'\n    }), userCssClasses.showMore),\n    disabledShowMore: cx(suit({\n      descendantName: 'showMore',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledShowMore),\n    searchable: {\n      root: cx(searchBoxSuit(), userCssClasses.searchableRoot),\n      form: cx(searchBoxSuit({\n        descendantName: 'form'\n      }), userCssClasses.searchableForm),\n      input: cx(searchBoxSuit({\n        descendantName: 'input'\n      }), userCssClasses.searchableInput),\n      submit: cx(searchBoxSuit({\n        descendantName: 'submit'\n      }), userCssClasses.searchableSubmit),\n      submitIcon: cx(searchBoxSuit({\n        descendantName: 'submitIcon'\n      }), userCssClasses.searchableSubmitIcon),\n      reset: cx(searchBoxSuit({\n        descendantName: 'reset'\n      }), userCssClasses.searchableReset),\n      resetIcon: cx(searchBoxSuit({\n        descendantName: 'resetIcon'\n      }), userCssClasses.searchableResetIcon),\n      loadingIndicator: cx(searchBoxSuit({\n        descendantName: 'loadingIndicator'\n      }), userCssClasses.searchableLoadingIndicator),\n      loadingIcon: cx(searchBoxSuit({\n        descendantName: 'loadingIcon'\n      }), userCssClasses.searchableLoadingIcon)\n    }\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    templates: templates,\n    renderState: {},\n    searchable: searchable,\n    searchablePlaceholder: searchablePlaceholder,\n    searchableIsAlwaysActive: searchableIsAlwaysActive,\n    showMore: showMore\n  });\n  var makeWidget = connectRefinementList(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    attribute: attribute,\n    operator: operator,\n    limit: limit,\n    showMore: showMore,\n    showMoreLimit: showMoreLimit,\n    sortBy: sortBy,\n    escapeFacetValues: escapeFacetValues,\n    transformItems: transformItems\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addAbsolutePosition = function addAbsolutePosition(hits, page, hitsPerPage) {\n  return hits.map(function (hit, idx) {\n    return _objectSpread({}, hit, {\n      __position: hitsPerPage * page + idx + 1\n    });\n  });\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var addQueryID = function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n\n  return hits.map(function (hit) {\n    return _objectSpread({}, hit, {\n      __queryID: queryID\n    });\n  });\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport escapeHits, { TAG_PLACEHOLDER } from '../../lib/escape-highlight';\nimport { checkRendering, createDocumentationMessageGenerator, addAbsolutePosition, addQueryID, noop } from '../../lib/utils';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits',\n  connector: true\n});\n\nvar connectHits = function connectHits(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        _ref$escapeHTML = _ref.escapeHTML,\n        escapeHTML = _ref$escapeHTML === void 0 ? true : _ref$escapeHTML,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems;\n\n    return {\n      $$type: 'ais.hits',\n      init: function init(_ref2) {\n        var instantSearchInstance = _ref2.instantSearchInstance;\n        renderFn({\n          hits: [],\n          results: undefined,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            instantSearchInstance = _ref3.instantSearchInstance;\n\n        if (escapeHTML && results.hits.length > 0) {\n          results.hits = escapeHits(results.hits);\n        }\n\n        var initialEscaped = results.hits.__escaped;\n        results.hits = addAbsolutePosition(results.hits, results.page, results.hitsPerPage);\n        results.hits = addQueryID(results.hits, results.queryID);\n        results.hits = transformItems(results.hits); // Make sure the escaped tag stays, even after mapping over the hits.\n        // This prevents the hits from being double-escaped if there are multiple\n        // hits widgets mounted on the page.\n\n        results.hits.__escaped = initialEscaped;\n        renderFn({\n          hits: results.hits,\n          results: results,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(Object.keys(TAG_PLACEHOLDER).reduce(function (acc, key) {\n          return _objectSpread({}, acc, _defineProperty({}, key, undefined));\n        }, {}));\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(state) {\n        if (!escapeHTML) {\n          return state;\n        }\n\n        return state.setQueryParameters(TAG_PLACEHOLDER);\n      }\n    };\n  };\n};\n\nexport default connectHits;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Template from '../Template/Template';\n\nvar Hits = function Hits(_ref) {\n  var results = _ref.results,\n      hits = _ref.hits,\n      cssClasses = _ref.cssClasses,\n      templateProps = _ref.templateProps;\n\n  if (results.hits.length === 0) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"empty\",\n      rootProps: {\n        className: cx(cssClasses.root, cssClasses.emptyRoot)\n      },\n      data: results\n    }));\n  }\n\n  return h(\"div\", {\n    className: cssClasses.root\n  }, h(\"ol\", {\n    className: cssClasses.list\n  }, hits.map(function (hit, position) {\n    return h(Template, _extends({}, templateProps, {\n      templateKey: \"item\",\n      rootTagName: \"li\",\n      rootProps: {\n        className: cssClasses.item\n      },\n      key: hit.objectID,\n      data: _objectSpread({}, hit, {\n        __hitIndex: position\n      })\n    }));\n  })));\n};\n\nHits.defaultProps = {\n  results: {\n    hits: []\n  },\n  hits: []\n};\nexport default Hits;","export default {\n  empty: 'No results',\n  item: function item(data) {\n    return JSON.stringify(data, null, 2);\n  }\n};","/** @jsx h */\nimport { h } from 'preact';\nimport { readDataAttributes, hasDataAttributes } from '../../helpers/insights';\n\nvar findInsightsTarget = function findInsightsTarget(startElement, endElement) {\n  var element = startElement;\n\n  while (element && !hasDataAttributes(element)) {\n    if (element === endElement) {\n      return null;\n    }\n\n    element = element.parentElement;\n  }\n\n  return element;\n};\n\nvar insightsListener = function insightsListener(BaseComponent) {\n  function WithInsightsListener(props) {\n    var handleClick = function handleClick(event) {\n      var insightsTarget = findInsightsTarget(event.target, event.currentTarget);\n      if (!insightsTarget) return;\n\n      var _readDataAttributes = readDataAttributes(insightsTarget),\n          method = _readDataAttributes.method,\n          payload = _readDataAttributes.payload;\n\n      props.insights(method, payload);\n    };\n\n    return h(\"div\", {\n      onClick: handleClick\n    }, h(BaseComponent, props));\n  }\n\n  return WithInsightsListener;\n};\n\nexport default insightsListener;","// We aren't using the native `Array.prototype.find` because the refactor away from Lodash is not\n// published as a major version.\n// Relying on the `find` polyfill on user-land, which before was only required for niche use-cases,\n// was decided as too risky.\n// @MAJOR Replace with the native `Array.prototype.find` method\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nfunction find(items, predicate, thisArg) {\n  if (!Array.prototype.find) {\n    return items.filter(predicate, thisArg)[0];\n  }\n\n  return items.find(predicate, thisArg);\n}\n\nexport default find;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { uniq, find, createDocumentationMessageGenerator } from '../utils';\n\nvar getSelectedHits = function getSelectedHits(hits, selectedObjectIDs) {\n  return selectedObjectIDs.map(function (objectID) {\n    var hit = find(hits, function (h) {\n      return h.objectID === objectID;\n    });\n\n    if (typeof hit === 'undefined') {\n      throw new Error(\"Could not find objectID \\\"\".concat(objectID, \"\\\" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.\"));\n    }\n\n    return hit;\n  });\n};\n\nvar getQueryID = function getQueryID(selectedHits) {\n  var queryIDs = uniq(selectedHits.map(function (hit) {\n    return hit.__queryID;\n  }));\n\n  if (queryIDs.length > 1) {\n    throw new Error('Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.');\n  }\n\n  var queryID = queryIDs[0];\n\n  if (typeof queryID !== 'string') {\n    throw new Error(\"Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\\n\\nSee: https://alg.li/lNiZZ7\");\n  }\n\n  return queryID;\n};\n\nvar getPositions = function getPositions(selectedHits) {\n  return selectedHits.map(function (hit) {\n    return hit.__position;\n  });\n};\n\nexport var inferPayload = function inferPayload(_ref) {\n  var method = _ref.method,\n      results = _ref.results,\n      hits = _ref.hits,\n      objectIDs = _ref.objectIDs;\n  var index = results.index;\n  var selectedHits = getSelectedHits(hits, objectIDs);\n  var queryID = getQueryID(selectedHits);\n\n  switch (method) {\n    case 'clickedObjectIDsAfterSearch':\n      {\n        var positions = getPositions(selectedHits);\n        return {\n          index: index,\n          queryID: queryID,\n          objectIDs: objectIDs,\n          positions: positions\n        };\n      }\n\n    case 'convertedObjectIDsAfterSearch':\n      return {\n        index: index,\n        queryID: queryID,\n        objectIDs: objectIDs\n      };\n\n    default:\n      throw new Error(\"Unsupported method passed to insights: \\\"\".concat(method, \"\\\".\"));\n  }\n};\n\nvar wrapInsightsClient = function wrapInsightsClient(aa, results, hits) {\n  return function (method, payload) {\n    if (!aa) {\n      var withInstantSearchUsage = createDocumentationMessageGenerator({\n        name: 'instantsearch'\n      });\n      throw new Error(withInstantSearchUsage('The `insightsClient` option has not been provided to `instantsearch`.'));\n    }\n\n    if (!Array.isArray(payload.objectIDs)) {\n      throw new TypeError('Expected `objectIDs` to be an array.');\n    }\n\n    var inferredPayload = inferPayload({\n      method: method,\n      results: results,\n      hits: hits,\n      objectIDs: payload.objectIDs\n    });\n    aa(method, _objectSpread({}, inferredPayload, {}, payload));\n  };\n};\n\nexport default function withInsights(connector) {\n  var wrapRenderFn = function wrapRenderFn(renderFn) {\n    return function (renderOptions, isFirstRender) {\n      var results = renderOptions.results,\n          hits = renderOptions.hits,\n          instantSearchInstance = renderOptions.instantSearchInstance;\n\n      if (results && hits && instantSearchInstance) {\n        var insights = wrapInsightsClient(instantSearchInstance.insightsClient, results, hits);\n        return renderFn(_objectSpread({}, renderOptions, {\n          insights: insights\n        }), isFirstRender);\n      }\n\n      return renderFn(renderOptions, isFirstRender);\n    };\n  };\n\n  return function (renderFn, unmountFn) {\n    return connector(wrapRenderFn(renderFn), unmountFn);\n  };\n}","/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport connectHits from '../../connectors/hits/connectHits';\nimport Hits from '../../components/Hits/Hits';\nimport defaultTemplates from './defaultTemplates';\nimport { prepareTemplateProps, getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nimport { withInsights, withInsightsListener } from '../../lib/insights';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'hits'\n});\nvar suit = component('Hits');\nvar HitsWithInsightsListener = withInsightsListener(Hits);\n\nvar renderer = function renderer(_ref) {\n  var renderState = _ref.renderState,\n      cssClasses = _ref.cssClasses,\n      containerNode = _ref.containerNode,\n      templates = _ref.templates;\n  return function (_ref2, isFirstRendering) {\n    var receivedHits = _ref2.hits,\n        results = _ref2.results,\n        instantSearchInstance = _ref2.instantSearchInstance,\n        insights = _ref2.insights;\n\n    if (isFirstRendering) {\n      renderState.templateProps = prepareTemplateProps({\n        defaultTemplates: defaultTemplates,\n        templatesConfig: instantSearchInstance.templatesConfig,\n        templates: templates\n      });\n      return;\n    }\n\n    render(h(HitsWithInsightsListener, {\n      cssClasses: cssClasses,\n      hits: receivedHits,\n      results: results,\n      templateProps: renderState.templateProps,\n      insights: insights\n    }), containerNode);\n  };\n};\n\nvar hits = function hits(widgetOptions) {\n  var _ref3 = widgetOptions || {},\n      container = _ref3.container,\n      escapeHTML = _ref3.escapeHTML,\n      transformItems = _ref3.transformItems,\n      _ref3$templates = _ref3.templates,\n      templates = _ref3$templates === void 0 ? defaultTemplates : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    emptyRoot: cx(suit({\n      modifierName: 'empty'\n    }), userCssClasses.emptyRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item)\n  };\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    renderState: {},\n    templates: templates\n  });\n  var makeHits = withInsights(connectHits)(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeHits({\n    escapeHTML: escapeHTML,\n    transformItems: transformItems\n  });\n};\n\nexport default hits;","/** @jsx h */\nimport { h } from 'preact';\nimport PropTypes from 'prop-types';\n\nfunction PaginationLink(_ref) {\n  var cssClasses = _ref.cssClasses,\n      label = _ref.label,\n      ariaLabel = _ref.ariaLabel,\n      url = _ref.url,\n      isDisabled = _ref.isDisabled,\n      handleClick = _ref.handleClick,\n      pageNumber = _ref.pageNumber;\n\n  if (isDisabled) {\n    return h(\"li\", {\n      className: cssClasses.item\n    }, h(\"span\", {\n      className: cssClasses.link,\n      dangerouslySetInnerHTML: {\n        __html: label\n      }\n    }));\n  }\n\n  return h(\"li\", {\n    className: cssClasses.item\n  }, h(\"a\", {\n    className: cssClasses.link,\n    \"aria-label\": ariaLabel,\n    href: url,\n    onClick: function onClick(event) {\n      return handleClick(pageNumber, event);\n    },\n    dangerouslySetInnerHTML: {\n      __html: label\n    }\n  }));\n}\n\nexport default PaginationLink;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, Component } from 'preact';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport PaginationLink from './PaginationLink';\nimport { isSpecialClick } from '../../lib/utils';\n\nvar Pagination =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Pagination, _Component);\n\n  function Pagination() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Pagination);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Pagination)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (pageNumber, event) {\n      if (isSpecialClick(event)) {\n        // do not alter the default browser behavior\n        // if one special key is down\n        return;\n      }\n\n      event.preventDefault();\n\n      _this.props.setCurrentPage(pageNumber);\n    });\n\n    return _this;\n  }\n\n  _createClass(Pagination, [{\n    key: \"pageLink\",\n    value: function pageLink(_ref) {\n      var label = _ref.label,\n          ariaLabel = _ref.ariaLabel,\n          pageNumber = _ref.pageNumber,\n          _ref$additionalClassN = _ref.additionalClassName,\n          additionalClassName = _ref$additionalClassN === void 0 ? null : _ref$additionalClassN,\n          _ref$isDisabled = _ref.isDisabled,\n          isDisabled = _ref$isDisabled === void 0 ? false : _ref$isDisabled,\n          _ref$isSelected = _ref.isSelected,\n          isSelected = _ref$isSelected === void 0 ? false : _ref$isSelected,\n          createURL = _ref.createURL;\n      var cssClasses = {\n        item: cx(this.props.cssClasses.item, additionalClassName),\n        link: this.props.cssClasses.link\n      };\n\n      if (isDisabled) {\n        cssClasses.item = cx(cssClasses.item, this.props.cssClasses.disabledItem);\n      } else if (isSelected) {\n        cssClasses.item = cx(cssClasses.item, this.props.cssClasses.selectedItem);\n      }\n\n      var url = createURL && !isDisabled ? createURL(pageNumber) : '#';\n      return h(PaginationLink, {\n        ariaLabel: ariaLabel,\n        cssClasses: cssClasses,\n        handleClick: this.handleClick,\n        isDisabled: isDisabled,\n        key: label + pageNumber + ariaLabel,\n        label: label,\n        pageNumber: pageNumber,\n        url: url\n      });\n    }\n  }, {\n    key: \"previousPageLink\",\n    value: function previousPageLink(_ref2) {\n      var isFirstPage = _ref2.isFirstPage,\n          currentPage = _ref2.currentPage,\n          createURL = _ref2.createURL;\n      return this.pageLink({\n        ariaLabel: 'Previous',\n        additionalClassName: this.props.cssClasses.previousPageItem,\n        isDisabled: isFirstPage,\n        label: this.props.templates.previous,\n        pageNumber: currentPage - 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"nextPageLink\",\n    value: function nextPageLink(_ref3) {\n      var isLastPage = _ref3.isLastPage,\n          currentPage = _ref3.currentPage,\n          createURL = _ref3.createURL;\n      return this.pageLink({\n        ariaLabel: 'Next',\n        additionalClassName: this.props.cssClasses.nextPageItem,\n        isDisabled: isLastPage,\n        label: this.props.templates.next,\n        pageNumber: currentPage + 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"firstPageLink\",\n    value: function firstPageLink(_ref4) {\n      var isFirstPage = _ref4.isFirstPage,\n          createURL = _ref4.createURL;\n      return this.pageLink({\n        ariaLabel: 'First',\n        additionalClassName: this.props.cssClasses.firstPageItem,\n        isDisabled: isFirstPage,\n        label: this.props.templates.first,\n        pageNumber: 0,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"lastPageLink\",\n    value: function lastPageLink(_ref5) {\n      var isLastPage = _ref5.isLastPage,\n          nbPages = _ref5.nbPages,\n          createURL = _ref5.createURL;\n      return this.pageLink({\n        ariaLabel: 'Last',\n        additionalClassName: this.props.cssClasses.lastPageItem,\n        isDisabled: isLastPage,\n        label: this.props.templates.last,\n        pageNumber: nbPages - 1,\n        createURL: createURL\n      });\n    }\n  }, {\n    key: \"pages\",\n    value: function pages(_ref6) {\n      var _this2 = this;\n\n      var currentPage = _ref6.currentPage,\n          _pages = _ref6.pages,\n          createURL = _ref6.createURL;\n      return _pages.map(function (pageNumber) {\n        return _this2.pageLink({\n          ariaLabel: pageNumber + 1,\n          additionalClassName: _this2.props.cssClasses.pageItem,\n          isSelected: pageNumber === currentPage,\n          label: pageNumber + 1,\n          pageNumber: pageNumber,\n          createURL: createURL\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return h(\"div\", {\n        className: cx(this.props.cssClasses.root, _defineProperty({}, this.props.cssClasses.noRefinementRoot, this.props.nbPages <= 1))\n      }, h(\"ul\", {\n        className: this.props.cssClasses.list\n      }, this.props.showFirst && this.firstPageLink(this.props), this.props.showPrevious && this.previousPageLink(this.props), this.pages(this.props), this.props.showNext && this.nextPageLink(this.props), this.props.showLast && this.lastPageLink(this.props)));\n    }\n  }]);\n\n  return Pagination;\n}(Component);\n\nPagination.defaultProps = {\n  nbHits: 0,\n  currentPage: 0,\n  nbPages: 0\n};\nexport default Pagination;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction range(_ref) {\n  var _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return start + current * limitStep;\n  });\n}\n\nexport default range;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { range } from '../../lib/utils';\n\nvar Paginator =\n/*#__PURE__*/\nfunction () {\n  function Paginator(params) {\n    _classCallCheck(this, Paginator);\n\n    this.currentPage = params.currentPage;\n    this.total = params.total;\n    this.padding = params.padding;\n  }\n\n  _createClass(Paginator, [{\n    key: \"pages\",\n    value: function pages() {\n      var total = this.total,\n          currentPage = this.currentPage,\n          padding = this.padding;\n      if (total === 0) return [0];\n      var totalDisplayedPages = this.nbPagesDisplayed(padding, total);\n\n      if (totalDisplayedPages === total) {\n        return range({\n          end: total\n        });\n      }\n\n      var paddingLeft = this.calculatePaddingLeft(currentPage, padding, total, totalDisplayedPages);\n      var paddingRight = totalDisplayedPages - paddingLeft;\n      var first = currentPage - paddingLeft;\n      var last = currentPage + paddingRight;\n      return range({\n        start: first,\n        end: last\n      });\n    }\n  }, {\n    key: \"nbPagesDisplayed\",\n    value: function nbPagesDisplayed(padding, total) {\n      return Math.min(2 * padding + 1, total);\n    }\n  }, {\n    key: \"calculatePaddingLeft\",\n    value: function calculatePaddingLeft(current, padding, total, totalDisplayedPages) {\n      if (current <= padding) {\n        return current;\n      }\n\n      if (current >= total - padding) {\n        return totalDisplayedPages - (total - current);\n      }\n\n      return padding;\n    }\n  }, {\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      return this.currentPage === this.total - 1 || this.total === 0;\n    }\n  }, {\n    key: \"isFirstPage\",\n    value: function isFirstPage() {\n      return this.currentPage === 0;\n    }\n  }]);\n\n  return Paginator;\n}();\n\nexport default Paginator;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { checkRendering, createDocumentationMessageGenerator, noop } from '../../lib/utils';\nimport Paginator from './Paginator';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination',\n  connector: true\n});\n/**\n * @typedef {Object} CustomPaginationWidgetOptions\n * @property {number} [totalPages] The total number of pages to browse.\n * @property {number} [padding = 3] The padding of pages to show around the current page\n */\n\n/**\n * @typedef {Object} PaginationRenderingOptions\n * @property {function(page): string} createURL Creates URLs for the next state, the number is the page to generate the URL for.\n * @property {number} currentRefinement The number of the page currently displayed.\n * @property {number} nbHits The number of hits computed for the last query (can be approximated).\n * @property {number} nbPages The number of pages for the result set.\n * @property {number[]} pages The actual pages relevant to the current situation and padding\n * @property {boolean} isFirstPage true if the current page is also the first page\n * @property {boolean} isLastPage true if the current page is also the last page\n * @property {function(page)} refine Sets the current page and trigger a search.\n * @property {Object} widgetParams All original `CustomPaginationWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **Pagination** connector provides the logic to build a widget that will let the user\n * choose the current page of the results.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n *\n * @type {Connector}\n * @param {function(PaginationRenderingOptions, boolean)} renderFn Rendering function for the custom **Pagination** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomPaginationWidgetOptions)} Re-usable widget factory for a custom **Pagination** widget.\n * @example\n * // custom `renderFn` to render the custom Pagination widget\n * function renderFn(PaginationRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     PaginationRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   // remove event listeners before replacing markup\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var pages = PaginationRenderingOptions.pages\n *     .map(function(page) {\n *       return '<li style=\"display: inline-block; margin-right: 10px;\">' +\n *         '<a href=\"' + PaginationRenderingOptions.createURL(page) + '\" data-page=\"' + page + '\">' +\n *         (parseInt(page) + 1) + '</a></li>';\n *     });\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('ul')\n *     .html(pages);\n *\n *   PaginationRenderingOptions.widgetParams.containerNode\n *     .find('a[data-page]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         PaginationRenderingOptions.refine($(this).data('page'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to Pagination logic\n * var customPagination = instantsearch.connectors.connectPagination(renderFn);\n *\n * // mount widget on the page\n * search.addWidgets([\n *   customPagination({\n *     containerNode: $('#custom-pagination-container'),\n *     totalPages: 20,\n *     padding: 4,\n *   })\n * ]);\n */\n\nexport default function connectPagination(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var totalPages = widgetParams.totalPages,\n        _widgetParams$padding = widgetParams.padding,\n        padding = _widgetParams$padding === void 0 ? 3 : _widgetParams$padding;\n    var pager = new Paginator({\n      currentPage: 0,\n      total: 0,\n      padding: padding\n    });\n    return {\n      $$type: 'ais.pagination',\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this.refine = function (page) {\n          helper.setPage(page);\n          helper.search();\n        };\n\n        this.createURL = function (state) {\n          return function (page) {\n            return createURL(state.setPage(page));\n          };\n        };\n\n        renderFn({\n          createURL: this.createURL(helper.state),\n          currentRefinement: helper.state.page || 0,\n          nbHits: 0,\n          nbPages: 0,\n          pages: [],\n          isFirstPage: true,\n          isLastPage: true,\n          refine: this.refine,\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, true);\n      },\n      getMaxPage: function getMaxPage(_ref2) {\n        var nbPages = _ref2.nbPages;\n        return totalPages !== undefined ? Math.min(totalPages, nbPages) : nbPages;\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        var page = state.page || 0;\n        var nbPages = this.getMaxPage(results);\n        pager.currentPage = page;\n        pager.total = nbPages;\n        renderFn({\n          createURL: this.createURL(state),\n          currentRefinement: page,\n          refine: this.refine,\n          nbHits: results.nbHits,\n          nbPages: nbPages,\n          pages: pager.pages(),\n          isFirstPage: pager.isFirstPage(),\n          isLastPage: pager.isLastPage(),\n          widgetParams: widgetParams,\n          instantSearchInstance: instantSearchInstance\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        return state.setQueryParameter('page', undefined);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var page = searchParameters.page || 0;\n\n        if (!page) {\n          return uiState;\n        }\n\n        return _objectSpread({}, uiState, {\n          page: page + 1\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var page = uiState.page ? uiState.page - 1 : 0;\n        return searchParameters.setQueryParameter('page', page);\n      }\n    };\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx h */\nimport { h, render } from 'preact';\nimport cx from 'classnames';\nimport Pagination from '../../components/Pagination/Pagination';\nimport connectPagination from '../../connectors/pagination/connectPagination';\nimport { getContainerNode, createDocumentationMessageGenerator } from '../../lib/utils';\nimport { component } from '../../lib/suit';\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'pagination'\n});\nvar suit = component('Pagination');\nvar defaultTemplates = {\n  previous: '',\n  next: '',\n  first: '',\n  last: ''\n};\n\nvar renderer = function renderer(_ref) {\n  var containerNode = _ref.containerNode,\n      cssClasses = _ref.cssClasses,\n      templates = _ref.templates,\n      totalPages = _ref.totalPages,\n      showFirst = _ref.showFirst,\n      showLast = _ref.showLast,\n      showPrevious = _ref.showPrevious,\n      showNext = _ref.showNext,\n      scrollToNode = _ref.scrollToNode;\n  return function (_ref2, isFirstRendering) {\n    var createURL = _ref2.createURL,\n        currentRefinement = _ref2.currentRefinement,\n        nbHits = _ref2.nbHits,\n        nbPages = _ref2.nbPages,\n        pages = _ref2.pages,\n        isFirstPage = _ref2.isFirstPage,\n        isLastPage = _ref2.isLastPage,\n        refine = _ref2.refine;\n    if (isFirstRendering) return;\n\n    var setCurrentPage = function setCurrentPage(pageNumber) {\n      refine(pageNumber);\n\n      if (scrollToNode !== false) {\n        scrollToNode.scrollIntoView();\n      }\n    };\n\n    render(h(Pagination, {\n      createURL: createURL,\n      cssClasses: cssClasses,\n      currentPage: currentRefinement,\n      templates: templates,\n      nbHits: nbHits,\n      nbPages: nbPages,\n      pages: pages,\n      totalPages: totalPages,\n      isFirstPage: isFirstPage,\n      isLastPage: isLastPage,\n      setCurrentPage: setCurrentPage,\n      showFirst: showFirst,\n      showLast: showLast,\n      showPrevious: showPrevious,\n      showNext: showNext\n    }), containerNode);\n  };\n};\n/**\n * @typedef {Object} PaginationCSSClasses\n * @property  {string|string[]} [root] CSS classes added to the root element of the widget.\n * @property {string|string[]} [noRefinementRoot] CSS class to add to the root element of the widget if there are no refinements.\n * @property  {string|string[]} [list] CSS classes added to the wrapping `<ul>`.\n * @property  {string|string[]} [item] CSS classes added to each `<li>`.\n * @property  {string|string[]} [firstPageItem] CSS classes added to the first `<li>`.\n * @property  {string|string[]} [lastPageItem] CSS classes added to the last `<li>`.\n * @property  {string|string[]} [previousPageItem] CSS classes added to the previous `<li>`.\n * @property  {string|string[]} [nextPageItem] CSS classes added to the next `<li>`.\n * @property  {string|string[]} [pageItem] CSS classes added to page `<li>`.\n * @property  {string|string[]} [selectedItem] CSS classes added to the selected `<li>`.\n * @property  {string|string[]} [disabledItem] CSS classes added to the disabled `<li>`.\n * @property  {string|string[]} [link] CSS classes added to each link.\n */\n\n/**\n * @typedef {Object} PaginationTemplates\n * @property  {string} [previous] Label for the Previous link.\n * @property  {string} [next] Label for the Next link.\n * @property  {string} [first] Label for the First link.\n * @property  {string} [last] Label for the Last link.\n */\n\n/**\n * @typedef {Object} PaginationWidgetOptions\n * @property  {string|HTMLElement} container CSS Selector or HTMLElement to insert the widget.\n * @property  {number} [totalPages] The max number of pages to browse.\n * @property  {number} [padding=3] The number of pages to display on each side of the current page.\n * @property  {string|HTMLElement|boolean} [scrollTo='body'] Where to scroll after a click, set to `false` to disable.\n * @property  {boolean} [showFirst=true] Whether to show the first page control\n * @property  {boolean} [showLast=true] Whether to show the last page control\n * @property  {boolean} [showNext=true] Whether to show the next page control\n * @property  {boolean} [showPrevious=true] \tWhether to show the previous page control\n * @property  {PaginationTemplates} [templates] Text to display in the links.\n * @property  {PaginationCSSClasses} [cssClasses] CSS classes to be added.\n */\n\n/**\n * The pagination widget allow the user to switch between pages of the results.\n *\n * This is an alternative to using the *show more* pattern, that allows the user\n * only to display more items. The *show more* pattern is usually preferred\n * because it is simpler to use, and it is more convenient in a mobile context.\n * See the infinite hits widget, for more information.\n *\n * When using the pagination with Algolia, you should be aware that the engine won't provide you pages\n * beyond the 1000th hits by default. You can find more information on the [Algolia documentation](https://www.algolia.com/doc/guides/searching/pagination/#pagination-limitations).\n *\n * @type {WidgetFactory}\n * @devNovel Pagination\n * @category navigation\n * @param {PaginationWidgetOptions} $0 Options for the Pagination widget.\n * @return {Widget} A new instance of Pagination widget.\n * @example\n * search.addWidgets([\n *   instantsearch.widgets.pagination({\n *     container: '#pagination-container',\n *     totalPages: 20,\n *     // default is to scroll to 'body', here we disable this behavior\n *     scrollTo: false,\n *     showFirst: false,\n *     showLast: false,\n *   })\n * ]);\n */\n\n\nexport default function pagination() {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref3.container,\n      _ref3$templates = _ref3.templates,\n      userTemplates = _ref3$templates === void 0 ? {} : _ref3$templates,\n      _ref3$cssClasses = _ref3.cssClasses,\n      userCssClasses = _ref3$cssClasses === void 0 ? {} : _ref3$cssClasses,\n      totalPages = _ref3.totalPages,\n      padding = _ref3.padding,\n      _ref3$showFirst = _ref3.showFirst,\n      showFirst = _ref3$showFirst === void 0 ? true : _ref3$showFirst,\n      _ref3$showLast = _ref3.showLast,\n      showLast = _ref3$showLast === void 0 ? true : _ref3$showLast,\n      _ref3$showPrevious = _ref3.showPrevious,\n      showPrevious = _ref3$showPrevious === void 0 ? true : _ref3$showPrevious,\n      _ref3$showNext = _ref3.showNext,\n      showNext = _ref3$showNext === void 0 ? true : _ref3$showNext,\n      _ref3$scrollTo = _ref3.scrollTo,\n      userScrollTo = _ref3$scrollTo === void 0 ? 'body' : _ref3$scrollTo;\n\n  if (!container) {\n    throw new Error(withUsage('The `container` option is required.'));\n  }\n\n  var containerNode = getContainerNode(container);\n  var scrollTo = userScrollTo === true ? 'body' : userScrollTo;\n  var scrollToNode = scrollTo !== false ? getContainerNode(scrollTo) : false;\n  var cssClasses = {\n    root: cx(suit(), userCssClasses.root),\n    noRefinementRoot: cx(suit({\n      modifierName: 'noRefinement'\n    }), userCssClasses.noRefinementRoot),\n    list: cx(suit({\n      descendantName: 'list'\n    }), userCssClasses.list),\n    item: cx(suit({\n      descendantName: 'item'\n    }), userCssClasses.item),\n    firstPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'firstPage'\n    }), userCssClasses.firstPageItem),\n    lastPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'lastPage'\n    }), userCssClasses.lastPageItem),\n    previousPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'previousPage'\n    }), userCssClasses.previousPageItem),\n    nextPageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'nextPage'\n    }), userCssClasses.nextPageItem),\n    pageItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'page'\n    }), userCssClasses.pageItem),\n    selectedItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'selected'\n    }), userCssClasses.selectedItem),\n    disabledItem: cx(suit({\n      descendantName: 'item',\n      modifierName: 'disabled'\n    }), userCssClasses.disabledItem),\n    link: cx(suit({\n      descendantName: 'link'\n    }), userCssClasses.link)\n  };\n\n  var templates = _objectSpread({}, defaultTemplates, {}, userTemplates);\n\n  var specializedRenderer = renderer({\n    containerNode: containerNode,\n    cssClasses: cssClasses,\n    templates: templates,\n    showFirst: showFirst,\n    showLast: showLast,\n    showPrevious: showPrevious,\n    showNext: showNext,\n    padding: padding,\n    scrollToNode: scrollToNode\n  });\n  var makeWidget = connectPagination(specializedRenderer, function () {\n    return render(null, containerNode);\n  });\n  return makeWidget({\n    totalPages: totalPages,\n    padding: padding\n  });\n}","import instantsearch from 'instantsearch.js';\nimport {\n  searchBox,\n  refinementList,\n  hits,\n  pagination,\n} from 'instantsearch.js/es/widgets';\n\nvar search = instantsearch({\n  indexName: document.getElementById('algolia-index-name').innerHTML,\n  searchClient: algoliasearch(\n    document.getElementById('algolia-app-id').innerHTML,\n    document.getElementById('algolia-api-key').innerHTML\n  ),\n});\n\nsearch.addWidgets([\n  searchBox({\n    container: '#search-box',\n    placeholder: 'Recherche',\n    autofocus: false,\n    poweredBy: true,\n    reset: true,\n    loadingIndicator: false,\n  }),\n\n  refinementList({\n    container: '#refinement-list',\n    attribute: 'categories',\n  }),\n\n  hits({\n    container: '#hits',\n    templates: {\n      empty: 'Aucun rsultat&nbsp;!',\n      item: document.getElementById('hit-template').innerHTML,\n    },\n  }),\n\n  pagination({\n    container: '#pagination-container',\n    maxPages: 20,\n    scrollTo: false,\n    showFirstLast: false,\n  }),\n]);\nsearch.start();\n"],"sourceRoot":""}